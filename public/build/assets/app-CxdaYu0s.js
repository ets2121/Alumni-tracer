function Jw(n,t){return function(){return n.apply(t,arguments)}}const{toString:pD}=Object.prototype,{getPrototypeOf:Tp}=Object,{iterator:Mu,toStringTag:Xw}=Symbol,Eu=(n=>t=>{const e=pD.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Bn=n=>(n=n.toLowerCase(),t=>Eu(t)===n),Tu=n=>t=>typeof t===n,{isArray:Qs}=Array,Vs=Tu("undefined");function La(n){return n!==null&&!Vs(n)&&n.constructor!==null&&!Vs(n.constructor)&&Je(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Gw=Bn("ArrayBuffer");function gD(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&Gw(n.buffer),t}const mD=Tu("string"),Je=Tu("function"),Yw=Tu("number"),Na=n=>n!==null&&typeof n=="object",yD=n=>n===!0||n===!1,gc=n=>{if(Eu(n)!=="object")return!1;const t=Tp(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Xw in n)&&!(Mu in n)},bD=n=>{if(!Na(n)||La(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},xD=Bn("Date"),wD=Bn("File"),_D=Bn("Blob"),SD=Bn("FileList"),vD=n=>Na(n)&&Je(n.pipe),kD=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||Je(n.append)&&((t=Eu(n))==="formdata"||t==="object"&&Je(n.toString)&&n.toString()==="[object FormData]"))},CD=Bn("URLSearchParams"),[MD,ED,TD,OD]=["ReadableStream","Request","Response","Headers"].map(Bn),AD=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Fa(n,t,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let i,r;if(typeof n!="object"&&(n=[n]),Qs(n))for(i=0,r=n.length;i<r;i++)t.call(null,n[i],i,n);else{if(La(n))return;const s=e?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(i=0;i<o;i++)a=s[i],t.call(null,n[a],a,n)}}function Zw(n,t){if(La(n))return null;t=t.toLowerCase();const e=Object.keys(n);let i=e.length,r;for(;i-- >0;)if(r=e[i],t===r.toLowerCase())return r;return null}const Ir=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Qw=n=>!Vs(n)&&n!==Ir;function vd(){const{caseless:n,skipUndefined:t}=Qw(this)&&this||{},e={},i=(r,s)=>{const o=n&&Zw(e,s)||s;gc(e[o])&&gc(r)?e[o]=vd(e[o],r):gc(r)?e[o]=vd({},r):Qs(r)?e[o]=r.slice():(!t||!Vs(r))&&(e[o]=r)};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Fa(arguments[r],i);return e}const RD=(n,t,e,{allOwnKeys:i}={})=>(Fa(t,(r,s)=>{e&&Je(r)?Object.defineProperty(n,s,{value:Jw(r,e),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(n,s,{value:r,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:i}),n),DD=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),PD=(n,t,e,i)=>{n.prototype=Object.create(t.prototype,i),Object.defineProperty(n.prototype,"constructor",{value:n,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(n,"super",{value:t.prototype}),e&&Object.assign(n.prototype,e)},ID=(n,t,e,i)=>{let r,s,o;const a={};if(t=t||{},n==null)return t;do{for(r=Object.getOwnPropertyNames(n),s=r.length;s-- >0;)o=r[s],(!i||i(o,n,t))&&!a[o]&&(t[o]=n[o],a[o]=!0);n=e!==!1&&Tp(n)}while(n&&(!e||e(n,t))&&n!==Object.prototype);return t},LD=(n,t,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=t.length;const i=n.indexOf(t,e);return i!==-1&&i===e},ND=n=>{if(!n)return null;if(Qs(n))return n;let t=n.length;if(!Yw(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=n[t];return e},FD=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&Tp(Uint8Array)),BD=(n,t)=>{const i=(n&&n[Mu]).call(n);let r;for(;(r=i.next())&&!r.done;){const s=r.value;t.call(n,s[0],s[1])}},zD=(n,t)=>{let e;const i=[];for(;(e=n.exec(t))!==null;)i.push(e);return i},HD=Bn("HTMLFormElement"),$D=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,i,r){return i.toUpperCase()+r}),Eb=(({hasOwnProperty:n})=>(t,e)=>n.call(t,e))(Object.prototype),WD=Bn("RegExp"),t_=(n,t)=>{const e=Object.getOwnPropertyDescriptors(n),i={};Fa(e,(r,s)=>{let o;(o=t(r,s,n))!==!1&&(i[s]=o||r)}),Object.defineProperties(n,i)},VD=n=>{t_(n,(t,e)=>{if(Je(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const i=n[e];if(Je(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},UD=(n,t)=>{const e={},i=r=>{r.forEach(s=>{e[s]=!0})};return Qs(n)?i(n):i(String(n).split(t)),e},jD=()=>{},qD=(n,t)=>n!=null&&Number.isFinite(n=+n)?n:t;function KD(n){return!!(n&&Je(n.append)&&n[Xw]==="FormData"&&n[Mu])}const JD=n=>{const t=new Array(10),e=(i,r)=>{if(Na(i)){if(t.indexOf(i)>=0)return;if(La(i))return i;if(!("toJSON"in i)){t[r]=i;const s=Qs(i)?[]:{};return Fa(i,(o,a)=>{const l=e(o,r+1);!Vs(l)&&(s[a]=l)}),t[r]=void 0,s}}return i};return e(n,0)},XD=Bn("AsyncFunction"),GD=n=>n&&(Na(n)||Je(n))&&Je(n.then)&&Je(n.catch),e_=((n,t)=>n?setImmediate:t?((e,i)=>(Ir.addEventListener("message",({source:r,data:s})=>{r===Ir&&s===e&&i.length&&i.shift()()},!1),r=>{i.push(r),Ir.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Je(Ir.postMessage)),YD=typeof queueMicrotask<"u"?queueMicrotask.bind(Ir):typeof process<"u"&&process.nextTick||e_,ZD=n=>n!=null&&Je(n[Mu]),N={isArray:Qs,isArrayBuffer:Gw,isBuffer:La,isFormData:kD,isArrayBufferView:gD,isString:mD,isNumber:Yw,isBoolean:yD,isObject:Na,isPlainObject:gc,isEmptyObject:bD,isReadableStream:MD,isRequest:ED,isResponse:TD,isHeaders:OD,isUndefined:Vs,isDate:xD,isFile:wD,isBlob:_D,isRegExp:WD,isFunction:Je,isStream:vD,isURLSearchParams:CD,isTypedArray:FD,isFileList:SD,forEach:Fa,merge:vd,extend:RD,trim:AD,stripBOM:DD,inherits:PD,toFlatObject:ID,kindOf:Eu,kindOfTest:Bn,endsWith:LD,toArray:ND,forEachEntry:BD,matchAll:zD,isHTMLForm:HD,hasOwnProperty:Eb,hasOwnProp:Eb,reduceDescriptors:t_,freezeMethods:VD,toObjectSet:UD,toCamelCase:$D,noop:jD,toFiniteNumber:qD,findKey:Zw,global:Ir,isContextDefined:Qw,isSpecCompliantForm:KD,toJSONObject:JD,isAsyncFn:XD,isThenable:GD,setImmediate:e_,asap:YD,isIterable:ZD};let nt=class n_ extends Error{static from(t,e,i,r,s,o){const a=new n_(t.message,e||t.code,i,r,s);return a.cause=t,a.name=t.name,o&&Object.assign(a,o),a}constructor(t,e,i,r,s){super(t),this.name="AxiosError",this.isAxiosError=!0,e&&(this.code=e),i&&(this.config=i),r&&(this.request=r),s&&(this.response=s,this.status=s.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.status}}};nt.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";nt.ERR_BAD_OPTION="ERR_BAD_OPTION";nt.ECONNABORTED="ECONNABORTED";nt.ETIMEDOUT="ETIMEDOUT";nt.ERR_NETWORK="ERR_NETWORK";nt.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";nt.ERR_DEPRECATED="ERR_DEPRECATED";nt.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";nt.ERR_BAD_REQUEST="ERR_BAD_REQUEST";nt.ERR_CANCELED="ERR_CANCELED";nt.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";nt.ERR_INVALID_URL="ERR_INVALID_URL";const QD=null;function kd(n){return N.isPlainObject(n)||N.isArray(n)}function i_(n){return N.endsWith(n,"[]")?n.slice(0,-2):n}function Tb(n,t,e){return n?n.concat(t).map(function(r,s){return r=i_(r),!e&&s?"["+r+"]":r}).join(e?".":""):t}function tP(n){return N.isArray(n)&&!n.some(kd)}const eP=N.toFlatObject(N,{},null,function(t){return/^is[A-Z]/.test(t)});function Ou(n,t,e){if(!N.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,e=N.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,w){return!N.isUndefined(w[x])});const i=e.metaTokens,r=e.visitor||h,s=e.dots,o=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(t);if(!N.isFunction(r))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if(N.isDate(y))return y.toISOString();if(N.isBoolean(y))return y.toString();if(!l&&N.isBlob(y))throw new nt("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(y)||N.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function h(y,x,w){let v=y;if(y&&!w&&typeof y=="object"){if(N.endsWith(x,"{}"))x=i?x:x.slice(0,-2),y=JSON.stringify(y);else if(N.isArray(y)&&tP(y)||(N.isFileList(y)||N.endsWith(x,"[]"))&&(v=N.toArray(y)))return x=i_(x),v.forEach(function(O,P){!(N.isUndefined(O)||O===null)&&t.append(o===!0?Tb([x],P,s):o===null?x:x+"[]",u(O))}),!1}return kd(y)?!0:(t.append(Tb(w,x,s),u(y)),!1)}const d=[],g=Object.assign(eP,{defaultVisitor:h,convertValue:u,isVisitable:kd});function m(y,x){if(!N.isUndefined(y)){if(d.indexOf(y)!==-1)throw Error("Circular reference detected in "+x.join("."));d.push(y),N.forEach(y,function(v,E){(!(N.isUndefined(v)||v===null)&&r.call(t,v,N.isString(E)?E.trim():E,x,g))===!0&&m(v,x?x.concat(E):[E])}),d.pop()}}if(!N.isObject(n))throw new TypeError("data must be an object");return m(n),t}function Ob(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Op(n,t){this._pairs=[],n&&Ou(n,this,t)}const r_=Op.prototype;r_.append=function(t,e){this._pairs.push([t,e])};r_.toString=function(t){const e=t?function(i){return t.call(this,i,Ob)}:Ob;return this._pairs.map(function(r){return e(r[0])+"="+e(r[1])},"").join("&")};function nP(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function s_(n,t,e){if(!t)return n;const i=e&&e.encode||nP,r=N.isFunction(e)?{serialize:e}:e,s=r&&r.serialize;let o;if(s?o=s(t,r):o=N.isURLSearchParams(t)?t.toString():new Op(t,r).toString(i),o){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+o}return n}class Ab{constructor(){this.handlers=[]}use(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){N.forEach(this.handlers,function(i){i!==null&&t(i)})}}const o_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},iP=typeof URLSearchParams<"u"?URLSearchParams:Op,rP=typeof FormData<"u"?FormData:null,sP=typeof Blob<"u"?Blob:null,oP={isBrowser:!0,classes:{URLSearchParams:iP,FormData:rP,Blob:sP},protocols:["http","https","file","blob","url","data"]},Ap=typeof window<"u"&&typeof document<"u",Cd=typeof navigator=="object"&&navigator||void 0,aP=Ap&&(!Cd||["ReactNative","NativeScript","NS"].indexOf(Cd.product)<0),lP=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",cP=Ap&&window.location.href||"http://localhost",uP=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ap,hasStandardBrowserEnv:aP,hasStandardBrowserWebWorkerEnv:lP,navigator:Cd,origin:cP},Symbol.toStringTag,{value:"Module"})),Ee={...uP,...oP};function fP(n,t){return Ou(n,new Ee.classes.URLSearchParams,{visitor:function(e,i,r,s){return Ee.isNode&&N.isBuffer(e)?(this.append(i,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function hP(n){return N.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function dP(n){const t={},e=Object.keys(n);let i;const r=e.length;let s;for(i=0;i<r;i++)s=e[i],t[s]=n[s];return t}function a_(n){function t(e,i,r,s){let o=e[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=e.length;return o=!o&&N.isArray(r)?r.length:o,l?(N.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i,!a):((!r[o]||!N.isObject(r[o]))&&(r[o]=[]),t(e,i,r[o],s)&&N.isArray(r[o])&&(r[o]=dP(r[o])),!a)}if(N.isFormData(n)&&N.isFunction(n.entries)){const e={};return N.forEachEntry(n,(i,r)=>{t(hP(i),r,e,0)}),e}return null}function pP(n,t,e){if(N.isString(n))try{return(t||JSON.parse)(n),N.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(n)}const Ba={transitional:o_,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const i=e.getContentType()||"",r=i.indexOf("application/json")>-1,s=N.isObject(t);if(s&&N.isHTMLForm(t)&&(t=new FormData(t)),N.isFormData(t))return r?JSON.stringify(a_(t)):t;if(N.isArrayBuffer(t)||N.isBuffer(t)||N.isStream(t)||N.isFile(t)||N.isBlob(t)||N.isReadableStream(t))return t;if(N.isArrayBufferView(t))return t.buffer;if(N.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return fP(t,this.formSerializer).toString();if((a=N.isFileList(t))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ou(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||r?(e.setContentType("application/json",!1),pP(t)):t}],transformResponse:[function(t){const e=this.transitional||Ba.transitional,i=e&&e.forcedJSONParsing,r=this.responseType==="json";if(N.isResponse(t)||N.isReadableStream(t))return t;if(t&&N.isString(t)&&(i&&!this.responseType||r)){const o=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?nt.from(a,nt.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ee.classes.FormData,Blob:Ee.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};N.forEach(["delete","get","head","post","put","patch"],n=>{Ba.headers[n]={}});const gP=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mP=n=>{const t={};let e,i,r;return n&&n.split(`
`).forEach(function(o){r=o.indexOf(":"),e=o.substring(0,r).trim().toLowerCase(),i=o.substring(r+1).trim(),!(!e||t[e]&&gP[e])&&(e==="set-cookie"?t[e]?t[e].push(i):t[e]=[i]:t[e]=t[e]?t[e]+", "+i:i)}),t},Rb=Symbol("internals");function Oo(n){return n&&String(n).trim().toLowerCase()}function mc(n){return n===!1||n==null?n:N.isArray(n)?n.map(mc):String(n)}function yP(n){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=e.exec(n);)t[i[1]]=i[2];return t}const bP=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Oh(n,t,e,i,r){if(N.isFunction(i))return i.call(this,t,e);if(r&&(t=e),!!N.isString(t)){if(N.isString(i))return t.indexOf(i)!==-1;if(N.isRegExp(i))return i.test(t)}}function xP(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,i)=>e.toUpperCase()+i)}function wP(n,t){const e=N.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+e,{value:function(r,s,o){return this[i].call(this,t,r,s,o)},configurable:!0})})}let Xe=class{constructor(t){t&&this.set(t)}set(t,e,i){const r=this;function s(a,l,u){const h=Oo(l);if(!h)throw new Error("header name must be a non-empty string");const d=N.findKey(r,h);(!d||r[d]===void 0||u===!0||u===void 0&&r[d]!==!1)&&(r[d||l]=mc(a))}const o=(a,l)=>N.forEach(a,(u,h)=>s(u,h,l));if(N.isPlainObject(t)||t instanceof this.constructor)o(t,e);else if(N.isString(t)&&(t=t.trim())&&!bP(t))o(mP(t),e);else if(N.isObject(t)&&N.isIterable(t)){let a={},l,u;for(const h of t){if(!N.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[u=h[0]]=(l=a[u])?N.isArray(l)?[...l,h[1]]:[l,h[1]]:h[1]}o(a,e)}else t!=null&&s(e,t,i);return this}get(t,e){if(t=Oo(t),t){const i=N.findKey(this,t);if(i){const r=this[i];if(!e)return r;if(e===!0)return yP(r);if(N.isFunction(e))return e.call(this,r,i);if(N.isRegExp(e))return e.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Oo(t),t){const i=N.findKey(this,t);return!!(i&&this[i]!==void 0&&(!e||Oh(this,this[i],i,e)))}return!1}delete(t,e){const i=this;let r=!1;function s(o){if(o=Oo(o),o){const a=N.findKey(i,o);a&&(!e||Oh(i,i[a],a,e))&&(delete i[a],r=!0)}}return N.isArray(t)?t.forEach(s):s(t),r}clear(t){const e=Object.keys(this);let i=e.length,r=!1;for(;i--;){const s=e[i];(!t||Oh(this,this[s],s,t,!0))&&(delete this[s],r=!0)}return r}normalize(t){const e=this,i={};return N.forEach(this,(r,s)=>{const o=N.findKey(i,s);if(o){e[o]=mc(r),delete e[s];return}const a=t?xP(s):String(s).trim();a!==s&&delete e[s],e[a]=mc(r),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return N.forEach(this,(i,r)=>{i!=null&&i!==!1&&(e[r]=t&&N.isArray(i)?i.join(", "):i)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const i=new this(t);return e.forEach(r=>i.set(r)),i}static accessor(t){const i=(this[Rb]=this[Rb]={accessors:{}}).accessors,r=this.prototype;function s(o){const a=Oo(o);i[a]||(wP(r,o),i[a]=!0)}return N.isArray(t)?t.forEach(s):s(t),this}};Xe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);N.reduceDescriptors(Xe.prototype,({value:n},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(i){this[e]=i}}});N.freezeMethods(Xe);function Ah(n,t){const e=this||Ba,i=t||e,r=Xe.from(i.headers);let s=i.data;return N.forEach(n,function(a){s=a.call(e,s,r.normalize(),t?t.status:void 0)}),r.normalize(),s}function l_(n){return!!(n&&n.__CANCEL__)}let za=class extends nt{constructor(t,e,i){super(t??"canceled",nt.ERR_CANCELED,e,i),this.name="CanceledError",this.__CANCEL__=!0}};function c_(n,t,e){const i=e.config.validateStatus;!e.status||!i||i(e.status)?n(e):t(new nt("Request failed with status code "+e.status,[nt.ERR_BAD_REQUEST,nt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function _P(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function SP(n,t){n=n||10;const e=new Array(n),i=new Array(n);let r=0,s=0,o;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),h=i[s];o||(o=u),e[r]=l,i[r]=u;let d=s,g=0;for(;d!==r;)g+=e[d++],d=d%n;if(r=(r+1)%n,r===s&&(s=(s+1)%n),u-o<t)return;const m=h&&u-h;return m?Math.round(g*1e3/m):void 0}}function vP(n,t){let e=0,i=1e3/t,r,s;const o=(u,h=Date.now())=>{e=h,r=null,s&&(clearTimeout(s),s=null),n(...u)};return[(...u)=>{const h=Date.now(),d=h-e;d>=i?o(u,h):(r=u,s||(s=setTimeout(()=>{s=null,o(r)},i-d)))},()=>r&&o(r)]}const Ec=(n,t,e=3)=>{let i=0;const r=SP(50,250);return vP(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-i,u=r(l),h=o<=a;i=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&h?(a-o)/u:void 0,event:s,lengthComputable:a!=null,[t?"download":"upload"]:!0};n(d)},e)},Db=(n,t)=>{const e=n!=null;return[i=>t[0]({lengthComputable:e,total:n,loaded:i}),t[1]]},Pb=n=>(...t)=>N.asap(()=>n(...t)),kP=Ee.hasStandardBrowserEnv?((n,t)=>e=>(e=new URL(e,Ee.origin),n.protocol===e.protocol&&n.host===e.host&&(t||n.port===e.port)))(new URL(Ee.origin),Ee.navigator&&/(msie|trident)/i.test(Ee.navigator.userAgent)):()=>!0,CP=Ee.hasStandardBrowserEnv?{write(n,t,e,i,r,s,o){if(typeof document>"u")return;const a=[`${n}=${encodeURIComponent(t)}`];N.isNumber(e)&&a.push(`expires=${new Date(e).toUTCString()}`),N.isString(i)&&a.push(`path=${i}`),N.isString(r)&&a.push(`domain=${r}`),s===!0&&a.push("secure"),N.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(n){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function MP(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function EP(n,t){return t?n.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):n}function u_(n,t,e){let i=!MP(t);return n&&(i||e==!1)?EP(n,t):t}const Ib=n=>n instanceof Xe?{...n}:n;function Zr(n,t){t=t||{};const e={};function i(u,h,d,g){return N.isPlainObject(u)&&N.isPlainObject(h)?N.merge.call({caseless:g},u,h):N.isPlainObject(h)?N.merge({},h):N.isArray(h)?h.slice():h}function r(u,h,d,g){if(N.isUndefined(h)){if(!N.isUndefined(u))return i(void 0,u,d,g)}else return i(u,h,d,g)}function s(u,h){if(!N.isUndefined(h))return i(void 0,h)}function o(u,h){if(N.isUndefined(h)){if(!N.isUndefined(u))return i(void 0,u)}else return i(void 0,h)}function a(u,h,d){if(d in t)return i(u,h);if(d in n)return i(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,h,d)=>r(Ib(u),Ib(h),d,!0)};return N.forEach(Object.keys({...n,...t}),function(h){const d=l[h]||r,g=d(n[h],t[h],h);N.isUndefined(g)&&d!==a||(e[h]=g)}),e}const f_=n=>{const t=Zr({},n);let{data:e,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:s,headers:o,auth:a}=t;if(t.headers=o=Xe.from(o),t.url=s_(u_(t.baseURL,t.url,t.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),N.isFormData(e)){if(Ee.hasStandardBrowserEnv||Ee.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(N.isFunction(e.getHeaders)){const l=e.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([h,d])=>{u.includes(h.toLowerCase())&&o.set(h,d)})}}if(Ee.hasStandardBrowserEnv&&(i&&N.isFunction(i)&&(i=i(t)),i||i!==!1&&kP(t.url))){const l=r&&s&&CP.read(s);l&&o.set(r,l)}return t},TP=typeof XMLHttpRequest<"u",OP=TP&&function(n){return new Promise(function(e,i){const r=f_(n);let s=r.data;const o=Xe.from(r.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=r,h,d,g,m,y;function x(){m&&m(),y&&y(),r.cancelToken&&r.cancelToken.unsubscribe(h),r.signal&&r.signal.removeEventListener("abort",h)}let w=new XMLHttpRequest;w.open(r.method.toUpperCase(),r.url,!0),w.timeout=r.timeout;function v(){if(!w)return;const O=Xe.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),R={data:!a||a==="text"||a==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:O,config:n,request:w};c_(function(I){e(I),x()},function(I){i(I),x()},R),w=null}"onloadend"in w?w.onloadend=v:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(v)},w.onabort=function(){w&&(i(new nt("Request aborted",nt.ECONNABORTED,n,w)),w=null)},w.onerror=function(P){const R=P&&P.message?P.message:"Network Error",B=new nt(R,nt.ERR_NETWORK,n,w);B.event=P||null,i(B),w=null},w.ontimeout=function(){let P=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const R=r.transitional||o_;r.timeoutErrorMessage&&(P=r.timeoutErrorMessage),i(new nt(P,R.clarifyTimeoutError?nt.ETIMEDOUT:nt.ECONNABORTED,n,w)),w=null},s===void 0&&o.setContentType(null),"setRequestHeader"in w&&N.forEach(o.toJSON(),function(P,R){w.setRequestHeader(R,P)}),N.isUndefined(r.withCredentials)||(w.withCredentials=!!r.withCredentials),a&&a!=="json"&&(w.responseType=r.responseType),u&&([g,y]=Ec(u,!0),w.addEventListener("progress",g)),l&&w.upload&&([d,m]=Ec(l),w.upload.addEventListener("progress",d),w.upload.addEventListener("loadend",m)),(r.cancelToken||r.signal)&&(h=O=>{w&&(i(!O||O.type?new za(null,n,w):O),w.abort(),w=null)},r.cancelToken&&r.cancelToken.subscribe(h),r.signal&&(r.signal.aborted?h():r.signal.addEventListener("abort",h)));const E=_P(r.url);if(E&&Ee.protocols.indexOf(E)===-1){i(new nt("Unsupported protocol "+E+":",nt.ERR_BAD_REQUEST,n));return}w.send(s||null)})},AP=(n,t)=>{const{length:e}=n=n?n.filter(Boolean):[];if(t||e){let i=new AbortController,r;const s=function(u){if(!r){r=!0,a();const h=u instanceof Error?u:this.reason;i.abort(h instanceof nt?h:new za(h instanceof Error?h.message:h))}};let o=t&&setTimeout(()=>{o=null,s(new nt(`timeout of ${t}ms exceeded`,nt.ETIMEDOUT))},t);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),n=null)};n.forEach(u=>u.addEventListener("abort",s));const{signal:l}=i;return l.unsubscribe=()=>N.asap(a),l}},RP=function*(n,t){let e=n.byteLength;if(e<t){yield n;return}let i=0,r;for(;i<e;)r=i+t,yield n.slice(i,r),i=r},DP=async function*(n,t){for await(const e of PP(n))yield*RP(e,t)},PP=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const t=n.getReader();try{for(;;){const{done:e,value:i}=await t.read();if(e)break;yield i}}finally{await t.cancel()}},Lb=(n,t,e,i)=>{const r=DP(n,t);let s=0,o,a=l=>{o||(o=!0,i&&i(l))};return new ReadableStream({async pull(l){try{const{done:u,value:h}=await r.next();if(u){a(),l.close();return}let d=h.byteLength;if(e){let g=s+=d;e(g)}l.enqueue(new Uint8Array(h))}catch(u){throw a(u),u}},cancel(l){return a(l),r.return()}},{highWaterMark:2})},Nb=64*1024,{isFunction:Fl}=N,IP=(({Request:n,Response:t})=>({Request:n,Response:t}))(N.global),{ReadableStream:Fb,TextEncoder:Bb}=N.global,zb=(n,...t)=>{try{return!!n(...t)}catch{return!1}},LP=n=>{n=N.merge.call({skipUndefined:!0},IP,n);const{fetch:t,Request:e,Response:i}=n,r=t?Fl(t):typeof fetch=="function",s=Fl(e),o=Fl(i);if(!r)return!1;const a=r&&Fl(Fb),l=r&&(typeof Bb=="function"?(y=>x=>y.encode(x))(new Bb):async y=>new Uint8Array(await new e(y).arrayBuffer())),u=s&&a&&zb(()=>{let y=!1;const x=new e(Ee.origin,{body:new Fb,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!x}),h=o&&a&&zb(()=>N.isReadableStream(new i("").body)),d={stream:h&&(y=>y.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!d[y]&&(d[y]=(x,w)=>{let v=x&&x[y];if(v)return v.call(x);throw new nt(`Response type '${y}' is not supported`,nt.ERR_NOT_SUPPORT,w)})});const g=async y=>{if(y==null)return 0;if(N.isBlob(y))return y.size;if(N.isSpecCompliantForm(y))return(await new e(Ee.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(N.isArrayBufferView(y)||N.isArrayBuffer(y))return y.byteLength;if(N.isURLSearchParams(y)&&(y=y+""),N.isString(y))return(await l(y)).byteLength},m=async(y,x)=>{const w=N.toFiniteNumber(y.getContentLength());return w??g(x)};return async y=>{let{url:x,method:w,data:v,signal:E,cancelToken:O,timeout:P,onDownloadProgress:R,onUploadProgress:B,responseType:I,headers:z,withCredentials:j="same-origin",fetchOptions:Z}=f_(y),it=t||fetch;I=I?(I+"").toLowerCase():"text";let rt=AP([E,O&&O.toAbortSignal()],P),Ot=null;const At=rt&&rt.unsubscribe&&(()=>{rt.unsubscribe()});let mt;try{if(B&&u&&w!=="get"&&w!=="head"&&(mt=await m(z,v))!==0){let Ht=new e(x,{method:"POST",body:v,duplex:"half"}),De;if(N.isFormData(v)&&(De=Ht.headers.get("content-type"))&&z.setContentType(De),Ht.body){const[Tn,He]=Db(mt,Ec(Pb(B)));v=Lb(Ht.body,Nb,Tn,He)}}N.isString(j)||(j=j?"include":"omit");const ot=s&&"credentials"in e.prototype,yt={...Z,signal:rt,method:w.toUpperCase(),headers:z.normalize().toJSON(),body:v,duplex:"half",credentials:ot?j:void 0};Ot=s&&new e(x,yt);let Et=await(s?it(Ot,Z):it(x,yt));const Gt=h&&(I==="stream"||I==="response");if(h&&(R||Gt&&At)){const Ht={};["status","statusText","headers"].forEach(Pe=>{Ht[Pe]=Et[Pe]});const De=N.toFiniteNumber(Et.headers.get("content-length")),[Tn,He]=R&&Db(De,Ec(Pb(R),!0))||[];Et=new i(Lb(Et.body,Nb,Tn,()=>{He&&He(),At&&At()}),Ht)}I=I||"text";let Qe=await d[N.findKey(d,I)||"text"](Et,y);return!Gt&&At&&At(),await new Promise((Ht,De)=>{c_(Ht,De,{data:Qe,headers:Xe.from(Et.headers),status:Et.status,statusText:Et.statusText,config:y,request:Ot})})}catch(ot){throw At&&At(),ot&&ot.name==="TypeError"&&/Load failed|fetch/i.test(ot.message)?Object.assign(new nt("Network Error",nt.ERR_NETWORK,y,Ot),{cause:ot.cause||ot}):nt.from(ot,ot&&ot.code,y,Ot)}}},NP=new Map,h_=n=>{let t=n&&n.env||{};const{fetch:e,Request:i,Response:r}=t,s=[i,r,e];let o=s.length,a=o,l,u,h=NP;for(;a--;)l=s[a],u=h.get(l),u===void 0&&h.set(l,u=a?new Map:LP(t)),h=u;return u};h_();const Rp={http:QD,xhr:OP,fetch:{get:h_}};N.forEach(Rp,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const Hb=n=>`- ${n}`,FP=n=>N.isFunction(n)||n===null||n===!1;function BP(n,t){n=N.isArray(n)?n:[n];const{length:e}=n;let i,r;const s={};for(let o=0;o<e;o++){i=n[o];let a;if(r=i,!FP(i)&&(r=Rp[(a=String(i)).toLowerCase()],r===void 0))throw new nt(`Unknown adapter '${a}'`);if(r&&(N.isFunction(r)||(r=r.get(t))))break;s[a||"#"+o]=r}if(!r){const o=Object.entries(s).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=e?o.length>1?`since :
`+o.map(Hb).join(`
`):" "+Hb(o[0]):"as no adapter specified";throw new nt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r}const d_={getAdapter:BP,adapters:Rp};function Rh(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new za(null,n)}function $b(n){return Rh(n),n.headers=Xe.from(n.headers),n.data=Ah.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),d_.getAdapter(n.adapter||Ba.adapter,n)(n).then(function(i){return Rh(n),i.data=Ah.call(n,n.transformResponse,i),i.headers=Xe.from(i.headers),i},function(i){return l_(i)||(Rh(n),i&&i.response&&(i.response.data=Ah.call(n,n.transformResponse,i.response),i.response.headers=Xe.from(i.response.headers))),Promise.reject(i)})}const p_="1.13.4",Au={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{Au[n]=function(i){return typeof i===n||"a"+(t<1?"n ":" ")+n}});const Wb={};Au.transitional=function(t,e,i){function r(s,o){return"[Axios v"+p_+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,a)=>{if(t===!1)throw new nt(r(o," has been removed"+(e?" in "+e:"")),nt.ERR_DEPRECATED);return e&&!Wb[o]&&(Wb[o]=!0,console.warn(r(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(s,o,a):!0}};Au.spelling=function(t){return(e,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function zP(n,t,e){if(typeof n!="object")throw new nt("options must be an object",nt.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let r=i.length;for(;r-- >0;){const s=i[r],o=t[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new nt("option "+s+" must be "+l,nt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new nt("Unknown option "+s,nt.ERR_BAD_OPTION)}}const yc={assertOptions:zP,validators:Au},Vn=yc.validators;let Hr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Ab,response:new Ab}}async request(t,e){try{return await this._request(t,e)}catch(i){if(i instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Zr(this.defaults,e);const{transitional:i,paramsSerializer:r,headers:s}=e;i!==void 0&&yc.assertOptions(i,{silentJSONParsing:Vn.transitional(Vn.boolean),forcedJSONParsing:Vn.transitional(Vn.boolean),clarifyTimeoutError:Vn.transitional(Vn.boolean)},!1),r!=null&&(N.isFunction(r)?e.paramsSerializer={serialize:r}:yc.assertOptions(r,{encode:Vn.function,serialize:Vn.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),yc.assertOptions(e,{baseUrl:Vn.spelling("baseURL"),withXsrfToken:Vn.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=s&&N.merge(s.common,s[e.method]);s&&N.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),e.headers=Xe.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(e)===!1||(l=l&&x.synchronous,a.unshift(x.fulfilled,x.rejected))});const u=[];this.interceptors.response.forEach(function(x){u.push(x.fulfilled,x.rejected)});let h,d=0,g;if(!l){const y=[$b.bind(this),void 0];for(y.unshift(...a),y.push(...u),g=y.length,h=Promise.resolve(e);d<g;)h=h.then(y[d++],y[d++]);return h}g=a.length;let m=e;for(;d<g;){const y=a[d++],x=a[d++];try{m=y(m)}catch(w){x.call(this,w);break}}try{h=$b.call(this,m)}catch(y){return Promise.reject(y)}for(d=0,g=u.length;d<g;)h=h.then(u[d++],u[d++]);return h}getUri(t){t=Zr(this.defaults,t);const e=u_(t.baseURL,t.url,t.allowAbsoluteUrls);return s_(e,t.params,t.paramsSerializer)}};N.forEach(["delete","get","head","options"],function(t){Hr.prototype[t]=function(e,i){return this.request(Zr(i||{},{method:t,url:e,data:(i||{}).data}))}});N.forEach(["post","put","patch"],function(t){function e(i){return function(s,o,a){return this.request(Zr(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Hr.prototype[t]=e(),Hr.prototype[t+"Form"]=e(!0)});let HP=class g_{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(s){e=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(a=>{i.subscribe(a),s=a}).then(r);return o.cancel=function(){i.unsubscribe(s)},o},t(function(s,o,a){i.reason||(i.reason=new za(s,o,a),e(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=i=>{t.abort(i)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new g_(function(r){t=r}),cancel:t}}};function $P(n){return function(e){return n.apply(null,e)}}function WP(n){return N.isObject(n)&&n.isAxiosError===!0}const Md={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Md).forEach(([n,t])=>{Md[t]=n});function m_(n){const t=new Hr(n),e=Jw(Hr.prototype.request,t);return N.extend(e,Hr.prototype,t,{allOwnKeys:!0}),N.extend(e,t,null,{allOwnKeys:!0}),e.create=function(r){return m_(Zr(n,r))},e}const te=m_(Ba);te.Axios=Hr;te.CanceledError=za;te.CancelToken=HP;te.isCancel=l_;te.VERSION=p_;te.toFormData=Ou;te.AxiosError=nt;te.Cancel=te.CanceledError;te.all=function(t){return Promise.all(t)};te.spread=$P;te.isAxiosError=WP;te.mergeConfig=Zr;te.AxiosHeaders=Xe;te.formToJSON=n=>a_(N.isHTMLForm(n)?new FormData(n):n);te.getAdapter=d_.getAdapter;te.HttpStatusCode=Md;te.default=te;const{Axios:LU,AxiosError:NU,CanceledError:FU,isCancel:BU,CancelToken:zU,VERSION:HU,all:$U,Cancel:WU,isAxiosError:VU,spread:UU,toFormData:jU,AxiosHeaders:qU,HttpStatusCode:KU,formToJSON:JU,getAdapter:XU,mergeConfig:GU}=te;window.axios=te;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var Ed=!1,Td=!1,$r=[],Od=-1;function VP(n){UP(n)}function UP(n){$r.includes(n)||$r.push(n),qP()}function jP(n){let t=$r.indexOf(n);t!==-1&&t>Od&&$r.splice(t,1)}function qP(){!Td&&!Ed&&(Ed=!0,queueMicrotask(KP))}function KP(){Ed=!1,Td=!0;for(let n=0;n<$r.length;n++)$r[n](),Od=n;$r.length=0,Od=-1,Td=!1}var to,fs,eo,y_,Ad=!0;function JP(n){Ad=!1,n(),Ad=!0}function XP(n){to=n.reactive,eo=n.release,fs=t=>n.effect(t,{scheduler:e=>{Ad?VP(e):e()}}),y_=n.raw}function Vb(n){fs=n}function GP(n){let t=()=>{};return[i=>{let r=fs(i);return n._x_effects||(n._x_effects=new Set,n._x_runEffects=()=>{n._x_effects.forEach(s=>s())}),n._x_effects.add(r),t=()=>{r!==void 0&&(n._x_effects.delete(r),eo(r))},r},()=>{t()}]}function b_(n,t){let e=!0,i,r=fs(()=>{let s=n();JSON.stringify(s),e?i=s:queueMicrotask(()=>{t(s,i),i=s}),e=!1});return()=>eo(r)}var x_=[],w_=[],__=[];function YP(n){__.push(n)}function Dp(n,t){typeof t=="function"?(n._x_cleanups||(n._x_cleanups=[]),n._x_cleanups.push(t)):(t=n,w_.push(t))}function S_(n){x_.push(n)}function v_(n,t,e){n._x_attributeCleanups||(n._x_attributeCleanups={}),n._x_attributeCleanups[t]||(n._x_attributeCleanups[t]=[]),n._x_attributeCleanups[t].push(e)}function k_(n,t){n._x_attributeCleanups&&Object.entries(n._x_attributeCleanups).forEach(([e,i])=>{(t===void 0||t.includes(e))&&(i.forEach(r=>r()),delete n._x_attributeCleanups[e])})}function ZP(n){for(n._x_effects?.forEach(jP);n._x_cleanups?.length;)n._x_cleanups.pop()()}var Pp=new MutationObserver(Fp),Ip=!1;function Lp(){Pp.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),Ip=!0}function C_(){QP(),Pp.disconnect(),Ip=!1}var Ao=[];function QP(){let n=Pp.takeRecords();Ao.push(()=>n.length>0&&Fp(n));let t=Ao.length;queueMicrotask(()=>{if(Ao.length===t)for(;Ao.length>0;)Ao.shift()()})}function jt(n){if(!Ip)return n();C_();let t=n();return Lp(),t}var Np=!1,Tc=[];function tI(){Np=!0}function eI(){Np=!1,Fp(Tc),Tc=[]}function Fp(n){if(Np){Tc=Tc.concat(n);return}let t=[],e=new Set,i=new Map,r=new Map;for(let s=0;s<n.length;s++)if(!n[s].target._x_ignoreMutationObserver&&(n[s].type==="childList"&&(n[s].removedNodes.forEach(o=>{o.nodeType===1&&o._x_marker&&e.add(o)}),n[s].addedNodes.forEach(o=>{if(o.nodeType===1){if(e.has(o)){e.delete(o);return}o._x_marker||t.push(o)}})),n[s].type==="attributes")){let o=n[s].target,a=n[s].attributeName,l=n[s].oldValue,u=()=>{i.has(o)||i.set(o,[]),i.get(o).push({name:a,value:o.getAttribute(a)})},h=()=>{r.has(o)||r.set(o,[]),r.get(o).push(a)};o.hasAttribute(a)&&l===null?u():o.hasAttribute(a)?(h(),u()):h()}r.forEach((s,o)=>{k_(o,s)}),i.forEach((s,o)=>{x_.forEach(a=>a(o,s))});for(let s of e)t.some(o=>o.contains(s))||w_.forEach(o=>o(s));for(let s of t)s.isConnected&&__.forEach(o=>o(s));t=null,e=null,i=null,r=null}function M_(n){return ts(Qr(n))}function Ha(n,t,e){return n._x_dataStack=[t,...Qr(e||n)],()=>{n._x_dataStack=n._x_dataStack.filter(i=>i!==t)}}function Qr(n){return n._x_dataStack?n._x_dataStack:typeof ShadowRoot=="function"&&n instanceof ShadowRoot?Qr(n.host):n.parentNode?Qr(n.parentNode):[]}function ts(n){return new Proxy({objects:n},nI)}var nI={ownKeys({objects:n}){return Array.from(new Set(n.flatMap(t=>Object.keys(t))))},has({objects:n},t){return t==Symbol.unscopables?!1:n.some(e=>Object.prototype.hasOwnProperty.call(e,t)||Reflect.has(e,t))},get({objects:n},t,e){return t=="toJSON"?iI:Reflect.get(n.find(i=>Reflect.has(i,t))||{},t,e)},set({objects:n},t,e,i){const r=n.find(o=>Object.prototype.hasOwnProperty.call(o,t))||n[n.length-1],s=Object.getOwnPropertyDescriptor(r,t);return s?.set&&s?.get?s.set.call(i,e)||!0:Reflect.set(r,t,e)}};function iI(){return Reflect.ownKeys(this).reduce((t,e)=>(t[e]=Reflect.get(this,e),t),{})}function Bp(n){let t=i=>typeof i=="object"&&!Array.isArray(i)&&i!==null,e=(i,r="")=>{Object.entries(Object.getOwnPropertyDescriptors(i)).forEach(([s,{value:o,enumerable:a}])=>{if(a===!1||o===void 0||typeof o=="object"&&o!==null&&o.__v_skip)return;let l=r===""?s:`${r}.${s}`;typeof o=="object"&&o!==null&&o._x_interceptor?i[s]=o.initialize(n,l,s):t(o)&&o!==i&&!(o instanceof Element)&&e(o,l)})};return e(n)}function E_(n,t=()=>{}){let e={initialValue:void 0,_x_interceptor:!0,initialize(i,r,s){return n(this.initialValue,()=>rI(i,r),o=>Rd(i,r,o),r,s)}};return t(e),i=>{if(typeof i=="object"&&i!==null&&i._x_interceptor){let r=e.initialize.bind(e);e.initialize=(s,o,a)=>{let l=i.initialize(s,o,a);return e.initialValue=l,r(s,o,a)}}else e.initialValue=i;return e}}function rI(n,t){return t.split(".").reduce((e,i)=>e[i],n)}function Rd(n,t,e){if(typeof t=="string"&&(t=t.split(".")),t.length===1)n[t[0]]=e;else{if(t.length===0)throw error;return n[t[0]]||(n[t[0]]={}),Rd(n[t[0]],t.slice(1),e)}}var T_={};function zn(n,t){T_[n]=t}function da(n,t){let e=sI(t);return Object.entries(T_).forEach(([i,r])=>{Object.defineProperty(n,`$${i}`,{get(){return r(t,e)},enumerable:!1})}),n}function sI(n){let[t,e]=N_(n),i={interceptor:E_,...t};return Dp(n,e),i}function oI(n,t,e,...i){try{return e(...i)}catch(r){pa(r,n,t)}}function pa(...n){return O_(...n)}var O_=lI;function aI(n){O_=n}function lI(n,t,e=void 0){n=Object.assign(n??{message:"No error message given."},{el:t,expression:e}),console.warn(`Alpine Expression Error: ${n.message}

${e?'Expression: "'+e+`"

`:""}`,t),setTimeout(()=>{throw n},0)}var zs=!0;function A_(n){let t=zs;zs=!1;let e=n();return zs=t,e}function Wr(n,t,e={}){let i;return Fe(n,t)(r=>i=r,e),i}function Fe(...n){return R_(...n)}var R_=P_;function cI(n){R_=n}var D_;function uI(n){D_=n}function P_(n,t){let e={};da(e,n);let i=[e,...Qr(n)],r=typeof t=="function"?fI(i,t):dI(i,t,n);return oI.bind(null,n,t,r)}function fI(n,t){return(e=()=>{},{scope:i={},params:r=[],context:s}={})=>{if(!zs){ga(e,t,ts([i,...n]),r);return}let o=t.apply(ts([i,...n]),r);ga(e,o)}}var Dh={};function hI(n,t){if(Dh[n])return Dh[n];let e=Object.getPrototypeOf(async function(){}).constructor,i=/^[\n\s]*if.*\(.*\)/.test(n.trim())||/^(let|const)\s/.test(n.trim())?`(async()=>{ ${n} })()`:n,s=(()=>{try{let o=new e(["__self","scope"],`with (scope) { __self.result = ${i} }; __self.finished = true; return __self.result;`);return Object.defineProperty(o,"name",{value:`[Alpine] ${n}`}),o}catch(o){return pa(o,t,n),Promise.resolve()}})();return Dh[n]=s,s}function dI(n,t,e){let i=hI(t,e);return(r=()=>{},{scope:s={},params:o=[],context:a}={})=>{i.result=void 0,i.finished=!1;let l=ts([s,...n]);if(typeof i=="function"){let u=i.call(a,i,l).catch(h=>pa(h,e,t));i.finished?(ga(r,i.result,l,o,e),i.result=void 0):u.then(h=>{ga(r,h,l,o,e)}).catch(h=>pa(h,e,t)).finally(()=>i.result=void 0)}}}function ga(n,t,e,i,r){if(zs&&typeof t=="function"){let s=t.apply(e,i);s instanceof Promise?s.then(o=>ga(n,o,e,i)).catch(o=>pa(o,r,t)):n(s)}else typeof t=="object"&&t instanceof Promise?t.then(s=>n(s)):n(t)}function pI(...n){return D_(...n)}function gI(n,t,e={}){let i={};da(i,n);let r=[i,...Qr(n)],s=ts([e.scope??{},...r]),o=e.params??[];if(t.includes("await")){let a=Object.getPrototypeOf(async function(){}).constructor,l=/^[\n\s]*if.*\(.*\)/.test(t.trim())||/^(let|const)\s/.test(t.trim())?`(async()=>{ ${t} })()`:t;return new a(["scope"],`with (scope) { let __result = ${l}; return __result }`).call(e.context,s)}else{let a=/^[\n\s]*if.*\(.*\)/.test(t.trim())||/^(let|const)\s/.test(t.trim())?`(()=>{ ${t} })()`:t,u=new Function(["scope"],`with (scope) { let __result = ${a}; return __result }`).call(e.context,s);return typeof u=="function"&&zs?u.apply(s,o):u}}var zp="x-";function no(n=""){return zp+n}function mI(n){zp=n}var Oc={};function ie(n,t){return Oc[n]=t,{before(e){if(!Oc[e]){console.warn(String.raw`Cannot find directive \`${e}\`. \`${n}\` will use the default order of execution`);return}const i=Lr.indexOf(e);Lr.splice(i>=0?i:Lr.indexOf("DEFAULT"),0,n)}}}function yI(n){return Object.keys(Oc).includes(n)}function Hp(n,t,e){if(t=Array.from(t),n._x_virtualDirectives){let s=Object.entries(n._x_virtualDirectives).map(([a,l])=>({name:a,value:l})),o=I_(s);s=s.map(a=>o.find(l=>l.name===a.name)?{name:`x-bind:${a.name}`,value:`"${a.value}"`}:a),t=t.concat(s)}let i={};return t.map(z_((s,o)=>i[s]=o)).filter($_).map(wI(i,e)).sort(_I).map(s=>xI(n,s))}function I_(n){return Array.from(n).map(z_()).filter(t=>!$_(t))}var Dd=!1,Ho=new Map,L_=Symbol();function bI(n){Dd=!0;let t=Symbol();L_=t,Ho.set(t,[]);let e=()=>{for(;Ho.get(t).length;)Ho.get(t).shift()();Ho.delete(t)},i=()=>{Dd=!1,e()};n(e),i()}function N_(n){let t=[],e=a=>t.push(a),[i,r]=GP(n);return t.push(r),[{Alpine:ro,effect:i,cleanup:e,evaluateLater:Fe.bind(Fe,n),evaluate:Wr.bind(Wr,n)},()=>t.forEach(a=>a())]}function xI(n,t){let e=()=>{},i=Oc[t.type]||e,[r,s]=N_(n);v_(n,t.original,s);let o=()=>{n._x_ignore||n._x_ignoreSelf||(i.inline&&i.inline(n,t,r),i=i.bind(i,n,t,r),Dd?Ho.get(L_).push(i):i())};return o.runCleanups=s,o}var F_=(n,t)=>({name:e,value:i})=>(e.startsWith(n)&&(e=e.replace(n,t)),{name:e,value:i}),B_=n=>n;function z_(n=()=>{}){return({name:t,value:e})=>{let{name:i,value:r}=H_.reduce((s,o)=>o(s),{name:t,value:e});return i!==t&&n(i,t),{name:i,value:r}}}var H_=[];function $p(n){H_.push(n)}function $_({name:n}){return W_().test(n)}var W_=()=>new RegExp(`^${zp}([^:^.]+)\\b`);function wI(n,t){return({name:e,value:i})=>{e===i&&(i="");let r=e.match(W_()),s=e.match(/:([a-zA-Z0-9\-_:]+)/),o=e.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],a=t||n[e]||e;return{type:r?r[1]:null,value:s?s[1]:null,modifiers:o.map(l=>l.replace(".","")),expression:i,original:a}}}var Pd="DEFAULT",Lr=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Pd,"teleport"];function _I(n,t){let e=Lr.indexOf(n.type)===-1?Pd:n.type,i=Lr.indexOf(t.type)===-1?Pd:t.type;return Lr.indexOf(e)-Lr.indexOf(i)}function Go(n,t,e={}){n.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!0,composed:!0,cancelable:!0}))}function es(n,t){if(typeof ShadowRoot=="function"&&n instanceof ShadowRoot){Array.from(n.children).forEach(r=>es(r,t));return}let e=!1;if(t(n,()=>e=!0),e)return;let i=n.firstElementChild;for(;i;)es(i,t),i=i.nextElementSibling}function Cn(n,...t){console.warn(`Alpine Warning: ${n}`,...t)}var Ub=!1;function SI(){Ub&&Cn("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),Ub=!0,document.body||Cn("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),Go(document,"alpine:init"),Go(document,"alpine:initializing"),Lp(),YP(t=>Mi(t,es)),Dp(t=>io(t)),S_((t,e)=>{Hp(t,e).forEach(i=>i())});let n=t=>!Ru(t.parentElement,!0);Array.from(document.querySelectorAll(j_().join(","))).filter(n).forEach(t=>{Mi(t)}),Go(document,"alpine:initialized"),setTimeout(()=>{MI()})}var Wp=[],V_=[];function U_(){return Wp.map(n=>n())}function j_(){return Wp.concat(V_).map(n=>n())}function q_(n){Wp.push(n)}function K_(n){V_.push(n)}function Ru(n,t=!1){return ns(n,e=>{if((t?j_():U_()).some(r=>e.matches(r)))return!0})}function ns(n,t){if(n){if(t(n))return n;if(n._x_teleportBack&&(n=n._x_teleportBack),n.parentNode instanceof ShadowRoot)return ns(n.parentNode.host,t);if(n.parentElement)return ns(n.parentElement,t)}}function vI(n){return U_().some(t=>n.matches(t))}var J_=[];function kI(n){J_.push(n)}var CI=1;function Mi(n,t=es,e=()=>{}){ns(n,i=>i._x_ignore)||bI(()=>{t(n,(i,r)=>{i._x_marker||(e(i,r),J_.forEach(s=>s(i,r)),Hp(i,i.attributes).forEach(s=>s()),i._x_ignore||(i._x_marker=CI++),i._x_ignore&&r())})})}function io(n,t=es){t(n,e=>{ZP(e),k_(e),delete e._x_marker})}function MI(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([t,e,i])=>{yI(e)||i.some(r=>{if(document.querySelector(r))return Cn(`found "${r}", but missing ${t} plugin`),!0})})}var Id=[],Vp=!1;function Up(n=()=>{}){return queueMicrotask(()=>{Vp||setTimeout(()=>{Ld()})}),new Promise(t=>{Id.push(()=>{n(),t()})})}function Ld(){for(Vp=!1;Id.length;)Id.shift()()}function EI(){Vp=!0}function jp(n,t){return Array.isArray(t)?jb(n,t.join(" ")):typeof t=="object"&&t!==null?TI(n,t):typeof t=="function"?jp(n,t()):jb(n,t)}function jb(n,t){let e=r=>r.split(" ").filter(s=>!n.classList.contains(s)).filter(Boolean),i=r=>(n.classList.add(...r),()=>{n.classList.remove(...r)});return t=t===!0?t="":t||"",i(e(t))}function TI(n,t){let e=a=>a.split(" ").filter(Boolean),i=Object.entries(t).flatMap(([a,l])=>l?e(a):!1).filter(Boolean),r=Object.entries(t).flatMap(([a,l])=>l?!1:e(a)).filter(Boolean),s=[],o=[];return r.forEach(a=>{n.classList.contains(a)&&(n.classList.remove(a),o.push(a))}),i.forEach(a=>{n.classList.contains(a)||(n.classList.add(a),s.push(a))}),()=>{o.forEach(a=>n.classList.add(a)),s.forEach(a=>n.classList.remove(a))}}function Du(n,t){return typeof t=="object"&&t!==null?OI(n,t):AI(n,t)}function OI(n,t){let e={};return Object.entries(t).forEach(([i,r])=>{e[i]=n.style[i],i.startsWith("--")||(i=RI(i)),n.style.setProperty(i,r)}),setTimeout(()=>{n.style.length===0&&n.removeAttribute("style")}),()=>{Du(n,e)}}function AI(n,t){let e=n.getAttribute("style",t);return n.setAttribute("style",t),()=>{n.setAttribute("style",e||"")}}function RI(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Nd(n,t=()=>{}){let e=!1;return function(){e?t.apply(this,arguments):(e=!0,n.apply(this,arguments))}}ie("transition",(n,{value:t,modifiers:e,expression:i},{evaluate:r})=>{typeof i=="function"&&(i=r(i)),i!==!1&&(!i||typeof i=="boolean"?PI(n,e,t):DI(n,i,t))});function DI(n,t,e){X_(n,jp,""),{enter:r=>{n._x_transition.enter.during=r},"enter-start":r=>{n._x_transition.enter.start=r},"enter-end":r=>{n._x_transition.enter.end=r},leave:r=>{n._x_transition.leave.during=r},"leave-start":r=>{n._x_transition.leave.start=r},"leave-end":r=>{n._x_transition.leave.end=r}}[e](t)}function PI(n,t,e){X_(n,Du);let i=!t.includes("in")&&!t.includes("out")&&!e,r=i||t.includes("in")||["enter"].includes(e),s=i||t.includes("out")||["leave"].includes(e);t.includes("in")&&!i&&(t=t.filter((v,E)=>E<t.indexOf("out"))),t.includes("out")&&!i&&(t=t.filter((v,E)=>E>t.indexOf("out")));let o=!t.includes("opacity")&&!t.includes("scale"),a=o||t.includes("opacity"),l=o||t.includes("scale"),u=a?0:1,h=l?Ro(t,"scale",95)/100:1,d=Ro(t,"delay",0)/1e3,g=Ro(t,"origin","center"),m="opacity, transform",y=Ro(t,"duration",150)/1e3,x=Ro(t,"duration",75)/1e3,w="cubic-bezier(0.4, 0.0, 0.2, 1)";r&&(n._x_transition.enter.during={transformOrigin:g,transitionDelay:`${d}s`,transitionProperty:m,transitionDuration:`${y}s`,transitionTimingFunction:w},n._x_transition.enter.start={opacity:u,transform:`scale(${h})`},n._x_transition.enter.end={opacity:1,transform:"scale(1)"}),s&&(n._x_transition.leave.during={transformOrigin:g,transitionDelay:`${d}s`,transitionProperty:m,transitionDuration:`${x}s`,transitionTimingFunction:w},n._x_transition.leave.start={opacity:1,transform:"scale(1)"},n._x_transition.leave.end={opacity:u,transform:`scale(${h})`})}function X_(n,t,e={}){n._x_transition||(n._x_transition={enter:{during:e,start:e,end:e},leave:{during:e,start:e,end:e},in(i=()=>{},r=()=>{}){Fd(n,t,{during:this.enter.during,start:this.enter.start,end:this.enter.end},i,r)},out(i=()=>{},r=()=>{}){Fd(n,t,{during:this.leave.during,start:this.leave.start,end:this.leave.end},i,r)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(n,t,e,i){const r=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let s=()=>r(e);if(t){n._x_transition&&(n._x_transition.enter||n._x_transition.leave)?n._x_transition.enter&&(Object.entries(n._x_transition.enter.during).length||Object.entries(n._x_transition.enter.start).length||Object.entries(n._x_transition.enter.end).length)?n._x_transition.in(e):s():n._x_transition?n._x_transition.in(e):s();return}n._x_hidePromise=n._x_transition?new Promise((o,a)=>{n._x_transition.out(()=>{},()=>o(i)),n._x_transitioning&&n._x_transitioning.beforeCancel(()=>a({isFromCancelledTransition:!0}))}):Promise.resolve(i),queueMicrotask(()=>{let o=G_(n);o?(o._x_hideChildren||(o._x_hideChildren=[]),o._x_hideChildren.push(n)):r(()=>{let a=l=>{let u=Promise.all([l._x_hidePromise,...(l._x_hideChildren||[]).map(a)]).then(([h])=>h?.());return delete l._x_hidePromise,delete l._x_hideChildren,u};a(n).catch(l=>{if(!l.isFromCancelledTransition)throw l})})})};function G_(n){let t=n.parentNode;if(t)return t._x_hidePromise?t:G_(t)}function Fd(n,t,{during:e,start:i,end:r}={},s=()=>{},o=()=>{}){if(n._x_transitioning&&n._x_transitioning.cancel(),Object.keys(e).length===0&&Object.keys(i).length===0&&Object.keys(r).length===0){s(),o();return}let a,l,u;II(n,{start(){a=t(n,i)},during(){l=t(n,e)},before:s,end(){a(),u=t(n,r)},after:o,cleanup(){l(),u()}})}function II(n,t){let e,i,r,s=Nd(()=>{jt(()=>{e=!0,i||t.before(),r||(t.end(),Ld()),t.after(),n.isConnected&&t.cleanup(),delete n._x_transitioning})});n._x_transitioning={beforeCancels:[],beforeCancel(o){this.beforeCancels.push(o)},cancel:Nd(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();s()}),finish:s},jt(()=>{t.start(),t.during()}),EI(),requestAnimationFrame(()=>{if(e)return;let o=Number(getComputedStyle(n).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,a=Number(getComputedStyle(n).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;o===0&&(o=Number(getComputedStyle(n).animationDuration.replace("s",""))*1e3),jt(()=>{t.before()}),i=!0,requestAnimationFrame(()=>{e||(jt(()=>{t.end()}),Ld(),setTimeout(n._x_transitioning.finish,o+a),r=!0)})})}function Ro(n,t,e){if(n.indexOf(t)===-1)return e;const i=n[n.indexOf(t)+1];if(!i||t==="scale"&&isNaN(i))return e;if(t==="duration"||t==="delay"){let r=i.match(/([0-9]+)ms/);if(r)return r[1]}return t==="origin"&&["top","right","left","center","bottom"].includes(n[n.indexOf(t)+2])?[i,n[n.indexOf(t)+2]].join(" "):i}var rr=!1;function cr(n,t=()=>{}){return(...e)=>rr?t(...e):n(...e)}function LI(n){return(...t)=>rr&&n(...t)}var Y_=[];function Pu(n){Y_.push(n)}function NI(n,t){Y_.forEach(e=>e(n,t)),rr=!0,Z_(()=>{Mi(t,(e,i)=>{i(e,()=>{})})}),rr=!1}var Bd=!1;function FI(n,t){t._x_dataStack||(t._x_dataStack=n._x_dataStack),rr=!0,Bd=!0,Z_(()=>{BI(t)}),rr=!1,Bd=!1}function BI(n){let t=!1;Mi(n,(i,r)=>{es(i,(s,o)=>{if(t&&vI(s))return o();t=!0,r(s,o)})})}function Z_(n){let t=fs;Vb((e,i)=>{let r=t(e);return eo(r),()=>{}}),n(),Vb(t)}function Q_(n,t,e,i=[]){switch(n._x_bindings||(n._x_bindings=to({})),n._x_bindings[t]=e,t=i.includes("camel")?qI(t):t,t){case"value":zI(n,e);break;case"style":$I(n,e);break;case"class":HI(n,e);break;case"selected":case"checked":WI(n,t,e);break;default:t1(n,t,e);break}}function zI(n,t){if(i1(n))n.attributes.value===void 0&&(n.value=t),window.fromModel&&(typeof t=="boolean"?n.checked=bc(n.value)===t:n.checked=qb(n.value,t));else if(qp(n))Number.isInteger(t)?n.value=t:!Array.isArray(t)&&typeof t!="boolean"&&![null,void 0].includes(t)?n.value=String(t):Array.isArray(t)?n.checked=t.some(e=>qb(e,n.value)):n.checked=!!t;else if(n.tagName==="SELECT")jI(n,t);else{if(n.value===t)return;n.value=t===void 0?"":t}}function HI(n,t){n._x_undoAddedClasses&&n._x_undoAddedClasses(),n._x_undoAddedClasses=jp(n,t)}function $I(n,t){n._x_undoAddedStyles&&n._x_undoAddedStyles(),n._x_undoAddedStyles=Du(n,t)}function WI(n,t,e){t1(n,t,e),UI(n,t,e)}function t1(n,t,e){[null,void 0,!1].includes(e)&&JI(t)?n.removeAttribute(t):(e1(t)&&(e=t),VI(n,t,e))}function VI(n,t,e){n.getAttribute(t)!=e&&n.setAttribute(t,e)}function UI(n,t,e){n[t]!==e&&(n[t]=e)}function jI(n,t){const e=[].concat(t).map(i=>i+"");Array.from(n.options).forEach(i=>{i.selected=e.includes(i.value)})}function qI(n){return n.toLowerCase().replace(/-(\w)/g,(t,e)=>e.toUpperCase())}function qb(n,t){return n==t}function bc(n){return[1,"1","true","on","yes",!0].includes(n)?!0:[0,"0","false","off","no",!1].includes(n)?!1:n?!!n:null}var KI=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function e1(n){return KI.has(n)}function JI(n){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(n)}function XI(n,t,e){return n._x_bindings&&n._x_bindings[t]!==void 0?n._x_bindings[t]:n1(n,t,e)}function GI(n,t,e,i=!0){if(n._x_bindings&&n._x_bindings[t]!==void 0)return n._x_bindings[t];if(n._x_inlineBindings&&n._x_inlineBindings[t]!==void 0){let r=n._x_inlineBindings[t];return r.extract=i,A_(()=>Wr(n,r.expression))}return n1(n,t,e)}function n1(n,t,e){let i=n.getAttribute(t);return i===null?typeof e=="function"?e():e:i===""?!0:e1(t)?!![t,"true"].includes(i):i}function qp(n){return n.type==="checkbox"||n.localName==="ui-checkbox"||n.localName==="ui-switch"}function i1(n){return n.type==="radio"||n.localName==="ui-radio"}function r1(n,t){let e;return function(){const i=this,r=arguments,s=function(){e=null,n.apply(i,r)};clearTimeout(e),e=setTimeout(s,t)}}function s1(n,t){let e;return function(){let i=this,r=arguments;e||(n.apply(i,r),e=!0,setTimeout(()=>e=!1,t))}}function o1({get:n,set:t},{get:e,set:i}){let r=!0,s,o=fs(()=>{let a=n(),l=e();if(r)i(Ph(a)),r=!1;else{let u=JSON.stringify(a),h=JSON.stringify(l);u!==s?i(Ph(a)):u!==h&&t(Ph(l))}s=JSON.stringify(n()),JSON.stringify(e())});return()=>{eo(o)}}function Ph(n){return typeof n=="object"?JSON.parse(JSON.stringify(n)):n}function YI(n){(Array.isArray(n)?n:[n]).forEach(e=>e(ro))}var Or={},Kb=!1;function ZI(n,t){if(Kb||(Or=to(Or),Kb=!0),t===void 0)return Or[n];Or[n]=t,Bp(Or[n]),typeof t=="object"&&t!==null&&t.hasOwnProperty("init")&&typeof t.init=="function"&&Or[n].init()}function QI(){return Or}var a1={};function tL(n,t){let e=typeof t!="function"?()=>t:t;return n instanceof Element?l1(n,e()):(a1[n]=e,()=>{})}function eL(n){return Object.entries(a1).forEach(([t,e])=>{Object.defineProperty(n,t,{get(){return(...i)=>e(...i)}})}),n}function l1(n,t,e){let i=[];for(;i.length;)i.pop()();let r=Object.entries(t).map(([o,a])=>({name:o,value:a})),s=I_(r);return r=r.map(o=>s.find(a=>a.name===o.name)?{name:`x-bind:${o.name}`,value:`"${o.value}"`}:o),Hp(n,r,e).map(o=>{i.push(o.runCleanups),o()}),()=>{for(;i.length;)i.pop()()}}var c1={};function nL(n,t){c1[n]=t}function iL(n,t){return Object.entries(c1).forEach(([e,i])=>{Object.defineProperty(n,e,{get(){return(...r)=>i.bind(t)(...r)},enumerable:!1})}),n}var rL={get reactive(){return to},get release(){return eo},get effect(){return fs},get raw(){return y_},version:"3.15.5",flushAndStopDeferringMutations:eI,dontAutoEvaluateFunctions:A_,disableEffectScheduling:JP,startObservingMutations:Lp,stopObservingMutations:C_,setReactivityEngine:XP,onAttributeRemoved:v_,onAttributesAdded:S_,closestDataStack:Qr,skipDuringClone:cr,onlyDuringClone:LI,addRootSelector:q_,addInitSelector:K_,setErrorHandler:aI,interceptClone:Pu,addScopeToNode:Ha,deferMutations:tI,mapAttributes:$p,evaluateLater:Fe,interceptInit:kI,initInterceptors:Bp,injectMagics:da,setEvaluator:cI,setRawEvaluator:uI,mergeProxies:ts,extractProp:GI,findClosest:ns,onElRemoved:Dp,closestRoot:Ru,destroyTree:io,interceptor:E_,transition:Fd,setStyles:Du,mutateDom:jt,directive:ie,entangle:o1,throttle:s1,debounce:r1,evaluate:Wr,evaluateRaw:pI,initTree:Mi,nextTick:Up,prefixed:no,prefix:mI,plugin:YI,magic:zn,store:ZI,start:SI,clone:FI,cloneNode:NI,bound:XI,$data:M_,watch:b_,walk:es,data:nL,bind:tL},ro=rL;function sL(n,t){const e=Object.create(null),i=n.split(",");for(let r=0;r<i.length;r++)e[i[r]]=!0;return r=>!!e[r]}var oL=Object.freeze({}),aL=Object.prototype.hasOwnProperty,Iu=(n,t)=>aL.call(n,t),Vr=Array.isArray,Yo=n=>u1(n)==="[object Map]",lL=n=>typeof n=="string",Kp=n=>typeof n=="symbol",Lu=n=>n!==null&&typeof n=="object",cL=Object.prototype.toString,u1=n=>cL.call(n),f1=n=>u1(n).slice(8,-1),Jp=n=>lL(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,uL=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},fL=uL(n=>n.charAt(0).toUpperCase()+n.slice(1)),h1=(n,t)=>n!==t&&(n===n||t===t),zd=new WeakMap,Do=[],Gn,Ur=Symbol("iterate"),Hd=Symbol("Map key iterate");function hL(n){return n&&n._isEffect===!0}function dL(n,t=oL){hL(n)&&(n=n.raw);const e=mL(n,t);return t.lazy||e(),e}function pL(n){n.active&&(d1(n),n.options.onStop&&n.options.onStop(),n.active=!1)}var gL=0;function mL(n,t){const e=function(){if(!e.active)return n();if(!Do.includes(e)){d1(e);try{return bL(),Do.push(e),Gn=e,n()}finally{Do.pop(),p1(),Gn=Do[Do.length-1]}}};return e.id=gL++,e.allowRecurse=!!t.allowRecurse,e._isEffect=!0,e.active=!0,e.raw=n,e.deps=[],e.options=t,e}function d1(n){const{deps:t}=n;if(t.length){for(let e=0;e<t.length;e++)t[e].delete(n);t.length=0}}var Us=!0,Xp=[];function yL(){Xp.push(Us),Us=!1}function bL(){Xp.push(Us),Us=!0}function p1(){const n=Xp.pop();Us=n===void 0?!0:n}function Fn(n,t,e){if(!Us||Gn===void 0)return;let i=zd.get(n);i||zd.set(n,i=new Map);let r=i.get(e);r||i.set(e,r=new Set),r.has(Gn)||(r.add(Gn),Gn.deps.push(r),Gn.options.onTrack&&Gn.options.onTrack({effect:Gn,target:n,type:t,key:e}))}function sr(n,t,e,i,r,s){const o=zd.get(n);if(!o)return;const a=new Set,l=h=>{h&&h.forEach(d=>{(d!==Gn||d.allowRecurse)&&a.add(d)})};if(t==="clear")o.forEach(l);else if(e==="length"&&Vr(n))o.forEach((h,d)=>{(d==="length"||d>=i)&&l(h)});else switch(e!==void 0&&l(o.get(e)),t){case"add":Vr(n)?Jp(e)&&l(o.get("length")):(l(o.get(Ur)),Yo(n)&&l(o.get(Hd)));break;case"delete":Vr(n)||(l(o.get(Ur)),Yo(n)&&l(o.get(Hd)));break;case"set":Yo(n)&&l(o.get(Ur));break}const u=h=>{h.options.onTrigger&&h.options.onTrigger({effect:h,target:n,key:e,type:t,newValue:i,oldValue:r,oldTarget:s}),h.options.scheduler?h.options.scheduler(h):h()};a.forEach(u)}var xL=sL("__proto__,__v_isRef,__isVue"),g1=new Set(Object.getOwnPropertyNames(Symbol).map(n=>Symbol[n]).filter(Kp)),wL=m1(),_L=m1(!0),Jb=SL();function SL(){const n={};return["includes","indexOf","lastIndexOf"].forEach(t=>{n[t]=function(...e){const i=zt(this);for(let s=0,o=this.length;s<o;s++)Fn(i,"get",s+"");const r=i[t](...e);return r===-1||r===!1?i[t](...e.map(zt)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{n[t]=function(...e){yL();const i=zt(this)[t].apply(this,e);return p1(),i}}),n}function m1(n=!1,t=!1){return function(i,r,s){if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_raw"&&s===(n?t?NL:w1:t?LL:x1).get(i))return i;const o=Vr(i);if(!n&&o&&Iu(Jb,r))return Reflect.get(Jb,r,s);const a=Reflect.get(i,r,s);return(Kp(r)?g1.has(r):xL(r))||(n||Fn(i,"get",r),t)?a:$d(a)?!o||!Jp(r)?a.value:a:Lu(a)?n?_1(a):Qp(a):a}}var vL=kL();function kL(n=!1){return function(e,i,r,s){let o=e[i];if(!n&&(r=zt(r),o=zt(o),!Vr(e)&&$d(o)&&!$d(r)))return o.value=r,!0;const a=Vr(e)&&Jp(i)?Number(i)<e.length:Iu(e,i),l=Reflect.set(e,i,r,s);return e===zt(s)&&(a?h1(r,o)&&sr(e,"set",i,r,o):sr(e,"add",i,r)),l}}function CL(n,t){const e=Iu(n,t),i=n[t],r=Reflect.deleteProperty(n,t);return r&&e&&sr(n,"delete",t,void 0,i),r}function ML(n,t){const e=Reflect.has(n,t);return(!Kp(t)||!g1.has(t))&&Fn(n,"has",t),e}function EL(n){return Fn(n,"iterate",Vr(n)?"length":Ur),Reflect.ownKeys(n)}var TL={get:wL,set:vL,deleteProperty:CL,has:ML,ownKeys:EL},OL={get:_L,set(n,t){return console.warn(`Set operation on key "${String(t)}" failed: target is readonly.`,n),!0},deleteProperty(n,t){return console.warn(`Delete operation on key "${String(t)}" failed: target is readonly.`,n),!0}},Gp=n=>Lu(n)?Qp(n):n,Yp=n=>Lu(n)?_1(n):n,Zp=n=>n,Nu=n=>Reflect.getPrototypeOf(n);function Bl(n,t,e=!1,i=!1){n=n.__v_raw;const r=zt(n),s=zt(t);t!==s&&!e&&Fn(r,"get",t),!e&&Fn(r,"get",s);const{has:o}=Nu(r),a=i?Zp:e?Yp:Gp;if(o.call(r,t))return a(n.get(t));if(o.call(r,s))return a(n.get(s));n!==r&&n.get(t)}function zl(n,t=!1){const e=this.__v_raw,i=zt(e),r=zt(n);return n!==r&&!t&&Fn(i,"has",n),!t&&Fn(i,"has",r),n===r?e.has(n):e.has(n)||e.has(r)}function Hl(n,t=!1){return n=n.__v_raw,!t&&Fn(zt(n),"iterate",Ur),Reflect.get(n,"size",n)}function Xb(n){n=zt(n);const t=zt(this);return Nu(t).has.call(t,n)||(t.add(n),sr(t,"add",n,n)),this}function Gb(n,t){t=zt(t);const e=zt(this),{has:i,get:r}=Nu(e);let s=i.call(e,n);s?b1(e,i,n):(n=zt(n),s=i.call(e,n));const o=r.call(e,n);return e.set(n,t),s?h1(t,o)&&sr(e,"set",n,t,o):sr(e,"add",n,t),this}function Yb(n){const t=zt(this),{has:e,get:i}=Nu(t);let r=e.call(t,n);r?b1(t,e,n):(n=zt(n),r=e.call(t,n));const s=i?i.call(t,n):void 0,o=t.delete(n);return r&&sr(t,"delete",n,void 0,s),o}function Zb(){const n=zt(this),t=n.size!==0,e=Yo(n)?new Map(n):new Set(n),i=n.clear();return t&&sr(n,"clear",void 0,void 0,e),i}function $l(n,t){return function(i,r){const s=this,o=s.__v_raw,a=zt(o),l=t?Zp:n?Yp:Gp;return!n&&Fn(a,"iterate",Ur),o.forEach((u,h)=>i.call(r,l(u),l(h),s))}}function Wl(n,t,e){return function(...i){const r=this.__v_raw,s=zt(r),o=Yo(s),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,u=r[n](...i),h=e?Zp:t?Yp:Gp;return!t&&Fn(s,"iterate",l?Hd:Ur),{next(){const{value:d,done:g}=u.next();return g?{value:d,done:g}:{value:a?[h(d[0]),h(d[1])]:h(d),done:g}},[Symbol.iterator](){return this}}}}function Bi(n){return function(...t){{const e=t[0]?`on key "${t[0]}" `:"";console.warn(`${fL(n)} operation ${e}failed: target is readonly.`,zt(this))}return n==="delete"?!1:this}}function AL(){const n={get(s){return Bl(this,s)},get size(){return Hl(this)},has:zl,add:Xb,set:Gb,delete:Yb,clear:Zb,forEach:$l(!1,!1)},t={get(s){return Bl(this,s,!1,!0)},get size(){return Hl(this)},has:zl,add:Xb,set:Gb,delete:Yb,clear:Zb,forEach:$l(!1,!0)},e={get(s){return Bl(this,s,!0)},get size(){return Hl(this,!0)},has(s){return zl.call(this,s,!0)},add:Bi("add"),set:Bi("set"),delete:Bi("delete"),clear:Bi("clear"),forEach:$l(!0,!1)},i={get(s){return Bl(this,s,!0,!0)},get size(){return Hl(this,!0)},has(s){return zl.call(this,s,!0)},add:Bi("add"),set:Bi("set"),delete:Bi("delete"),clear:Bi("clear"),forEach:$l(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Wl(s,!1,!1),e[s]=Wl(s,!0,!1),t[s]=Wl(s,!1,!0),i[s]=Wl(s,!0,!0)}),[n,e,t,i]}var[RL,DL]=AL();function y1(n,t){const e=n?DL:RL;return(i,r,s)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?i:Reflect.get(Iu(e,r)&&r in i?e:i,r,s)}var PL={get:y1(!1)},IL={get:y1(!0)};function b1(n,t,e){const i=zt(e);if(i!==e&&t.call(n,i)){const r=f1(n);console.warn(`Reactive ${r} contains both the raw and reactive versions of the same object${r==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var x1=new WeakMap,LL=new WeakMap,w1=new WeakMap,NL=new WeakMap;function FL(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function BL(n){return n.__v_skip||!Object.isExtensible(n)?0:FL(f1(n))}function Qp(n){return n&&n.__v_isReadonly?n:S1(n,!1,TL,PL,x1)}function _1(n){return S1(n,!0,OL,IL,w1)}function S1(n,t,e,i,r){if(!Lu(n))return console.warn(`value cannot be made reactive: ${String(n)}`),n;if(n.__v_raw&&!(t&&n.__v_isReactive))return n;const s=r.get(n);if(s)return s;const o=BL(n);if(o===0)return n;const a=new Proxy(n,o===2?i:e);return r.set(n,a),a}function zt(n){return n&&zt(n.__v_raw)||n}function $d(n){return!!(n&&n.__v_isRef===!0)}zn("nextTick",()=>Up);zn("dispatch",n=>Go.bind(Go,n));zn("watch",(n,{evaluateLater:t,cleanup:e})=>(i,r)=>{let s=t(i),a=b_(()=>{let l;return s(u=>l=u),l},r);e(a)});zn("store",QI);zn("data",n=>M_(n));zn("root",n=>Ru(n));zn("refs",n=>(n._x_refs_proxy||(n._x_refs_proxy=ts(zL(n))),n._x_refs_proxy));function zL(n){let t=[];return ns(n,e=>{e._x_refs&&t.push(e._x_refs)}),t}var Ih={};function v1(n){return Ih[n]||(Ih[n]=0),++Ih[n]}function HL(n,t){return ns(n,e=>{if(e._x_ids&&e._x_ids[t])return!0})}function $L(n,t){n._x_ids||(n._x_ids={}),n._x_ids[t]||(n._x_ids[t]=v1(t))}zn("id",(n,{cleanup:t})=>(e,i=null)=>{let r=`${e}${i?`-${i}`:""}`;return WL(n,r,t,()=>{let s=HL(n,e),o=s?s._x_ids[e]:v1(e);return i?`${e}-${o}-${i}`:`${e}-${o}`})});Pu((n,t)=>{n._x_id&&(t._x_id=n._x_id)});function WL(n,t,e,i){if(n._x_id||(n._x_id={}),n._x_id[t])return n._x_id[t];let r=i();return n._x_id[t]=r,e(()=>{delete n._x_id[t]}),r}zn("el",n=>n);k1("Focus","focus","focus");k1("Persist","persist","persist");function k1(n,t,e){zn(t,i=>Cn(`You can't use [$${t}] without first installing the "${n}" plugin here: https://alpinejs.dev/plugins/${e}`,i))}ie("modelable",(n,{expression:t},{effect:e,evaluateLater:i,cleanup:r})=>{let s=i(t),o=()=>{let h;return s(d=>h=d),h},a=i(`${t} = __placeholder`),l=h=>a(()=>{},{scope:{__placeholder:h}}),u=o();l(u),queueMicrotask(()=>{if(!n._x_model)return;n._x_removeModelListeners.default();let h=n._x_model.get,d=n._x_model.set,g=o1({get(){return h()},set(m){d(m)}},{get(){return o()},set(m){l(m)}});r(g)})});ie("teleport",(n,{modifiers:t,expression:e},{cleanup:i})=>{n.tagName.toLowerCase()!=="template"&&Cn("x-teleport can only be used on a <template> tag",n);let r=Qb(e),s=n.content.cloneNode(!0).firstElementChild;n._x_teleport=s,s._x_teleportBack=n,n.setAttribute("data-teleport-template",!0),s.setAttribute("data-teleport-target",!0),n._x_forwardEvents&&n._x_forwardEvents.forEach(a=>{s.addEventListener(a,l=>{l.stopPropagation(),n.dispatchEvent(new l.constructor(l.type,l))})}),Ha(s,{},n);let o=(a,l,u)=>{u.includes("prepend")?l.parentNode.insertBefore(a,l):u.includes("append")?l.parentNode.insertBefore(a,l.nextSibling):l.appendChild(a)};jt(()=>{o(s,r,t),cr(()=>{Mi(s)})()}),n._x_teleportPutBack=()=>{let a=Qb(e);jt(()=>{o(n._x_teleport,a,t)})},i(()=>jt(()=>{s.remove(),io(s)}))});var VL=document.createElement("div");function Qb(n){let t=cr(()=>document.querySelector(n),()=>VL)();return t||Cn(`Cannot find x-teleport element for selector: "${n}"`),t}var C1=()=>{};C1.inline=(n,{modifiers:t},{cleanup:e})=>{t.includes("self")?n._x_ignoreSelf=!0:n._x_ignore=!0,e(()=>{t.includes("self")?delete n._x_ignoreSelf:delete n._x_ignore})};ie("ignore",C1);ie("effect",cr((n,{expression:t},{effect:e})=>{e(Fe(n,t))}));function Ps(n,t,e,i){let r=n,s=l=>i(l),o={},a=(l,u)=>h=>u(l,h);if(e.includes("dot")&&(t=UL(t)),e.includes("camel")&&(t=jL(t)),e.includes("passive")&&(o.passive=!0),e.includes("capture")&&(o.capture=!0),e.includes("window")&&(r=window),e.includes("document")&&(r=document),e.includes("debounce")){let l=e[e.indexOf("debounce")+1]||"invalid-wait",u=Ac(l.split("ms")[0])?Number(l.split("ms")[0]):250;s=r1(s,u)}if(e.includes("throttle")){let l=e[e.indexOf("throttle")+1]||"invalid-wait",u=Ac(l.split("ms")[0])?Number(l.split("ms")[0]):250;s=s1(s,u)}return e.includes("prevent")&&(s=a(s,(l,u)=>{u.preventDefault(),l(u)})),e.includes("stop")&&(s=a(s,(l,u)=>{u.stopPropagation(),l(u)})),e.includes("once")&&(s=a(s,(l,u)=>{l(u),r.removeEventListener(t,s,o)})),(e.includes("away")||e.includes("outside"))&&(r=document,s=a(s,(l,u)=>{n.contains(u.target)||u.target.isConnected!==!1&&(n.offsetWidth<1&&n.offsetHeight<1||n._x_isShown!==!1&&l(u))})),e.includes("self")&&(s=a(s,(l,u)=>{u.target===n&&l(u)})),(KL(t)||M1(t))&&(s=a(s,(l,u)=>{JL(u,e)||l(u)})),r.addEventListener(t,s,o),()=>{r.removeEventListener(t,s,o)}}function UL(n){return n.replace(/-/g,".")}function jL(n){return n.toLowerCase().replace(/-(\w)/g,(t,e)=>e.toUpperCase())}function Ac(n){return!Array.isArray(n)&&!isNaN(n)}function qL(n){return[" ","_"].includes(n)?n:n.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function KL(n){return["keydown","keyup"].includes(n)}function M1(n){return["contextmenu","click","mouse"].some(t=>n.includes(t))}function JL(n,t){let e=t.filter(s=>!["window","document","prevent","stop","once","capture","self","away","outside","passive","preserve-scroll","blur","change","lazy"].includes(s));if(e.includes("debounce")){let s=e.indexOf("debounce");e.splice(s,Ac((e[s+1]||"invalid-wait").split("ms")[0])?2:1)}if(e.includes("throttle")){let s=e.indexOf("throttle");e.splice(s,Ac((e[s+1]||"invalid-wait").split("ms")[0])?2:1)}if(e.length===0||e.length===1&&t0(n.key).includes(e[0]))return!1;const r=["ctrl","shift","alt","meta","cmd","super"].filter(s=>e.includes(s));return e=e.filter(s=>!r.includes(s)),!(r.length>0&&r.filter(o=>((o==="cmd"||o==="super")&&(o="meta"),n[`${o}Key`])).length===r.length&&(M1(n.type)||t0(n.key).includes(e[0])))}function t0(n){if(!n)return[];n=qL(n);let t={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return t[n]=n,Object.keys(t).map(e=>{if(t[e]===n)return e}).filter(e=>e)}ie("model",(n,{modifiers:t,expression:e},{effect:i,cleanup:r})=>{let s=n;t.includes("parent")&&(s=n.parentNode);let o=Fe(s,e),a;typeof e=="string"?a=Fe(s,`${e} = __placeholder`):typeof e=="function"&&typeof e()=="string"?a=Fe(s,`${e()} = __placeholder`):a=()=>{};let l=()=>{let x;return o(w=>x=w),e0(x)?x.get():x},u=x=>{let w;o(v=>w=v),e0(w)?w.set(x):a(()=>{},{scope:{__placeholder:x}})};typeof e=="string"&&n.type==="radio"&&jt(()=>{n.hasAttribute("name")||n.setAttribute("name",e)});let h=t.includes("change")||t.includes("lazy"),d=t.includes("blur"),g=t.includes("enter"),m=h||d||g,y;if(rr)y=()=>{};else if(m){let x=[],w=v=>u(Vl(n,t,v,l()));h&&x.push(Ps(n,"change",t,w)),d&&x.push(Ps(n,"blur",t,w)),g&&x.push(Ps(n,"keydown",t,v=>{v.key==="Enter"&&w(v)})),y=()=>x.forEach(v=>v())}else{let x=n.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(n.type)?"change":"input";y=Ps(n,x,t,w=>{u(Vl(n,t,w,l()))})}if(t.includes("fill")&&([void 0,null,""].includes(l())||qp(n)&&Array.isArray(l())||n.tagName.toLowerCase()==="select"&&n.multiple)&&u(Vl(n,t,{target:n},l())),n._x_removeModelListeners||(n._x_removeModelListeners={}),n._x_removeModelListeners.default=y,r(()=>n._x_removeModelListeners.default()),n.form){let x=Ps(n.form,"reset",[],w=>{Up(()=>n._x_model&&n._x_model.set(Vl(n,t,{target:n},l())))});r(()=>x())}n._x_model={get(){return l()},set(x){u(x)}},n._x_forceModelUpdate=x=>{x===void 0&&typeof e=="string"&&e.match(/\./)&&(x=""),window.fromModel=!0,jt(()=>Q_(n,"value",x)),delete window.fromModel},i(()=>{let x=l();t.includes("unintrusive")&&document.activeElement.isSameNode(n)||n._x_forceModelUpdate(x)})});function Vl(n,t,e,i){return jt(()=>{if(e instanceof CustomEvent&&e.detail!==void 0)return e.detail!==null&&e.detail!==void 0?e.detail:e.target.value;if(qp(n))if(Array.isArray(i)){let r=null;return t.includes("number")?r=Lh(e.target.value):t.includes("boolean")?r=bc(e.target.value):r=e.target.value,e.target.checked?i.includes(r)?i:i.concat([r]):i.filter(s=>!XL(s,r))}else return e.target.checked;else{if(n.tagName.toLowerCase()==="select"&&n.multiple)return t.includes("number")?Array.from(e.target.selectedOptions).map(r=>{let s=r.value||r.text;return Lh(s)}):t.includes("boolean")?Array.from(e.target.selectedOptions).map(r=>{let s=r.value||r.text;return bc(s)}):Array.from(e.target.selectedOptions).map(r=>r.value||r.text);{let r;return i1(n)?e.target.checked?r=e.target.value:r=i:r=e.target.value,t.includes("number")?Lh(r):t.includes("boolean")?bc(r):t.includes("trim")?r.trim():r}}})}function Lh(n){let t=n?parseFloat(n):null;return GL(t)?t:n}function XL(n,t){return n==t}function GL(n){return!Array.isArray(n)&&!isNaN(n)}function e0(n){return n!==null&&typeof n=="object"&&typeof n.get=="function"&&typeof n.set=="function"}ie("cloak",n=>queueMicrotask(()=>jt(()=>n.removeAttribute(no("cloak")))));K_(()=>`[${no("init")}]`);ie("init",cr((n,{expression:t},{evaluate:e})=>typeof t=="string"?!!t.trim()&&e(t,{},!1):e(t,{},!1)));ie("text",(n,{expression:t},{effect:e,evaluateLater:i})=>{let r=i(t);e(()=>{r(s=>{jt(()=>{n.textContent=s})})})});ie("html",(n,{expression:t},{effect:e,evaluateLater:i})=>{let r=i(t);e(()=>{r(s=>{jt(()=>{n.innerHTML=s,n._x_ignoreSelf=!0,Mi(n),delete n._x_ignoreSelf})})})});$p(F_(":",B_(no("bind:"))));var E1=(n,{value:t,modifiers:e,expression:i,original:r},{effect:s,cleanup:o})=>{if(!t){let l={};eL(l),Fe(n,i)(h=>{l1(n,h,r)},{scope:l});return}if(t==="key")return YL(n,i);if(n._x_inlineBindings&&n._x_inlineBindings[t]&&n._x_inlineBindings[t].extract)return;let a=Fe(n,i);s(()=>a(l=>{l===void 0&&typeof i=="string"&&i.match(/\./)&&(l=""),jt(()=>Q_(n,t,l,e))})),o(()=>{n._x_undoAddedClasses&&n._x_undoAddedClasses(),n._x_undoAddedStyles&&n._x_undoAddedStyles()})};E1.inline=(n,{value:t,modifiers:e,expression:i})=>{t&&(n._x_inlineBindings||(n._x_inlineBindings={}),n._x_inlineBindings[t]={expression:i,extract:!1})};ie("bind",E1);function YL(n,t){n._x_keyExpression=t}q_(()=>`[${no("data")}]`);ie("data",(n,{expression:t},{cleanup:e})=>{if(ZL(n))return;t=t===""?"{}":t;let i={};da(i,n);let r={};iL(r,i);let s=Wr(n,t,{scope:r});(s===void 0||s===!0)&&(s={}),da(s,n);let o=to(s);Bp(o);let a=Ha(n,o);o.init&&Wr(n,o.init),e(()=>{o.destroy&&Wr(n,o.destroy),a()})});Pu((n,t)=>{n._x_dataStack&&(t._x_dataStack=n._x_dataStack,t.setAttribute("data-has-alpine-state",!0))});function ZL(n){return rr?Bd?!0:n.hasAttribute("data-has-alpine-state"):!1}ie("show",(n,{modifiers:t,expression:e},{effect:i})=>{let r=Fe(n,e);n._x_doHide||(n._x_doHide=()=>{jt(()=>{n.style.setProperty("display","none",t.includes("important")?"important":void 0)})}),n._x_doShow||(n._x_doShow=()=>{jt(()=>{n.style.length===1&&n.style.display==="none"?n.removeAttribute("style"):n.style.removeProperty("display")})});let s=()=>{n._x_doHide(),n._x_isShown=!1},o=()=>{n._x_doShow(),n._x_isShown=!0},a=()=>setTimeout(o),l=Nd(d=>d?o():s(),d=>{typeof n._x_toggleAndCascadeWithTransitions=="function"?n._x_toggleAndCascadeWithTransitions(n,d,o,s):d?a():s()}),u,h=!0;i(()=>r(d=>{!h&&d===u||(t.includes("immediate")&&(d?a():s()),l(d),u=d,h=!1)}))});ie("for",(n,{expression:t},{effect:e,cleanup:i})=>{let r=tN(t),s=Fe(n,r.items),o=Fe(n,n._x_keyExpression||"index");n._x_prevKeys=[],n._x_lookup={},e(()=>QL(n,r,s,o)),i(()=>{Object.values(n._x_lookup).forEach(a=>jt(()=>{io(a),a.remove()})),delete n._x_prevKeys,delete n._x_lookup})});function QL(n,t,e,i){let r=o=>typeof o=="object"&&!Array.isArray(o),s=n;e(o=>{eN(o)&&o>=0&&(o=Array.from(Array(o).keys(),w=>w+1)),o===void 0&&(o=[]);let a=n._x_lookup,l=n._x_prevKeys,u=[],h=[];if(r(o))o=Object.entries(o).map(([w,v])=>{let E=n0(t,v,w,o);i(O=>{h.includes(O)&&Cn("Duplicate key on x-for",n),h.push(O)},{scope:{index:w,...E}}),u.push(E)});else for(let w=0;w<o.length;w++){let v=n0(t,o[w],w,o);i(E=>{h.includes(E)&&Cn("Duplicate key on x-for",n),h.push(E)},{scope:{index:w,...v}}),u.push(v)}let d=[],g=[],m=[],y=[];for(let w=0;w<l.length;w++){let v=l[w];h.indexOf(v)===-1&&m.push(v)}l=l.filter(w=>!m.includes(w));let x="template";for(let w=0;w<h.length;w++){let v=h[w],E=l.indexOf(v);if(E===-1)l.splice(w,0,v),d.push([x,w]);else if(E!==w){let O=l.splice(w,1)[0],P=l.splice(E-1,1)[0];l.splice(w,0,P),l.splice(E,0,O),g.push([O,P])}else y.push(v);x=v}for(let w=0;w<m.length;w++){let v=m[w];v in a&&(jt(()=>{io(a[v]),a[v].remove()}),delete a[v])}for(let w=0;w<g.length;w++){let[v,E]=g[w],O=a[v],P=a[E],R=document.createElement("div");jt(()=>{P||Cn('x-for ":key" is undefined or invalid',s,E,a),P.after(R),O.after(P),P._x_currentIfEl&&P.after(P._x_currentIfEl),R.before(O),O._x_currentIfEl&&O.after(O._x_currentIfEl),R.remove()}),P._x_refreshXForScope(u[h.indexOf(E)])}for(let w=0;w<d.length;w++){let[v,E]=d[w],O=v==="template"?s:a[v];O._x_currentIfEl&&(O=O._x_currentIfEl);let P=u[E],R=h[E],B=document.importNode(s.content,!0).firstElementChild,I=to(P);Ha(B,I,s),B._x_refreshXForScope=z=>{Object.entries(z).forEach(([j,Z])=>{I[j]=Z})},jt(()=>{O.after(B),cr(()=>Mi(B))()}),typeof R=="object"&&Cn("x-for key cannot be an object, it must be a string or an integer",s),a[R]=B}for(let w=0;w<y.length;w++)a[y[w]]._x_refreshXForScope(u[h.indexOf(y[w])]);s._x_prevKeys=h})}function tN(n){let t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,e=/^\s*\(|\)\s*$/g,i=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,r=n.match(i);if(!r)return;let s={};s.items=r[2].trim();let o=r[1].replace(e,"").trim(),a=o.match(t);return a?(s.item=o.replace(t,"").trim(),s.index=a[1].trim(),a[2]&&(s.collection=a[2].trim())):s.item=o,s}function n0(n,t,e,i){let r={};return/^\[.*\]$/.test(n.item)&&Array.isArray(t)?n.item.replace("[","").replace("]","").split(",").map(o=>o.trim()).forEach((o,a)=>{r[o]=t[a]}):/^\{.*\}$/.test(n.item)&&!Array.isArray(t)&&typeof t=="object"?n.item.replace("{","").replace("}","").split(",").map(o=>o.trim()).forEach(o=>{r[o]=t[o]}):r[n.item]=t,n.index&&(r[n.index]=e),n.collection&&(r[n.collection]=i),r}function eN(n){return!Array.isArray(n)&&!isNaN(n)}function T1(){}T1.inline=(n,{expression:t},{cleanup:e})=>{let i=Ru(n);i._x_refs||(i._x_refs={}),i._x_refs[t]=n,e(()=>delete i._x_refs[t])};ie("ref",T1);ie("if",(n,{expression:t},{effect:e,cleanup:i})=>{n.tagName.toLowerCase()!=="template"&&Cn("x-if can only be used on a <template> tag",n);let r=Fe(n,t),s=()=>{if(n._x_currentIfEl)return n._x_currentIfEl;let a=n.content.cloneNode(!0).firstElementChild;return Ha(a,{},n),jt(()=>{n.after(a),cr(()=>Mi(a))()}),n._x_currentIfEl=a,n._x_undoIf=()=>{jt(()=>{io(a),a.remove()}),delete n._x_currentIfEl},a},o=()=>{n._x_undoIf&&(n._x_undoIf(),delete n._x_undoIf)};e(()=>r(a=>{a?s():o()})),i(()=>n._x_undoIf&&n._x_undoIf())});ie("id",(n,{expression:t},{evaluate:e})=>{e(t).forEach(r=>$L(n,r))});Pu((n,t)=>{n._x_ids&&(t._x_ids=n._x_ids)});$p(F_("@",B_(no("on:"))));ie("on",cr((n,{value:t,modifiers:e,expression:i},{cleanup:r})=>{let s=i?Fe(n,i):()=>{};n.tagName.toLowerCase()==="template"&&(n._x_forwardEvents||(n._x_forwardEvents=[]),n._x_forwardEvents.includes(t)||n._x_forwardEvents.push(t));let o=Ps(n,t,e,a=>{s(()=>{},{scope:{$event:a},params:[a]})});r(()=>o())}));Fu("Collapse","collapse","collapse");Fu("Intersect","intersect","intersect");Fu("Focus","trap","focus");Fu("Mask","mask","mask");function Fu(n,t,e){ie(t,i=>Cn(`You can't use [x-${t}] without first installing the "${n}" plugin here: https://alpinejs.dev/plugins/${e}`,i))}ro.setEvaluator(P_);ro.setRawEvaluator(gI);ro.setReactivityEngine({reactive:Qp,effect:dL,release:pL,raw:zt});var nN=ro,Pt=nN;function iN(n){n.directive("collapse",t),t.inline=(e,{modifiers:i})=>{i.includes("min")&&(e._x_doShow=()=>{},e._x_doHide=()=>{})};function t(e,{modifiers:i}){let r=i0(i,"duration",250)/1e3,s=i0(i,"min",0),o=!i.includes("min");e._x_isShown||(e.style.height=`${s}px`),!e._x_isShown&&o&&(e.hidden=!0),e._x_isShown||(e.style.overflow="hidden");let a=(u,h)=>{let d=n.setStyles(u,h);return h.height?()=>{}:d},l={transitionProperty:"height",transitionDuration:`${r}s`,transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)"};e._x_transition={in(u=()=>{},h=()=>{}){o&&(e.hidden=!1),o&&(e.style.display=null);let d=e.getBoundingClientRect().height;e.style.height="auto";let g=e.getBoundingClientRect().height;d===g&&(d=s),n.transition(e,n.setStyles,{during:l,start:{height:d+"px"},end:{height:g+"px"}},()=>e._x_isShown=!0,()=>{Math.abs(e.getBoundingClientRect().height-g)<1&&(e.style.overflow=null)})},out(u=()=>{},h=()=>{}){let d=e.getBoundingClientRect().height;n.transition(e,a,{during:l,start:{height:d+"px"},end:{height:s+"px"}},()=>e.style.overflow="hidden",()=>{e._x_isShown=!1,e.style.height==`${s}px`&&o&&(e.style.display="none",e.hidden=!0)})}}}}function i0(n,t,e){if(n.indexOf(t)===-1)return e;const i=n[n.indexOf(t)+1];if(!i)return e;if(t==="duration"){let r=i.match(/([0-9]+)ms/);if(r)return r[1]}if(t==="min"){let r=i.match(/([0-9]+)px/);if(r)return r[1]}return i}var rN=iN;function sN(n){n.directive("intersect",n.skipDuringClone((t,{value:e,expression:i,modifiers:r},{evaluateLater:s,cleanup:o})=>{let a=s(i),l={rootMargin:lN(r),threshold:oN(r)},u=new IntersectionObserver(h=>{h.forEach(d=>{d.isIntersecting!==(e==="leave")&&(a(),r.includes("once")&&u.disconnect())})},l);u.observe(t),o(()=>{u.disconnect()})}))}function oN(n){if(n.includes("full"))return .99;if(n.includes("half"))return .5;if(!n.includes("threshold"))return 0;let t=n[n.indexOf("threshold")+1];return t==="100"?1:t==="0"?0:+`.${t}`}function aN(n){let t=n.match(/^(-?[0-9]+)(px|%)?$/);return t?t[1]+(t[2]||"px"):void 0}function lN(n){const t="margin",e="0px 0px 0px 0px",i=n.indexOf(t);if(i===-1)return e;let r=[];for(let s=1;s<5;s++)r.push(aN(n[i+s]||""));return r=r.filter(s=>s!==void 0),r.length?r.join(" ").trim():e}var cN=sN;function ye(n){this.content=n}ye.prototype={constructor:ye,find:function(n){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===n)return t;return-1},get:function(n){var t=this.find(n);return t==-1?void 0:this.content[t+1]},update:function(n,t,e){var i=e&&e!=n?this.remove(e):this,r=i.find(n),s=i.content.slice();return r==-1?s.push(e||n,t):(s[r+1]=t,e&&(s[r]=e)),new ye(s)},remove:function(n){var t=this.find(n);if(t==-1)return this;var e=this.content.slice();return e.splice(t,2),new ye(e)},addToStart:function(n,t){return new ye([n,t].concat(this.remove(n).content))},addToEnd:function(n,t){var e=this.remove(n).content.slice();return e.push(n,t),new ye(e)},addBefore:function(n,t,e){var i=this.remove(t),r=i.content.slice(),s=i.find(n);return r.splice(s==-1?r.length:s,0,t,e),new ye(r)},forEach:function(n){for(var t=0;t<this.content.length;t+=2)n(this.content[t],this.content[t+1])},prepend:function(n){return n=ye.from(n),n.size?new ye(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=ye.from(n),n.size?new ye(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var t=this;n=ye.from(n);for(var e=0;e<n.content.length;e+=2)t=t.remove(n.content[e]);return t},toObject:function(){var n={};return this.forEach(function(t,e){n[t]=e}),n},get size(){return this.content.length>>1}};ye.from=function(n){if(n instanceof ye)return n;var t=[];if(n)for(var e in n)t.push(e,n[e]);return new ye(t)};function O1(n,t,e){for(let i=0;;i++){if(i==n.childCount||i==t.childCount)return n.childCount==t.childCount?null:e;let r=n.child(i),s=t.child(i);if(r==s){e+=r.nodeSize;continue}if(!r.sameMarkup(s))return e;if(r.isText&&r.text!=s.text){for(let o=0;r.text[o]==s.text[o];o++)e++;return e}if(r.content.size||s.content.size){let o=O1(r.content,s.content,e+1);if(o!=null)return o}e+=r.nodeSize}}function A1(n,t,e,i){for(let r=n.childCount,s=t.childCount;;){if(r==0||s==0)return r==s?null:{a:e,b:i};let o=n.child(--r),a=t.child(--s),l=o.nodeSize;if(o==a){e-=l,i-=l;continue}if(!o.sameMarkup(a))return{a:e,b:i};if(o.isText&&o.text!=a.text){let u=0,h=Math.min(o.text.length,a.text.length);for(;u<h&&o.text[o.text.length-u-1]==a.text[a.text.length-u-1];)u++,e--,i--;return{a:e,b:i}}if(o.content.size||a.content.size){let u=A1(o.content,a.content,e-1,i-1);if(u)return u}e-=l,i-=l}}class V{constructor(t,e){if(this.content=t,this.size=e||0,e==null)for(let i=0;i<t.length;i++)this.size+=t[i].nodeSize}nodesBetween(t,e,i,r=0,s){for(let o=0,a=0;a<e;o++){let l=this.content[o],u=a+l.nodeSize;if(u>t&&i(l,r+a,s||null,o)!==!1&&l.content.size){let h=a+1;l.nodesBetween(Math.max(0,t-h),Math.min(l.content.size,e-h),i,r+h)}a=u}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,i,r){let s="",o=!0;return this.nodesBetween(t,e,(a,l)=>{let u=a.isText?a.text.slice(Math.max(t,l)-l,e-l):a.isLeaf?r?typeof r=="function"?r(a):r:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&i&&(o?o=!1:s+=i),s+=u},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,i=t.firstChild,r=this.content.slice(),s=0;for(e.isText&&e.sameMarkup(i)&&(r[r.length-1]=e.withText(e.text+i.text),s=1);s<t.content.length;s++)r.push(t.content[s]);return new V(r,this.size+t.size)}cut(t,e=this.size){if(t==0&&e==this.size)return this;let i=[],r=0;if(e>t)for(let s=0,o=0;o<e;s++){let a=this.content[s],l=o+a.nodeSize;l>t&&((o<t||l>e)&&(a.isText?a=a.cut(Math.max(0,t-o),Math.min(a.text.length,e-o)):a=a.cut(Math.max(0,t-o-1),Math.min(a.content.size,e-o-1))),i.push(a),r+=a.nodeSize),o=l}return new V(i,r)}cutByIndex(t,e){return t==e?V.empty:t==0&&e==this.content.length?this:new V(this.content.slice(t,e))}replaceChild(t,e){let i=this.content[t];if(i==e)return this;let r=this.content.slice(),s=this.size+e.nodeSize-i.nodeSize;return r[t]=e,new V(r,s)}addToStart(t){return new V([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new V(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,i=0;e<this.content.length;e++){let r=this.content[e];t(r,i,e),i+=r.nodeSize}}findDiffStart(t,e=0){return O1(this,t,e)}findDiffEnd(t,e=this.size,i=t.size){return A1(this,t,e,i)}findIndex(t){if(t==0)return Ul(0,t);if(t==this.size)return Ul(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let e=0,i=0;;e++){let r=this.child(e),s=i+r.nodeSize;if(s>=t)return s==t?Ul(e+1,s):Ul(e,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,e){if(!e)return V.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new V(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return V.empty;let e,i=0;for(let r=0;r<t.length;r++){let s=t[r];i+=s.nodeSize,r&&s.isText&&t[r-1].sameMarkup(s)?(e||(e=t.slice(0,r)),e[e.length-1]=s.withText(e[e.length-1].text+s.text)):e&&e.push(s)}return new V(e||t,i)}static from(t){if(!t)return V.empty;if(t instanceof V)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new V([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}V.empty=new V([],0);const Nh={index:0,offset:0};function Ul(n,t){return Nh.index=n,Nh.offset=t,Nh}function Rc(n,t){if(n===t)return!0;if(!(n&&typeof n=="object")||!(t&&typeof t=="object"))return!1;let e=Array.isArray(n);if(Array.isArray(t)!=e)return!1;if(e){if(n.length!=t.length)return!1;for(let i=0;i<n.length;i++)if(!Rc(n[i],t[i]))return!1}else{for(let i in n)if(!(i in t)||!Rc(n[i],t[i]))return!1;for(let i in t)if(!(i in n))return!1}return!0}let Dt=class Wd{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,i=!1;for(let r=0;r<t.length;r++){let s=t[r];if(this.eq(s))return t;if(this.type.excludes(s.type))e||(e=t.slice(0,r));else{if(s.type.excludes(this.type))return t;!i&&s.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),i=!0),e&&e.push(s)}}return e||(e=t.slice()),i||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Rc(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let i=t.marks[e.type];if(!i)throw new RangeError(`There is no mark type ${e.type} in this schema`);let r=i.create(e.attrs);return i.checkAttrs(r.attrs),r}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].eq(e[i]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return Wd.none;if(t instanceof Wd)return[t];let e=t.slice();return e.sort((i,r)=>i.type.rank-r.type.rank),e}};Dt.none=[];class Dc extends Error{}class K{constructor(t,e,i){this.content=t,this.openStart=e,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let i=D1(this.content,t+this.openStart,e);return i&&new K(i,this.openStart,this.openEnd)}removeBetween(t,e){return new K(R1(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return K.empty;let i=e.openStart||0,r=e.openEnd||0;if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new K(V.fromJSON(t,e.content),i,r)}static maxOpen(t,e=!0){let i=0,r=0;for(let s=t.firstChild;s&&!s.isLeaf&&(e||!s.type.spec.isolating);s=s.firstChild)i++;for(let s=t.lastChild;s&&!s.isLeaf&&(e||!s.type.spec.isolating);s=s.lastChild)r++;return new K(t,i,r)}}K.empty=new K(V.empty,0,0);function R1(n,t,e){let{index:i,offset:r}=n.findIndex(t),s=n.maybeChild(i),{index:o,offset:a}=n.findIndex(e);if(r==t||s.isText){if(a!=e&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,t).append(n.cut(e))}if(i!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(i,s.copy(R1(s.content,t-r-1,e-r-1)))}function D1(n,t,e,i){let{index:r,offset:s}=n.findIndex(t),o=n.maybeChild(r);if(s==t||o.isText)return i&&!i.canReplace(r,r,e)?null:n.cut(0,t).append(e).append(n.cut(t));let a=D1(o.content,t-s-1,e,o);return a&&n.replaceChild(r,o.copy(a))}function uN(n,t,e){if(e.openStart>n.depth)throw new Dc("Inserted content deeper than insertion position");if(n.depth-e.openStart!=t.depth-e.openEnd)throw new Dc("Inconsistent open depths");return P1(n,t,e,0)}function P1(n,t,e,i){let r=n.index(i),s=n.node(i);if(r==t.index(i)&&i<n.depth-e.openStart){let o=P1(n,t,e,i+1);return s.copy(s.content.replaceChild(r,o))}else if(e.content.size)if(!e.openStart&&!e.openEnd&&n.depth==i&&t.depth==i){let o=n.parent,a=o.content;return qr(o,a.cut(0,n.parentOffset).append(e.content).append(a.cut(t.parentOffset)))}else{let{start:o,end:a}=fN(e,n);return qr(s,L1(n,o,a,t,i))}else return qr(s,Pc(n,t,i))}function I1(n,t){if(!t.type.compatibleContent(n.type))throw new Dc("Cannot join "+t.type.name+" onto "+n.type.name)}function Vd(n,t,e){let i=n.node(e);return I1(i,t.node(e)),i}function jr(n,t){let e=t.length-1;e>=0&&n.isText&&n.sameMarkup(t[e])?t[e]=n.withText(t[e].text+n.text):t.push(n)}function Zo(n,t,e,i){let r=(t||n).node(e),s=0,o=t?t.index(e):r.childCount;n&&(s=n.index(e),n.depth>e?s++:n.textOffset&&(jr(n.nodeAfter,i),s++));for(let a=s;a<o;a++)jr(r.child(a),i);t&&t.depth==e&&t.textOffset&&jr(t.nodeBefore,i)}function qr(n,t){return n.type.checkContent(t),n.copy(t)}function L1(n,t,e,i,r){let s=n.depth>r&&Vd(n,t,r+1),o=i.depth>r&&Vd(e,i,r+1),a=[];return Zo(null,n,r,a),s&&o&&t.index(r)==e.index(r)?(I1(s,o),jr(qr(s,L1(n,t,e,i,r+1)),a)):(s&&jr(qr(s,Pc(n,t,r+1)),a),Zo(t,e,r,a),o&&jr(qr(o,Pc(e,i,r+1)),a)),Zo(i,null,r,a),new V(a)}function Pc(n,t,e){let i=[];if(Zo(null,n,e,i),n.depth>e){let r=Vd(n,t,e+1);jr(qr(r,Pc(n,t,e+1)),i)}return Zo(t,null,e,i),new V(i)}function fN(n,t){let e=t.depth-n.openStart,r=t.node(e).copy(n.content);for(let s=e-1;s>=0;s--)r=t.node(s).copy(V.from(r));return{start:r.resolveNoCache(n.openStart+e),end:r.resolveNoCache(r.content.size-n.openEnd-e)}}class ma{constructor(t,e,i){this.pos=t,this.path=e,this.parentOffset=i,this.depth=e.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let i=this.pos-this.path[this.path.length-1],r=t.child(e);return i?t.child(e).cut(i):r}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):t==0?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let i=this.path[e*3],r=e==0?0:this.path[e*3-1]+1;for(let s=0;s<t;s++)r+=i.child(s).nodeSize;return r}marks(){let t=this.parent,e=this.index();if(t.content.size==0)return Dt.none;if(this.textOffset)return t.child(e).marks;let i=t.maybeChild(e-1),r=t.maybeChild(e);if(!i){let a=i;i=r,r=a}let s=i.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!r||!s[o].isInSet(r.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let i=e.marks,r=t.parent.maybeChild(t.index());for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!r||!i[s].isInSet(r.marks))&&(i=i[s--].removeFromSet(i));return i}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);i>=0;i--)if(t.pos<=this.end(i)&&(!e||e(this.node(i))))return new Ic(this,t,i);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let i=[],r=0,s=e;for(let o=t;;){let{index:a,offset:l}=o.content.findIndex(s),u=s-l;if(i.push(o,a,r+l),!u||(o=o.child(a),o.isText))break;s=u-1,r+=l+1}return new ma(e,i,s)}static resolveCached(t,e){let i=r0.get(t);if(i)for(let s=0;s<i.elts.length;s++){let o=i.elts[s];if(o.pos==e)return o}else r0.set(t,i=new hN);let r=i.elts[i.i]=ma.resolve(t,e);return i.i=(i.i+1)%dN,r}}class hN{constructor(){this.elts=[],this.i=0}}const dN=12,r0=new WeakMap;class Ic{constructor(t,e,i){this.$from=t,this.$to=e,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const pN=Object.create(null);let Qi=class Ud{constructor(t,e,i,r=Dt.none){this.type=t,this.attrs=e,this.marks=r,this.content=i||V.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,i,r=0){this.content.nodesBetween(t,e,i,r,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,i,r){return this.content.textBetween(t,e,i,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,i){return this.type==t&&Rc(this.attrs,e||t.defaultAttrs||pN)&&Dt.sameSet(this.marks,i||Dt.none)}copy(t=null){return t==this.content?this:new Ud(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new Ud(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return t==0&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,i=!1){if(t==e)return K.empty;let r=this.resolve(t),s=this.resolve(e),o=i?0:r.sharedDepth(e),a=r.start(o),u=r.node(o).content.cut(r.pos-a,s.pos-a);return new K(u,r.depth-o,s.depth-o)}replace(t,e,i){return uN(this.resolve(t),this.resolve(e),i)}nodeAt(t){for(let e=this;;){let{index:i,offset:r}=e.content.findIndex(t);if(e=e.maybeChild(i),!e)return null;if(r==t||e.isText)return e;t-=r+1}}childAfter(t){let{index:e,offset:i}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:i}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:e,offset:i}=this.content.findIndex(t);if(i<t)return{node:this.content.child(e),index:e,offset:i};let r=this.content.child(e-1);return{node:r,index:e-1,offset:i-r.nodeSize}}resolve(t){return ma.resolveCached(this,t)}resolveNoCache(t){return ma.resolve(this,t)}rangeHasMark(t,e,i){let r=!1;return e>t&&this.nodesBetween(t,e,s=>(i.isInSet(s.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),N1(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,i=V.empty,r=0,s=i.childCount){let o=this.contentMatchAt(t).matchFragment(i,r,s),a=o&&o.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(let l=r;l<s;l++)if(!this.type.allowsMarks(i.child(l).marks))return!1;return!0}canReplaceWith(t,e,i,r){if(r&&!this.type.allowsMarks(r))return!1;let s=this.contentMatchAt(t).matchType(i),o=s&&s.matchFragment(this.content,e);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Dt.none;for(let e=0;e<this.marks.length;e++){let i=this.marks[e];i.type.checkAttrs(i.attrs),t=i.addToSet(t)}if(!Dt.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(e=>e.toJSON())),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let i;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=e.marks.map(t.markFromJSON)}if(e.type=="text"){if(typeof e.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(e.text,i)}let r=V.fromJSON(t,e.content),s=t.nodeType(e.type).create(e.attrs,r,i);return s.type.checkAttrs(s.attrs),s}};Qi.prototype.text=void 0;class Lc extends Qi{constructor(t,e,i,r){if(super(t,e,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):N1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Lc(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Lc(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return t==0&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function N1(n,t){for(let e=n.length-1;e>=0;e--)t=n[e].type.name+"("+t+")";return t}class is{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let i=new gN(t,e);if(i.next==null)return is.empty;let r=F1(i);i.next&&i.err("Unexpected trailing text");let s=SN(_N(r));return vN(s,i),s}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,i=t.childCount){let r=this;for(let s=e;r&&s<i;s++)r=r.matchType(t.child(s).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!(e.isText||e.hasRequiredAttrs()))return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let i=0;i<t.next.length;i++)if(this.next[e].type==t.next[i].type)return!0;return!1}fillBefore(t,e=!1,i=0){let r=[this];function s(o,a){let l=o.matchFragment(t,i);if(l&&(!e||l.validEnd))return V.from(a.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:h,next:d}=o.next[u];if(!(h.isText||h.hasRequiredAttrs())&&r.indexOf(d)==-1){r.push(d);let g=s(d,a.concat(h));if(g)return g}}return null}return s(this,[])}findWrapping(t){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==t)return this.wrapCache[i+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let r=i.shift(),s=r.match;if(s.matchType(t)){let o=[];for(let a=r;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in e)&&(!r.type||l.validEnd)&&(i.push({match:a.contentMatch,type:a,via:r}),e[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function e(i){t.push(i);for(let r=0;r<i.next.length;r++)t.indexOf(i.next[r].next)==-1&&e(i.next[r].next)}return e(this),t.map((i,r)=>{let s=r+(i.validEnd?"*":" ")+" ";for(let o=0;o<i.next.length;o++)s+=(o?", ":"")+i.next[o].type.name+"->"+t.indexOf(i.next[o].next);return s}).join(`
`)}}is.empty=new is(!0);class gN{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function F1(n){let t=[];do t.push(mN(n));while(n.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function mN(n){let t=[];do t.push(yN(n));while(n.next&&n.next!=")"&&n.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function yN(n){let t=wN(n);for(;;)if(n.eat("+"))t={type:"plus",expr:t};else if(n.eat("*"))t={type:"star",expr:t};else if(n.eat("?"))t={type:"opt",expr:t};else if(n.eat("{"))t=bN(n,t);else break;return t}function s0(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let t=Number(n.next);return n.pos++,t}function bN(n,t){let e=s0(n),i=e;return n.eat(",")&&(n.next!="}"?i=s0(n):i=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:e,max:i,expr:t}}function xN(n,t){let e=n.nodeTypes,i=e[t];if(i)return[i];let r=[];for(let s in e){let o=e[s];o.isInGroup(t)&&r.push(o)}return r.length==0&&n.err("No node type or group '"+t+"' found"),r}function wN(n){if(n.eat("(")){let t=F1(n);return n.eat(")")||n.err("Missing closing paren"),t}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let t=xN(n,n.next).map(e=>(n.inline==null?n.inline=e.isInline:n.inline!=e.isInline&&n.err("Mixing inline and block content"),{type:"name",value:e}));return n.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function _N(n){let t=[[]];return r(s(n,0),e()),t;function e(){return t.push([])-1}function i(o,a,l){let u={term:l,to:a};return t[o].push(u),u}function r(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,u)=>l.concat(s(u,a)),[]);if(o.type=="seq")for(let l=0;;l++){let u=s(o.exprs[l],a);if(l==o.exprs.length-1)return u;r(u,a=e())}else if(o.type=="star"){let l=e();return i(a,l),r(s(o.expr,l),l),[i(l)]}else if(o.type=="plus"){let l=e();return r(s(o.expr,a),l),r(s(o.expr,l),l),[i(l)]}else{if(o.type=="opt")return[i(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let u=0;u<o.min;u++){let h=e();r(s(o.expr,l),h),l=h}if(o.max==-1)r(s(o.expr,l),l);else for(let u=o.min;u<o.max;u++){let h=e();i(l,h),r(s(o.expr,l),h),l=h}return[i(l)]}else{if(o.type=="name")return[i(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function B1(n,t){return t-n}function o0(n,t){let e=[];return i(t),e.sort(B1);function i(r){let s=n[r];if(s.length==1&&!s[0].term)return i(s[0].to);e.push(r);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&e.indexOf(l)==-1&&i(l)}}}function SN(n){let t=Object.create(null);return e(o0(n,0));function e(i){let r=[];i.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let h=0;h<r.length;h++)r[h][0]==a&&(u=r[h][1]);o0(n,l).forEach(h=>{u||r.push([a,u=[]]),u.indexOf(h)==-1&&u.push(h)})})});let s=t[i.join(",")]=new is(i.indexOf(n.length-1)>-1);for(let o=0;o<r.length;o++){let a=r[o][1].sort(B1);s.next.push({type:r[o][0],next:t[a.join(",")]||e(a)})}return s}}function vN(n,t){for(let e=0,i=[n];e<i.length;e++){let r=i[e],s=!r.validEnd,o=[];for(let a=0;a<r.next.length;a++){let{type:l,next:u}=r.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),i.indexOf(u)==-1&&i.push(u)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function z1(n){let t=Object.create(null);for(let e in n){let i=n[e];if(!i.hasDefault)return null;t[e]=i.default}return t}function H1(n,t){let e=Object.create(null);for(let i in n){let r=t&&t[i];if(r===void 0){let s=n[i];if(s.hasDefault)r=s.default;else throw new RangeError("No value supplied for attribute "+i)}e[i]=r}return e}function $1(n,t,e,i){for(let r in t)if(!(r in n))throw new RangeError(`Unsupported attribute ${r} for ${e} of type ${r}`);for(let r in n){let s=n[r];s.validate&&s.validate(t[r])}}function W1(n,t){let e=Object.create(null);if(t)for(let i in t)e[i]=new CN(n,i,t[i]);return e}let a0=class V1{constructor(t,e,i){this.name=t,this.schema=e,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=W1(t,i.attrs),this.defaultAttrs=z1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==is.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:H1(this.attrs,t)}create(t=null,e,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Qi(this,this.computeAttrs(t),V.from(e),Dt.setFrom(i))}createChecked(t=null,e,i){return e=V.from(e),this.checkContent(e),new Qi(this,this.computeAttrs(t),e,Dt.setFrom(i))}createAndFill(t=null,e,i){if(t=this.computeAttrs(t),e=V.from(e),e.size){let o=this.contentMatch.fillBefore(e);if(!o)return null;e=o.append(e)}let r=this.contentMatch.matchFragment(e),s=r&&r.fillBefore(V.empty,!0);return s?new Qi(this,t,e.append(s),Dt.setFrom(i)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let i=0;i<t.childCount;i++)if(!this.allowsMarks(t.child(i).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){$1(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let e;for(let i=0;i<t.length;i++)this.allowsMarkType(t[i].type)?e&&e.push(t[i]):e||(e=t.slice(0,i));return e?e.length?e:Dt.none:t}static compile(t,e){let i=Object.create(null);t.forEach((s,o)=>i[s]=new V1(s,e,o));let r=e.spec.topNode||"doc";if(!i[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let s in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};function kN(n,t,e){let i=e.split("|");return r=>{let s=r===null?"null":typeof r;if(i.indexOf(s)<0)throw new RangeError(`Expected value of type ${i} for attribute ${t} on type ${n}, got ${s}`)}}class CN{constructor(t,e,i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default,this.validate=typeof i.validate=="string"?kN(t,e,i.validate):i.validate}get isRequired(){return!this.hasDefault}}class Bu{constructor(t,e,i,r){this.name=t,this.rank=e,this.schema=i,this.spec=r,this.attrs=W1(t,r.attrs),this.excluded=null;let s=z1(this.attrs);this.instance=s?new Dt(this,s):null}create(t=null){return!t&&this.instance?this.instance:new Dt(this,H1(this.attrs,t))}static compile(t,e){let i=Object.create(null),r=0;return t.forEach((s,o)=>i[s]=new Bu(s,r++,e,o)),i}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}checkAttrs(t){$1(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class U1{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let e=this.spec={};for(let r in t)e[r]=t[r];e.nodes=ye.from(t.nodes),e.marks=ye.from(t.marks||{}),this.nodes=a0.compile(this.spec.nodes,this),this.marks=Bu.compile(this.spec.marks,this);let i=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let s=this.nodes[r],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=i[o]||(i[o]=is.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?l0(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let r in this.marks){let s=this.marks[r],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:l0(this,o.split(" "))}this.nodeFromJSON=r=>Qi.fromJSON(this,r),this.markFromJSON=r=>Dt.fromJSON(this,r),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,i,r){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof a0){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(e,i,r)}text(t,e){let i=this.nodes.text;return new Lc(i,i.defaultAttrs,t,Dt.setFrom(e))}mark(t,e){return typeof t=="string"&&(t=this.marks[t]),t.create(e)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function l0(n,t){let e=[];for(let i=0;i<t.length;i++){let r=t[i],s=n.marks[r],o=s;if(s)e.push(s);else for(let a in n.marks){let l=n.marks[a];(r=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(r)>-1)&&e.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[i]+"'")}return e}function MN(n){return n.tag!=null}function EN(n){return n.style!=null}let Qo=class jd{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[];let i=this.matchedStyles=[];e.forEach(r=>{if(MN(r))this.tags.push(r);else if(EN(r)){let s=/[^=]*/.exec(r.style)[0];i.indexOf(s)<0&&i.push(s),this.styles.push(r)}}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let s=t.nodes[r.node];return s.contentMatch.matchType(s)})}parse(t,e={}){let i=new u0(this,e,!1);return i.addAll(t,Dt.none,e.from,e.to),i.finish()}parseSlice(t,e={}){let i=new u0(this,e,!0);return i.addAll(t,Dt.none,e.from,e.to),K.maxOpen(i.finish())}matchTag(t,e,i){for(let r=i?this.tags.indexOf(i)+1:0;r<this.tags.length;r++){let s=this.tags[r];if(AN(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||e.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,e,i,r){for(let s=r?this.styles.indexOf(r)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(t)!=0||o.context&&!i.matchesContext(o.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=e))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(t){let e=[];function i(r){let s=r.priority==null?50:r.priority,o=0;for(;o<e.length;o++){let a=e[o];if((a.priority==null?50:a.priority)<s)break}e.splice(o,0,r)}for(let r in t.marks){let s=t.marks[r].spec.parseDOM;s&&s.forEach(o=>{i(o=f0(o)),o.mark||o.ignore||o.clearMark||(o.mark=r)})}for(let r in t.nodes){let s=t.nodes[r].spec.parseDOM;s&&s.forEach(o=>{i(o=f0(o)),o.node||o.ignore||o.mark||(o.node=r)})}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new jd(t,jd.schemaRules(t)))}};const j1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},TN={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},q1={ol:!0,ul:!0},ya=1,qd=2,ta=4;function c0(n,t,e){return t!=null?(t?ya:0)|(t==="full"?qd:0):n&&n.whitespace=="pre"?ya|qd:e&~ta}class jl{constructor(t,e,i,r,s,o){this.type=t,this.attrs=e,this.marks=i,this.solid=r,this.options=o,this.content=[],this.activeMarks=Dt.none,this.match=s||(o&ta?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(V.from(t));if(e)this.match=this.type.contentMatch.matchFragment(e);else{let i=this.type.contentMatch,r;return(r=i.findWrapping(t.type))?(this.match=i,r):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&ya)){let i=this.content[this.content.length-1],r;if(i&&i.isText&&(r=/[ \t\r\n\u000c]+$/.exec(i.text))){let s=i;i.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-r[0].length))}}let e=V.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(V.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!j1.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class u0{constructor(t,e,i){this.parser=t,this.options=e,this.isOpen=i,this.open=0,this.localPreserveWS=!1;let r=e.topNode,s,o=c0(null,e.preserveWhitespace,0)|(i?ta:0);r?s=new jl(r.type,r.attrs,Dt.none,!0,e.topMatch||r.type.contentMatch,o):i?s=new jl(null,null,Dt.none,!0,null,o):s=new jl(t.schema.topNodeType,null,Dt.none,!0,null,o),this.nodes=[s],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,e){t.nodeType==3?this.addTextNode(t,e):t.nodeType==1&&this.addElement(t,e)}addTextNode(t,e){let i=t.nodeValue,r=this.top,s=r.options&qd?"full":this.localPreserveWS||(r.options&ya)>0,{schema:o}=this.parser;if(s==="full"||r.inlineContext(t)||/[^ \t\r\n\u000c]/.test(i)){if(s)if(s==="full")i=i.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(i)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=i.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),e,!0),a[l]&&this.insertNode(o.text(a[l]),e,!/\S/.test(a[l]));i=""}else i=i.replace(/\r?\n|\r/g," ");else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){let a=r.content[r.content.length-1],l=t.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(i=i.slice(1))}i&&this.insertNode(o.text(i),e,!/\S/.test(i)),this.findInText(t)}else this.findInside(t)}addElement(t,e,i){let r=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),a;q1.hasOwnProperty(o)&&this.parser.normalizeLists&&ON(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(a=this.parser.matchTag(t,this,i));t:if(l?l.ignore:TN.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,e);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let u,h=this.needsBlock;if(j1.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),u=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,e);break t}let d=l&&l.skip?e:this.readStyles(t,e);d&&this.addAll(t,d),u&&this.sync(s),this.needsBlock=h}else{let u=this.readStyles(t,e);u&&this.addElementByRule(t,l,u,l.consuming===!1?a:void 0)}this.localPreserveWS=r}leafFallback(t,e){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),e)}ignoreFallback(t,e){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),e,!0)}readStyles(t,e){let i=t.style;if(i&&i.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let s=this.parser.matchedStyles[r],o=i.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?e=e.filter(u=>!l.clearMark(u)):e=e.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return e}addElementByRule(t,e,i,r){let s,o;if(e.node)if(o=this.parser.schema.nodes[e.node],o.isLeaf)this.insertNode(o.create(e.attrs),i,t.nodeName=="BR")||this.leafFallback(t,i);else{let l=this.enter(o,e.attrs||null,i,e.preserveWhitespace);l&&(s=!0,i=l)}else{let l=this.parser.schema.marks[e.mark];i=i.concat(l.create(e.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(r)this.addElement(t,i,r);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,i,!1));else{let l=t;typeof e.contentElement=="string"?l=t.querySelector(e.contentElement):typeof e.contentElement=="function"?l=e.contentElement(t):e.contentElement&&(l=e.contentElement),this.findAround(t,l,!0),this.addAll(l,i),this.findAround(t,l,!1)}s&&this.sync(a)&&this.open--}addAll(t,e,i,r){let s=i||0;for(let o=i?t.childNodes[i]:t.firstChild,a=r==null?null:t.childNodes[r];o!=a;o=o.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(o,e);this.findAtPoint(t,s)}findPlace(t,e,i){let r,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],u=l.findWrapping(t);if(u&&(!r||r.length>u.length+a)&&(r=u,s=l,!u.length))break;if(l.solid){if(i)break;a+=2}}if(!r)return null;this.sync(s);for(let o=0;o<r.length;o++)e=this.enterInner(r[o],null,e,!1);return e}insertNode(t,e,i){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(e=this.enterInner(s,null,e))}let r=this.findPlace(t,e,i);if(r){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let o=Dt.none;for(let a of r.concat(t.marks))(s.type?s.type.allowsMarkType(a.type):h0(a.type,t.type))&&(o=a.addToSet(o));return s.content.push(t.mark(o)),!0}return!1}enter(t,e,i,r){let s=this.findPlace(t.create(e),i,!1);return s&&(s=this.enterInner(t,e,i,!0,r)),s}enterInner(t,e,i,r=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let a=c0(t,s,o.options);o.options&ta&&o.content.length==0&&(a|=ta);let l=Dt.none;return i=i.filter(u=>(o.type?o.type.allowsMarkType(u.type):h0(u.type,t))?(l=u.addToSet(l),!1):!0),this.nodes.push(new jl(t,e,l,r,null,a)),this.open++,i}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let e=this.open;e>=0;e--){if(this.nodes[e]==t)return this.open=e,!0;this.localPreserveWS&&(this.nodes[e].options|=ya)}return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let i=this.nodes[e].content;for(let r=i.length-1;r>=0;r--)t+=i[r].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==t&&this.find[i].offset==e&&(this.find[i].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].pos==null&&t.nodeType==1&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,i){if(t!=e&&this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&t.nodeType==1&&t.contains(this.find[r].node)&&e.compareDocumentPosition(this.find[r].node)&(i?2:4)&&(this.find[r].pos=this.currentPos)}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),i=this.options.context,r=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),s=-(i?i.depth+1:0)+(r?0:1),o=(a,l)=>{for(;a>=0;a--){let u=e[a];if(u==""){if(a==e.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let h=l>0||l==0&&r?this.nodes[l].type:i&&l>=s?i.node(l-s).type:null;if(!h||h.name!=u&&!h.isInGroup(u))return!1;l--}}return!0};return o(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let i=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let e in this.parser.schema.nodes){let i=this.parser.schema.nodes[e];if(i.isTextblock&&i.defaultAttrs)return i}}}function ON(n){for(let t=n.firstChild,e=null;t;t=t.nextSibling){let i=t.nodeType==1?t.nodeName.toLowerCase():null;i&&q1.hasOwnProperty(i)&&e?(e.appendChild(t),t=e):i=="li"?e=t:i&&(e=null)}}function AN(n,t){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,t)}function f0(n){let t={};for(let e in n)t[e]=n[e];return t}function h0(n,t){let e=t.schema.nodes;for(let i in e){let r=e[i];if(!r.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:h}=a.edge(l);if(u==t||s.indexOf(h)<0&&o(h))return!0}};if(o(r.contentMatch))return!0}}class hs{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},i){i||(i=Fh(e).createDocumentFragment());let r=i,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let u=o.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(s[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)r=s.pop()[1];for(;l<o.marks.length;){let u=o.marks[l++],h=this.serializeMark(u,o.isInline,e);h&&(s.push([u,r]),r.appendChild(h.dom),r=h.contentDOM||h.dom)}}r.appendChild(this.serializeNodeInner(o,e))}),i}serializeNodeInner(t,e){let{dom:i,contentDOM:r}=xc(Fh(e),this.nodes[t.type.name](t),null,t.attrs);if(r){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,r)}return i}serializeNode(t,e={}){let i=this.serializeNodeInner(t,e);for(let r=t.marks.length-1;r>=0;r--){let s=this.serializeMark(t.marks[r],t.isInline,e);s&&((s.contentDOM||s.dom).appendChild(i),i=s.dom)}return i}serializeMark(t,e,i={}){let r=this.marks[t.type.name];return r&&xc(Fh(i),r(t,e),null,t.attrs)}static renderSpec(t,e,i=null,r){return xc(t,e,i,r)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new hs(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=d0(t.nodes);return e.text||(e.text=i=>i.text),e}static marksFromSchema(t){return d0(t.marks)}}function d0(n){let t={};for(let e in n){let i=n[e].spec.toDOM;i&&(t[e]=i)}return t}function Fh(n){return n.document||window.document}const p0=new WeakMap;function RN(n){let t=p0.get(n);return t===void 0&&p0.set(n,t=DN(n)),t}function DN(n){let t=null;function e(i){if(i&&typeof i=="object")if(Array.isArray(i))if(typeof i[0]=="string")t||(t=[]),t.push(i);else for(let r=0;r<i.length;r++)e(i[r]);else for(let r in i)e(i[r])}return e(n),t}function xc(n,t,e,i){if(typeof t=="string")return{dom:n.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let r=t[0],s;if(typeof r!="string")throw new RangeError("Invalid array passed to renderSpec");if(i&&(s=RN(i))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=r.indexOf(" ");o>0&&(e=r.slice(0,o),r=r.slice(o+1));let a,l=e?n.createElementNS(e,r):n.createElement(r),u=t[1],h=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){h=2;for(let d in u)if(u[d]!=null){let g=d.indexOf(" ");g>0?l.setAttributeNS(d.slice(0,g),d.slice(g+1),u[d]):d=="style"&&l.style?l.style.cssText=u[d]:l.setAttribute(d,u[d])}}for(let d=h;d<t.length;d++){let g=t[d];if(g===0){if(d<t.length-1||d>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:m,contentDOM:y}=xc(n,g,e,i);if(l.appendChild(m),y){if(a)throw new RangeError("Multiple content holes");a=y}}}return{dom:l,contentDOM:a}}const K1=65535,J1=Math.pow(2,16);function PN(n,t){return n+t*J1}function g0(n){return n&K1}function IN(n){return(n-(n&K1))/J1}const X1=1,G1=2,wc=4,Y1=8;class Kd{constructor(t,e,i){this.pos=t,this.delInfo=e,this.recover=i}get deleted(){return(this.delInfo&Y1)>0}get deletedBefore(){return(this.delInfo&(X1|wc))>0}get deletedAfter(){return(this.delInfo&(G1|wc))>0}get deletedAcross(){return(this.delInfo&wc)>0}}class ln{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&ln.empty)return ln.empty}recover(t){let e=0,i=g0(t);if(!this.inverted)for(let r=0;r<i;r++)e+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[i*3]+e+IN(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,i){let r=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let u=this.ranges[a+s],h=this.ranges[a+o],d=l+u;if(t<=d){let g=u?t==l?-1:t==d?1:e:e,m=l+r+(g<0?0:h);if(i)return m;let y=t==(e<0?l:d)?null:PN(a/3,t-l),x=t==l?G1:t==d?X1:wc;return(e<0?t!=l:t!=d)&&(x|=Y1),new Kd(m,x,y)}r+=h-u}return i?t+r:new Kd(t+r,0,null)}touches(t,e){let i=0,r=g0(e),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>t)break;let u=this.ranges[a+s],h=l+u;if(t<=h&&a==r*3)return!0;i+=this.ranges[a+o]-u}return!1}forEach(t){let e=this.inverted?2:1,i=this.inverted?1:2;for(let r=0,s=0;r<this.ranges.length;r+=3){let o=this.ranges[r],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),u=this.ranges[r+e],h=this.ranges[r+i];t(a,a+u,l,l+h),s+=h-u}}invert(){return new ln(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?ln.empty:new ln(t<0?[0,-t,0]:[0,0,t])}}ln.empty=new ln([]);class ba{constructor(t,e,i=0,r=t?t.length:0){this.mirror=e,this.from=i,this.to=r,this._maps=t||[],this.ownData=!(t||e)}get maps(){return this._maps}slice(t=0,e=this.maps.length){return new ba(this._maps,this.mirror,t,e)}appendMap(t,e){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),e!=null&&this.setMirror(this._maps.length-1,e)}appendMapping(t){for(let e=0,i=this._maps.length;e<t._maps.length;e++){let r=t.getMirror(e);this.appendMap(t._maps[e],r!=null&&r<e?i+r:void 0)}}getMirror(t){if(this.mirror){for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,i=this._maps.length+t._maps.length;e>=0;e--){let r=t.getMirror(e);this.appendMap(t._maps[e].invert(),r!=null&&r>e?i-r-1:void 0)}}invert(){let t=new ba;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let i=this.from;i<this.to;i++)t=this._maps[i].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,i){let r=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(t,e);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,t=this._maps[l].recover(a.recover);continue}}r|=a.delInfo,t=a.pos}return i?t:new Kd(t,r,null)}}const Bh=Object.create(null);class Re{getMap(){return ln.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=Bh[e.stepType];if(!i)throw new RangeError(`No step type ${e.stepType} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in Bh)throw new RangeError("Duplicate use of step JSON ID "+t);return Bh[t]=e,e.prototype.jsonID=t,e}}class ne{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new ne(t,null)}static fail(t){return new ne(null,t)}static fromReplace(t,e,i,r){try{return ne.ok(t.replace(e,i,r))}catch(s){if(s instanceof Dc)return ne.fail(s.message);throw s}}}function tg(n,t,e){let i=[];for(let r=0;r<n.childCount;r++){let s=n.child(r);s.content.size&&(s=s.copy(tg(s.content,t,s))),s.isInline&&(s=t(s,e,r)),i.push(s)}return V.fromArray(i)}class qi extends Re{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=t.resolve(this.from),r=i.node(i.sharedDepth(this.to)),s=new K(tg(e.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),r),e.openStart,e.openEnd);return ne.fromReplace(t,this.from,this.to,s)}invert(){return new Yn(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new qi(e.pos,i.pos,this.mark)}merge(t){return t instanceof qi&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new qi(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new qi(e.from,e.to,t.markFromJSON(e.mark))}}Re.jsonID("addMark",qi);class Yn extends Re{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=new K(tg(e.content,r=>r.mark(this.mark.removeFromSet(r.marks)),t),e.openStart,e.openEnd);return ne.fromReplace(t,this.from,this.to,i)}invert(){return new qi(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new Yn(e.pos,i.pos,this.mark)}merge(t){return t instanceof Yn&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Yn(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Yn(e.from,e.to,t.markFromJSON(e.mark))}}Re.jsonID("removeMark",Yn);class Ki extends Re{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return ne.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return ne.fromReplace(t,this.pos,this.pos+1,new K(V.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let i=this.mark.addToSet(e.marks);if(i.length==e.marks.length){for(let r=0;r<e.marks.length;r++)if(!e.marks[r].isInSet(i))return new Ki(this.pos,e.marks[r]);return new Ki(this.pos,this.mark)}}return new rs(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new Ki(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ki(e.pos,t.markFromJSON(e.mark))}}Re.jsonID("addNodeMark",Ki);class rs extends Re{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return ne.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return ne.fromReplace(t,this.pos,this.pos+1,new K(V.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return!e||!this.mark.isInSet(e.marks)?this:new Ki(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new rs(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new rs(e.pos,t.markFromJSON(e.mark))}}Re.jsonID("removeNodeMark",rs);class le extends Re{constructor(t,e,i,r=!1){super(),this.from=t,this.to=e,this.slice=i,this.structure=r}apply(t){return this.structure&&Jd(t,this.from,this.to)?ne.fail("Structure replace would overwrite content"):ne.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new ln([this.from,this.to-this.from,this.slice.size])}invert(t){return new le(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deletedAcross&&i.deletedAcross?null:new le(e.pos,Math.max(e.pos,i.pos),this.slice,this.structure)}merge(t){if(!(t instanceof le)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let e=this.slice.size+t.slice.size==0?K.empty:new K(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new le(this.from,this.to+(t.to-t.from),e,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let e=this.slice.size+t.slice.size==0?K.empty:new K(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new le(t.from,this.to,e,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new le(e.from,e.to,K.fromJSON(t,e.slice),!!e.structure)}}Re.jsonID("replace",le);class fe extends Re{constructor(t,e,i,r,s,o,a=!1){super(),this.from=t,this.to=e,this.gapFrom=i,this.gapTo=r,this.slice=s,this.insert=o,this.structure=a}apply(t){if(this.structure&&(Jd(t,this.from,this.gapFrom)||Jd(t,this.gapTo,this.to)))return ne.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return ne.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,e.content);return i?ne.fromReplace(t,this.from,this.to,i):ne.fail("Content does not fit in gap")}getMap(){return new ln([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new fe(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1),r=this.from==this.gapFrom?e.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?i.pos:t.map(this.gapTo,1);return e.deletedAcross&&i.deletedAcross||r<e.pos||s>i.pos?null:new fe(e.pos,i.pos,r,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number"||typeof e.gapFrom!="number"||typeof e.gapTo!="number"||typeof e.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new fe(e.from,e.to,e.gapFrom,e.gapTo,K.fromJSON(t,e.slice),e.insert,!!e.structure)}}Re.jsonID("replaceAround",fe);function Jd(n,t,e){let i=n.resolve(t),r=e-t,s=i.depth;for(;r>0&&s>0&&i.indexAfter(s)==i.node(s).childCount;)s--,r--;if(r>0){let o=i.node(s).maybeChild(i.indexAfter(s));for(;r>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,r--}}return!1}function LN(n,t,e,i){let r=[],s=[],o,a;n.doc.nodesBetween(t,e,(l,u,h)=>{if(!l.isInline)return;let d=l.marks;if(!i.isInSet(d)&&h.type.allowsMarkType(i.type)){let g=Math.max(u,t),m=Math.min(u+l.nodeSize,e),y=i.addToSet(d);for(let x=0;x<d.length;x++)d[x].isInSet(y)||(o&&o.to==g&&o.mark.eq(d[x])?o.to=m:r.push(o=new Yn(g,m,d[x])));a&&a.to==g?a.to=m:s.push(a=new qi(g,m,i))}}),r.forEach(l=>n.step(l)),s.forEach(l=>n.step(l))}function NN(n,t,e,i){let r=[],s=0;n.doc.nodesBetween(t,e,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(i instanceof Bu){let u=o.marks,h;for(;h=i.isInSet(u);)(l||(l=[])).push(h),u=h.removeFromSet(u)}else i?i.isInSet(o.marks)&&(l=[i]):l=o.marks;if(l&&l.length){let u=Math.min(a+o.nodeSize,e);for(let h=0;h<l.length;h++){let d=l[h],g;for(let m=0;m<r.length;m++){let y=r[m];y.step==s-1&&d.eq(r[m].style)&&(g=y)}g?(g.to=u,g.step=s):r.push({style:d,from:Math.max(a,t),to:u,step:s})}}}),r.forEach(o=>n.step(new Yn(o.from,o.to,o.style)))}function eg(n,t,e,i=e.contentMatch,r=!0){let s=n.doc.nodeAt(t),o=[],a=t+1;for(let l=0;l<s.childCount;l++){let u=s.child(l),h=a+u.nodeSize,d=i.matchType(u.type);if(!d)o.push(new le(a,h,K.empty));else{i=d;for(let g=0;g<u.marks.length;g++)e.allowsMarkType(u.marks[g].type)||n.step(new Yn(a,h,u.marks[g]));if(r&&u.isText&&e.whitespace!="pre"){let g,m=/\r?\n|\r/g,y;for(;g=m.exec(u.text);)y||(y=new K(V.from(e.schema.text(" ",e.allowedMarks(u.marks))),0,0)),o.push(new le(a+g.index,a+g.index+g[0].length,y))}}a=h}if(!i.validEnd){let l=i.fillBefore(V.empty,!0);n.replace(a,a,new K(l,0,0))}for(let l=o.length-1;l>=0;l--)n.step(o[l])}function FN(n,t,e){return(t==0||n.canReplace(t,n.childCount))&&(e==n.childCount||n.canReplace(0,e))}function so(n){let e=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let i=n.depth,r=0,s=0;;--i){let o=n.$from.node(i),a=n.$from.index(i)+r,l=n.$to.indexAfter(i)-s;if(i<n.depth&&o.canReplace(a,l,e))return i;if(i==0||o.type.spec.isolating||!FN(o,a,l))break;a&&(r=1),l<o.childCount&&(s=1)}return null}function BN(n,t,e){let{$from:i,$to:r,depth:s}=t,o=i.before(s+1),a=r.after(s+1),l=o,u=a,h=V.empty,d=0;for(let y=s,x=!1;y>e;y--)x||i.index(y)>0?(x=!0,h=V.from(i.node(y).copy(h)),d++):l--;let g=V.empty,m=0;for(let y=s,x=!1;y>e;y--)x||r.after(y+1)<r.end(y)?(x=!0,g=V.from(r.node(y).copy(g)),m++):u++;n.step(new fe(l,u,o,a,new K(h.append(g),d,m),h.size-d,!0))}function ng(n,t,e=null,i=n){let r=zN(n,t),s=r&&HN(i,t);return s?r.map(m0).concat({type:t,attrs:e}).concat(s.map(m0)):null}function m0(n){return{type:n,attrs:null}}function zN(n,t){let{parent:e,startIndex:i,endIndex:r}=n,s=e.contentMatchAt(i).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return e.canReplaceWith(i,r,o)?s:null}function HN(n,t){let{parent:e,startIndex:i,endIndex:r}=n,s=e.child(i),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:t).contentMatch;for(let u=i;l&&u<r;u++)l=l.matchType(e.child(u).type);return!l||!l.validEnd?null:o}function $N(n,t,e){let i=V.empty;for(let o=e.length-1;o>=0;o--){if(i.size){let a=e[o].type.contentMatch.matchFragment(i);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=V.from(e[o].type.create(e[o].attrs,i))}let r=t.start,s=t.end;n.step(new fe(r,s,r,s,new K(i,0,0),e.length,!0))}function WN(n,t,e,i,r){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(t,e,(o,a)=>{let l=typeof r=="function"?r(o):r;if(o.isTextblock&&!o.hasMarkup(i,l)&&VN(n.doc,n.mapping.slice(s).map(a),i)){let u=null;if(i.schema.linebreakReplacement){let m=i.whitespace=="pre",y=!!i.contentMatch.matchType(i.schema.linebreakReplacement);m&&!y?u=!1:!m&&y&&(u=!0)}u===!1&&Q1(n,o,a,s),eg(n,n.mapping.slice(s).map(a,1),i,void 0,u===null);let h=n.mapping.slice(s),d=h.map(a,1),g=h.map(a+o.nodeSize,1);return n.step(new fe(d,g,d+1,g-1,new K(V.from(i.create(l,null,o.marks)),0,0),1,!0)),u===!0&&Z1(n,o,a,s),!1}})}function Z1(n,t,e,i){t.forEach((r,s)=>{if(r.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(r.text);){let l=n.mapping.slice(i).map(e+1+s+o.index);n.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function Q1(n,t,e,i){t.forEach((r,s)=>{if(r.type==r.type.schema.linebreakReplacement){let o=n.mapping.slice(i).map(e+1+s);n.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function VN(n,t,e){let i=n.resolve(t),r=i.index();return i.parent.canReplaceWith(r,r+1,e)}function UN(n,t,e,i,r){let s=n.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");e||(e=s.type);let o=e.create(i,null,r||s.marks);if(s.isLeaf)return n.replaceWith(t,t+s.nodeSize,o);if(!e.validContent(s.content))throw new RangeError("Invalid content for node type "+e.name);n.step(new fe(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new K(V.from(o),0,0),1,!0))}function ki(n,t,e=1,i){let r=n.resolve(t),s=r.depth-e,o=i&&i[i.length-1]||r.parent;if(s<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!o.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let u=r.depth-1,h=e-2;u>s;u--,h--){let d=r.node(u),g=r.index(u);if(d.type.spec.isolating)return!1;let m=d.content.cutByIndex(g,d.childCount),y=i&&i[h+1];y&&(m=m.replaceChild(0,y.type.create(y.attrs)));let x=i&&i[h]||d;if(!d.canReplace(g+1,d.childCount)||!x.type.validContent(m))return!1}let a=r.indexAfter(s),l=i&&i[0];return r.node(s).canReplaceWith(a,a,l?l.type:r.node(s+1).type)}function jN(n,t,e=1,i){let r=n.doc.resolve(t),s=V.empty,o=V.empty;for(let a=r.depth,l=r.depth-e,u=e-1;a>l;a--,u--){s=V.from(r.node(a).copy(s));let h=i&&i[u];o=V.from(h?h.type.create(h.attrs,o):r.node(a).copy(o))}n.step(new le(t,t,new K(s.append(o),e,e),!0))}function ur(n,t){let e=n.resolve(t),i=e.index();return tS(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(i,i+1)}function qN(n,t){t.content.size||n.type.compatibleContent(t.type);let e=n.contentMatchAt(n.childCount),{linebreakReplacement:i}=n.type.schema;for(let r=0;r<t.childCount;r++){let s=t.child(r),o=s.type==i?n.type.schema.nodes.text:s.type;if(e=e.matchType(o),!e||!n.type.allowsMarks(s.marks))return!1}return e.validEnd}function tS(n,t){return!!(n&&t&&!n.isLeaf&&qN(n,t))}function zu(n,t,e=-1){let i=n.resolve(t);for(let r=i.depth;;r--){let s,o,a=i.index(r);if(r==i.depth?(s=i.nodeBefore,o=i.nodeAfter):e>0?(s=i.node(r+1),a++,o=i.node(r).maybeChild(a)):(s=i.node(r).maybeChild(a-1),o=i.node(r+1)),s&&!s.isTextblock&&tS(s,o)&&i.node(r).canReplace(a,a+1))return t;if(r==0)break;t=e<0?i.before(r):i.after(r)}}function KN(n,t,e){let i=null,{linebreakReplacement:r}=n.doc.type.schema,s=n.doc.resolve(t-e),o=s.node().type;if(r&&o.inlineContent){let h=o.whitespace=="pre",d=!!o.contentMatch.matchType(r);h&&!d?i=!1:!h&&d&&(i=!0)}let a=n.steps.length;if(i===!1){let h=n.doc.resolve(t+e);Q1(n,h.node(),h.before(),a)}o.inlineContent&&eg(n,t+e-1,o,s.node().contentMatchAt(s.index()),i==null);let l=n.mapping.slice(a),u=l.map(t-e);if(n.step(new le(u,l.map(t+e,-1),K.empty,!0)),i===!0){let h=n.doc.resolve(u);Z1(n,h.node(),h.before(),n.steps.length)}return n}function JN(n,t,e){let i=n.resolve(t);if(i.parent.canReplaceWith(i.index(),i.index(),e))return t;if(i.parentOffset==0)for(let r=i.depth-1;r>=0;r--){let s=i.index(r);if(i.node(r).canReplaceWith(s,s,e))return i.before(r+1);if(s>0)return null}if(i.parentOffset==i.parent.content.size)for(let r=i.depth-1;r>=0;r--){let s=i.indexAfter(r);if(i.node(r).canReplaceWith(s,s,e))return i.after(r+1);if(s<i.node(r).childCount)return null}return null}function eS(n,t,e){let i=n.resolve(t);if(!e.content.size)return t;let r=e.content;for(let s=0;s<e.openStart;s++)r=r.firstChild.content;for(let s=1;s<=(e.openStart==0&&e.size?2:1);s++)for(let o=i.depth;o>=0;o--){let a=o==i.depth?0:i.pos<=(i.start(o+1)+i.end(o+1))/2?-1:1,l=i.index(o)+(a>0?1:0),u=i.node(o),h=!1;if(s==1)h=u.canReplace(l,l,r);else{let d=u.contentMatchAt(l).findWrapping(r.firstChild.type);h=d&&u.canReplaceWith(l,l,d[0])}if(h)return a==0?i.pos:a<0?i.before(o+1):i.after(o+1)}return null}function Hu(n,t,e=t,i=K.empty){if(t==e&&!i.size)return null;let r=n.resolve(t),s=n.resolve(e);return nS(r,s,i)?new le(t,e,i):new XN(r,s,i).fit()}function nS(n,t,e){return!e.openStart&&!e.openEnd&&n.start()==t.start()&&n.parent.canReplace(n.index(),t.index(),e.content)}class XN{constructor(t,e,i){this.$from=t,this.$to=e,this.unplaced=i,this.frontier=[],this.placed=V.empty;for(let r=0;r<=t.depth;r++){let s=t.node(r);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(r))})}for(let r=t.depth;r>0;r--)this.placed=V.from(t.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(t<0?this.$to:i.doc.resolve(t));if(!r)return null;let s=this.placed,o=i.depth,a=r.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new K(s,o,a);return t>-1?new fe(i.pos,t,this.$to.pos,this.$to.end(),l,e):l.size||i.pos!=this.$to.pos?new le(i.pos,r.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,i=0,r=this.unplaced.openEnd;i<t;i++){let s=e.firstChild;if(e.childCount>1&&(r=0),s.type.spec.isolating&&r<=i){t=i;break}e=s.content}for(let e=1;e<=2;e++)for(let i=e==1?t:this.unplaced.openStart;i>=0;i--){let r,s=null;i?(s=zh(this.unplaced.content,i-1).firstChild,r=s.content):r=this.unplaced.content;let o=r.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],h,d=null;if(e==1&&(o?u.matchType(o.type)||(d=u.fillBefore(V.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:i,frontierDepth:a,parent:s,inject:d};if(e==2&&o&&(h=u.findWrapping(o.type)))return{sliceDepth:i,frontierDepth:a,parent:s,wrap:h};if(s&&u.matchType(s.type))break}}}openMore(){let{content:t,openStart:e,openEnd:i}=this.unplaced,r=zh(t,e);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new K(t,e+1,Math.max(i,r.size+e>=t.size-i?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:i}=this.unplaced,r=zh(t,e);if(r.childCount<=1&&e>0){let s=t.size-e<=e+r.size;this.unplaced=new K($o(t,e-1,1),e-1,s?e-1:i)}else this.unplaced=new K($o(t,e,1),e,i)}placeNodes({sliceDepth:t,frontierDepth:e,parent:i,inject:r,wrap:s}){for(;this.depth>e;)this.closeFrontierNode();if(s)for(let x=0;x<s.length;x++)this.openFrontierNode(s[x]);let o=this.unplaced,a=i?i.content:o.content,l=o.openStart-t,u=0,h=[],{match:d,type:g}=this.frontier[e];if(r){for(let x=0;x<r.childCount;x++)h.push(r.child(x));d=d.matchFragment(r)}let m=a.size+t-(o.content.size-o.openEnd);for(;u<a.childCount;){let x=a.child(u),w=d.matchType(x.type);if(!w)break;u++,(u>1||l==0||x.content.size)&&(d=w,h.push(iS(x.mark(g.allowedMarks(x.marks)),u==1?l:0,u==a.childCount?m:-1)))}let y=u==a.childCount;y||(m=-1),this.placed=Wo(this.placed,e,V.from(h)),this.frontier[e].match=d,y&&m<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let x=0,w=a;x<m;x++){let v=w.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),w=v.content}this.unplaced=y?t==0?K.empty:new K($o(o.content,t-1,1),t-1,m<0?o.openEnd:t-1):new K($o(o.content,t,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],e;if(!t.type.isTextblock||!Hh(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:i}=this.$to,r=this.$to.after(i);for(;i>1&&r==this.$to.end(--i);)++r;return r}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:i,type:r}=this.frontier[e],s=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),o=Hh(t,e,r,i,s);if(o){for(let a=e-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],h=Hh(t,a,u,l,!0);if(!h||h.childCount)continue t}return{depth:e,fit:o,move:s?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=Wo(this.placed,e.depth,e.fit)),t=e.move;for(let i=e.depth+1;i<=t.depth;i++){let r=t.node(i),s=r.type.contentMatch.fillBefore(r.content,!0,t.index(i));this.openFrontierNode(r.type,r.attrs,s)}return t}openFrontierNode(t,e=null,i){let r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=Wo(this.placed,this.depth,V.from(t.create(e,i))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(V.empty,!0);e.childCount&&(this.placed=Wo(this.placed,this.frontier.length,e))}}function $o(n,t,e){return t==0?n.cutByIndex(e,n.childCount):n.replaceChild(0,n.firstChild.copy($o(n.firstChild.content,t-1,e)))}function Wo(n,t,e){return t==0?n.append(e):n.replaceChild(n.childCount-1,n.lastChild.copy(Wo(n.lastChild.content,t-1,e)))}function zh(n,t){for(let e=0;e<t;e++)n=n.firstChild.content;return n}function iS(n,t,e){if(t<=0)return n;let i=n.content;return t>1&&(i=i.replaceChild(0,iS(i.firstChild,t-1,i.childCount==1?e-1:0))),t>0&&(i=n.type.contentMatch.fillBefore(i).append(i),e<=0&&(i=i.append(n.type.contentMatch.matchFragment(i).fillBefore(V.empty,!0)))),n.copy(i)}function Hh(n,t,e,i,r){let s=n.node(t),o=r?n.indexAfter(t):n.index(t);if(o==s.childCount&&!e.compatibleContent(s.type))return null;let a=i.fillBefore(s.content,!0,o);return a&&!GN(e,s.content,o)?a:null}function GN(n,t,e){for(let i=e;i<t.childCount;i++)if(!n.allowsMarks(t.child(i).marks))return!0;return!1}function YN(n){return n.spec.defining||n.spec.definingForContent}function ZN(n,t,e,i){if(!i.size)return n.deleteRange(t,e);let r=n.doc.resolve(t),s=n.doc.resolve(e);if(nS(r,s,i))return n.step(new le(t,e,i));let o=sS(r,s);o[o.length-1]==0&&o.pop();let a=-(r.depth+1);o.unshift(a);for(let g=r.depth,m=r.pos-1;g>0;g--,m--){let y=r.node(g).type.spec;if(y.defining||y.definingAsContext||y.isolating)break;o.indexOf(g)>-1?a=g:r.before(g)==m&&o.splice(1,0,-g)}let l=o.indexOf(a),u=[],h=i.openStart;for(let g=i.content,m=0;;m++){let y=g.firstChild;if(u.push(y),m==i.openStart)break;g=y.content}for(let g=h-1;g>=0;g--){let m=u[g],y=YN(m.type);if(y&&!m.sameMarkup(r.node(Math.abs(a)-1)))h=g;else if(y||!m.type.isTextblock)break}for(let g=i.openStart;g>=0;g--){let m=(g+h+1)%(i.openStart+1),y=u[m];if(y)for(let x=0;x<o.length;x++){let w=o[(x+l)%o.length],v=!0;w<0&&(v=!1,w=-w);let E=r.node(w-1),O=r.index(w-1);if(E.canReplaceWith(O,O,y.type,y.marks))return n.replace(r.before(w),v?s.after(w):e,new K(rS(i.content,0,i.openStart,m),m,i.openEnd))}}let d=n.steps.length;for(let g=o.length-1;g>=0&&(n.replace(t,e,i),!(n.steps.length>d));g--){let m=o[g];m<0||(t=r.before(m),e=s.after(m))}}function rS(n,t,e,i,r){if(t<e){let s=n.firstChild;n=n.replaceChild(0,s.copy(rS(s.content,t+1,e,i,s)))}if(t>i){let s=r.contentMatchAt(0),o=s.fillBefore(n).append(n);n=o.append(s.matchFragment(o).fillBefore(V.empty,!0))}return n}function QN(n,t,e,i){if(!i.isInline&&t==e&&n.doc.resolve(t).parent.content.size){let r=JN(n.doc,t,i.type);r!=null&&(t=e=r)}n.replaceRange(t,e,new K(V.from(i),0,0))}function t2(n,t,e){let i=n.doc.resolve(t),r=n.doc.resolve(e),s=sS(i,r);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||i.node(a).type.contentMatch.validEnd)return n.delete(i.start(a),r.end(a));if(a>0&&(l||i.node(a-1).canReplace(i.index(a-1),r.indexAfter(a-1))))return n.delete(i.before(a),r.after(a))}for(let o=1;o<=i.depth&&o<=r.depth;o++)if(t-i.start(o)==i.depth-o&&e>i.end(o)&&r.end(o)-e!=r.depth-o&&i.start(o-1)==r.start(o-1)&&i.node(o-1).canReplace(i.index(o-1),r.index(o-1)))return n.delete(i.before(o),e);n.delete(t,e)}function sS(n,t){let e=[],i=Math.min(n.depth,t.depth);for(let r=i;r>=0;r--){let s=n.start(r);if(s<n.pos-(n.depth-r)||t.end(r)>t.pos+(t.depth-r)||n.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(s==t.start(r)||r==n.depth&&r==t.depth&&n.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==s-1)&&e.push(r)}return e}class Hs extends Re{constructor(t,e,i){super(),this.pos=t,this.attr=e,this.value=i}apply(t){let e=t.nodeAt(this.pos);if(!e)return ne.fail("No node at attribute step's position");let i=Object.create(null);for(let s in e.attrs)i[s]=e.attrs[s];i[this.attr]=this.value;let r=e.type.create(i,null,e.marks);return ne.fromReplace(t,this.pos,this.pos+1,new K(V.from(r),0,e.isLeaf?0:1))}getMap(){return ln.empty}invert(t){return new Hs(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new Hs(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.pos!="number"||typeof e.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Hs(e.pos,e.attr,e.value)}}Re.jsonID("attr",Hs);class xa extends Re{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let r in t.attrs)e[r]=t.attrs[r];e[this.attr]=this.value;let i=t.type.create(e,t.content,t.marks);return ne.ok(i)}getMap(){return ln.empty}invert(t){return new xa(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new xa(e.attr,e.value)}}Re.jsonID("docAttr",xa);let js=class extends Error{};js=function n(t){let e=Error.call(this,t);return e.__proto__=n.prototype,e};js.prototype=Object.create(Error.prototype);js.prototype.constructor=js;js.prototype.name="TransformError";class oS{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new ba}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new js(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}changedRange(){let t=1e9,e=-1e9;for(let i=0;i<this.mapping.maps.length;i++){let r=this.mapping.maps[i];i&&(t=r.map(t,1),e=r.map(e,-1)),r.forEach((s,o,a,l)=>{t=Math.min(t,a),e=Math.max(e,l)})}return t==1e9?null:{from:t,to:e}}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,i=K.empty){let r=Hu(this.doc,t,e,i);return r&&this.step(r),this}replaceWith(t,e,i){return this.replace(t,e,new K(V.from(i),0,0))}delete(t,e){return this.replace(t,e,K.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,i){return ZN(this,t,e,i),this}replaceRangeWith(t,e,i){return QN(this,t,e,i),this}deleteRange(t,e){return t2(this,t,e),this}lift(t,e){return BN(this,t,e),this}join(t,e=1){return KN(this,t,e),this}wrap(t,e){return $N(this,t,e),this}setBlockType(t,e=t,i,r=null){return WN(this,t,e,i,r),this}setNodeMarkup(t,e,i=null,r){return UN(this,t,e,i,r),this}setNodeAttribute(t,e,i){return this.step(new Hs(t,e,i)),this}setDocAttribute(t,e){return this.step(new xa(t,e)),this}addNodeMark(t,e){return this.step(new Ki(t,e)),this}removeNodeMark(t,e){let i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at position "+t);if(e instanceof Dt)e.isInSet(i.marks)&&this.step(new rs(t,e));else{let r=i.marks,s,o=[];for(;s=e.isInSet(r);)o.push(new rs(t,s)),r=s.removeFromSet(r);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(t,e=1,i){return jN(this,t,e,i),this}addMark(t,e,i){return LN(this,t,e,i),this}removeMark(t,e,i){return NN(this,t,e,i),this}clearIncompatible(t,e,i){return eg(this,t,e,i),this}}const $h=Object.create(null);class dt{constructor(t,e,i){this.$anchor=t,this.$head=e,this.ranges=i||[new e2(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=K.empty){let i=e.content.lastChild,r=null;for(let a=0;a<e.openEnd;a++)r=i,i=i.lastChild;let s=t.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:u}=o[a],h=t.mapping.slice(s);t.replaceRange(h.map(l.pos),h.map(u.pos),a?K.empty:e),a==0&&x0(t,s,(i?i.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(t,e){let i=t.steps.length,r=this.ranges;for(let s=0;s<r.length;s++){let{$from:o,$to:a}=r[s],l=t.mapping.slice(i),u=l.map(o.pos),h=l.map(a.pos);s?t.deleteRange(u,h):(t.replaceRangeWith(u,h,e),x0(t,i,e.isInline?-1:1))}}static findFrom(t,e,i=!1){let r=t.parent.inlineContent?new st(t):Is(t.node(0),t.parent,t.pos,t.index(),e,i);if(r)return r;for(let s=t.depth-1;s>=0;s--){let o=e<0?Is(t.node(0),t.node(s),t.before(s+1),t.index(s),e,i):Is(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,e,i);if(o)return o}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new un(t.node(0))}static atStart(t){return Is(t,t,0,0,1)||new un(t)}static atEnd(t){return Is(t,t,t.content.size,t.childCount,-1)||new un(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=$h[e.type];if(!i)throw new RangeError(`No selection type ${e.type} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in $h)throw new RangeError("Duplicate use of selection JSON ID "+t);return $h[t]=e,e.prototype.jsonID=t,e}getBookmark(){return st.between(this.$anchor,this.$head).getBookmark()}}dt.prototype.visible=!0;class e2{constructor(t,e){this.$from=t,this.$to=e}}let y0=!1;function b0(n){!y0&&!n.parent.inlineContent&&(y0=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class st extends dt{constructor(t,e=t){b0(t),b0(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let i=t.resolve(e.map(this.head));if(!i.parent.inlineContent)return dt.near(i);let r=t.resolve(e.map(this.anchor));return new st(r.parent.inlineContent?r:i,i)}replace(t,e=K.empty){if(super.replace(t,e),e==K.empty){let i=this.$from.marksAcross(this.$to);i&&t.ensureMarks(i)}}eq(t){return t instanceof st&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new $u(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if(typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new st(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,i=e){let r=t.resolve(e);return new this(r,i==e?r:t.resolve(i))}static between(t,e,i){let r=t.pos-e.pos;if((!i||r)&&(i=r>=0?1:-1),!e.parent.inlineContent){let s=dt.findFrom(e,i,!0)||dt.findFrom(e,-i,!0);if(s)e=s.$head;else return dt.near(e,i)}return t.parent.inlineContent||(r==0?t=e:(t=(dt.findFrom(t,-i,!0)||dt.findFrom(t,i,!0)).$anchor,t.pos<e.pos!=r<0&&(t=e))),new st(t,e)}}dt.jsonID("text",st);class $u{constructor(t,e){this.anchor=t,this.head=e}map(t){return new $u(t.map(this.anchor),t.map(this.head))}resolve(t){return st.between(t.resolve(this.anchor),t.resolve(this.head))}}class Y extends dt{constructor(t){let e=t.nodeAfter,i=t.node(0).resolve(t.pos+e.nodeSize);super(t,i),this.node=e}map(t,e){let{deleted:i,pos:r}=e.mapResult(this.anchor),s=t.resolve(r);return i?dt.near(s):new Y(s)}content(){return new K(V.from(this.node),0,0)}eq(t){return t instanceof Y&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new ig(this.anchor)}static fromJSON(t,e){if(typeof e.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Y(t.resolve(e.anchor))}static create(t,e){return new Y(t.resolve(e))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Y.prototype.visible=!1;dt.jsonID("node",Y);class ig{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:i}=t.mapResult(this.anchor);return e?new $u(i,i):new ig(i)}resolve(t){let e=t.resolve(this.anchor),i=e.nodeAfter;return i&&Y.isSelectable(i)?new Y(e):dt.near(e)}}class un extends dt{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=K.empty){if(e==K.empty){t.delete(0,t.doc.content.size);let i=dt.atStart(t.doc);i.eq(t.selection)||t.setSelection(i)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new un(t)}map(t){return new un(t)}eq(t){return t instanceof un}getBookmark(){return n2}}dt.jsonID("all",un);const n2={map(){return this},resolve(n){return new un(n)}};function Is(n,t,e,i,r,s=!1){if(t.inlineContent)return st.create(n,e);for(let o=i-(r>0?0:1);r>0?o<t.childCount:o>=0;o+=r){let a=t.child(o);if(a.isAtom){if(!s&&Y.isSelectable(a))return Y.create(n,e-(r<0?a.nodeSize:0))}else{let l=Is(n,a,e+r,r<0?a.childCount:0,r,s);if(l)return l}e+=a.nodeSize*r}return null}function x0(n,t,e){let i=n.steps.length-1;if(i<t)return;let r=n.steps[i];if(!(r instanceof le||r instanceof fe))return;let s=n.mapping.maps[i],o;s.forEach((a,l,u,h)=>{o==null&&(o=h)}),n.setSelection(dt.near(n.doc.resolve(o),e))}const w0=1,ql=2,_0=4;class i2 extends oS{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|w0)&~ql,this.storedMarks=null,this}get selectionSet(){return(this.updated&w0)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=ql,this}ensureMarks(t){return Dt.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ql)>0}addStep(t,e){super.addStep(t,e),this.updated=this.updated&~ql,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let i=this.selection;return e&&(t=t.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||Dt.none))),i.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,i){let r=this.doc.type.schema;if(e==null)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();{if(i==null&&(i=e),!t)return this.deleteRange(e,i);let s=this.storedMarks;if(!s){let o=this.doc.resolve(e);s=i==e?o.marks():o.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(e,i,r.text(t,s)),!this.selection.empty&&this.selection.to==e+t.length&&this.setSelection(dt.near(this.selection.$to)),this}}setMeta(t,e){return this.meta[typeof t=="string"?t:t.key]=e,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=_0,this}get scrolledIntoView(){return(this.updated&_0)>0}}function S0(n,t){return!t||!n?n:n.bind(t)}class Vo{constructor(t,e,i){this.name=t,this.init=S0(e.init,i),this.apply=S0(e.apply,i)}}const r2=[new Vo("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Vo("selection",{init(n,t){return n.selection||dt.atStart(t.doc)},apply(n){return n.selection}}),new Vo("storedMarks",{init(n){return n.storedMarks||null},apply(n,t,e,i){return i.selection.$cursor?n.storedMarks:null}}),new Vo("scrollToSelection",{init(){return 0},apply(n,t){return n.scrolledIntoView?t+1:t}})];class Wh{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=r2.slice(),e&&e.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new Vo(i.key,i.spec.state,i))})}}class Fs{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=e){let r=this.config.plugins[i];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],i=this.applyInner(t),r=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=r?r[o].n:0,u=r?r[o].state:this,h=l<e.length&&a.spec.appendTransaction.call(a,l?e.slice(l):e,u,i);if(h&&i.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",t),!r){r=[];for(let d=0;d<this.config.plugins.length;d++)r.push(d<o?{state:i,n:e.length}:{state:this,n:0})}e.push(h),i=i.applyInner(h),s=!0}r&&(r[o]={state:i,n:e.length})}}if(!s)return{state:i,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new Fs(this.config),i=this.config.fields;for(let r=0;r<i.length;r++){let s=i[r];e[s.name]=s.apply(t,this[s.name],this,e)}return e}get tr(){return new i2(this)}static create(t){let e=new Wh(t.doc?t.doc.type.schema:t.schema,t.plugins),i=new Fs(e);for(let r=0;r<e.fields.length;r++)i[e.fields[r].name]=e.fields[r].init(t,i);return i}reconfigure(t){let e=new Wh(this.schema,t.plugins),i=e.fields,r=new Fs(e);for(let s=0;s<i.length;s++){let o=i[s].name;r[o]=this.hasOwnProperty(o)?this[o]:i[s].init(t,r)}return r}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map(i=>i.toJSON())),t&&typeof t=="object")for(let i in t){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=t[i],s=r.spec.state;s&&s.toJSON&&(e[i]=s.toJSON.call(r,this[r.key]))}return e}static fromJSON(t,e,i){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let r=new Wh(t.schema,t.plugins),s=new Fs(r);return r.fields.forEach(o=>{if(o.name=="doc")s.doc=Qi.fromJSON(t.schema,e.doc);else if(o.name=="selection")s.selection=dt.fromJSON(s.doc,e.selection);else if(o.name=="storedMarks")e.storedMarks&&(s.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(i)for(let a in i){let l=i[a],u=l.spec.state;if(l.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(e,a)){s[o.name]=u.fromJSON.call(l,t,e[a],s);return}}s[o.name]=o.init(t,s)}}),s}}function aS(n,t,e){for(let i in n){let r=n[i];r instanceof Function?r=r.bind(t):i=="handleDOMEvents"&&(r=aS(r,t,{})),e[i]=r}return e}class pe{constructor(t){this.spec=t,this.props={},t.props&&aS(t.props,this,this.props),this.key=t.key?t.key.key:lS("plugin")}getState(t){return t[this.key]}}const Vh=Object.create(null);function lS(n){return n in Vh?n+"$"+ ++Vh[n]:(Vh[n]=0,n+"$")}class Ze{constructor(t="key"){this.key=lS(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const be=function(n){for(var t=0;;t++)if(n=n.previousSibling,!n)return t},qs=function(n){let t=n.assignedSlot||n.parentNode;return t&&t.nodeType==11?t.host:t};let Xd=null;const bi=function(n,t,e){let i=Xd||(Xd=document.createRange());return i.setEnd(n,e??n.nodeValue.length),i.setStart(n,t||0),i},s2=function(){Xd=null},ss=function(n,t,e,i){return e&&(v0(n,t,e,i,-1)||v0(n,t,e,i,1))},o2=/^(img|br|input|textarea|hr)$/i;function v0(n,t,e,i,r){for(var s;;){if(n==e&&t==i)return!0;if(t==(r<0?0:kn(n))){let o=n.parentNode;if(!o||o.nodeType!=1||$a(n)||o2.test(n.nodeName)||n.contentEditable=="false")return!1;t=be(n)+(r<0?0:1),n=o}else if(n.nodeType==1){let o=n.childNodes[t+(r<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=r;else return!1;else n=o,t=r<0?kn(n):0}else return!1}}function kn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function a2(n,t){for(;;){if(n.nodeType==3&&t)return n;if(n.nodeType==1&&t>0){if(n.contentEditable=="false")return null;n=n.childNodes[t-1],t=kn(n)}else if(n.parentNode&&!$a(n))t=be(n),n=n.parentNode;else return null}}function l2(n,t){for(;;){if(n.nodeType==3&&t<n.nodeValue.length)return n;if(n.nodeType==1&&t<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[t],t=0}else if(n.parentNode&&!$a(n))t=be(n)+1,n=n.parentNode;else return null}}function c2(n,t,e){for(let i=t==0,r=t==kn(n);i||r;){if(n==e)return!0;let s=be(n);if(n=n.parentNode,!n)return!1;i=i&&s==0,r=r&&s==kn(n)}}function $a(n){let t;for(let e=n;e&&!(t=e.pmViewDesc);e=e.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==n||t.contentDOM==n)}const Wu=function(n){return n.focusNode&&ss(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Dr(n,t){let e=document.createEvent("Event");return e.initEvent("keydown",!0,!0),e.keyCode=n,e.key=e.code=t,e}function u2(n){let t=n.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function f2(n,t,e){if(n.caretPositionFromPoint)try{let i=n.caretPositionFromPoint(t,e);if(i)return{node:i.offsetNode,offset:Math.min(kn(i.offsetNode),i.offset)}}catch{}if(n.caretRangeFromPoint){let i=n.caretRangeFromPoint(t,e);if(i)return{node:i.startContainer,offset:Math.min(kn(i.startContainer),i.startOffset)}}}const Qn=typeof navigator<"u"?navigator:null,k0=typeof document<"u"?document:null,fr=Qn&&Qn.userAgent||"",Gd=/Edge\/(\d+)/.exec(fr),cS=/MSIE \d/.exec(fr),Yd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(fr),Ge=!!(cS||Yd||Gd),tr=cS?document.documentMode:Yd?+Yd[1]:Gd?+Gd[1]:0,Mn=!Ge&&/gecko\/(\d+)/i.test(fr);Mn&&+(/Firefox\/(\d+)/.exec(fr)||[0,0])[1];const Zd=!Ge&&/Chrome\/(\d+)/.exec(fr),ce=!!Zd,uS=Zd?+Zd[1]:0,we=!Ge&&!!Qn&&/Apple Computer/.test(Qn.vendor),Ks=we&&(/Mobile\/\w+/.test(fr)||!!Qn&&Qn.maxTouchPoints>2),vn=Ks||(Qn?/Mac/.test(Qn.platform):!1),fS=Qn?/Win/.test(Qn.platform):!1,wi=/Android \d/.test(fr),Wa=!!k0&&"webkitFontSmoothing"in k0.documentElement.style,h2=Wa?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function d2(n){let t=n.defaultView&&n.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function fi(n,t){return typeof n=="number"?n:n[t]}function p2(n){let t=n.getBoundingClientRect(),e=t.width/n.offsetWidth||1,i=t.height/n.offsetHeight||1;return{left:t.left,right:t.left+n.clientWidth*e,top:t.top,bottom:t.top+n.clientHeight*i}}function C0(n,t,e){let i=n.someProp("scrollThreshold")||0,r=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let o=e||n.dom;o;){if(o.nodeType!=1){o=qs(o);continue}let a=o,l=a==s.body,u=l?d2(s):p2(a),h=0,d=0;if(t.top<u.top+fi(i,"top")?d=-(u.top-t.top+fi(r,"top")):t.bottom>u.bottom-fi(i,"bottom")&&(d=t.bottom-t.top>u.bottom-u.top?t.top+fi(r,"top")-u.top:t.bottom-u.bottom+fi(r,"bottom")),t.left<u.left+fi(i,"left")?h=-(u.left-t.left+fi(r,"left")):t.right>u.right-fi(i,"right")&&(h=t.right-u.right+fi(r,"right")),h||d)if(l)s.defaultView.scrollBy(h,d);else{let m=a.scrollLeft,y=a.scrollTop;d&&(a.scrollTop+=d),h&&(a.scrollLeft+=h);let x=a.scrollLeft-m,w=a.scrollTop-y;t={left:t.left-x,top:t.top-w,right:t.right-x,bottom:t.bottom-w}}let g=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(g))break;o=g=="absolute"?o.offsetParent:qs(o)}}function g2(n){let t=n.dom.getBoundingClientRect(),e=Math.max(0,t.top),i,r;for(let s=(t.left+t.right)/2,o=e+1;o<Math.min(innerHeight,t.bottom);o+=5){let a=n.root.elementFromPoint(s,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=e-20){i=a,r=l.top;break}}return{refDOM:i,refTop:r,stack:hS(n.dom)}}function hS(n){let t=[],e=n.ownerDocument;for(let i=n;i&&(t.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),n!=e);i=qs(i));return t}function m2({refDOM:n,refTop:t,stack:e}){let i=n?n.getBoundingClientRect().top:0;dS(e,i==0?0:i-t)}function dS(n,t){for(let e=0;e<n.length;e++){let{dom:i,top:r,left:s}=n[e];i.scrollTop!=r+t&&(i.scrollTop=r+t),i.scrollLeft!=s&&(i.scrollLeft=s)}}let Os=null;function y2(n){if(n.setActive)return n.setActive();if(Os)return n.focus(Os);let t=hS(n);n.focus(Os==null?{get preventScroll(){return Os={preventScroll:!0},!0}}:void 0),Os||(Os=!1,dS(t,0))}function pS(n,t){let e,i=2e8,r,s=0,o=t.top,a=t.top,l,u;for(let h=n.firstChild,d=0;h;h=h.nextSibling,d++){let g;if(h.nodeType==1)g=h.getClientRects();else if(h.nodeType==3)g=bi(h).getClientRects();else continue;for(let m=0;m<g.length;m++){let y=g[m];if(y.top<=o&&y.bottom>=a){o=Math.max(y.bottom,o),a=Math.min(y.top,a);let x=y.left>t.left?y.left-t.left:y.right<t.left?t.left-y.right:0;if(x<i){e=h,i=x,r=x&&e.nodeType==3?{left:y.right<t.left?y.right:y.left,top:t.top}:t,h.nodeType==1&&x&&(s=d+(t.left>=(y.left+y.right)/2?1:0));continue}}else y.top>t.top&&!l&&y.left<=t.left&&y.right>=t.left&&(l=h,u={left:Math.max(y.left,Math.min(y.right,t.left)),top:y.top});!e&&(t.left>=y.right&&t.top>=y.top||t.left>=y.left&&t.top>=y.bottom)&&(s=d+1)}}return!e&&l&&(e=l,r=u,i=0),e&&e.nodeType==3?b2(e,r):!e||i&&e.nodeType==1?{node:n,offset:s}:pS(e,r)}function b2(n,t){let e=n.nodeValue.length,i=document.createRange(),r;for(let s=0;s<e;s++){i.setEnd(n,s+1),i.setStart(n,s);let o=Hi(i,1);if(o.top!=o.bottom&&rg(t,o)){r={node:n,offset:s+(t.left>=(o.left+o.right)/2?1:0)};break}}return i.detach(),r||{node:n,offset:0}}function rg(n,t){return n.left>=t.left-1&&n.left<=t.right+1&&n.top>=t.top-1&&n.top<=t.bottom+1}function x2(n,t){let e=n.parentNode;return e&&/^li$/i.test(e.nodeName)&&t.left<n.getBoundingClientRect().left?e:n}function w2(n,t,e){let{node:i,offset:r}=pS(t,e),s=-1;if(i.nodeType==1&&!i.firstChild){let o=i.getBoundingClientRect();s=o.left!=o.right&&e.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(i,r,s)}function _2(n,t,e,i){let r=-1;for(let s=t,o=!1;s!=n.dom;){let a=n.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>i.left||l.top>i.top?r=a.posBefore:(!o&&l.right<i.left||l.bottom<i.top)&&(r=a.posAfter),o=!0),!a.contentDOM&&r<0&&!a.node.isText))return(a.node.isBlock?i.top<(l.top+l.bottom)/2:i.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return r>-1?r:n.docView.posFromDOM(t,e,-1)}function gS(n,t,e){let i=n.childNodes.length;if(i&&e.top<e.bottom)for(let r=Math.max(0,Math.min(i-1,Math.floor(i*(t.top-e.top)/(e.bottom-e.top))-2)),s=r;;){let o=n.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let u=a[l];if(rg(t,u))return gS(o,t,u)}}if((s=(s+1)%i)==r)break}return n}function S2(n,t){let e=n.dom.ownerDocument,i,r=0,s=f2(e,t.left,t.top);s&&({node:i,offset:r}=s);let o=(n.root.elementFromPoint?n.root:e).elementFromPoint(t.left,t.top),a;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=n.dom.getBoundingClientRect();if(!rg(t,u)||(o=gS(n.dom,t,u),!o))return null}if(we)for(let u=o;i&&u;u=qs(u))u.draggable&&(i=void 0);if(o=x2(o,t),i){if(Mn&&i.nodeType==1&&(r=Math.min(r,i.childNodes.length),r<i.childNodes.length)){let h=i.childNodes[r],d;h.nodeName=="IMG"&&(d=h.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&r++}let u;Wa&&r&&i.nodeType==1&&(u=i.childNodes[r-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=t.top&&r--,i==n.dom&&r==i.childNodes.length-1&&i.lastChild.nodeType==1&&t.top>i.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(r==0||i.nodeType!=1||i.childNodes[r-1].nodeName!="BR")&&(a=_2(n,i,r,t))}a==null&&(a=w2(n,o,t));let l=n.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function M0(n){return n.top<n.bottom||n.left<n.right}function Hi(n,t){let e=n.getClientRects();if(e.length){let i=e[t<0?0:e.length-1];if(M0(i))return i}return Array.prototype.find.call(e,M0)||n.getBoundingClientRect()}const v2=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function mS(n,t,e){let{node:i,offset:r,atom:s}=n.docView.domFromPos(t,e<0?-1:1),o=Wa||Mn;if(i.nodeType==3)if(o&&(v2.test(i.nodeValue)||(e<0?!r:r==i.nodeValue.length))){let l=Hi(bi(i,r,r),e);if(Mn&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){let u=Hi(bi(i,r-1,r-1),-1);if(u.top==l.top){let h=Hi(bi(i,r,r+1),-1);if(h.top!=l.top)return Po(h,h.left<u.left)}}return l}else{let l=r,u=r,h=e<0?1:-1;return e<0&&!r?(u++,h=-1):e>=0&&r==i.nodeValue.length?(l--,h=1):e<0?l--:u++,Po(Hi(bi(i,l,u),h),h<0)}if(!n.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&r&&(e<0||r==kn(i))){let l=i.childNodes[r-1];if(l.nodeType==1)return Uh(l.getBoundingClientRect(),!1)}if(s==null&&r<kn(i)){let l=i.childNodes[r];if(l.nodeType==1)return Uh(l.getBoundingClientRect(),!0)}return Uh(i.getBoundingClientRect(),e>=0)}if(s==null&&r&&(e<0||r==kn(i))){let l=i.childNodes[r-1],u=l.nodeType==3?bi(l,kn(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return Po(Hi(u,1),!1)}if(s==null&&r<kn(i)){let l=i.childNodes[r];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?bi(l,0,o?0:1):l.nodeType==1?l:null:null;if(u)return Po(Hi(u,-1),!0)}return Po(Hi(i.nodeType==3?bi(i):i,-e),e>=0)}function Po(n,t){if(n.width==0)return n;let e=t?n.left:n.right;return{top:n.top,bottom:n.bottom,left:e,right:e}}function Uh(n,t){if(n.height==0)return n;let e=t?n.top:n.bottom;return{top:e,bottom:e,left:n.left,right:n.right}}function yS(n,t,e){let i=n.state,r=n.root.activeElement;i!=t&&n.updateState(t),r!=n.dom&&n.focus();try{return e()}finally{i!=t&&n.updateState(i),r!=n.dom&&r&&r.focus()}}function k2(n,t,e){let i=t.selection,r=e=="up"?i.$from:i.$to;return yS(n,t,()=>{let{node:s}=n.docView.domFromPos(r.pos,e=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=mS(n,r.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=bi(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let h=l[u];if(h.bottom>h.top+1&&(e=="up"?o.top-h.top>(h.bottom-o.top)*2:h.bottom-o.bottom>(o.bottom-h.top)*2))return!1}}return!0})}const C2=/[\u0590-\u08ac]/;function M2(n,t,e){let{$head:i}=t.selection;if(!i.parent.isTextblock)return!1;let r=i.parentOffset,s=!r,o=r==i.parent.content.size,a=n.domSelection();return a?!C2.test(i.parent.textContent)||!a.modify?e=="left"||e=="backward"?s:o:yS(n,t,()=>{let{focusNode:l,focusOffset:u,anchorNode:h,anchorOffset:d}=n.domSelectionRange(),g=a.caretBidiLevel;a.modify("move",e,"character");let m=i.depth?n.docView.domAfterPos(i.before()):n.dom,{focusNode:y,focusOffset:x}=n.domSelectionRange(),w=y&&!m.contains(y.nodeType==1?y:y.parentNode)||l==y&&u==x;try{a.collapse(h,d),l&&(l!=h||u!=d)&&a.extend&&a.extend(l,u)}catch{}return g!=null&&(a.caretBidiLevel=g),w}):i.pos==i.start()||i.pos==i.end()}let E0=null,T0=null,O0=!1;function E2(n,t,e){return E0==t&&T0==e?O0:(E0=t,T0=e,O0=e=="up"||e=="down"?k2(n,t,e):M2(n,t,e))}const En=0,A0=1,Nr=2,ti=3;class Va{constructor(t,e,i,r){this.parent=t,this.children=e,this.dom=i,this.contentDOM=r,this.dirty=En,i.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,e,i){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let e=0;e<this.children.length;e++)t+=this.children[e].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let e=0,i=this.posAtStart;;e++){let r=this.children[e];if(r==t)return i;i+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,e,i){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(i<0){let s,o;if(t==this.contentDOM)s=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let r;if(t==this.dom&&this.contentDOM)r=e>be(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(e==0)for(let s=t;;s=s.parentNode){if(s==this.dom){r=!1;break}if(s.previousSibling)break}if(r==null&&e==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){r=!0;break}if(s.nextSibling)break}}return r??i>0?this.posAtEnd:this.posAtStart}nearestDesc(t,e=!1){for(let i=!0,r=t;r;r=r.parentNode){let s=this.getDesc(r),o;if(s&&(!e||s.node))if(i&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))i=!1;else return s}}getDesc(t){let e=t.pmViewDesc;for(let i=e;i;i=i.parent)if(i==this)return e}posFromDOM(t,e,i){for(let r=t;r;r=r.parentNode){let s=this.getDesc(r);if(s)return s.localPosFromDOM(t,e,i)}return-1}descAt(t){for(let e=0,i=0;e<this.children.length;e++){let r=this.children[e],s=i+r.size;if(i==t&&s!=i){for(;!r.border&&r.children.length;)for(let o=0;o<r.children.length;o++){let a=r.children[o];if(a.size){r=a;break}}return r}if(t<s)return r.descAt(t-i-r.border);i=s}}domFromPos(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let i=0,r=0;for(let s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.size;if(a>t||o instanceof xS){r=t-s;break}s=a}if(r)return this.children[i].domFromPos(r-this.children[i].border,e);for(let s;i&&!(s=this.children[i-1]).size&&s instanceof bS&&s.side>=0;i--);if(e<=0){let s,o=!0;for(;s=i?this.children[i-1]:null,!(!s||s.dom.parentNode==this.contentDOM);i--,o=!1);return s&&e&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,e):{node:this.contentDOM,offset:s?be(s.dom)+1:0}}else{let s,o=!0;for(;s=i<this.children.length?this.children[i]:null,!(!s||s.dom.parentNode==this.contentDOM);i++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,e):{node:this.contentDOM,offset:s?be(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,e,i=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,s=-1;for(let o=i,a=0;;a++){let l=this.children[a],u=o+l.size;if(r==-1&&t<=u){let h=o+l.border;if(t>=h&&e<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,e,h);t=o;for(let d=a;d>0;d--){let g=this.children[d-1];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(1)){r=be(g.dom)+1;break}t-=g.size}r==-1&&(r=0)}if(r>-1&&(u>e||a==this.children.length-1)){e=u;for(let h=a+1;h<this.children.length;h++){let d=this.children[h];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=be(d.dom);break}e+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[t<0?0:this.children.length-1];return e.size==0||e.emptyChildAt(t)}domAfterPos(t){let{node:e,offset:i}=this.domFromPos(t,0);if(e.nodeType!=1||i==e.childNodes.length)throw new RangeError("No node after pos "+t);return e.childNodes[i]}setSelection(t,e,i,r=!1){let s=Math.min(t,e),o=Math.max(t,e);for(let m=0,y=0;m<this.children.length;m++){let x=this.children[m],w=y+x.size;if(s>y&&o<w)return x.setSelection(t-y-x.border,e-y-x.border,i,r);y=w}let a=this.domFromPos(t,t?-1:1),l=e==t?a:this.domFromPos(e,e?-1:1),u=i.root.getSelection(),h=i.domSelectionRange(),d=!1;if((Mn||we)&&t==e){let{node:m,offset:y}=a;if(m.nodeType==3){if(d=!!(y&&m.nodeValue[y-1]==`
`),d&&y==m.nodeValue.length)for(let x=m,w;x;x=x.parentNode){if(w=x.nextSibling){w.nodeName=="BR"&&(a=l={node:w.parentNode,offset:be(w)+1});break}let v=x.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let x=m.childNodes[y-1];d=x&&(x.nodeName=="BR"||x.contentEditable=="false")}}if(Mn&&h.focusNode&&h.focusNode!=l.node&&h.focusNode.nodeType==1){let m=h.focusNode.childNodes[h.focusOffset];m&&m.contentEditable=="false"&&(r=!0)}if(!(r||d&&we)&&ss(a.node,a.offset,h.anchorNode,h.anchorOffset)&&ss(l.node,l.offset,h.focusNode,h.focusOffset))return;let g=!1;if((u.extend||t==e)&&!(d&&Mn)){u.collapse(a.node,a.offset);try{t!=e&&u.extend(l.node,l.offset),g=!0}catch{}}if(!g){if(t>e){let y=a;a=l,l=y}let m=document.createRange();m.setEnd(l.node,l.offset),m.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(m)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,e){for(let i=0,r=0;r<this.children.length;r++){let s=this.children[r],o=i+s.size;if(i==o?t<=o&&e>=i:t<o&&e>i){let a=i+s.border,l=o-s.border;if(t>=a&&e<=l){this.dirty=t==i||e==o?Nr:A0,t==a&&e==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=ti:s.markDirty(t-a,e-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Nr:ti}i=o}this.dirty=Nr}markParentsDirty(){let t=1;for(let e=this.parent;e;e=e.parent,t++){let i=t==1?Nr:A0;e.dirty<i&&(e.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class bS extends Va{constructor(t,e,i,r){let s,o=e.type.toDOM;if(typeof o=="function"&&(o=o(i,()=>{if(!s)return r;if(s.parent)return s.parent.posBeforeChild(s)})),!e.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=e,this.widget=e,s=this}matchesWidget(t){return this.dirty==En&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let e=this.widget.spec.stopEvent;return e?e(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class T2 extends Va{constructor(t,e,i,r){super(t,[],e,null),this.textDOM=i,this.text=r}get size(){return this.text.length}localPosFromDOM(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class as extends Va{constructor(t,e,i,r,s){super(t,[],i,r),this.mark=e,this.spec=s}static create(t,e,i,r){let s=r.nodeViews[e.type.name],o=s&&s(e,r,i);return(!o||!o.dom)&&(o=hs.renderSpec(document,e.type.spec.toDOM(e,i),null,e.attrs)),new as(t,e,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&ti||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=ti&&this.mark.eq(t)}markDirty(t,e){if(super.markDirty(t,e),this.dirty!=En){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=En}}slice(t,e,i){let r=as.create(this.parent,this.mark,!0,i),s=this.children,o=this.size;e<o&&(s=tp(s,e,o,i)),t>0&&(s=tp(s,0,t,i));for(let a=0;a<s.length;a++)s[a].parent=r;return r.children=s,r}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class er extends Va{constructor(t,e,i,r,s,o,a,l,u){super(t,[],s,o),this.node=e,this.outerDeco=i,this.innerDeco=r,this.nodeDOM=a}static create(t,e,i,r,s,o){let a=s.nodeViews[e.type.name],l,u=a&&a(e,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},i,r),h=u&&u.dom,d=u&&u.contentDOM;if(e.isText){if(!h)h=document.createTextNode(e.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:d}=hs.renderSpec(document,e.type.spec.toDOM(e),null,e.attrs));!d&&!e.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),e.type.spec.draggable&&(h.draggable=!0));let g=h;return h=SS(h,i,e),u?l=new O2(t,e,i,r,h,d||null,g,u,s,o+1):e.isText?new Vu(t,e,i,r,h,g,s):new er(t,e,i,r,h,d||null,g,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let e=this.children.length-1;e>=0;e--){let i=this.children[e];if(this.dom.contains(i.dom.parentNode)){t.contentElement=i.dom.parentNode;break}}t.contentElement||(t.getContent=()=>V.empty)}return t}matchesNode(t,e,i){return this.dirty==En&&t.eq(this.node)&&Nc(e,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,e){let i=this.node.inlineContent,r=e,s=t.composing?this.localCompositionInfo(t,e):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new R2(this,o&&o.node,t);I2(this.node,this.innerDeco,(u,h,d)=>{u.spec.marks?l.syncToMarks(u.spec.marks,i,t,h):u.type.side>=0&&!d&&l.syncToMarks(h==this.node.childCount?Dt.none:this.node.child(h).marks,i,t,h),l.placeWidget(u,t,r)},(u,h,d,g)=>{l.syncToMarks(u.marks,i,t,g);let m;l.findNodeMatch(u,h,d,g)||a&&t.state.selection.from>r&&t.state.selection.to<r+u.nodeSize&&(m=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(u,h,d,m,t)||l.updateNextNode(u,h,d,t,g,r)||l.addNode(u,h,d,t,r),r+=u.nodeSize}),l.syncToMarks([],i,t,0),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Nr)&&(o&&this.protectLocalComposition(t,o),wS(this.contentDOM,this.children,t),Ks&&L2(this.dom))}localCompositionInfo(t,e){let{from:i,to:r}=t.state.selection;if(!(t.state.selection instanceof st)||i<e||r>e+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=N2(this.node.content,o,i-e,r-e);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:e,pos:i,text:r}){if(this.getDesc(e))return;let s=e;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new T2(this,s,e,r);t.input.compositionNodes.push(o),this.children=tp(this.children,i,i+r.length,t,o)}update(t,e,i,r){return this.dirty==ti||!t.sameMarkup(this.node)?!1:(this.updateInner(t,e,i,r),!0)}updateInner(t,e,i,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=i,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=En}updateOuterDeco(t){if(Nc(t,this.outerDeco))return;let e=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=_S(this.dom,this.nodeDOM,Qd(this.outerDeco,this.node,e),Qd(t,this.node,e)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function R0(n,t,e,i,r){SS(i,t,n);let s=new er(void 0,n,t,e,i,i,i,r,0);return s.contentDOM&&s.updateChildren(r,0),s}class Vu extends er{constructor(t,e,i,r,s,o,a){super(t,e,i,r,s,null,o,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,e,i,r){return this.dirty==ti||this.dirty!=En&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(e),(this.dirty!=En||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=En,!0)}inParent(){let t=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,e,i){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(t,e,i)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,e,i){let r=this.node.cut(t,e),s=document.createTextNode(r.text);return new Vu(this.parent,r,this.outerDeco,this.innerDeco,s,s,i)}markDirty(t,e){super.markDirty(t,e),this.dom!=this.nodeDOM&&(t==0||e==this.nodeDOM.nodeValue.length)&&(this.dirty=ti)}get domAtom(){return!1}isText(t){return this.node.text==t}}class xS extends Va{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==En&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class O2 extends er{constructor(t,e,i,r,s,o,a,l,u,h){super(t,e,i,r,s,o,a,u,h),this.spec=l}update(t,e,i,r){if(this.dirty==ti)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,e,i);return s&&this.updateInner(t,e,i,r),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,e,i,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,e,i,r){this.spec.setSelection?this.spec.setSelection(t,e,i.root):super.setSelection(t,e,i,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function wS(n,t,e){let i=n.firstChild,r=!1;for(let s=0;s<t.length;s++){let o=t[s],a=o.dom;if(a.parentNode==n){for(;a!=i;)i=D0(i),r=!0;i=i.nextSibling}else r=!0,n.insertBefore(a,i);if(o instanceof as){let l=i?i.previousSibling:n.lastChild;wS(o.contentDOM,o.children,e),i=l?l.nextSibling:n.firstChild}}for(;i;)i=D0(i),r=!0;r&&e.trackWrites==n&&(e.trackWrites=null)}const ea=function(n){n&&(this.nodeName=n)};ea.prototype=Object.create(null);const Fr=[new ea];function Qd(n,t,e){if(n.length==0)return Fr;let i=e?Fr[0]:new ea,r=[i];for(let s=0;s<n.length;s++){let o=n[s].type.attrs;if(o){o.nodeName&&r.push(i=new ea(o.nodeName));for(let a in o){let l=o[a];l!=null&&(e&&r.length==1&&r.push(i=new ea(t.isInline?"span":"div")),a=="class"?i.class=(i.class?i.class+" ":"")+l:a=="style"?i.style=(i.style?i.style+";":"")+l:a!="nodeName"&&(i[a]=l))}}}return r}function _S(n,t,e,i){if(e==Fr&&i==Fr)return t;let r=t;for(let s=0;s<i.length;s++){let o=i[s],a=e[s];if(s){let l;a&&a.nodeName==o.nodeName&&r!=n&&(l=r.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(r),a=Fr[0]),r=l}A2(r,a||Fr[0],o)}return r}function A2(n,t,e){for(let i in t)i!="class"&&i!="style"&&i!="nodeName"&&!(i in e)&&n.removeAttribute(i);for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&e[i]!=t[i]&&n.setAttribute(i,e[i]);if(t.class!=e.class){let i=t.class?t.class.split(" ").filter(Boolean):[],r=e.class?e.class.split(" ").filter(Boolean):[];for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.remove(i[s]);for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.add(r[s]);n.classList.length==0&&n.removeAttribute("class")}if(t.style!=e.style){if(t.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=i.exec(t.style);)n.style.removeProperty(r[1])}e.style&&(n.style.cssText+=e.style)}}function SS(n,t,e){return _S(n,n,Fr,Qd(t,e,n.nodeType!=1))}function Nc(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(!n[e].type.eq(t[e].type))return!1;return!0}function D0(n){let t=n.nextSibling;return n.parentNode.removeChild(n),t}class R2{constructor(t,e,i){this.lock=e,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=D2(t.node.content,t)}destroyBetween(t,e){if(t!=e){for(let i=t;i<e;i++)this.top.children[i].destroy();this.top.children.splice(t,e-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,e,i,r){let s=0,o=this.stack.length>>1,a=Math.min(o,t.length);for(;s<a&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(t[s])&&t[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=En,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);let l=-1,u=this.top.children.length;r<this.preMatch.index&&(u=Math.min(this.index+3,u));for(let h=this.index;h<u;h++){let d=this.top.children[h];if(d.matchesMark(t[o])&&!this.isLocked(d.dom)){l=h;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let h=as.create(this.top,t[o],e,i);this.top.children.splice(this.index,0,h),this.top=h,this.changed=!0}this.index=0,o++}}findNodeMatch(t,e,i,r){let s=-1,o;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(t,e,i))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(t,e,i)&&!this.preMatch.matched.has(u)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,e,i,r,s){let o=this.top.children[r];return o.dirty==ti&&o.dom==o.contentDOM&&(o.dirty=Nr),o.update(t,e,i,s)?(this.destroyBetween(this.index,r),this.index++,!0):!1}findIndexWithChild(t){for(;;){let e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let i=t.pmViewDesc;if(i){for(let r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==i)return r}return-1}t=e}}updateNextNode(t,e,i,r,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof er){let u=this.preMatch.matched.get(l);if(u!=null&&u!=s)return!1;let h=l.dom,d,g=this.isLocked(h)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=ti&&Nc(e,l.outerDeco));if(!g&&l.update(t,e,i,r))return this.destroyBetween(this.index,a),l.dom!=h&&(this.changed=!0),this.index++,!0;if(!g&&(d=this.recreateWrapper(l,t,e,i,r,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Nr,d.updateChildren(r,o+1),d.dirty=En),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,e,i,r,s,o){if(t.dirty||e.isAtom||!t.children.length||!t.node.content.eq(e.content)||!Nc(i,t.outerDeco)||!r.eq(t.innerDeco))return null;let a=er.create(this.top,e,i,r,s,o);if(a.contentDOM){a.children=t.children,t.children=[];for(let l of a.children)l.parent=a}return t.destroy(),a}addNode(t,e,i,r,s){let o=er.create(this.top,t,e,i,r,s);o.contentDOM&&o.updateChildren(r,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,e,i){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(t)&&(t==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let s=new bS(this.top,t,e,i);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],e=this.top;for(;t instanceof as;)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof Vu)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((we||ce)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{let i=document.createElement(t);t=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),t=="BR"&&(i.className="ProseMirror-trailingBreak");let r=new xS(this.top,[],i,null);e!=this.top?e.children.push(r):e.children.splice(this.index++,0,r),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function D2(n,t){let e=t,i=e.children.length,r=n.childCount,s=new Map,o=[];t:for(;r>0;){let a;for(;;)if(i){let u=e.children[i-1];if(u instanceof as)e=u,i=u.children.length;else{a=u,i--;break}}else{if(e==t)break t;i=e.parent.children.indexOf(e),e=e.parent}let l=a.node;if(l){if(l!=n.child(r-1))break;--r,s.set(a,r),o.push(a)}}return{index:r,matched:s,matches:o.reverse()}}function P2(n,t){return n.type.side-t.type.side}function I2(n,t,e,i){let r=t.locals(n),s=0;if(r.length==0){for(let u=0;u<n.childCount;u++){let h=n.child(u);i(h,r,t.forChild(s,h),u),s+=h.nodeSize}return}let o=0,a=[],l=null;for(let u=0;;){let h,d;for(;o<r.length&&r[o].to==s;){let w=r[o++];w.widget&&(h?(d||(d=[h])).push(w):h=w)}if(h)if(d){d.sort(P2);for(let w=0;w<d.length;w++)e(d[w],u,!!l)}else e(h,u,!!l);let g,m;if(l)m=-1,g=l,l=null;else if(u<n.childCount)m=u,g=n.child(u++);else break;for(let w=0;w<a.length;w++)a[w].to<=s&&a.splice(w--,1);for(;o<r.length&&r[o].from<=s&&r[o].to>s;)a.push(r[o++]);let y=s+g.nodeSize;if(g.isText){let w=y;o<r.length&&r[o].from<w&&(w=r[o].from);for(let v=0;v<a.length;v++)a[v].to<w&&(w=a[v].to);w<y&&(l=g.cut(w-s),g=g.cut(0,w-s),y=w,m=-1)}else for(;o<r.length&&r[o].to<y;)o++;let x=g.isInline&&!g.isLeaf?a.filter(w=>!w.inline):a.slice();i(g,x,t.forChild(s,g),m),s=y}}function L2(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let t=n.style.cssText;n.style.cssText=t+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=t}}function N2(n,t,e,i){for(let r=0,s=0;r<n.childCount&&s<=i;){let o=n.child(r++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;r<n.childCount;){let u=n.child(r++);if(s+=u.nodeSize,!u.isText)break;l+=u.text}if(s>=e){if(s>=i&&l.slice(i-t.length-a,i-a)==t)return i-t.length;let u=a<i?l.lastIndexOf(t,i-a-1):-1;if(u>=0&&u+t.length+a>=e)return a+u;if(e==i&&l.length>=i+t.length-a&&l.slice(i-a,i-a+t.length)==t)return i}}return-1}function tp(n,t,e,i,r){let s=[];for(let o=0,a=0;o<n.length;o++){let l=n[o],u=a,h=a+=l.size;u>=e||h<=t?s.push(l):(u<t&&s.push(l.slice(0,t-u,i)),r&&(s.push(r),r=void 0),h>e&&s.push(l.slice(e-u,l.size,i)))}return s}function sg(n,t=null){let e=n.domSelectionRange(),i=n.state.doc;if(!e.focusNode)return null;let r=n.docView.nearestDesc(e.focusNode),s=r&&r.size==0,o=n.docView.posFromDOM(e.focusNode,e.focusOffset,1);if(o<0)return null;let a=i.resolve(o),l,u;if(Wu(e)){for(l=o;r&&!r.node;)r=r.parent;let d=r.node;if(r&&d.isAtom&&Y.isSelectable(d)&&r.parent&&!(d.isInline&&c2(e.focusNode,e.focusOffset,r.dom))){let g=r.posBefore;u=new Y(o==g?a:i.resolve(g))}}else{if(e instanceof n.dom.ownerDocument.defaultView.Selection&&e.rangeCount>1){let d=o,g=o;for(let m=0;m<e.rangeCount;m++){let y=e.getRangeAt(m);d=Math.min(d,n.docView.posFromDOM(y.startContainer,y.startOffset,1)),g=Math.max(g,n.docView.posFromDOM(y.endContainer,y.endOffset,-1))}if(d<0)return null;[l,o]=g==n.state.selection.anchor?[g,d]:[d,g],a=i.resolve(o)}else l=n.docView.posFromDOM(e.anchorNode,e.anchorOffset,1);if(l<0)return null}let h=i.resolve(l);if(!u){let d=t=="pointer"||n.state.selection.head<a.pos&&!s?1:-1;u=og(n,h,a,d)}return u}function vS(n){return n.editable?n.hasFocus():CS(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Ci(n,t=!1){let e=n.state.selection;if(kS(n,e),!!vS(n)){if(!t&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&ce){let i=n.domSelectionRange(),r=n.domObserver.currentSelection;if(i.anchorNode&&r.anchorNode&&ss(i.anchorNode,i.anchorOffset,r.anchorNode,r.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)B2(n);else{let{anchor:i,head:r}=e,s,o;P0&&!(e instanceof st)&&(e.$from.parent.inlineContent||(s=I0(n,e.from)),!e.empty&&!e.$from.parent.inlineContent&&(o=I0(n,e.to))),n.docView.setSelection(i,r,n,t),P0&&(s&&L0(s),o&&L0(o)),e.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&F2(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const P0=we||ce&&uS<63;function I0(n,t){let{node:e,offset:i}=n.docView.domFromPos(t,0),r=i<e.childNodes.length?e.childNodes[i]:null,s=i?e.childNodes[i-1]:null;if(we&&r&&r.contentEditable=="false")return jh(r);if((!r||r.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(r)return jh(r);if(s)return jh(s)}}function jh(n){return n.contentEditable="true",we&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function L0(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function F2(n){let t=n.dom.ownerDocument;t.removeEventListener("selectionchange",n.input.hideSelectionGuard);let e=n.domSelectionRange(),i=e.anchorNode,r=e.anchorOffset;t.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(e.anchorNode!=i||e.anchorOffset!=r)&&(t.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!vS(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function B2(n){let t=n.domSelection();if(!t)return;let e=n.cursorWrapper.dom,i=e.nodeName=="IMG";i?t.collapse(e.parentNode,be(e)+1):t.collapse(e,0),!i&&!n.state.selection.visible&&Ge&&tr<=11&&(e.disabled=!0,e.disabled=!1)}function kS(n,t){if(t instanceof Y){let e=n.docView.descAt(t.from);e!=n.lastSelectedViewDesc&&(N0(n),e&&e.selectNode(),n.lastSelectedViewDesc=e)}else N0(n)}function N0(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function og(n,t,e,i){return n.someProp("createSelectionBetween",r=>r(n,t,e))||st.between(t,e,i)}function F0(n){return n.editable&&!n.hasFocus()?!1:CS(n)}function CS(n){let t=n.domSelectionRange();if(!t.anchorNode)return!1;try{return n.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(n.editable||n.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function z2(n){let t=n.docView.domFromPos(n.state.selection.anchor,0),e=n.domSelectionRange();return ss(t.node,t.offset,e.anchorNode,e.anchorOffset)}function ep(n,t){let{$anchor:e,$head:i}=n.selection,r=t>0?e.max(i):e.min(i),s=r.parent.inlineContent?r.depth?n.doc.resolve(t>0?r.after():r.before()):null:r;return s&&dt.findFrom(s,t)}function $i(n,t){return n.dispatch(n.state.tr.setSelection(t).scrollIntoView()),!0}function B0(n,t,e){let i=n.state.selection;if(i instanceof st)if(e.indexOf("s")>-1){let{$head:r}=i,s=r.textOffset?null:t<0?r.nodeBefore:r.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=n.state.doc.resolve(r.pos+s.nodeSize*(t<0?-1:1));return $i(n,new st(i.$anchor,o))}else if(i.empty){if(n.endOfTextblock(t>0?"forward":"backward")){let r=ep(n.state,t);return r&&r instanceof Y?$i(n,r):!1}else if(!(vn&&e.indexOf("m")>-1)){let r=i.$head,s=r.textOffset?null:t<0?r.nodeBefore:r.nodeAfter,o;if(!s||s.isText)return!1;let a=t<0?r.pos-s.nodeSize:r.pos;return s.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?Y.isSelectable(s)?$i(n,new Y(t<0?n.state.doc.resolve(r.pos-s.nodeSize):r)):Wa?$i(n,new st(n.state.doc.resolve(t<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(i instanceof Y&&i.node.isInline)return $i(n,new st(t>0?i.$to:i.$from));{let r=ep(n.state,t);return r?$i(n,r):!1}}}function Fc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function na(n,t){let e=n.pmViewDesc;return e&&e.size==0&&(t<0||n.nextSibling||n.nodeName!="BR")}function As(n,t){return t<0?H2(n):$2(n)}function H2(n){let t=n.domSelectionRange(),e=t.focusNode,i=t.focusOffset;if(!e)return;let r,s,o=!1;for(Mn&&e.nodeType==1&&i<Fc(e)&&na(e.childNodes[i],-1)&&(o=!0);;)if(i>0){if(e.nodeType!=1)break;{let a=e.childNodes[i-1];if(na(a,-1))r=e,s=--i;else if(a.nodeType==3)e=a,i=e.nodeValue.length;else break}}else{if(MS(e))break;{let a=e.previousSibling;for(;a&&na(a,-1);)r=e.parentNode,s=be(a),a=a.previousSibling;if(a)e=a,i=Fc(e);else{if(e=e.parentNode,e==n.dom)break;i=0}}}o?np(n,e,i):r&&np(n,r,s)}function $2(n){let t=n.domSelectionRange(),e=t.focusNode,i=t.focusOffset;if(!e)return;let r=Fc(e),s,o;for(;;)if(i<r){if(e.nodeType!=1)break;let a=e.childNodes[i];if(na(a,1))s=e,o=++i;else break}else{if(MS(e))break;{let a=e.nextSibling;for(;a&&na(a,1);)s=a.parentNode,o=be(a)+1,a=a.nextSibling;if(a)e=a,i=0,r=Fc(e);else{if(e=e.parentNode,e==n.dom)break;i=r=0}}}s&&np(n,s,o)}function MS(n){let t=n.pmViewDesc;return t&&t.node&&t.node.isBlock}function W2(n,t){for(;n&&t==n.childNodes.length&&!$a(n);)t=be(n)+1,n=n.parentNode;for(;n&&t<n.childNodes.length;){let e=n.childNodes[t];if(e.nodeType==3)return e;if(e.nodeType==1&&e.contentEditable=="false")break;n=e,t=0}}function V2(n,t){for(;n&&!t&&!$a(n);)t=be(n),n=n.parentNode;for(;n&&t;){let e=n.childNodes[t-1];if(e.nodeType==3)return e;if(e.nodeType==1&&e.contentEditable=="false")break;n=e,t=n.childNodes.length}}function np(n,t,e){if(t.nodeType!=3){let s,o;(o=W2(t,e))?(t=o,e=0):(s=V2(t,e))&&(t=s,e=s.nodeValue.length)}let i=n.domSelection();if(!i)return;if(Wu(i)){let s=document.createRange();s.setEnd(t,e),s.setStart(t,e),i.removeAllRanges(),i.addRange(s)}else i.extend&&i.extend(t,e);n.domObserver.setCurSelection();let{state:r}=n;setTimeout(()=>{n.state==r&&Ci(n)},50)}function z0(n,t){let e=n.state.doc.resolve(t);if(!(ce||fS)&&e.parent.inlineContent){let r=n.coordsAtPos(t);if(t>e.start()){let s=n.coordsAtPos(t-1),o=(s.top+s.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(s.left-r.left)>1)return s.left<r.left?"ltr":"rtl"}if(t<e.end()){let s=n.coordsAtPos(t+1),o=(s.top+s.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(s.left-r.left)>1)return s.left>r.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function H0(n,t,e){let i=n.state.selection;if(i instanceof st&&!i.empty||e.indexOf("s")>-1||vn&&e.indexOf("m")>-1)return!1;let{$from:r,$to:s}=i;if(!r.parent.inlineContent||n.endOfTextblock(t<0?"up":"down")){let o=ep(n.state,t);if(o&&o instanceof Y)return $i(n,o)}if(!r.parent.inlineContent){let o=t<0?r:s,a=i instanceof un?dt.near(o,t):dt.findFrom(o,t);return a?$i(n,a):!1}return!1}function $0(n,t){if(!(n.state.selection instanceof st))return!0;let{$head:e,$anchor:i,empty:r}=n.state.selection;if(!e.sameParent(i))return!0;if(!r)return!1;if(n.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!e.textOffset&&(t<0?e.nodeBefore:e.nodeAfter);if(s&&!s.isText){let o=n.state.tr;return t<0?o.delete(e.pos-s.nodeSize,e.pos):o.delete(e.pos,e.pos+s.nodeSize),n.dispatch(o),!0}return!1}function W0(n,t,e){n.domObserver.stop(),t.contentEditable=e,n.domObserver.start()}function U2(n){if(!we||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:e}=n.domSelectionRange();if(t&&t.nodeType==1&&e==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let i=t.firstChild;W0(n,i,"true"),setTimeout(()=>W0(n,i,"false"),20)}return!1}function j2(n){let t="";return n.ctrlKey&&(t+="c"),n.metaKey&&(t+="m"),n.altKey&&(t+="a"),n.shiftKey&&(t+="s"),t}function q2(n,t){let e=t.keyCode,i=j2(t);if(e==8||vn&&e==72&&i=="c")return $0(n,-1)||As(n,-1);if(e==46&&!t.shiftKey||vn&&e==68&&i=="c")return $0(n,1)||As(n,1);if(e==13||e==27)return!0;if(e==37||vn&&e==66&&i=="c"){let r=e==37?z0(n,n.state.selection.from)=="ltr"?-1:1:-1;return B0(n,r,i)||As(n,r)}else if(e==39||vn&&e==70&&i=="c"){let r=e==39?z0(n,n.state.selection.from)=="ltr"?1:-1:1;return B0(n,r,i)||As(n,r)}else{if(e==38||vn&&e==80&&i=="c")return H0(n,-1,i)||As(n,-1);if(e==40||vn&&e==78&&i=="c")return U2(n)||H0(n,1,i)||As(n,1);if(i==(vn?"m":"c")&&(e==66||e==73||e==89||e==90))return!0}return!1}function ag(n,t){n.someProp("transformCopied",m=>{t=m(t,n)});let e=[],{content:i,openStart:r,openEnd:s}=t;for(;r>1&&s>1&&i.childCount==1&&i.firstChild.childCount==1;){r--,s--;let m=i.firstChild;e.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),i=m.content}let o=n.someProp("clipboardSerializer")||hs.fromSchema(n.state.schema),a=DS(),l=a.createElement("div");l.appendChild(o.serializeFragment(i,{document:a}));let u=l.firstChild,h,d=0;for(;u&&u.nodeType==1&&(h=RS[u.nodeName.toLowerCase()]);){for(let m=h.length-1;m>=0;m--){let y=a.createElement(h[m]);for(;l.firstChild;)y.appendChild(l.firstChild);l.appendChild(y),d++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${r} ${s}${d?` -${d}`:""} ${JSON.stringify(e)}`);let g=n.someProp("clipboardTextSerializer",m=>m(t,n))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:g,slice:t}}function ES(n,t,e,i,r){let s=r.parent.type.spec.code,o,a;if(!e&&!t)return null;let l=!!t&&(i||s||!e);if(l){if(n.someProp("transformPastedText",g=>{t=g(t,s||i,n)}),s)return a=new K(V.from(n.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",g=>{a=g(a,n,!0)}),a;let d=n.someProp("clipboardTextParser",g=>g(t,r,i,n));if(d)a=d;else{let g=r.marks(),{schema:m}=n.state,y=hs.fromSchema(m);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(x=>{let w=o.appendChild(document.createElement("p"));x&&w.appendChild(y.serializeNode(m.text(x,g)))})}}else n.someProp("transformPastedHTML",d=>{e=d(e,n)}),o=G2(e),Wa&&Y2(o);let u=o&&o.querySelector("[data-pm-slice]"),h=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let d=+h[3];d>0;d--){let g=o.firstChild;for(;g&&g.nodeType!=1;)g=g.nextSibling;if(!g)break;o=g}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||Qo.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||h),context:r,ruleFromNode(g){return g.nodeName=="BR"&&!g.nextSibling&&g.parentNode&&!K2.test(g.parentNode.nodeName)?{ignore:!0}:null}})),h)a=Z2(V0(a,+h[1],+h[2]),h[4]);else if(a=K.maxOpen(J2(a.content,r),!0),a.openStart||a.openEnd){let d=0,g=0;for(let m=a.content.firstChild;d<a.openStart&&!m.type.spec.isolating;d++,m=m.firstChild);for(let m=a.content.lastChild;g<a.openEnd&&!m.type.spec.isolating;g++,m=m.lastChild);a=V0(a,d,g)}return n.someProp("transformPasted",d=>{a=d(a,n,l)}),a}const K2=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function J2(n,t){if(n.childCount<2)return n;for(let e=t.depth;e>=0;e--){let r=t.node(e).contentMatchAt(t.index(e)),s,o=[];if(n.forEach(a=>{if(!o)return;let l=r.findWrapping(a.type),u;if(!l)return o=null;if(u=o.length&&s.length&&OS(l,s,a,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=AS(o[o.length-1],s.length));let h=TS(a,l);o.push(h),r=r.matchType(h.type),s=l}}),o)return V.from(o)}return n}function TS(n,t,e=0){for(let i=t.length-1;i>=e;i--)n=t[i].create(null,V.from(n));return n}function OS(n,t,e,i,r){if(r<n.length&&r<t.length&&n[r]==t[r]){let s=OS(n,t,e,i.lastChild,r+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(r==n.length-1?e.type:n[r+1]))return i.copy(i.content.append(V.from(TS(e,n,r+1))))}}function AS(n,t){if(t==0)return n;let e=n.content.replaceChild(n.childCount-1,AS(n.lastChild,t-1)),i=n.contentMatchAt(n.childCount).fillBefore(V.empty,!0);return n.copy(e.append(i))}function ip(n,t,e,i,r,s){let o=t<0?n.firstChild:n.lastChild,a=o.content;return n.childCount>1&&(s=0),r<i-1&&(a=ip(a,t,e,i,r+1,s)),r>=e&&(a=t<0?o.contentMatchAt(0).fillBefore(a,s<=r).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(V.empty,!0))),n.replaceChild(t<0?0:n.childCount-1,o.copy(a))}function V0(n,t,e){return t<n.openStart&&(n=new K(ip(n.content,-1,t,n.openStart,0,n.openEnd),t,n.openEnd)),e<n.openEnd&&(n=new K(ip(n.content,1,e,n.openEnd,0,0),n.openStart,e)),n}const RS={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let U0=null;function DS(){return U0||(U0=document.implementation.createHTMLDocument("title"))}let qh=null;function X2(n){let t=window.trustedTypes;return t?(qh||(qh=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:e=>e})),qh.createHTML(n)):n}function G2(n){let t=/^(\s*<meta [^>]*>)*/.exec(n);t&&(n=n.slice(t[0].length));let e=DS().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(n),r;if((r=i&&RS[i[1].toLowerCase()])&&(n=r.map(s=>"<"+s+">").join("")+n+r.map(s=>"</"+s+">").reverse().join("")),e.innerHTML=X2(n),r)for(let s=0;s<r.length;s++)e=e.querySelector(r[s])||e;return e}function Y2(n){let t=n.querySelectorAll(ce?"span:not([class]):not([style])":"span.Apple-converted-space");for(let e=0;e<t.length;e++){let i=t[e];i.childNodes.length==1&&i.textContent==""&&i.parentNode&&i.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),i)}}function Z2(n,t){if(!n.size)return n;let e=n.content.firstChild.type.schema,i;try{i=JSON.parse(t)}catch{return n}let{content:r,openStart:s,openEnd:o}=n;for(let a=i.length-2;a>=0;a-=2){let l=e.nodes[i[a]];if(!l||l.hasRequiredAttrs())break;r=V.from(l.create(i[a+1],r)),s++,o++}return new K(r,s,o)}const Be={},ze={},Q2={touchstart:!0,touchmove:!0};class tF{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function eF(n){for(let t in Be){let e=Be[t];n.dom.addEventListener(t,n.input.eventHandlers[t]=i=>{iF(n,i)&&!lg(n,i)&&(n.editable||!(i.type in ze))&&e(n,i)},Q2[t]?{passive:!0}:void 0)}we&&n.dom.addEventListener("input",()=>null),rp(n)}function Ji(n,t){n.input.lastSelectionOrigin=t,n.input.lastSelectionTime=Date.now()}function nF(n){n.domObserver.stop();for(let t in n.input.eventHandlers)n.dom.removeEventListener(t,n.input.eventHandlers[t]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function rp(n){n.someProp("handleDOMEvents",t=>{for(let e in t)n.input.eventHandlers[e]||n.dom.addEventListener(e,n.input.eventHandlers[e]=i=>lg(n,i))})}function lg(n,t){return n.someProp("handleDOMEvents",e=>{let i=e[t.type];return i?i(n,t)||t.defaultPrevented:!1})}function iF(n,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target;e!=n.dom;e=e.parentNode)if(!e||e.nodeType==11||e.pmViewDesc&&e.pmViewDesc.stopEvent(t))return!1;return!0}function rF(n,t){!lg(n,t)&&Be[t.type]&&(n.editable||!(t.type in ze))&&Be[t.type](n,t)}ze.keydown=(n,t)=>{let e=t;if(n.input.shiftKey=e.keyCode==16||e.shiftKey,!IS(n,e)&&(n.input.lastKeyCode=e.keyCode,n.input.lastKeyCodeTime=Date.now(),!(wi&&ce&&e.keyCode==13)))if(e.keyCode!=229&&n.domObserver.forceFlush(),Ks&&e.keyCode==13&&!e.ctrlKey&&!e.altKey&&!e.metaKey){let i=Date.now();n.input.lastIOSEnter=i,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==i&&(n.someProp("handleKeyDown",r=>r(n,Dr(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",i=>i(n,e))||q2(n,e)?e.preventDefault():Ji(n,"key")};ze.keyup=(n,t)=>{t.keyCode==16&&(n.input.shiftKey=!1)};ze.keypress=(n,t)=>{let e=t;if(IS(n,e)||!e.charCode||e.ctrlKey&&!e.altKey||vn&&e.metaKey)return;if(n.someProp("handleKeyPress",r=>r(n,e))){e.preventDefault();return}let i=n.state.selection;if(!(i instanceof st)||!i.$from.sameParent(i.$to)){let r=String.fromCharCode(e.charCode),s=()=>n.state.tr.insertText(r).scrollIntoView();!/[\r\n]/.test(r)&&!n.someProp("handleTextInput",o=>o(n,i.$from.pos,i.$to.pos,r,s))&&n.dispatch(s()),e.preventDefault()}};function Uu(n){return{left:n.clientX,top:n.clientY}}function sF(n,t){let e=t.x-n.clientX,i=t.y-n.clientY;return e*e+i*i<100}function cg(n,t,e,i,r){if(i==-1)return!1;let s=n.state.doc.resolve(i);for(let o=s.depth+1;o>0;o--)if(n.someProp(t,a=>o>s.depth?a(n,e,s.nodeAfter,s.before(o),r,!0):a(n,e,s.node(o),s.before(o),r,!1)))return!0;return!1}function $s(n,t,e){if(n.focused||n.focus(),n.state.selection.eq(t))return;let i=n.state.tr.setSelection(t);i.setMeta("pointer",!0),n.dispatch(i)}function oF(n,t){if(t==-1)return!1;let e=n.state.doc.resolve(t),i=e.nodeAfter;return i&&i.isAtom&&Y.isSelectable(i)?($s(n,new Y(e)),!0):!1}function aF(n,t){if(t==-1)return!1;let e=n.state.selection,i,r;e instanceof Y&&(i=e.node);let s=n.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Y.isSelectable(a)){i&&e.$from.depth>0&&o>=e.$from.depth&&s.before(e.$from.depth+1)==e.$from.pos?r=s.before(e.$from.depth):r=s.before(o);break}}return r!=null?($s(n,Y.create(n.state.doc,r)),!0):!1}function lF(n,t,e,i,r){return cg(n,"handleClickOn",t,e,i)||n.someProp("handleClick",s=>s(n,t,i))||(r?aF(n,e):oF(n,e))}function cF(n,t,e,i){return cg(n,"handleDoubleClickOn",t,e,i)||n.someProp("handleDoubleClick",r=>r(n,t,i))}function uF(n,t,e,i){return cg(n,"handleTripleClickOn",t,e,i)||n.someProp("handleTripleClick",r=>r(n,t,i))||fF(n,e,i)}function fF(n,t,e){if(e.button!=0)return!1;let i=n.state.doc;if(t==-1)return i.inlineContent?($s(n,st.create(i,0,i.content.size)),!0):!1;let r=i.resolve(t);for(let s=r.depth+1;s>0;s--){let o=s>r.depth?r.nodeAfter:r.node(s),a=r.before(s);if(o.inlineContent)$s(n,st.create(i,a+1,a+1+o.content.size));else if(Y.isSelectable(o))$s(n,Y.create(i,a));else continue;return!0}}function ug(n){return Bc(n)}const PS=vn?"metaKey":"ctrlKey";Be.mousedown=(n,t)=>{let e=t;n.input.shiftKey=e.shiftKey;let i=ug(n),r=Date.now(),s="singleClick";r-n.input.lastClick.time<500&&sF(e,n.input.lastClick)&&!e[PS]&&n.input.lastClick.button==e.button&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:r,x:e.clientX,y:e.clientY,type:s,button:e.button};let o=n.posAtCoords(Uu(e));o&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new hF(n,o,e,!!i)):(s=="doubleClick"?cF:uF)(n,o.pos,o.inside,e)?e.preventDefault():Ji(n,"pointer"))};class hF{constructor(t,e,i,r){this.view=t,this.pos=e,this.event=i,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!i[PS],this.allowDefault=i.shiftKey;let s,o;if(e.inside>-1)s=t.state.doc.nodeAt(e.inside),o=e.inside;else{let h=t.state.doc.resolve(e.pos);s=h.parent,o=h.depth?h.before():0}const a=r?null:i.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:u}=t.state;(i.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof Y&&u.from<=o&&u.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Mn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ji(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ci(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Uu(t))),this.updateAllowDefault(t),this.allowDefault||!e?Ji(this.view,"pointer"):lF(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||we&&this.mightDrag&&!this.mightDrag.node.isAtom||ce&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?($s(this.view,dt.near(this.view.state.doc.resolve(e.pos))),t.preventDefault()):Ji(this.view,"pointer")}move(t){this.updateAllowDefault(t),Ji(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Be.touchstart=n=>{n.input.lastTouch=Date.now(),ug(n),Ji(n,"pointer")};Be.touchmove=n=>{n.input.lastTouch=Date.now(),Ji(n,"pointer")};Be.contextmenu=n=>ug(n);function IS(n,t){return n.composing?!0:we&&Math.abs(t.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const dF=wi?5e3:-1;ze.compositionstart=ze.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:t}=n,e=t.selection.$to;if(t.selection instanceof st&&(t.storedMarks||!e.textOffset&&e.parentOffset&&e.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)||ce&&fS&&pF(n)))n.markCursor=n.state.storedMarks||e.marks(),Bc(n,!0),n.markCursor=null;else if(Bc(n,!t.selection.empty),Mn&&t.selection.empty&&e.parentOffset&&!e.textOffset&&e.nodeBefore.marks.length){let i=n.domSelectionRange();for(let r=i.focusNode,s=i.focusOffset;r&&r.nodeType==1&&s!=0;){let o=s<0?r.lastChild:r.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=n.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else r=o,s=-1}}n.input.composing=!0}LS(n,dF)};function pF(n){let{focusNode:t,focusOffset:e}=n.domSelectionRange();if(!t||t.nodeType!=1||e>=t.childNodes.length)return!1;let i=t.childNodes[e];return i.nodeType==1&&i.contentEditable=="false"}ze.compositionend=(n,t)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=t.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.badSafariComposition?n.domObserver.forceFlush():n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,LS(n,20))};function LS(n,t){clearTimeout(n.input.composingTimeout),t>-1&&(n.input.composingTimeout=setTimeout(()=>Bc(n),t))}function NS(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=mF());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function gF(n){let t=n.domSelectionRange();if(!t.focusNode)return null;let e=a2(t.focusNode,t.focusOffset),i=l2(t.focusNode,t.focusOffset);if(e&&i&&e!=i){let r=i.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(e==s||i==s)return s;if(!r||!r.isText(i.nodeValue))return i;if(n.input.compositionNode==i){let o=e.pmViewDesc;if(!(!o||!o.isText(e.nodeValue)))return i}}return e||i}function mF(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Bc(n,t=!1){if(!(wi&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),NS(n),t||n.docView&&n.docView.dirty){let e=sg(n),i=n.state.selection;return e&&!e.eq(i)?n.dispatch(n.state.tr.setSelection(e)):(n.markCursor||t)&&!i.$from.node(i.$from.sharedDepth(i.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function yF(n,t){if(!n.dom.parentNode)return;let e=n.dom.parentNode.appendChild(document.createElement("div"));e.appendChild(t),e.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),r=document.createRange();r.selectNodeContents(t),n.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e),n.focus()},50)}const wa=Ge&&tr<15||Ks&&h2<604;Be.copy=ze.cut=(n,t)=>{let e=t,i=n.state.selection,r=e.type=="cut";if(i.empty)return;let s=wa?null:e.clipboardData,o=i.content(),{dom:a,text:l}=ag(n,o);s?(e.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):yF(n,a),r&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function bF(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function xF(n,t){if(!n.dom.parentNode)return;let e=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,i=n.dom.parentNode.appendChild(document.createElement(e?"textarea":"div"));e||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let r=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),i.parentNode&&i.parentNode.removeChild(i),e?_a(n,i.value,null,r,t):_a(n,i.textContent,i.innerHTML,r,t)},50)}function _a(n,t,e,i,r){let s=ES(n,t,e,i,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,r,s||K.empty)))return!0;if(!s)return!1;let o=bF(s),a=o?n.state.tr.replaceSelectionWith(o,i):n.state.tr.replaceSelection(s);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function FS(n){let t=n.getData("text/plain")||n.getData("Text");if(t)return t;let e=n.getData("text/uri-list");return e?e.replace(/\r?\n/g," "):""}ze.paste=(n,t)=>{let e=t;if(n.composing&&!wi)return;let i=wa?null:e.clipboardData,r=n.input.shiftKey&&n.input.lastKeyCode!=45;i&&_a(n,FS(i),i.getData("text/html"),r,e)?e.preventDefault():xF(n,e)};class BS{constructor(t,e,i){this.slice=t,this.move=e,this.node=i}}const wF=vn?"altKey":"ctrlKey";function zS(n,t){let e=n.someProp("dragCopies",i=>!i(t));return e??!t[wF]}Be.dragstart=(n,t)=>{let e=t,i=n.input.mouseDown;if(i&&i.done(),!e.dataTransfer)return;let r=n.state.selection,s=r.empty?null:n.posAtCoords(Uu(e)),o;if(!(s&&s.pos>=r.from&&s.pos<=(r instanceof Y?r.to-1:r.to))){if(i&&i.mightDrag)o=Y.create(n.state.doc,i.mightDrag.pos);else if(e.target&&e.target.nodeType==1){let d=n.docView.nearestDesc(e.target,!0);d&&d.node.type.spec.draggable&&d!=n.docView&&(o=Y.create(n.state.doc,d.posBefore))}}let a=(o||n.state.selection).content(),{dom:l,text:u,slice:h}=ag(n,a);(!e.dataTransfer.files.length||!ce||uS>120)&&e.dataTransfer.clearData(),e.dataTransfer.setData(wa?"Text":"text/html",l.innerHTML),e.dataTransfer.effectAllowed="copyMove",wa||e.dataTransfer.setData("text/plain",u),n.dragging=new BS(h,zS(n,e),o)};Be.dragend=n=>{let t=n.dragging;window.setTimeout(()=>{n.dragging==t&&(n.dragging=null)},50)};ze.dragover=ze.dragenter=(n,t)=>t.preventDefault();ze.drop=(n,t)=>{try{_F(n,t,n.dragging)}finally{n.dragging=null}};function _F(n,t,e){if(!t.dataTransfer)return;let i=n.posAtCoords(Uu(t));if(!i)return;let r=n.state.doc.resolve(i.pos),s=e&&e.slice;s?n.someProp("transformPasted",m=>{s=m(s,n,!1)}):s=ES(n,FS(t.dataTransfer),wa?null:t.dataTransfer.getData("text/html"),!1,r);let o=!!(e&&zS(n,t));if(n.someProp("handleDrop",m=>m(n,t,s||K.empty,o))){t.preventDefault();return}if(!s)return;t.preventDefault();let a=s?eS(n.state.doc,r.pos,s):r.pos;a==null&&(a=r.pos);let l=n.state.tr;if(o){let{node:m}=e;m?m.replace(l):l.deleteSelection()}let u=l.mapping.map(a),h=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=l.doc;if(h?l.replaceRangeWith(u,u,s.content.firstChild):l.replaceRange(u,u,s),l.doc.eq(d))return;let g=l.doc.resolve(u);if(h&&Y.isSelectable(s.content.firstChild)&&g.nodeAfter&&g.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new Y(g));else{let m=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((y,x,w,v)=>m=v),l.setSelection(og(n,g,l.doc.resolve(m)))}n.focus(),n.dispatch(l.setMeta("uiEvent","drop"))}Be.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Ci(n)},20))};Be.blur=(n,t)=>{let e=t;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),e.relatedTarget&&n.dom.contains(e.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Be.beforeinput=(n,t)=>{if(ce&&wi&&t.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:i}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=i||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,Dr(8,"Backspace")))))return;let{$cursor:r}=n.state.selection;r&&r.pos>0&&n.dispatch(n.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let n in ze)Be[n]=ze[n];function Sa(n,t){if(n==t)return!0;for(let e in n)if(n[e]!==t[e])return!1;for(let e in t)if(!(e in n))return!1;return!0}class zc{constructor(t,e){this.toDOM=t,this.spec=e||Kr,this.side=this.spec.side||0}map(t,e,i,r){let{pos:s,deleted:o}=t.mapResult(e.from+r,this.side<0?-1:1);return o?null:new cn(s-i,s-i,this)}valid(){return!0}eq(t){return this==t||t instanceof zc&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Sa(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class nr{constructor(t,e){this.attrs=t,this.spec=e||Kr}map(t,e,i,r){let s=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-i,o=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-i;return s>=o?null:new cn(s,o,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof nr&&Sa(this.attrs,t.attrs)&&Sa(this.spec,t.spec)}static is(t){return t.type instanceof nr}destroy(){}}class fg{constructor(t,e){this.attrs=t,this.spec=e||Kr}map(t,e,i,r){let s=t.mapResult(e.from+r,1);if(s.deleted)return null;let o=t.mapResult(e.to+r,-1);return o.deleted||o.pos<=s.pos?null:new cn(s.pos-i,o.pos-i,this)}valid(t,e){let{index:i,offset:r}=t.content.findIndex(e.from),s;return r==e.from&&!(s=t.child(i)).isText&&r+s.nodeSize==e.to}eq(t){return this==t||t instanceof fg&&Sa(this.attrs,t.attrs)&&Sa(this.spec,t.spec)}destroy(){}}class cn{constructor(t,e,i){this.from=t,this.to=e,this.type=i}copy(t,e){return new cn(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,i){return this.type.map(t,this,e,i)}static widget(t,e,i){return new cn(t,t,new zc(e,i))}static inline(t,e,i,r){return new cn(t,e,new nr(i,r))}static node(t,e,i,r){return new cn(t,e,new fg(i,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof nr}get widget(){return this.type instanceof zc}}const Ls=[],Kr={};class ee{constructor(t,e){this.local=t.length?t:Ls,this.children=e.length?e:Ls}static create(t,e){return e.length?Hc(e,t,0,Kr):Ce}find(t,e,i){let r=[];return this.findInner(t??0,e??1e9,r,0,i),r}findInner(t,e,i,r,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=e&&a.to>=t&&(!s||s(a.spec))&&i.push(a.copy(a.from+r,a.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<e&&this.children[o+1]>t){let a=this.children[o]+1;this.children[o+2].findInner(t-a,e-a,i,r+a,s)}}map(t,e,i){return this==Ce||t.maps.length==0?this:this.mapInner(t,e,0,0,i||Kr)}mapInner(t,e,i,r,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,i,r);l&&l.type.valid(e,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?SF(this.children,o||[],t,e,i,r,s):o?new ee(o.sort(Jr),Ls):Ce}add(t,e){return e.length?this==Ce?ee.create(t,e):this.addInner(t,e,0):this}addInner(t,e,i){let r,s=0;t.forEach((a,l)=>{let u=l+i,h;if(h=$S(e,a,u)){for(r||(r=this.children.slice());s<r.length&&r[s]<l;)s+=3;r[s]==l?r[s+2]=r[s+2].addInner(a,h,u+1):r.splice(s,0,l,l+a.nodeSize,Hc(h,a,u+1,Kr)),s+=3}});let o=HS(s?WS(e):e,-i);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||o.splice(a--,1);return new ee(o.length?this.local.concat(o).sort(Jr):this.local,r||this.children)}remove(t){return t.length==0||this==Ce?this:this.removeInner(t,0)}removeInner(t,e){let i=this.children,r=this.local;for(let s=0;s<i.length;s+=3){let o,a=i[s]+e,l=i[s+1]+e;for(let h=0,d;h<t.length;h++)(d=t[h])&&d.from>a&&d.to<l&&(t[h]=null,(o||(o=[])).push(d));if(!o)continue;i==this.children&&(i=this.children.slice());let u=i[s+2].removeInner(o,a+1);u!=Ce?i[s+2]=u:(i.splice(s,3),s-=3)}if(r.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let a=0;a<r.length;a++)r[a].eq(o,e)&&(r==this.local&&(r=this.local.slice()),r.splice(a--,1))}return i==this.children&&r==this.local?this:r.length||i.length?new ee(r,i):Ce}forChild(t,e){if(this==Ce)return this;if(e.isLeaf)return ee.empty;let i,r;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(i=this.children[a+2]);break}let s=t+1,o=s+e.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof nr){let u=Math.max(s,l.from)-s,h=Math.min(o,l.to)-s;u<h&&(r||(r=[])).push(l.copy(u,h))}}if(r){let a=new ee(r.sort(Jr),Ls);return i?new Ui([a,i]):a}return i||Ce}eq(t){if(this==t)return!0;if(!(t instanceof ee)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return hg(this.localsInner(t))}localsInner(t){if(this==Ce)return Ls;if(t.inlineContent||!this.local.some(nr.is))return this.local;let e=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof nr||e.push(this.local[i]);return e}forEachSet(t){t(this)}}ee.empty=new ee([],[]);ee.removeOverlap=hg;const Ce=ee.empty;class Ui{constructor(t){this.members=t}map(t,e){const i=this.members.map(r=>r.map(t,e,Kr));return Ui.from(i)}forChild(t,e){if(e.isLeaf)return ee.empty;let i=[];for(let r=0;r<this.members.length;r++){let s=this.members[r].forChild(t,e);s!=Ce&&(s instanceof Ui?i=i.concat(s.members):i.push(s))}return Ui.from(i)}eq(t){if(!(t instanceof Ui)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,i=!0;for(let r=0;r<this.members.length;r++){let s=this.members[r].localsInner(t);if(s.length)if(!e)e=s;else{i&&(e=e.slice(),i=!1);for(let o=0;o<s.length;o++)e.push(s[o])}}return e?hg(i?e:e.sort(Jr)):Ls}static from(t){switch(t.length){case 0:return Ce;case 1:return t[0];default:return new Ui(t.every(e=>e instanceof ee)?t:t.reduce((e,i)=>e.concat(i instanceof ee?i:i.members),[]))}}forEachSet(t){for(let e=0;e<this.members.length;e++)this.members[e].forEachSet(t)}}function SF(n,t,e,i,r,s,o){let a=n.slice();for(let u=0,h=s;u<e.maps.length;u++){let d=0;e.maps[u].forEach((g,m,y,x)=>{let w=x-y-(m-g);for(let v=0;v<a.length;v+=3){let E=a[v+1];if(E<0||g>E+h-d)continue;let O=a[v]+h-d;m>=O?a[v+1]=g<=O?-2:-1:g>=h&&w&&(a[v]+=w,a[v+1]+=w)}d+=w}),h=e.maps[u].map(h,-1)}let l=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){l=!0,a[u+1]=-1;continue}let h=e.map(n[u]+s),d=h-r;if(d<0||d>=i.content.size){l=!0;continue}let g=e.map(n[u+1]+s,-1),m=g-r,{index:y,offset:x}=i.content.findIndex(d),w=i.maybeChild(y);if(w&&x==d&&x+w.nodeSize==m){let v=a[u+2].mapInner(e,w,h+1,n[u]+s+1,o);v!=Ce?(a[u]=d,a[u+1]=m,a[u+2]=v):(a[u+1]=-2,l=!0)}else l=!0}if(l){let u=vF(a,n,t,e,r,s,o),h=Hc(u,i,0,o);t=h.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,g=0;d<h.children.length;d+=3){let m=h.children[d];for(;g<a.length&&a[g]<m;)g+=3;a.splice(g,0,h.children[d],h.children[d+1],h.children[d+2])}}return new ee(t.sort(Jr),a)}function HS(n,t){if(!t||!n.length)return n;let e=[];for(let i=0;i<n.length;i++){let r=n[i];e.push(new cn(r.from+t,r.to+t,r.type))}return e}function vF(n,t,e,i,r,s,o){function a(l,u){for(let h=0;h<l.local.length;h++){let d=l.local[h].map(i,r,u);d?e.push(d):o.onRemove&&o.onRemove(l.local[h].spec)}for(let h=0;h<l.children.length;h+=3)a(l.children[h+2],l.children[h]+u+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],t[l]+s+1);return e}function $S(n,t,e){if(t.isLeaf)return null;let i=e+t.nodeSize,r=null;for(let s=0,o;s<n.length;s++)(o=n[s])&&o.from>e&&o.to<i&&((r||(r=[])).push(o),n[s]=null);return r}function WS(n){let t=[];for(let e=0;e<n.length;e++)n[e]!=null&&t.push(n[e]);return t}function Hc(n,t,e,i){let r=[],s=!1;t.forEach((a,l)=>{let u=$S(n,a,l+e);if(u){s=!0;let h=Hc(u,a,e+l+1,i);h!=Ce&&r.push(l,l+a.nodeSize,h)}});let o=HS(s?WS(n):n,-e).sort(Jr);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||(i.onRemove&&i.onRemove(o[a].spec),o.splice(a--,1));return o.length||r.length?new ee(o,r):Ce}function Jr(n,t){return n.from-t.from||n.to-t.to}function hg(n){let t=n;for(let e=0;e<t.length-1;e++){let i=t[e];if(i.from!=i.to)for(let r=e+1;r<t.length;r++){let s=t[r];if(s.from==i.from){s.to!=i.to&&(t==n&&(t=n.slice()),t[r]=s.copy(s.from,i.to),j0(t,r+1,s.copy(i.to,s.to)));continue}else{s.from<i.to&&(t==n&&(t=n.slice()),t[e]=i.copy(i.from,s.from),j0(t,r,i.copy(s.from,i.to)));break}}}return t}function j0(n,t,e){for(;t<n.length&&Jr(e,n[t])>0;)t++;n.splice(t,0,e)}function Kh(n){let t=[];return n.someProp("decorations",e=>{let i=e(n.state);i&&i!=Ce&&t.push(i)}),n.cursorWrapper&&t.push(ee.create(n.state.doc,[n.cursorWrapper.deco])),Ui.from(t)}const kF={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},CF=Ge&&tr<=11;class MF{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class EF{constructor(t,e){this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new MF,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let r=0;r<i.length;r++)this.queue.push(i[r]);Ge&&tr<=11&&i.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():we&&t.composing&&i.some(r=>r.type=="childList"&&r.target.nodeName=="TR")?(t.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),CF&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,kF)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let e=0;e<t.length;e++)this.queue.push(t[e]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(F0(this.view)){if(this.suppressingSelectionUpdates)return Ci(this.view);if(Ge&&tr<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&ss(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let e=new Set,i;for(let s=t.focusNode;s;s=qs(s))e.add(s);for(let s=t.anchorNode;s;s=qs(s))if(e.has(s)){i=s;break}let r=i&&this.view.docView.nearestDesc(i);if(r&&r.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let e=this.pendingRecords();e.length&&(this.queue=[]);let i=t.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&F0(t)&&!this.ignoreSelectionChange(i),s=-1,o=-1,a=!1,l=[];if(t.editable)for(let h=0;h<e.length;h++){let d=this.registerMutation(e[h],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(Mn&&l.length){let h=l.filter(d=>d.nodeName=="BR");if(h.length==2){let[d,g]=h;d.parentNode&&d.parentNode.parentNode==g.parentNode?g.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let g of h){let m=g.parentNode;m&&m.nodeName=="LI"&&(!d||AF(t,d)!=m)&&g.remove()}}}else if((ce||we)&&l.some(h=>h.nodeName=="BR")&&(t.input.lastKeyCode==8||t.input.lastKeyCode==46)){for(let h of l)if(h.nodeName=="BR"&&h.parentNode){let d=h.nextSibling;d&&d.nodeType==1&&d.contentEditable=="false"&&h.parentNode.removeChild(h)}}let u=null;s<0&&r&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&Wu(i)&&(u=sg(t))&&u.eq(dt.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Ci(t),this.currentSelection.set(i),t.scrollToSelection()):(s>-1||r)&&(s>-1&&(t.docView.markDirty(s,o),TF(t)),t.input.badSafariComposition&&(t.input.badSafariComposition=!1,RF(t,l)),this.handleDOMChange(s,o,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(i)||Ci(t),this.currentSelection.set(i))}registerMutation(t,e){if(e.indexOf(t.target)>-1)return null;let i=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(i==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!i||i.ignoreMutation(t))return null;if(t.type=="childList"){for(let h=0;h<t.addedNodes.length;h++){let d=t.addedNodes[h];e.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(t.target))return{from:i.posBefore,to:i.posAfter};let r=t.previousSibling,s=t.nextSibling;if(Ge&&tr<=11&&t.addedNodes.length)for(let h=0;h<t.addedNodes.length;h++){let{previousSibling:d,nextSibling:g}=t.addedNodes[h];(!d||Array.prototype.indexOf.call(t.addedNodes,d)<0)&&(r=d),(!g||Array.prototype.indexOf.call(t.addedNodes,g)<0)&&(s=g)}let o=r&&r.parentNode==t.target?be(r)+1:0,a=i.localPosFromDOM(t.target,o,-1),l=s&&s.parentNode==t.target?be(s):t.target.childNodes.length,u=i.localPosFromDOM(t.target,l,1);return{from:a,to:u}}else return t.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:(this.lastChangedTextNode=t.target,{from:i.posAtStart,to:i.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let q0=new WeakMap,K0=!1;function TF(n){if(!q0.has(n)&&(q0.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Mn,K0)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),K0=!0}}function J0(n,t){let e=t.startContainer,i=t.startOffset,r=t.endContainer,s=t.endOffset,o=n.domAtPos(n.state.selection.anchor);return ss(o.node,o.offset,r,s)&&([e,i,r,s]=[r,s,e,i]),{anchorNode:e,anchorOffset:i,focusNode:r,focusOffset:s}}function OF(n,t){if(t.getComposedRanges){let r=t.getComposedRanges(n.root)[0];if(r)return J0(n,r)}let e;function i(r){r.preventDefault(),r.stopImmediatePropagation(),e=r.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",i,!0),e?J0(n,e):null}function AF(n,t){for(let e=t.parentNode;e&&e!=n.dom;e=e.parentNode){let i=n.docView.nearestDesc(e,!0);if(i&&i.node.isBlock)return e}return null}function RF(n,t){var e;let{focusNode:i,focusOffset:r}=n.domSelectionRange();for(let s of t)if(((e=s.parentNode)===null||e===void 0?void 0:e.nodeName)=="TR"){let o=s.nextSibling;for(;o&&o.nodeName!="TD"&&o.nodeName!="TH";)o=o.nextSibling;if(o){let a=o;for(;;){let l=a.firstChild;if(!l||l.nodeType!=1||l.contentEditable=="false"||/^(BR|IMG)$/.test(l.nodeName))break;a=l}a.insertBefore(s,a.firstChild),i==s&&n.domSelection().collapse(s,r)}else s.parentNode.removeChild(s)}}function DF(n,t,e){let{node:i,fromOffset:r,toOffset:s,from:o,to:a}=n.docView.parseRange(t,e),l=n.domSelectionRange(),u,h=l.anchorNode;if(h&&n.dom.contains(h.nodeType==1?h:h.parentNode)&&(u=[{node:h,offset:l.anchorOffset}],Wu(l)||u.push({node:l.focusNode,offset:l.focusOffset})),ce&&n.input.lastKeyCode===8)for(let w=s;w>r;w--){let v=i.childNodes[w-1],E=v.pmViewDesc;if(v.nodeName=="BR"&&!E){s=w;break}if(!E||E.size)break}let d=n.state.doc,g=n.someProp("domParser")||Qo.fromSchema(n.state.schema),m=d.resolve(o),y=null,x=g.parse(i,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:r,to:s,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:PF,context:m});if(u&&u[0].pos!=null){let w=u[0].pos,v=u[1]&&u[1].pos;v==null&&(v=w),y={anchor:w+o,head:v+o}}return{doc:x,sel:y,from:o,to:a}}function PF(n){let t=n.pmViewDesc;if(t)return t.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(we&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}else if(n.parentNode.lastChild==n||we&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const IF=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function LF(n,t,e,i,r){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,t<0){let I=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,z=sg(n,I);if(z&&!n.state.selection.eq(z)){if(ce&&wi&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",Z=>Z(n,Dr(13,"Enter"))))return;let j=n.state.tr.setSelection(z);I=="pointer"?j.setMeta("pointer",!0):I=="key"&&j.scrollIntoView(),s&&j.setMeta("composition",s),n.dispatch(j)}return}let o=n.state.doc.resolve(t),a=o.sharedDepth(e);t=o.before(a+1),e=n.state.doc.resolve(e).after(a+1);let l=n.state.selection,u=DF(n,t,e),h=n.state.doc,d=h.slice(u.from,u.to),g,m;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(g=n.state.selection.to,m="end"):(g=n.state.selection.from,m="start"),n.input.lastKeyCode=null;let y=BF(d.content,u.doc.content,u.from,g,m);if(y&&n.input.domChangeCount++,(Ks&&n.input.lastIOSEnter>Date.now()-225||wi)&&r.some(I=>I.nodeType==1&&!IF.test(I.nodeName))&&(!y||y.endA>=y.endB)&&n.someProp("handleKeyDown",I=>I(n,Dr(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!y)if(i&&l instanceof st&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))y={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let I=X0(n,n.state.doc,u.sel);if(I&&!I.eq(n.state.selection)){let z=n.state.tr.setSelection(I);s&&z.setMeta("composition",s),n.dispatch(z)}}return}n.state.selection.from<n.state.selection.to&&y.start==y.endB&&n.state.selection instanceof st&&(y.start>n.state.selection.from&&y.start<=n.state.selection.from+2&&n.state.selection.from>=u.from?y.start=n.state.selection.from:y.endA<n.state.selection.to&&y.endA>=n.state.selection.to-2&&n.state.selection.to<=u.to&&(y.endB+=n.state.selection.to-y.endA,y.endA=n.state.selection.to)),Ge&&tr<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>u.from&&u.doc.textBetween(y.start-u.from-1,y.start-u.from+1)==" "&&(y.start--,y.endA--,y.endB--);let x=u.doc.resolveNoCache(y.start-u.from),w=u.doc.resolveNoCache(y.endB-u.from),v=h.resolve(y.start),E=x.sameParent(w)&&x.parent.inlineContent&&v.end()>=y.endA;if((Ks&&n.input.lastIOSEnter>Date.now()-225&&(!E||r.some(I=>I.nodeName=="DIV"||I.nodeName=="P"))||!E&&x.pos<u.doc.content.size&&(!x.sameParent(w)||!x.parent.inlineContent)&&x.pos<w.pos&&!/\S/.test(u.doc.textBetween(x.pos,w.pos,"","")))&&n.someProp("handleKeyDown",I=>I(n,Dr(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>y.start&&FF(h,y.start,y.endA,x,w)&&n.someProp("handleKeyDown",I=>I(n,Dr(8,"Backspace")))){wi&&ce&&n.domObserver.suppressSelectionUpdates();return}ce&&y.endB==y.start&&(n.input.lastChromeDelete=Date.now()),wi&&!E&&x.start()!=w.start()&&w.parentOffset==0&&x.depth==w.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==y.endA&&(y.endB-=2,w=u.doc.resolveNoCache(y.endB-u.from),setTimeout(()=>{n.someProp("handleKeyDown",function(I){return I(n,Dr(13,"Enter"))})},20));let O=y.start,P=y.endA,R=I=>{let z=I||n.state.tr.replace(O,P,u.doc.slice(y.start-u.from,y.endB-u.from));if(u.sel){let j=X0(n,z.doc,u.sel);j&&!(ce&&n.composing&&j.empty&&(y.start!=y.endB||n.input.lastChromeDelete<Date.now()-100)&&(j.head==O||j.head==z.mapping.map(P)-1)||Ge&&j.empty&&j.head==O)&&z.setSelection(j)}return s&&z.setMeta("composition",s),z.scrollIntoView()},B;if(E)if(x.pos==w.pos){Ge&&tr<=11&&x.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ci(n),20));let I=R(n.state.tr.delete(O,P)),z=h.resolve(y.start).marksAcross(h.resolve(y.endA));z&&I.ensureMarks(z),n.dispatch(I)}else if(y.endA==y.endB&&(B=NF(x.parent.content.cut(x.parentOffset,w.parentOffset),v.parent.content.cut(v.parentOffset,y.endA-v.start())))){let I=R(n.state.tr);B.type=="add"?I.addMark(O,P,B.mark):I.removeMark(O,P,B.mark),n.dispatch(I)}else if(x.parent.child(x.index()).isText&&x.index()==w.index()-(w.textOffset?0:1)){let I=x.parent.textBetween(x.parentOffset,w.parentOffset),z=()=>R(n.state.tr.insertText(I,O,P));n.someProp("handleTextInput",j=>j(n,O,P,I,z))||n.dispatch(z())}else n.dispatch(R());else n.dispatch(R())}function X0(n,t,e){return Math.max(e.anchor,e.head)>t.content.size?null:og(n,t.resolve(e.anchor),t.resolve(e.head))}function NF(n,t){let e=n.firstChild.marks,i=t.firstChild.marks,r=e,s=i,o,a,l;for(let h=0;h<i.length;h++)r=i[h].removeFromSet(r);for(let h=0;h<e.length;h++)s=e[h].removeFromSet(s);if(r.length==1&&s.length==0)a=r[0],o="add",l=h=>h.mark(a.addToSet(h.marks));else if(r.length==0&&s.length==1)a=s[0],o="remove",l=h=>h.mark(a.removeFromSet(h.marks));else return null;let u=[];for(let h=0;h<t.childCount;h++)u.push(l(t.child(h)));if(V.from(u).eq(n))return{mark:a,type:o}}function FF(n,t,e,i,r){if(e-t<=r.pos-i.pos||Jh(i,!0,!1)<r.pos)return!1;let s=n.resolve(t);if(!i.parent.isTextblock){let a=s.nodeAfter;return a!=null&&e==t+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=n.resolve(Jh(s,!0,!0));return!o.parent.isTextblock||o.pos>e||Jh(o,!0,!1)<e?!1:i.parent.content.cut(i.parentOffset).eq(o.parent.content)}function Jh(n,t,e){let i=n.depth,r=t?n.end():n.pos;for(;i>0&&(t||n.indexAfter(i)==n.node(i).childCount);)i--,r++,t=!1;if(e){let s=n.node(i).maybeChild(n.indexAfter(i));for(;s&&!s.isLeaf;)s=s.firstChild,r++}return r}function BF(n,t,e,i,r){let s=n.findDiffStart(t,e);if(s==null)return null;let{a:o,b:a}=n.findDiffEnd(t,e+n.size,e+t.size);if(r=="end"){let l=Math.max(0,s-Math.min(o,a));i-=o+l-s}if(o<s&&n.size<t.size){let l=i<=s&&i>=o?s-i:0;s-=l,s&&s<t.size&&G0(t.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=i<=s&&i>=a?s-i:0;s-=l,s&&s<n.size&&G0(n.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function G0(n){if(n.length!=2)return!1;let t=n.charCodeAt(0),e=n.charCodeAt(1);return t>=56320&&t<=57343&&e>=55296&&e<=56319}class VS{constructor(t,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new tF,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(ex),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Q0(this),Z0(this),this.nodeViews=tx(this),this.docView=R0(this.state.doc,Y0(this),Kh(this),this.dom,this),this.domObserver=new EF(this,(i,r,s,o)=>LF(this,i,r,s,o)),this.domObserver.start(),eF(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let e in t)this._props[e]=t[e];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&rp(this);let e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(ex),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}setProps(t){let e={};for(let i in this._props)e[i]=this._props[i];e.state=this.state;for(let i in t)e[i]=t[i];this.update(e)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,e){var i;let r=this.state,s=!1,o=!1;t.storedMarks&&this.composing&&(NS(this),o=!0),this.state=t;let a=r.plugins!=t.plugins||this._props.plugins!=e.plugins;if(a||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let m=tx(this);HF(m,this.nodeViews)&&(this.nodeViews=m,s=!0)}(a||e.handleDOMEvents!=this._props.handleDOMEvents)&&rp(this),this.editable=Q0(this),Z0(this);let l=Kh(this),u=Y0(this),h=r.plugins!=t.plugins&&!r.doc.eq(t.doc)?"reset":t.scrollToSelection>r.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(t.doc,u,l);(d||!t.selection.eq(r.selection))&&(o=!0);let g=h=="preserve"&&o&&this.dom.style.overflowAnchor==null&&g2(this);if(o){this.domObserver.stop();let m=d&&(Ge||ce)&&!this.composing&&!r.selection.empty&&!t.selection.empty&&zF(r.selection,t.selection);if(d){let y=ce?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=gF(this)),(s||!this.docView.update(t.doc,u,l,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=R0(t.doc,u,l,this.dom,this)),y&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&z2(this))?Ci(this,m):(kS(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),!((i=this.dragging)===null||i===void 0)&&i.node&&!r.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,r),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():g&&m2(g)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",e=>e(this)))if(this.state.selection instanceof Y){let e=this.docView.domAfterPos(this.state.selection.from);e.nodeType==1&&C0(this,e.getBoundingClientRect(),t)}else C0(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let i=this.directPlugins[e];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let i=this.state.plugins[e];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let e=0;e<this.pluginViews.length;e++){let i=this.pluginViews[e];i.update&&i.update(this,t)}}updateDraggedNode(t,e){let i=t.node,r=-1;if(this.state.doc.nodeAt(i.from)==i.node)r=i.from;else{let s=i.from+(this.state.doc.content.size-e.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==i.node&&(r=s)}this.dragging=new BS(t.slice,t.move,r<0?void 0:Y.create(this.state.doc,r))}someProp(t,e){let i=this._props&&this._props[t],r;if(i!=null&&(r=e?e(i):i))return r;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[t];if(a!=null&&(r=e?e(a):a))return r}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[t];if(a!=null&&(r=e?e(a):a))return r}}hasFocus(){if(Ge){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&y2(this.dom),Ci(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let e=this.dom.parentNode;e;e=e.parentNode)if(e.nodeType==9||e.nodeType==11&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return t||document}updateRoot(){this._root=null}posAtCoords(t){return S2(this,t)}coordsAtPos(t,e=1){return mS(this,t,e)}domAtPos(t,e=0){return this.docView.domFromPos(t,e)}nodeDOM(t){let e=this.docView.descAt(t);return e?e.nodeDOM:null}posAtDOM(t,e,i=-1){let r=this.docView.posFromDOM(t,e,i);if(r==null)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(t,e){return E2(this,e||this.state,t)}pasteHTML(t,e){return _a(this,"",t,!1,e||new ClipboardEvent("paste"))}pasteText(t,e){return _a(this,t,null,!0,e||new ClipboardEvent("paste"))}serializeForClipboard(t){return ag(this,t)}destroy(){this.docView&&(nF(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Kh(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,s2())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return rF(this,t)}domSelectionRange(){let t=this.domSelection();return t?we&&this.root.nodeType===11&&u2(this.dom.ownerDocument)==this.dom&&OF(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}VS.prototype.dispatch=function(n){let t=this._props.dispatchTransaction;t?t.call(this,n):this.updateState(this.state.apply(n))};function Y0(n){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(n.editable),n.someProp("attributes",e=>{if(typeof e=="function"&&(e=e(n.state)),e)for(let i in e)i=="class"?t.class+=" "+e[i]:i=="style"?t.style=(t.style?t.style+";":"")+e[i]:!t[i]&&i!="contenteditable"&&i!="nodeName"&&(t[i]=String(e[i]))}),t.translate||(t.translate="no"),[cn.node(0,n.state.doc.content.size,t)]}function Z0(n){if(n.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),n.cursorWrapper={dom:t,deco:cn.widget(n.state.selection.from,t,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Q0(n){return!n.someProp("editable",t=>t(n.state)===!1)}function zF(n,t){let e=Math.min(n.$anchor.sharedDepth(n.head),t.$anchor.sharedDepth(t.head));return n.$anchor.start(e)!=t.$anchor.start(e)}function tx(n){let t=Object.create(null);function e(i){for(let r in i)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=i[r])}return n.someProp("nodeViews",e),n.someProp("markViews",e),t}function HF(n,t){let e=0,i=0;for(let r in n){if(n[r]!=t[r])return!0;e++}for(let r in t)i++;return e!=i}function ex(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var or={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},$c={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},$F=typeof navigator<"u"&&/Mac/.test(navigator.platform),WF=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var xe=0;xe<10;xe++)or[48+xe]=or[96+xe]=String(xe);for(var xe=1;xe<=24;xe++)or[xe+111]="F"+xe;for(var xe=65;xe<=90;xe++)or[xe]=String.fromCharCode(xe+32),$c[xe]=String.fromCharCode(xe);for(var Xh in or)$c.hasOwnProperty(Xh)||($c[Xh]=or[Xh]);function VF(n){var t=$F&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||WF&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",e=!t&&n.key||(n.shiftKey?$c:or)[n.keyCode]||n.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}const UF=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),jF=typeof navigator<"u"&&/Win/.test(navigator.platform);function qF(n){let t=n.split(/-(?!$)/),e=t[t.length-1];e=="Space"&&(e=" ");let i,r,s,o;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))UF?o=!0:r=!0;else throw new Error("Unrecognized modifier name: "+l)}return i&&(e="Alt-"+e),r&&(e="Ctrl-"+e),o&&(e="Meta-"+e),s&&(e="Shift-"+e),e}function KF(n){let t=Object.create(null);for(let e in n)t[qF(e)]=n[e];return t}function Gh(n,t,e=!0){return t.altKey&&(n="Alt-"+n),t.ctrlKey&&(n="Ctrl-"+n),t.metaKey&&(n="Meta-"+n),e&&t.shiftKey&&(n="Shift-"+n),n}function JF(n){return new pe({props:{handleKeyDown:US(n)}})}function US(n){let t=KF(n);return function(e,i){let r=VF(i),s,o=t[Gh(r,i)];if(o&&o(e.state,e.dispatch,e))return!0;if(r.length==1&&r!=" "){if(i.shiftKey){let a=t[Gh(r,i,!1)];if(a&&a(e.state,e.dispatch,e))return!0}if((i.altKey||i.metaKey||i.ctrlKey)&&!(jF&&i.ctrlKey&&i.altKey)&&(s=or[i.keyCode])&&s!=r){let a=t[Gh(s,i)];if(a&&a(e.state,e.dispatch,e))return!0}}return!1}}const dg=(n,t)=>n.selection.empty?!1:(t&&t(n.tr.deleteSelection().scrollIntoView()),!0);function jS(n,t){let{$cursor:e}=n.selection;return!e||(t?!t.endOfTextblock("backward",n):e.parentOffset>0)?null:e}const qS=(n,t,e)=>{let i=jS(n,e);if(!i)return!1;let r=pg(i);if(!r){let o=i.blockRange(),a=o&&so(o);return a==null?!1:(t&&t(n.tr.lift(o,a).scrollIntoView()),!0)}let s=r.nodeBefore;if(ev(n,r,t,-1))return!0;if(i.parent.content.size==0&&(Js(s,"end")||Y.isSelectable(s)))for(let o=i.depth;;o--){let a=Hu(n.doc,i.before(o),i.after(o),K.empty);if(a&&a.slice.size<a.to-a.from){if(t){let l=n.tr.step(a);l.setSelection(Js(s,"end")?dt.findFrom(l.doc.resolve(l.mapping.map(r.pos,-1)),-1):Y.create(l.doc,r.pos-s.nodeSize)),t(l.scrollIntoView())}return!0}if(o==1||i.node(o-1).childCount>1)break}return s.isAtom&&r.depth==i.depth-1?(t&&t(n.tr.delete(r.pos-s.nodeSize,r.pos).scrollIntoView()),!0):!1},XF=(n,t,e)=>{let i=jS(n,e);if(!i)return!1;let r=pg(i);return r?KS(n,r,t):!1},GF=(n,t,e)=>{let i=XS(n,e);if(!i)return!1;let r=gg(i);return r?KS(n,r,t):!1};function KS(n,t,e){let i=t.nodeBefore,r=i,s=t.pos-1;for(;!r.isTextblock;s--){if(r.type.spec.isolating)return!1;let h=r.lastChild;if(!h)return!1;r=h}let o=t.nodeAfter,a=o,l=t.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let h=a.firstChild;if(!h)return!1;a=h}let u=Hu(n.doc,s,l,K.empty);if(!u||u.from!=s||u instanceof le&&u.slice.size>=l-s)return!1;if(e){let h=n.tr.step(u);h.setSelection(st.create(h.doc,s)),e(h.scrollIntoView())}return!0}function Js(n,t,e=!1){for(let i=n;i;i=t=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(e&&i.childCount!=1)return!1}return!1}const JS=(n,t,e)=>{let{$head:i,empty:r}=n.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(e?!e.endOfTextblock("backward",n):i.parentOffset>0)return!1;s=pg(i)}let o=s&&s.nodeBefore;return!o||!Y.isSelectable(o)?!1:(t&&t(n.tr.setSelection(Y.create(n.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function pg(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){if(n.index(t)>0)return n.doc.resolve(n.before(t+1));if(n.node(t).type.spec.isolating)break}return null}function XS(n,t){let{$cursor:e}=n.selection;return!e||(t?!t.endOfTextblock("forward",n):e.parentOffset<e.parent.content.size)?null:e}const GS=(n,t,e)=>{let i=XS(n,e);if(!i)return!1;let r=gg(i);if(!r)return!1;let s=r.nodeAfter;if(ev(n,r,t,1))return!0;if(i.parent.content.size==0&&(Js(s,"start")||Y.isSelectable(s))){let o=Hu(n.doc,i.before(),i.after(),K.empty);if(o&&o.slice.size<o.to-o.from){if(t){let a=n.tr.step(o);a.setSelection(Js(s,"start")?dt.findFrom(a.doc.resolve(a.mapping.map(r.pos)),1):Y.create(a.doc,a.mapping.map(r.pos))),t(a.scrollIntoView())}return!0}}return s.isAtom&&r.depth==i.depth-1?(t&&t(n.tr.delete(r.pos,r.pos+s.nodeSize).scrollIntoView()),!0):!1},YS=(n,t,e)=>{let{$head:i,empty:r}=n.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(e?!e.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size)return!1;s=gg(i)}let o=s&&s.nodeAfter;return!o||!Y.isSelectable(o)?!1:(t&&t(n.tr.setSelection(Y.create(n.doc,s.pos)).scrollIntoView()),!0)};function gg(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){let e=n.node(t);if(n.index(t)+1<e.childCount)return n.doc.resolve(n.after(t+1));if(e.type.spec.isolating)break}return null}const YF=(n,t)=>{let e=n.selection,i=e instanceof Y,r;if(i){if(e.node.isTextblock||!ur(n.doc,e.from))return!1;r=e.from}else if(r=zu(n.doc,e.from,-1),r==null)return!1;if(t){let s=n.tr.join(r);i&&s.setSelection(Y.create(s.doc,r-n.doc.resolve(r).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},ZF=(n,t)=>{let e=n.selection,i;if(e instanceof Y){if(e.node.isTextblock||!ur(n.doc,e.to))return!1;i=e.to}else if(i=zu(n.doc,e.to,1),i==null)return!1;return t&&t(n.tr.join(i).scrollIntoView()),!0},QF=(n,t)=>{let{$from:e,$to:i}=n.selection,r=e.blockRange(i),s=r&&so(r);return s==null?!1:(t&&t(n.tr.lift(r,s).scrollIntoView()),!0)},ZS=(n,t)=>{let{$head:e,$anchor:i}=n.selection;return!e.parent.type.spec.code||!e.sameParent(i)?!1:(t&&t(n.tr.insertText(`
`).scrollIntoView()),!0)};function mg(n){for(let t=0;t<n.edgeCount;t++){let{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}const tB=(n,t)=>{let{$head:e,$anchor:i}=n.selection;if(!e.parent.type.spec.code||!e.sameParent(i))return!1;let r=e.node(-1),s=e.indexAfter(-1),o=mg(r.contentMatchAt(s));if(!o||!r.canReplaceWith(s,s,o))return!1;if(t){let a=e.after(),l=n.tr.replaceWith(a,a,o.createAndFill());l.setSelection(dt.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},QS=(n,t)=>{let e=n.selection,{$from:i,$to:r}=e;if(e instanceof un||i.parent.inlineContent||r.parent.inlineContent)return!1;let s=mg(r.parent.contentMatchAt(r.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,a=n.tr.insert(o,s.createAndFill());a.setSelection(st.create(a.doc,o+1)),t(a.scrollIntoView())}return!0},tv=(n,t)=>{let{$cursor:e}=n.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let s=e.before();if(ki(n.doc,s))return t&&t(n.tr.split(s).scrollIntoView()),!0}let i=e.blockRange(),r=i&&so(i);return r==null?!1:(t&&t(n.tr.lift(i,r).scrollIntoView()),!0)};function eB(n){return(t,e)=>{let{$from:i,$to:r}=t.selection;if(t.selection instanceof Y&&t.selection.node.isBlock)return!i.parentOffset||!ki(t.doc,i.pos)?!1:(e&&e(t.tr.split(i.pos).scrollIntoView()),!0);if(!i.depth)return!1;let s=[],o,a,l=!1,u=!1;for(let m=i.depth;;m--)if(i.node(m).isBlock){l=i.end(m)==i.pos+(i.depth-m),u=i.start(m)==i.pos-(i.depth-m),a=mg(i.node(m-1).contentMatchAt(i.indexAfter(m-1))),s.unshift(l&&a?{type:a}:null),o=m;break}else{if(m==1)return!1;s.unshift(null)}let h=t.tr;(t.selection instanceof st||t.selection instanceof un)&&h.deleteSelection();let d=h.mapping.map(i.pos),g=ki(h.doc,d,s.length,s);if(g||(s[0]=a?{type:a}:null,g=ki(h.doc,d,s.length,s)),!g)return!1;if(h.split(d,s.length,s),!l&&u&&i.node(o).type!=a){let m=h.mapping.map(i.before(o)),y=h.doc.resolve(m);a&&i.node(o-1).canReplaceWith(y.index(),y.index()+1,a)&&h.setNodeMarkup(h.mapping.map(i.before(o)),a)}return e&&e(h.scrollIntoView()),!0}}const nB=eB(),iB=(n,t)=>{let{$from:e,to:i}=n.selection,r,s=e.sharedDepth(i);return s==0?!1:(r=e.before(s),t&&t(n.tr.setSelection(Y.create(n.doc,r))),!0)};function rB(n,t,e){let i=t.nodeBefore,r=t.nodeAfter,s=t.index();return!i||!r||!i.type.compatibleContent(r.type)?!1:!i.content.size&&t.parent.canReplace(s-1,s)?(e&&e(n.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(r.isTextblock||ur(n.doc,t.pos))?!1:(e&&e(n.tr.join(t.pos).scrollIntoView()),!0)}function ev(n,t,e,i){let r=t.nodeBefore,s=t.nodeAfter,o,a,l=r.type.spec.isolating||s.type.spec.isolating;if(!l&&rB(n,t,e))return!0;let u=!l&&t.parent.canReplace(t.index(),t.index()+1);if(u&&(o=(a=r.contentMatchAt(r.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(e){let m=t.pos+s.nodeSize,y=V.empty;for(let v=o.length-1;v>=0;v--)y=V.from(o[v].create(null,y));y=V.from(r.copy(y));let x=n.tr.step(new fe(t.pos-1,m,t.pos,m,new K(y,1,0),o.length,!0)),w=x.doc.resolve(m+2*o.length);w.nodeAfter&&w.nodeAfter.type==r.type&&ur(x.doc,w.pos)&&x.join(w.pos),e(x.scrollIntoView())}return!0}let h=s.type.spec.isolating||i>0&&l?null:dt.findFrom(t,1),d=h&&h.$from.blockRange(h.$to),g=d&&so(d);if(g!=null&&g>=t.depth)return e&&e(n.tr.lift(d,g).scrollIntoView()),!0;if(u&&Js(s,"start",!0)&&Js(r,"end")){let m=r,y=[];for(;y.push(m),!m.isTextblock;)m=m.lastChild;let x=s,w=1;for(;!x.isTextblock;x=x.firstChild)w++;if(m.canReplace(m.childCount,m.childCount,x.content)){if(e){let v=V.empty;for(let O=y.length-1;O>=0;O--)v=V.from(y[O].copy(v));let E=n.tr.step(new fe(t.pos-y.length,t.pos+s.nodeSize,t.pos+w,t.pos+s.nodeSize-w,new K(v,y.length,0),0,!0));e(E.scrollIntoView())}return!0}}return!1}function nv(n){return function(t,e){let i=t.selection,r=n<0?i.$from:i.$to,s=r.depth;for(;r.node(s).isInline;){if(!s)return!1;s--}return r.node(s).isTextblock?(e&&e(t.tr.setSelection(st.create(t.doc,n<0?r.start(s):r.end(s)))),!0):!1}}const sB=nv(-1),oB=nv(1);function aB(n,t=null){return function(e,i){let{$from:r,$to:s}=e.selection,o=r.blockRange(s),a=o&&ng(o,n,t);return a?(i&&i(e.tr.wrap(o,a).scrollIntoView()),!0):!1}}function nx(n,t=null){return function(e,i){let r=!1;for(let s=0;s<e.selection.ranges.length&&!r;s++){let{$from:{pos:o},$to:{pos:a}}=e.selection.ranges[s];e.doc.nodesBetween(o,a,(l,u)=>{if(r)return!1;if(!(!l.isTextblock||l.hasMarkup(n,t)))if(l.type==n)r=!0;else{let h=e.doc.resolve(u),d=h.index();r=h.parent.canReplaceWith(d,d+1,n)}})}if(!r)return!1;if(i){let s=e.tr;for(let o=0;o<e.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=e.selection.ranges[o];s.setBlockType(a,l,n,t)}i(s.scrollIntoView())}return!0}}function yg(...n){return function(t,e,i){for(let r=0;r<n.length;r++)if(n[r](t,e,i))return!0;return!1}}yg(dg,qS,JS);yg(dg,GS,YS);yg(ZS,QS,tv,nB);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function lB(n,t=null){return function(e,i){let{$from:r,$to:s}=e.selection,o=r.blockRange(s);if(!o)return!1;let a=i?e.tr:null;return cB(a,o,n,t)?(i&&i(a.scrollIntoView()),!0):!1}}function cB(n,t,e,i=null){let r=!1,s=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(e)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let l=o.resolve(t.start-2);s=new Ic(l,l,t.depth),t.endIndex<t.parent.childCount&&(t=new Ic(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),r=!0}let a=ng(s,e,i,t);return a?(n&&uB(n,t,a,r,e),!0):!1}function uB(n,t,e,i,r){let s=V.empty;for(let h=e.length-1;h>=0;h--)s=V.from(e[h].type.create(e[h].attrs,s));n.step(new fe(t.start-(i?2:0),t.end,t.start,t.end,new K(s,0,0),e.length,!0));let o=0;for(let h=0;h<e.length;h++)e[h].type==r&&(o=h+1);let a=e.length-o,l=t.start+e.length-(i?2:0),u=t.parent;for(let h=t.startIndex,d=t.endIndex,g=!0;h<d;h++,g=!1)!g&&ki(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=u.child(h).nodeSize;return n}function fB(n){return function(t,e){let{$from:i,$to:r}=t.selection,s=i.blockRange(r,o=>o.childCount>0&&o.firstChild.type==n);return s?e?i.node(s.depth-1).type==n?hB(t,e,n,s):dB(t,e,s):!0:!1}}function hB(n,t,e,i){let r=n.tr,s=i.end,o=i.$to.end(i.depth);s<o&&(r.step(new fe(s-1,o,s,o,new K(V.from(e.create(null,i.parent.copy())),1,0),1,!0)),i=new Ic(r.doc.resolve(i.$from.pos),r.doc.resolve(o),i.depth));const a=so(i);if(a==null)return!1;r.lift(i,a);let l=r.doc.resolve(r.mapping.map(s,-1)-1);return ur(r.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&r.join(l.pos),t(r.scrollIntoView()),!0}function dB(n,t,e){let i=n.tr,r=e.parent;for(let m=e.end,y=e.endIndex-1,x=e.startIndex;y>x;y--)m-=r.child(y).nodeSize,i.delete(m-1,m+1);let s=i.doc.resolve(e.start),o=s.nodeAfter;if(i.mapping.map(e.end)!=e.start+s.nodeAfter.nodeSize)return!1;let a=e.startIndex==0,l=e.endIndex==r.childCount,u=s.node(-1),h=s.index(-1);if(!u.canReplace(h+(a?0:1),h+1,o.content.append(l?V.empty:V.from(r))))return!1;let d=s.pos,g=d+o.nodeSize;return i.step(new fe(d-(a?1:0),g+(l?1:0),d+1,g-1,new K((a?V.empty:V.from(r.copy(V.empty))).append(l?V.empty:V.from(r.copy(V.empty))),a?0:1,l?0:1),a?0:1)),t(i.scrollIntoView()),!0}function pB(n){return function(t,e){let{$from:i,$to:r}=t.selection,s=i.blockRange(r,u=>u.childCount>0&&u.firstChild.type==n);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=n)return!1;if(e){let u=l.lastChild&&l.lastChild.type==a.type,h=V.from(u?n.create():null),d=new K(V.from(n.create(null,V.from(a.type.create(null,h)))),u?3:1,0),g=s.start,m=s.end;e(t.tr.step(new fe(g-(u?3:1),m,g,m,d,1,!0)).scrollIntoView())}return!0}}function ju(n){const{state:t,transaction:e}=n;let{selection:i}=e,{doc:r}=e,{storedMarks:s}=e;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return i},get doc(){return r},get tr(){return i=e.selection,r=e.doc,s=e.storedMarks,e}}}class qu{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:i}=this,{view:r}=e,{tr:s}=i,o=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...h)=>{const d=l(...h)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:i,editor:r,state:s}=this,{view:o}=r,a=[],l=!!t,u=t||s.tr,h=()=>(!l&&e&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(u),a.every(g=>g===!0)),d={...Object.fromEntries(Object.entries(i).map(([g,m])=>[g,(...x)=>{const w=this.buildProps(u,e),v=m(...x)(w);return a.push(v),d}])),run:h};return d}createCan(t){const{rawCommands:e,state:i}=this,r=!1,s=t||i.tr,o=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(e).map(([l,u])=>[l,(...h)=>u(...h)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(t,e=!0){const{rawCommands:i,editor:r,state:s}=this,{view:o}=r,a={tr:t,editor:r,view:o,state:ju({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(i).map(([l,u])=>[l,(...h)=>u(...h)(a)]))}};return a}}class gB{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const i=this.callbacks[t];return i&&i.forEach(r=>r.apply(this,e)),this}off(t,e){const i=this.callbacks[t];return i&&(e?this.callbacks[t]=i.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const i=(...r)=>{this.off(t,i),e.apply(this,r)};return this.on(t,i)}removeAllListeners(){this.callbacks={}}}function X(n,t,e){return n.config[t]===void 0&&n.parent?X(n.parent,t,e):typeof n.config[t]=="function"?n.config[t].bind({...e,parent:n.parent?X(n.parent,t,e):null}):n.config[t]}function Ku(n){const t=n.filter(r=>r.type==="extension"),e=n.filter(r=>r.type==="node"),i=n.filter(r=>r.type==="mark");return{baseExtensions:t,nodeExtensions:e,markExtensions:i}}function iv(n){const t=[],{nodeExtensions:e,markExtensions:i}=Ku(n),r=[...e,...i],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:r},l=X(o,"addGlobalAttributes",a);if(!l)return;l().forEach(h=>{h.types.forEach(d=>{Object.entries(h.attributes).forEach(([g,m])=>{t.push({type:d,name:g,attribute:{...s,...m}})})})})}),r.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=X(o,"addAttributes",a);if(!l)return;const u=l();Object.entries(u).forEach(([h,d])=>{const g={...s,...d};typeof g?.default=="function"&&(g.default=g.default()),g?.isRequired&&g?.default===void 0&&delete g.default,t.push({type:o.name,name:h,attribute:g})})}),t}function de(n,t){if(typeof n=="string"){if(!t.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return t.nodes[n]}return n}function _e(...n){return n.filter(t=>!!t).reduce((t,e)=>{const i={...t};return Object.entries(e).forEach(([r,s])=>{if(!i[r]){i[r]=s;return}if(r==="class"){const a=s?String(s).split(" "):[],l=i[r]?i[r].split(" "):[],u=a.filter(h=>!l.includes(h));i[r]=[...l,...u].join(" ")}else if(r==="style"){const a=s?s.split(";").map(h=>h.trim()).filter(Boolean):[],l=i[r]?i[r].split(";").map(h=>h.trim()).filter(Boolean):[],u=new Map;l.forEach(h=>{const[d,g]=h.split(":").map(m=>m.trim());u.set(d,g)}),a.forEach(h=>{const[d,g]=h.split(":").map(m=>m.trim());u.set(d,g)}),i[r]=Array.from(u.entries()).map(([h,d])=>`${h}: ${d}`).join("; ")}else i[r]=s}),i},{})}function sp(n,t){return t.filter(e=>e.type===n.type.name).filter(e=>e.attribute.rendered).map(e=>e.attribute.renderHTML?e.attribute.renderHTML(n.attrs)||{}:{[e.name]:n.attrs[e.name]}).reduce((e,i)=>_e(e,i),{})}function rv(n){return typeof n=="function"}function gt(n,t=void 0,...e){return rv(n)?t?n.bind(t)(...e):n(...e):n}function mB(n={}){return Object.keys(n).length===0&&n.constructor===Object}function yB(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function ix(n,t){return"style"in n?n:{...n,getAttrs:e=>{const i=n.getAttrs?n.getAttrs(e):n.attrs;if(i===!1)return!1;const r=t.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(e):yB(e.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...i,...r}}}}function rx(n){return Object.fromEntries(Object.entries(n).filter(([t,e])=>t==="attrs"&&mB(e)?!1:e!=null))}function bB(n,t){var e;const i=iv(n),{nodeExtensions:r,markExtensions:s}=Ku(n),o=(e=r.find(u=>X(u,"topNode")))===null||e===void 0?void 0:e.name,a=Object.fromEntries(r.map(u=>{const h=i.filter(v=>v.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:t},g=n.reduce((v,E)=>{const O=X(E,"extendNodeSchema",d);return{...v,...O?O(u):{}}},{}),m=rx({...g,content:gt(X(u,"content",d)),marks:gt(X(u,"marks",d)),group:gt(X(u,"group",d)),inline:gt(X(u,"inline",d)),atom:gt(X(u,"atom",d)),selectable:gt(X(u,"selectable",d)),draggable:gt(X(u,"draggable",d)),code:gt(X(u,"code",d)),whitespace:gt(X(u,"whitespace",d)),linebreakReplacement:gt(X(u,"linebreakReplacement",d)),defining:gt(X(u,"defining",d)),isolating:gt(X(u,"isolating",d)),attrs:Object.fromEntries(h.map(v=>{var E;return[v.name,{default:(E=v?.attribute)===null||E===void 0?void 0:E.default}]}))}),y=gt(X(u,"parseHTML",d));y&&(m.parseDOM=y.map(v=>ix(v,h)));const x=X(u,"renderHTML",d);x&&(m.toDOM=v=>x({node:v,HTMLAttributes:sp(v,h)}));const w=X(u,"renderText",d);return w&&(m.toText=w),[u.name,m]})),l=Object.fromEntries(s.map(u=>{const h=i.filter(w=>w.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:t},g=n.reduce((w,v)=>{const E=X(v,"extendMarkSchema",d);return{...w,...E?E(u):{}}},{}),m=rx({...g,inclusive:gt(X(u,"inclusive",d)),excludes:gt(X(u,"excludes",d)),group:gt(X(u,"group",d)),spanning:gt(X(u,"spanning",d)),code:gt(X(u,"code",d)),attrs:Object.fromEntries(h.map(w=>{var v;return[w.name,{default:(v=w?.attribute)===null||v===void 0?void 0:v.default}]}))}),y=gt(X(u,"parseHTML",d));y&&(m.parseDOM=y.map(w=>ix(w,h)));const x=X(u,"renderHTML",d);return x&&(m.toDOM=w=>x({mark:w,HTMLAttributes:sp(w,h)})),[u.name,m]}));return new U1({topNode:o,nodes:a,marks:l})}function Yh(n,t){return t.nodes[n]||t.marks[n]||null}function sx(n,t){return Array.isArray(t)?t.some(e=>(typeof e=="string"?e:e.name)===n.name):t}function bg(n,t){const e=hs.fromSchema(t).serializeFragment(n),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(e),r.innerHTML}const xB=(n,t=500)=>{let e="";const i=n.parentOffset;return n.parent.nodesBetween(Math.max(0,i-t),i,(r,s,o,a)=>{var l,u;const h=((u=(l=r.type.spec).toText)===null||u===void 0?void 0:u.call(l,{node:r,pos:s,parent:o,index:a}))||r.textContent||"%leaf%";e+=r.isAtom&&!r.isText?h:h.slice(0,Math.max(0,i-s))}),e};function xg(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class Ju{constructor(t){this.find=t.find,this.handler=t.handler}}const wB=(n,t)=>{if(xg(t))return t.exec(n);const e=t(n);if(!e)return null;const i=[e.text];return i.index=e.index,i.input=n,i.data=e.data,e.replaceWith&&(e.text.includes(e.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(e.replaceWith)),i};function Kl(n){var t;const{editor:e,from:i,to:r,text:s,rules:o,plugin:a}=n,{view:l}=e;if(l.composing)return!1;const u=l.state.doc.resolve(i);if(u.parent.type.spec.code||!((t=u.nodeBefore||u.nodeAfter)===null||t===void 0)&&t.marks.find(g=>g.type.spec.code))return!1;let h=!1;const d=xB(u)+s;return o.forEach(g=>{if(h)return;const m=wB(d,g.find);if(!m)return;const y=l.state.tr,x=ju({state:l.state,transaction:y}),w={from:i-(m[0].length-s.length),to:r},{commands:v,chain:E,can:O}=new qu({editor:e,state:x});g.handler({state:x,range:w,match:m,commands:v,chain:E,can:O})===null||!y.steps.length||(y.setMeta(a,{transform:y,from:i,to:r,text:s}),l.dispatch(y),h=!0)}),h}function _B(n){const{editor:t,rules:e}=n,i=new pe({state:{init(){return null},apply(r,s,o){const a=r.getMeta(i);if(a)return a;const l=r.getMeta("applyInputRules");return l&&setTimeout(()=>{let{text:h}=l;typeof h=="string"?h=h:h=bg(V.from(h),o.schema);const{from:d}=l,g=d+h.length;Kl({editor:t,from:d,to:g,text:h,rules:e,plugin:i})}),r.selectionSet||r.docChanged?null:s}},props:{handleTextInput(r,s,o,a){return Kl({editor:t,from:s,to:o,text:a,rules:e,plugin:i})},handleDOMEvents:{compositionend:r=>(setTimeout(()=>{const{$cursor:s}=r.state.selection;s&&Kl({editor:t,from:s.pos,to:s.pos,text:"",rules:e,plugin:i})}),!1)},handleKeyDown(r,s){if(s.key!=="Enter")return!1;const{$cursor:o}=r.state.selection;return o?Kl({editor:t,from:o.pos,to:o.pos,text:`
`,rules:e,plugin:i}):!1}},isInputRules:!0});return i}function SB(n){return Object.prototype.toString.call(n).slice(8,-1)}function Jl(n){return SB(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Xu(n,t){const e={...n};return Jl(n)&&Jl(t)&&Object.keys(t).forEach(i=>{Jl(t[i])&&Jl(n[i])?e[i]=Xu(n[i],t[i]):e[i]=t[i]}),e}class Ei{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=gt(X(this,"addOptions",{name:this.name}))),this.storage=gt(X(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Ei(t)}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Xu(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new Ei(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=gt(X(e,"addOptions",{name:e.name})),e.storage=gt(X(e,"addStorage",{name:e.name,options:e.options})),e}static handleExit({editor:t,mark:e}){const{tr:i}=t.state,r=t.state.selection.$from;if(r.pos===r.end()){const o=r.marks();if(!!!o.find(u=>u?.type.name===e.name))return!1;const l=o.find(u=>u?.type.name===e.name);return l&&i.removeStoredMark(l),i.insertText(" ",r.pos),t.view.dispatch(i),!0}return!1}}function vB(n){return typeof n=="number"}class kB{constructor(t){this.find=t.find,this.handler=t.handler}}const CB=(n,t,e)=>{if(xg(t))return[...n.matchAll(t)];const i=t(n,e);return i?i.map(r=>{const s=[r.text];return s.index=r.index,s.input=n,s.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(r.replaceWith)),s}):[]};function MB(n){const{editor:t,state:e,from:i,to:r,rule:s,pasteEvent:o,dropEvent:a}=n,{commands:l,chain:u,can:h}=new qu({editor:t,state:e}),d=[];return e.doc.nodesBetween(i,r,(m,y)=>{if(!m.isTextblock||m.type.spec.code)return;const x=Math.max(i,y),w=Math.min(r,y+m.content.size),v=m.textBetween(x-y,w-y,void 0,"");CB(v,s.find,o).forEach(O=>{if(O.index===void 0)return;const P=x+O.index+1,R=P+O[0].length,B={from:e.tr.mapping.map(P),to:e.tr.mapping.map(R)},I=s.handler({state:e,range:B,match:O,commands:l,chain:u,can:h,pasteEvent:o,dropEvent:a});d.push(I)})}),d.every(m=>m!==null)}let Xl=null;const EB=n=>{var t;const e=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=e.clipboardData)===null||t===void 0||t.setData("text/html",n),e};function TB(n){const{editor:t,rules:e}=n;let i=null,r=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:h,from:d,to:g,rule:m,pasteEvt:y})=>{const x=h.tr,w=ju({state:h,transaction:x});if(!(!MB({editor:t,state:w,from:Math.max(d-1,0),to:g.b-1,rule:m,pasteEvent:y,dropEvent:a})||!x.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,x}};return e.map(h=>new pe({view(d){const g=y=>{var x;i=!((x=d.dom.parentElement)===null||x===void 0)&&x.contains(y.target)?d.dom.parentElement:null,i&&(Xl=t)},m=()=>{Xl&&(Xl=null)};return window.addEventListener("dragstart",g),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",g),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(d,g)=>{if(s=i===d.dom.parentElement,a=g,!s){const m=Xl;m?.isEditable&&setTimeout(()=>{const y=m.state.selection;y&&m.commands.deleteRange({from:y.from,to:y.to})},10)}return!1},paste:(d,g)=>{var m;const y=(m=g.clipboardData)===null||m===void 0?void 0:m.getData("text/html");return o=g,r=!!y?.includes("data-pm-slice"),!1}}},appendTransaction:(d,g,m)=>{const y=d[0],x=y.getMeta("uiEvent")==="paste"&&!r,w=y.getMeta("uiEvent")==="drop"&&!s,v=y.getMeta("applyPasteRules"),E=!!v;if(!x&&!w&&!E)return;if(E){let{text:R}=v;typeof R=="string"?R=R:R=bg(V.from(R),m.schema);const{from:B}=v,I=B+R.length,z=EB(R);return l({rule:h,state:m,from:B,to:{b:I},pasteEvt:z})}const O=g.doc.content.findDiffStart(m.doc.content),P=g.doc.content.findDiffEnd(m.doc.content);if(!(!vB(O)||!P||O===P.b))return l({rule:h,state:m,from:O,to:P,pasteEvt:o})}}))}function OB(n){const t=n.filter((e,i)=>n.indexOf(e)!==i);return Array.from(new Set(t))}class Bs{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=Bs.resolve(t),this.schema=bB(this.extensions,e),this.setupExtensions()}static resolve(t){const e=Bs.sort(Bs.flatten(t)),i=OB(e.map(r=>r.name));return i.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${i.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}static flatten(t){return t.map(e=>{const i={name:e.name,options:e.options,storage:e.storage},r=X(e,"addExtensions",i);return r?[e,...this.flatten(r())]:e}).flat(10)}static sort(t){return t.sort((i,r)=>{const s=X(i,"priority")||100,o=X(r,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((t,e)=>{const i={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Yh(e.name,this.schema)},r=X(e,"addCommands",i);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this,e=Bs.sort([...this.extensions].reverse()),i=[],r=[],s=e.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:t,type:Yh(o.name,this.schema)},l=[],u=X(o,"addKeyboardShortcuts",a);let h={};if(o.type==="mark"&&X(o,"exitable",a)&&(h.ArrowRight=()=>Ei.handleExit({editor:t,mark:o})),u){const x=Object.fromEntries(Object.entries(u()).map(([w,v])=>[w,()=>v({editor:t})]));h={...h,...x}}const d=JF(h);l.push(d);const g=X(o,"addInputRules",a);sx(o,t.options.enableInputRules)&&g&&i.push(...g());const m=X(o,"addPasteRules",a);sx(o,t.options.enablePasteRules)&&m&&r.push(...m());const y=X(o,"addProseMirrorPlugins",a);if(y){const x=y();l.push(...x)}return l}).flat();return[_B({editor:t,rules:i}),...TB({editor:t,rules:r}),...s]}get attributes(){return iv(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Ku(this.extensions);return Object.fromEntries(e.filter(i=>!!X(i,"addNodeView")).map(i=>{const r=this.attributes.filter(l=>l.type===i.name),s={name:i.name,options:i.options,storage:i.storage,editor:t,type:de(i.name,this.schema)},o=X(i,"addNodeView",s);if(!o)return[];const a=(l,u,h,d,g)=>{const m=sp(l,r);return o()({node:l,view:u,getPos:h,decorations:d,innerDecorations:g,editor:t,extension:i,HTMLAttributes:m})};return[i.name,a]}))}setupExtensions(){this.extensions.forEach(t=>{var e;this.editor.extensionStorage[t.name]=t.storage;const i={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Yh(t.name,this.schema)};t.type==="mark"&&(!((e=gt(X(t,"keepOnSplit",i)))!==null&&e!==void 0)||e)&&this.splittableMarks.push(t.name);const r=X(t,"onBeforeCreate",i),s=X(t,"onCreate",i),o=X(t,"onUpdate",i),a=X(t,"onSelectionUpdate",i),l=X(t,"onTransaction",i),u=X(t,"onFocus",i),h=X(t,"onBlur",i),d=X(t,"onDestroy",i);r&&this.editor.on("beforeCreate",r),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),u&&this.editor.on("focus",u),h&&this.editor.on("blur",h),d&&this.editor.on("destroy",d)})}}class Oe{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=gt(X(this,"addOptions",{name:this.name}))),this.storage=gt(X(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Oe(t)}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Xu(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new Oe({...this.config,...t});return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=gt(X(e,"addOptions",{name:e.name})),e.storage=gt(X(e,"addStorage",{name:e.name,options:e.options})),e}}function sv(n,t,e){const{from:i,to:r}=t,{blockSeparator:s=`

`,textSerializers:o={}}=e||{};let a="";return n.nodesBetween(i,r,(l,u,h,d)=>{var g;l.isBlock&&u>i&&(a+=s);const m=o?.[l.type.name];if(m)return h&&(a+=m({node:l,pos:u,parent:h,index:d,range:t})),!1;l.isText&&(a+=(g=l?.text)===null||g===void 0?void 0:g.slice(Math.max(i,u)-u,r-u))}),a}function ov(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,t])=>t.spec.toText).map(([t,e])=>[t,e.spec.toText]))}const AB=Oe.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new pe({key:new Ze("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:t,schema:e}=n,{doc:i,selection:r}=t,{ranges:s}=r,o=Math.min(...s.map(h=>h.$from.pos)),a=Math.max(...s.map(h=>h.$to.pos)),l=ov(e);return sv(i,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),RB=()=>({editor:n,view:t})=>(requestAnimationFrame(()=>{var e;n.isDestroyed||(t.dom.blur(),(e=window?.getSelection())===null||e===void 0||e.removeAllRanges())}),!0),DB=(n=!1)=>({commands:t})=>t.setContent("",n),PB=()=>({state:n,tr:t,dispatch:e})=>{const{selection:i}=t,{ranges:r}=i;return e&&r.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:u,mapping:h}=t,d=u.resolve(h.map(l)),g=u.resolve(h.map(l+a.nodeSize)),m=d.blockRange(g);if(!m)return;const y=so(m);if(a.type.isTextblock){const{defaultType:x}=d.parent.contentMatchAt(d.index());t.setNodeMarkup(m.start,x)}(y||y===0)&&t.lift(m,y)})}),!0},IB=n=>t=>n(t),LB=()=>({state:n,dispatch:t})=>QS(n,t),NB=(n,t)=>({editor:e,tr:i})=>{const{state:r}=e,s=r.doc.slice(n.from,n.to);i.deleteRange(n.from,n.to);const o=i.mapping.map(t);return i.insert(o,s.content),i.setSelection(new st(i.doc.resolve(Math.max(o-1,0)))),!0},FB=()=>({tr:n,dispatch:t})=>{const{selection:e}=n,i=e.$anchor.node();if(i.content.size>0)return!1;const r=n.selection.$anchor;for(let s=r.depth;s>0;s-=1)if(r.node(s).type===i.type){if(t){const a=r.before(s),l=r.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},BB=n=>({tr:t,state:e,dispatch:i})=>{const r=de(n,e.schema),s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r){if(i){const l=s.before(o),u=s.after(o);t.delete(l,u).scrollIntoView()}return!0}return!1},zB=n=>({tr:t,dispatch:e})=>{const{from:i,to:r}=n;return e&&t.delete(i,r),!0},HB=()=>({state:n,dispatch:t})=>dg(n,t),$B=()=>({commands:n})=>n.keyboardShortcut("Enter"),WB=()=>({state:n,dispatch:t})=>tB(n,t);function Wc(n,t,e={strict:!0}){const i=Object.keys(t);return i.length?i.every(r=>e.strict?t[r]===n[r]:xg(t[r])?t[r].test(n[r]):t[r]===n[r]):!0}function av(n,t,e={}){return n.find(i=>i.type===t&&Wc(Object.fromEntries(Object.keys(e).map(r=>[r,i.attrs[r]])),e))}function ox(n,t,e={}){return!!av(n,t,e)}function wg(n,t,e){var i;if(!n||!t)return;let r=n.parent.childAfter(n.parentOffset);if((!r.node||!r.node.marks.some(h=>h.type===t))&&(r=n.parent.childBefore(n.parentOffset)),!r.node||!r.node.marks.some(h=>h.type===t)||(e=e||((i=r.node.marks[0])===null||i===void 0?void 0:i.attrs),!av([...r.node.marks],t,e)))return;let o=r.index,a=n.start()+r.offset,l=o+1,u=a+r.node.nodeSize;for(;o>0&&ox([...n.parent.child(o-1).marks],t,e);)o-=1,a-=n.parent.child(o).nodeSize;for(;l<n.parent.childCount&&ox([...n.parent.child(l).marks],t,e);)u+=n.parent.child(l).nodeSize,l+=1;return{from:a,to:u}}function hr(n,t){if(typeof n=="string"){if(!t.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return t.marks[n]}return n}const VB=(n,t={})=>({tr:e,state:i,dispatch:r})=>{const s=hr(n,i.schema),{doc:o,selection:a}=e,{$from:l,from:u,to:h}=a;if(r){const d=wg(l,s,t);if(d&&d.from<=u&&d.to>=h){const g=st.create(o,d.from,d.to);e.setSelection(g)}}return!0},UB=n=>t=>{const e=typeof n=="function"?n(t):n;for(let i=0;i<e.length;i+=1)if(e[i](t))return!0;return!1};function lv(n){return n instanceof st}function Br(n=0,t=0,e=0){return Math.min(Math.max(n,t),e)}function cv(n,t=null){if(!t)return null;const e=dt.atStart(n),i=dt.atEnd(n);if(t==="start"||t===!0)return e;if(t==="end")return i;const r=e.from,s=i.to;return t==="all"?st.create(n,Br(0,r,s),Br(n.content.size,r,s)):st.create(n,Br(t,r,s),Br(t,r,s))}function ax(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Vc(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function jB(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}const qB=(n=null,t={})=>({editor:e,view:i,tr:r,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{(Vc()||ax())&&i.dom.focus(),requestAnimationFrame(()=>{e.isDestroyed||(i.focus(),jB()&&!Vc()&&!ax()&&i.dom.focus({preventScroll:!0}))})};if(i.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!lv(e.state.selection))return o(),!0;const a=cv(r.doc,n)||e.state.selection,l=e.state.selection.eq(a);return s&&(l||r.setSelection(a),l&&r.storedMarks&&r.setStoredMarks(r.storedMarks),o()),!0},KB=(n,t)=>e=>n.every((i,r)=>t(i,{...e,index:r})),JB=(n,t)=>({tr:e,commands:i})=>i.insertContentAt({from:e.selection.from,to:e.selection.to},n,t),uv=n=>{const t=n.childNodes;for(let e=t.length-1;e>=0;e-=1){const i=t[e];i.nodeType===3&&i.nodeValue&&/^(\n\s\s|\n)$/.test(i.nodeValue)?n.removeChild(i):i.nodeType===1&&uv(i)}return n};function Gl(n){const t=`<body>${n}</body>`,e=new window.DOMParser().parseFromString(t,"text/html").body;return uv(e)}function va(n,t,e){if(n instanceof Qi||n instanceof V)return n;e={slice:!0,parseOptions:{},...e};const i=typeof n=="object"&&n!==null,r=typeof n=="string";if(i)try{if(Array.isArray(n)&&n.length>0)return V.fromArray(n.map(a=>t.nodeFromJSON(a)));const o=t.nodeFromJSON(n);return e.errorOnInvalidContent&&o.check(),o}catch(s){if(e.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",s),va("",t,e)}if(r){if(e.errorOnInvalidContent){let o=!1,a="";const l=new U1({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,a=typeof u=="string"?u:u.outerHTML,null)}]}})});if(e.slice?Qo.fromSchema(l).parseSlice(Gl(n),e.parseOptions):Qo.fromSchema(l).parse(Gl(n),e.parseOptions),e.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Qo.fromSchema(t);return e.slice?s.parseSlice(Gl(n),e.parseOptions).content:s.parse(Gl(n),e.parseOptions)}return va("",t,e)}function XB(n,t,e){const i=n.steps.length-1;if(i<t)return;const r=n.steps[i];if(!(r instanceof le||r instanceof fe))return;const s=n.mapping.maps[i];let o=0;s.forEach((a,l,u,h)=>{o===0&&(o=h)}),n.setSelection(dt.near(n.doc.resolve(o),e))}const GB=n=>!("type"in n),YB=(n,t,e)=>({tr:i,dispatch:r,editor:s})=>{var o;if(r){e={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...e};let a;const l=w=>{s.emit("contentError",{editor:s,error:w,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...e.parseOptions};if(!e.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{va(t,s.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(w){l(w)}try{a=va(t,s.schema,{parseOptions:u,errorOnInvalidContent:(o=e.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(w){return l(w),!1}let{from:h,to:d}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},g=!0,m=!0;if((GB(a)?a:[a]).forEach(w=>{w.check(),g=g?w.isText&&w.marks.length===0:!1,m=m?w.isBlock:!1}),h===d&&m){const{parent:w}=i.doc.resolve(h);w.isTextblock&&!w.type.spec.code&&!w.childCount&&(h-=1,d+=1)}let x;if(g){if(Array.isArray(t))x=t.map(w=>w.text||"").join("");else if(t instanceof V){let w="";t.forEach(v=>{v.text&&(w+=v.text)}),x=w}else typeof t=="object"&&t&&t.text?x=t.text:x=t;i.insertText(x,h,d)}else x=a,i.replaceWith(h,d,x);e.updateSelection&&XB(i,i.steps.length-1,-1),e.applyInputRules&&i.setMeta("applyInputRules",{from:h,text:x}),e.applyPasteRules&&i.setMeta("applyPasteRules",{from:h,text:x})}return!0},ZB=()=>({state:n,dispatch:t})=>YF(n,t),QB=()=>({state:n,dispatch:t})=>ZF(n,t),tz=()=>({state:n,dispatch:t})=>qS(n,t),ez=()=>({state:n,dispatch:t})=>GS(n,t),nz=()=>({state:n,dispatch:t,tr:e})=>{try{const i=zu(n.doc,n.selection.$from.pos,-1);return i==null?!1:(e.join(i,2),t&&t(e),!0)}catch{return!1}},iz=()=>({state:n,dispatch:t,tr:e})=>{try{const i=zu(n.doc,n.selection.$from.pos,1);return i==null?!1:(e.join(i,2),t&&t(e),!0)}catch{return!1}},rz=()=>({state:n,dispatch:t})=>XF(n,t),sz=()=>({state:n,dispatch:t})=>GF(n,t);function fv(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function oz(n){const t=n.split(/-(?!$)/);let e=t[t.length-1];e==="Space"&&(e=" ");let i,r,s,o;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Vc()||fv()?o=!0:r=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return i&&(e=`Alt-${e}`),r&&(e=`Ctrl-${e}`),o&&(e=`Meta-${e}`),s&&(e=`Shift-${e}`),e}const az=n=>({editor:t,view:e,tr:i,dispatch:r})=>{const s=oz(n).split(/-(?!$)/),o=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{e.someProp("handleKeyDown",u=>u(e,a))});return l?.steps.forEach(u=>{const h=u.map(i.mapping);h&&r&&i.maybeStep(h)}),!0};function ka(n,t,e={}){const{from:i,to:r,empty:s}=n.selection,o=t?de(t,n.schema):null,a=[];n.doc.nodesBetween(i,r,(d,g)=>{if(d.isText)return;const m=Math.max(i,g),y=Math.min(r,g+d.nodeSize);a.push({node:d,from:m,to:y})});const l=r-i,u=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Wc(d.node.attrs,e,{strict:!1}));return s?!!u.length:u.reduce((d,g)=>d+g.to-g.from,0)>=l}const lz=(n,t={})=>({state:e,dispatch:i})=>{const r=de(n,e.schema);return ka(e,r,t)?QF(e,i):!1},cz=()=>({state:n,dispatch:t})=>tv(n,t),uz=n=>({state:t,dispatch:e})=>{const i=de(n,t.schema);return fB(i)(t,e)},fz=()=>({state:n,dispatch:t})=>ZS(n,t);function Gu(n,t){return t.nodes[n]?"node":t.marks[n]?"mark":null}function lx(n,t){const e=typeof t=="string"?[t]:t;return Object.keys(n).reduce((i,r)=>(e.includes(r)||(i[r]=n[r]),i),{})}const hz=(n,t)=>({tr:e,state:i,dispatch:r})=>{let s=null,o=null;const a=Gu(typeof n=="string"?n:n.name,i.schema);return a?(a==="node"&&(s=de(n,i.schema)),a==="mark"&&(o=hr(n,i.schema)),r&&e.selection.ranges.forEach(l=>{i.doc.nodesBetween(l.$from.pos,l.$to.pos,(u,h)=>{s&&s===u.type&&e.setNodeMarkup(h,void 0,lx(u.attrs,t)),o&&u.marks.length&&u.marks.forEach(d=>{o===d.type&&e.addMark(h,h+u.nodeSize,o.create(lx(d.attrs,t)))})})}),!0):!1},dz=()=>({tr:n,dispatch:t})=>(t&&n.scrollIntoView(),!0),pz=()=>({tr:n,dispatch:t})=>{if(t){const e=new un(n.doc);n.setSelection(e)}return!0},gz=()=>({state:n,dispatch:t})=>JS(n,t),mz=()=>({state:n,dispatch:t})=>YS(n,t),yz=()=>({state:n,dispatch:t})=>iB(n,t),bz=()=>({state:n,dispatch:t})=>oB(n,t),xz=()=>({state:n,dispatch:t})=>sB(n,t);function op(n,t,e={},i={}){return va(n,t,{slice:!1,parseOptions:e,errorOnInvalidContent:i.errorOnInvalidContent})}const wz=(n,t=!1,e={},i={})=>({editor:r,tr:s,dispatch:o,commands:a})=>{var l,u;const{doc:h}=s;if(e.preserveWhitespace!=="full"){const d=op(n,r.schema,e,{errorOnInvalidContent:(l=i.errorOnInvalidContent)!==null&&l!==void 0?l:r.options.enableContentCheck});return o&&s.replaceWith(0,h.content.size,d).setMeta("preventUpdate",!t),!0}return o&&s.setMeta("preventUpdate",!t),a.insertContentAt({from:0,to:h.content.size},n,{parseOptions:e,errorOnInvalidContent:(u=i.errorOnInvalidContent)!==null&&u!==void 0?u:r.options.enableContentCheck})};function hv(n,t){const e=hr(t,n.schema),{from:i,to:r,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(i,r,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===e.name);return a?{...a.attrs}:{}}function _z(n,t){const e=new oS(n);return t.forEach(i=>{i.steps.forEach(r=>{e.step(r)})}),e}function Sz(n){for(let t=0;t<n.edgeCount;t+=1){const{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}function vz(n,t,e){const i=[];return n.nodesBetween(t.from,t.to,(r,s)=>{e(r)&&i.push({node:r,pos:s})}),i}function kz(n,t){for(let e=n.depth;e>0;e-=1){const i=n.node(e);if(t(i))return{pos:e>0?n.before(e):0,start:n.start(e),depth:e,node:i}}}function _g(n){return t=>kz(t.$from,n)}function Cz(n,t){const e={from:0,to:n.content.size};return sv(n,e,t)}function Mz(n,t){const e=de(t,n.schema),{from:i,to:r}=n.selection,s=[];n.doc.nodesBetween(i,r,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===e.name);return o?{...o.attrs}:{}}function dv(n,t){const e=Gu(typeof t=="string"?t:t.name,n.schema);return e==="node"?Mz(n,t):e==="mark"?hv(n,t):{}}function Ez(n,t=JSON.stringify){const e={};return n.filter(i=>{const r=t(i);return Object.prototype.hasOwnProperty.call(e,r)?!1:e[r]=!0})}function Tz(n){const t=Ez(n);return t.length===1?t:t.filter((e,i)=>!t.filter((s,o)=>o!==i).some(s=>e.oldRange.from>=s.oldRange.from&&e.oldRange.to<=s.oldRange.to&&e.newRange.from>=s.newRange.from&&e.newRange.to<=s.newRange.to))}function Oz(n){const{mapping:t,steps:e}=n,i=[];return t.maps.forEach((r,s)=>{const o=[];if(r.ranges.length)r.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=e[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const u=t.slice(s).map(a,-1),h=t.slice(s).map(l),d=t.invert().map(u,-1),g=t.invert().map(h);i.push({oldRange:{from:d,to:g},newRange:{from:u,to:h}})})}),Tz(i)}function Sg(n,t,e){const i=[];return n===t?e.resolve(n).marks().forEach(r=>{const s=e.resolve(n),o=wg(s,r.type);o&&i.push({mark:r,...o})}):e.nodesBetween(n,t,(r,s)=>{!r||r?.nodeSize===void 0||i.push(...r.marks.map(o=>({from:s,to:s+r.nodeSize,mark:o})))}),i}function _c(n,t,e){return Object.fromEntries(Object.entries(e).filter(([i])=>{const r=n.find(s=>s.type===t&&s.name===i);return r?r.attribute.keepOnSplit:!1}))}function ap(n,t,e={}){const{empty:i,ranges:r}=n.selection,s=t?hr(t,n.schema):null;if(i)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>Wc(d.attrs,e,{strict:!1}));let o=0;const a=[];if(r.forEach(({$from:d,$to:g})=>{const m=d.pos,y=g.pos;n.doc.nodesBetween(m,y,(x,w)=>{if(!x.isText&&!x.marks.length)return;const v=Math.max(m,w),E=Math.min(y,w+x.nodeSize),O=E-v;o+=O,a.push(...x.marks.map(P=>({mark:P,from:v,to:E})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>Wc(d.mark.attrs,e,{strict:!1})).reduce((d,g)=>d+g.to-g.from,0),u=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,g)=>d+g.to-g.from,0);return(l>0?l+u:l)>=o}function Az(n,t,e={}){if(!t)return ka(n,null,e)||ap(n,null,e);const i=Gu(t,n.schema);return i==="node"?ka(n,t,e):i==="mark"?ap(n,t,e):!1}function cx(n,t){const{nodeExtensions:e}=Ku(t),i=e.find(o=>o.name===n);if(!i)return!1;const r={name:i.name,options:i.options,storage:i.storage},s=gt(X(i,"group",r));return typeof s!="string"?!1:s.split(" ").includes("list")}function Yu(n,{checkChildren:t=!0,ignoreWhitespace:e=!1}={}){var i;if(e){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((i=n.text)!==null&&i!==void 0?i:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(t){let r=!0;return n.content.forEach(s=>{r!==!1&&(Yu(s,{ignoreWhitespace:e,checkChildren:t})||(r=!1))}),r}return!1}function Rz(n){return n instanceof Y}function Dz(n,t,e){var i;const{selection:r}=t;let s=null;if(lv(r)&&(s=r.$cursor),s){const a=(i=n.storedMarks)!==null&&i!==void 0?i:s.marks();return!!e.isInSet(a)||!a.some(l=>l.type.excludes(e))}const{ranges:o}=r;return o.some(({$from:a,$to:l})=>{let u=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(e):!1;return n.doc.nodesBetween(a.pos,l.pos,(h,d,g)=>{if(u)return!1;if(h.isInline){const m=!g||g.type.allowsMarkType(e),y=!!e.isInSet(h.marks)||!h.marks.some(x=>x.type.excludes(e));u=m&&y}return!u}),u})}const Pz=(n,t={})=>({tr:e,state:i,dispatch:r})=>{const{selection:s}=e,{empty:o,ranges:a}=s,l=hr(n,i.schema);if(r)if(o){const u=hv(i,l);e.addStoredMark(l.create({...u,...t}))}else a.forEach(u=>{const h=u.$from.pos,d=u.$to.pos;i.doc.nodesBetween(h,d,(g,m)=>{const y=Math.max(m,h),x=Math.min(m+g.nodeSize,d);g.marks.find(v=>v.type===l)?g.marks.forEach(v=>{l===v.type&&e.addMark(y,x,l.create({...v.attrs,...t}))}):e.addMark(y,x,l.create(t))})});return Dz(i,e,l)},Iz=(n,t)=>({tr:e})=>(e.setMeta(n,t),!0),Lz=(n,t={})=>({state:e,dispatch:i,chain:r})=>{const s=de(n,e.schema);let o;return e.selection.$anchor.sameParent(e.selection.$head)&&(o=e.selection.$anchor.parent.attrs),s.isTextblock?r().command(({commands:a})=>nx(s,{...o,...t})(e)?!0:a.clearNodes()).command(({state:a})=>nx(s,{...o,...t})(a,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Nz=n=>({tr:t,dispatch:e})=>{if(e){const{doc:i}=t,r=Br(n,0,i.content.size),s=Y.create(i,r);t.setSelection(s)}return!0},Fz=n=>({tr:t,dispatch:e})=>{if(e){const{doc:i}=t,{from:r,to:s}=typeof n=="number"?{from:n,to:n}:n,o=st.atStart(i).from,a=st.atEnd(i).to,l=Br(r,o,a),u=Br(s,o,a),h=st.create(i,l,u);t.setSelection(h)}return!0},Bz=n=>({state:t,dispatch:e})=>{const i=de(n,t.schema);return pB(i)(t,e)};function ux(n,t){const e=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(e){const i=e.filter(r=>t?.includes(r.type.name));n.tr.ensureMarks(i)}}const zz=({keepMarks:n=!0}={})=>({tr:t,state:e,dispatch:i,editor:r})=>{const{selection:s,doc:o}=t,{$from:a,$to:l}=s,u=r.extensionManager.attributes,h=_c(u,a.node().type.name,a.node().attrs);if(s instanceof Y&&s.node.isBlock)return!a.parentOffset||!ki(o,a.pos)?!1:(i&&(n&&ux(e,r.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,g=a.depth===0?void 0:Sz(a.node(-1).contentMatchAt(a.indexAfter(-1)));let m=d&&g?[{type:g,attrs:h}]:void 0,y=ki(t.doc,t.mapping.map(a.pos),1,m);if(!m&&!y&&ki(t.doc,t.mapping.map(a.pos),1,g?[{type:g}]:void 0)&&(y=!0,m=g?[{type:g,attrs:h}]:void 0),i){if(y&&(s instanceof st&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,m),g&&!d&&!a.parentOffset&&a.parent.type!==g)){const x=t.mapping.map(a.before()),w=t.doc.resolve(x);a.node(-1).canReplaceWith(w.index(),w.index()+1,g)&&t.setNodeMarkup(t.mapping.map(a.before()),g)}n&&ux(e,r.extensionManager.splittableMarks),t.scrollIntoView()}return y},Hz=(n,t={})=>({tr:e,state:i,dispatch:r,editor:s})=>{var o;const a=de(n,i.schema),{$from:l,$to:u}=i.selection,h=i.selection.node;if(h&&h.isBlock||l.depth<2||!l.sameParent(u))return!1;const d=l.node(-1);if(d.type!==a)return!1;const g=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(r){let v=V.empty;const E=l.index(-1)?1:l.index(-2)?2:3;for(let z=l.depth-E;z>=l.depth-3;z-=1)v=V.from(l.node(z).copy(v));const O=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,P={..._c(g,l.node().type.name,l.node().attrs),...t},R=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(P))||void 0;v=v.append(V.from(a.createAndFill(null,R)||void 0));const B=l.before(l.depth-(E-1));e.replace(B,l.after(-O),new K(v,4-E,0));let I=-1;e.doc.nodesBetween(B,e.doc.content.size,(z,j)=>{if(I>-1)return!1;z.isTextblock&&z.content.size===0&&(I=j+1)}),I>-1&&e.setSelection(st.near(e.doc.resolve(I))),e.scrollIntoView()}return!0}const m=u.pos===l.end()?d.contentMatchAt(0).defaultType:null,y={..._c(g,d.type.name,d.attrs),...t},x={..._c(g,l.node().type.name,l.node().attrs),...t};e.delete(l.pos,u.pos);const w=m?[{type:a,attrs:y},{type:m,attrs:x}]:[{type:a,attrs:y}];if(!ki(e.doc,l.pos,2))return!1;if(r){const{selection:v,storedMarks:E}=i,{splittableMarks:O}=s.extensionManager,P=E||v.$to.parentOffset&&v.$from.marks();if(e.split(l.pos,2,w).scrollIntoView(),!P||!r)return!0;const R=P.filter(B=>O.includes(B.type.name));e.ensureMarks(R)}return!0},Zh=(n,t)=>{const e=_g(o=>o.type===t)(n.selection);if(!e)return!0;const i=n.doc.resolve(Math.max(0,e.pos-1)).before(e.depth);if(i===void 0)return!0;const r=n.doc.nodeAt(i);return e.node.type===r?.type&&ur(n.doc,e.pos)&&n.join(e.pos),!0},Qh=(n,t)=>{const e=_g(o=>o.type===t)(n.selection);if(!e)return!0;const i=n.doc.resolve(e.start).after(e.depth);if(i===void 0)return!0;const r=n.doc.nodeAt(i);return e.node.type===r?.type&&ur(n.doc,i)&&n.join(i),!0},$z=(n,t,e,i={})=>({editor:r,tr:s,state:o,dispatch:a,chain:l,commands:u,can:h})=>{const{extensions:d,splittableMarks:g}=r.extensionManager,m=de(n,o.schema),y=de(t,o.schema),{selection:x,storedMarks:w}=o,{$from:v,$to:E}=x,O=v.blockRange(E),P=w||x.$to.parentOffset&&x.$from.marks();if(!O)return!1;const R=_g(B=>cx(B.type.name,d))(x);if(O.depth>=1&&R&&O.depth-R.depth<=1){if(R.node.type===m)return u.liftListItem(y);if(cx(R.node.type.name,d)&&m.validContent(R.node.content)&&a)return l().command(()=>(s.setNodeMarkup(R.pos,m),!0)).command(()=>Zh(s,m)).command(()=>Qh(s,m)).run()}return!e||!P||!a?l().command(()=>h().wrapInList(m,i)?!0:u.clearNodes()).wrapInList(m,i).command(()=>Zh(s,m)).command(()=>Qh(s,m)).run():l().command(()=>{const B=h().wrapInList(m,i),I=P.filter(z=>g.includes(z.type.name));return s.ensureMarks(I),B?!0:u.clearNodes()}).wrapInList(m,i).command(()=>Zh(s,m)).command(()=>Qh(s,m)).run()},Wz=(n,t={},e={})=>({state:i,commands:r})=>{const{extendEmptyMarkRange:s=!1}=e,o=hr(n,i.schema);return ap(i,o,t)?r.unsetMark(o,{extendEmptyMarkRange:s}):r.setMark(o,t)},Vz=(n,t,e={})=>({state:i,commands:r})=>{const s=de(n,i.schema),o=de(t,i.schema),a=ka(i,s,e);let l;return i.selection.$anchor.sameParent(i.selection.$head)&&(l=i.selection.$anchor.parent.attrs),a?r.setNode(o,l):r.setNode(s,{...l,...e})},Uz=(n,t={})=>({state:e,commands:i})=>{const r=de(n,e.schema);return ka(e,r,t)?i.lift(r):i.wrapIn(r,t)},jz=()=>({state:n,dispatch:t})=>{const e=n.plugins;for(let i=0;i<e.length;i+=1){const r=e[i];let s;if(r.spec.isInputRules&&(s=r.getState(n))){if(t){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},qz=()=>({tr:n,dispatch:t})=>{const{selection:e}=n,{empty:i,ranges:r}=e;return i||t&&r.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},Kz=(n,t={})=>({tr:e,state:i,dispatch:r})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:a}=e,l=hr(n,i.schema),{$from:u,empty:h,ranges:d}=a;if(!r)return!0;if(h&&o){let{from:g,to:m}=a;const y=(s=u.marks().find(w=>w.type===l))===null||s===void 0?void 0:s.attrs,x=wg(u,l,y);x&&(g=x.from,m=x.to),e.removeMark(g,m,l)}else d.forEach(g=>{e.removeMark(g.$from.pos,g.$to.pos,l)});return e.removeStoredMark(l),!0},Jz=(n,t={})=>({tr:e,state:i,dispatch:r})=>{let s=null,o=null;const a=Gu(typeof n=="string"?n:n.name,i.schema);return a?(a==="node"&&(s=de(n,i.schema)),a==="mark"&&(o=hr(n,i.schema)),r&&e.selection.ranges.forEach(l=>{const u=l.$from.pos,h=l.$to.pos;let d,g,m,y;e.selection.empty?i.doc.nodesBetween(u,h,(x,w)=>{s&&s===x.type&&(m=Math.max(w,u),y=Math.min(w+x.nodeSize,h),d=w,g=x)}):i.doc.nodesBetween(u,h,(x,w)=>{w<u&&s&&s===x.type&&(m=Math.max(w,u),y=Math.min(w+x.nodeSize,h),d=w,g=x),w>=u&&w<=h&&(s&&s===x.type&&e.setNodeMarkup(w,void 0,{...x.attrs,...t}),o&&x.marks.length&&x.marks.forEach(v=>{if(o===v.type){const E=Math.max(w,u),O=Math.min(w+x.nodeSize,h);e.addMark(E,O,o.create({...v.attrs,...t}))}}))}),g&&(d!==void 0&&e.setNodeMarkup(d,void 0,{...g.attrs,...t}),o&&g.marks.length&&g.marks.forEach(x=>{o===x.type&&e.addMark(m,y,o.create({...x.attrs,...t}))}))}),!0):!1},Xz=(n,t={})=>({state:e,dispatch:i})=>{const r=de(n,e.schema);return aB(r,t)(e,i)},Gz=(n,t={})=>({state:e,dispatch:i})=>{const r=de(n,e.schema);return lB(r,t)(e,i)};var Yz=Object.freeze({__proto__:null,blur:RB,clearContent:DB,clearNodes:PB,command:IB,createParagraphNear:LB,cut:NB,deleteCurrentNode:FB,deleteNode:BB,deleteRange:zB,deleteSelection:HB,enter:$B,exitCode:WB,extendMarkRange:VB,first:UB,focus:qB,forEach:KB,insertContent:JB,insertContentAt:YB,joinBackward:tz,joinDown:QB,joinForward:ez,joinItemBackward:nz,joinItemForward:iz,joinTextblockBackward:rz,joinTextblockForward:sz,joinUp:ZB,keyboardShortcut:az,lift:lz,liftEmptyBlock:cz,liftListItem:uz,newlineInCode:fz,resetAttributes:hz,scrollIntoView:dz,selectAll:pz,selectNodeBackward:gz,selectNodeForward:mz,selectParentNode:yz,selectTextblockEnd:bz,selectTextblockStart:xz,setContent:wz,setMark:Pz,setMeta:Iz,setNode:Lz,setNodeSelection:Nz,setTextSelection:Fz,sinkListItem:Bz,splitBlock:zz,splitListItem:Hz,toggleList:$z,toggleMark:Wz,toggleNode:Vz,toggleWrap:Uz,undoInputRule:jz,unsetAllMarks:qz,unsetMark:Kz,updateAttributes:Jz,wrapIn:Xz,wrapInList:Gz});const Zz=Oe.create({name:"commands",addCommands(){return{...Yz}}}),Qz=Oe.create({name:"drop",addProseMirrorPlugins(){return[new pe({key:new Ze("tiptapDrop"),props:{handleDrop:(n,t,e,i)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:e,moved:i})}}})]}}),tH=Oe.create({name:"editable",addProseMirrorPlugins(){return[new pe({key:new Ze("editable"),props:{editable:()=>this.editor.options.editable}})]}}),eH=new Ze("focusEvents"),nH=Oe.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new pe({key:eH,props:{handleDOMEvents:{focus:(t,e)=>{n.isFocused=!0;const i=n.state.tr.setMeta("focus",{event:e}).setMeta("addToHistory",!1);return t.dispatch(i),!1},blur:(t,e)=>{n.isFocused=!1;const i=n.state.tr.setMeta("blur",{event:e}).setMeta("addToHistory",!1);return t.dispatch(i),!1}}}})]}}),iH=Oe.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:u}=a,{empty:h,$anchor:d}=l,{pos:g,parent:m}=d,y=d.parent.isTextblock&&g>0?a.doc.resolve(g-1):d,x=y.parent.type.spec.isolating,w=d.pos-d.parentOffset,v=x&&y.parent.childCount===1?w===d.pos:dt.atStart(u).from===g;return!h||!m.type.isTextblock||m.textContent.length||!v||v&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},r={...i},s={...i,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Vc()||fv()?s:r},addProseMirrorPlugins(){return[new pe({key:new Ze("clearDocument"),appendTransaction:(n,t,e)=>{if(n.some(x=>x.getMeta("composition")))return;const i=n.some(x=>x.docChanged)&&!t.doc.eq(e.doc),r=n.some(x=>x.getMeta("preventClearDocument"));if(!i||r)return;const{empty:s,from:o,to:a}=t.selection,l=dt.atStart(t.doc).from,u=dt.atEnd(t.doc).to;if(s||!(o===l&&a===u)||!Yu(e.doc))return;const g=e.tr,m=ju({state:e,transaction:g}),{commands:y}=new qu({editor:this.editor,state:m});if(y.clearNodes(),!!g.steps.length)return g}})]}}),rH=Oe.create({name:"paste",addProseMirrorPlugins(){return[new pe({key:new Ze("tiptapPaste"),props:{handlePaste:(n,t,e)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:e})}}})]}}),sH=Oe.create({name:"tabindex",addProseMirrorPlugins(){return[new pe({key:new Ze("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Pr{get name(){return this.node.type.name}constructor(t,e,i=!1,r=null){this.currentNode=null,this.actualDepth=null,this.isBlock=i,this.resolvedPos=t,this.editor=e,this.currentNode=r}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!==null&&t!==void 0?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let e=this.from,i=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}e=this.from+1,i=this.to-1}this.editor.commands.insertContentAt({from:e,to:i},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),e=this.resolvedPos.doc.resolve(t);return new Pr(e,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new Pr(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new Pr(t,this.editor)}get children(){const t=[];return this.node.content.forEach((e,i)=>{const r=e.isBlock&&!e.isTextblock,s=e.isAtom&&!e.isText,o=this.pos+i+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!r&&a.depth<=this.depth)return;const l=new Pr(a,this.editor,r,r?e:null);r&&(l.actualDepth=this.depth+1),t.push(new Pr(a,this.editor,r,r?e:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,e={}){let i=null,r=this.parent;for(;r&&!i;){if(r.node.type.name===t)if(Object.keys(e).length>0){const s=r.node.attrs,o=Object.keys(e);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==e[l])break}}else i=r;r=r.parent}return i}querySelector(t,e={}){return this.querySelectorAll(t,e,!0)[0]||null}querySelectorAll(t,e={},i=!1){let r=[];if(!this.children||this.children.length===0)return r;const s=Object.keys(e);return this.children.forEach(o=>{i&&r.length>0||(o.node.type.name===t&&s.every(l=>e[l]===o.node.attrs[l])&&r.push(o),!(i&&r.length>0)&&(r=r.concat(o.querySelectorAll(t,e,i))))}),r}setAttribute(t){const{tr:e}=this.editor.state;e.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(e)}}const oH=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function aH(n,t,e){const i=document.querySelector("style[data-tiptap-style]");if(i!==null)return i;const r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.setAttribute("data-tiptap-style",""),r.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(r),r}class lH extends gB{constructor(t={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:e})=>{throw e},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:e,slice:i,moved:r})=>this.options.onDrop(e,i,r)),this.on("paste",({event:e,slice:i})=>this.options.onPaste(e,i)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=aH(oH,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,e){const i=rv(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:i});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let i=e;if([].concat(t).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;i=i.filter(a=>!a.key.startsWith(o))}),e.length===i.length)return;const r=this.state.reconfigure({plugins:i});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[tH,AB.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)===null||t===void 0?void 0:t.clipboardTextSerializer)===null||e===void 0?void 0:e.blockSeparator}),Zz,nH,iH,sH,Qz,rH].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s?.type));this.extensionManager=new Bs(r,this)}createCommandManager(){this.commandManager=new qu({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var t;let e;try{e=op(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),e=op(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const i=cv(e,this.options.autofocus);this.view=new VS(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)===null||t===void 0?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Fs.create({doc:e,selection:i||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const e=this.state.apply(t),i=!this.state.selection.eq(e.selection);this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t}),i&&this.emit("selectionUpdate",{editor:this,transaction:t});const r=t.getMeta("focus"),s=t.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:t}),s&&this.emit("blur",{editor:this,event:s.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return dv(this.state,t)}isActive(t,e){const i=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return Az(this.state,i,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return bg(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:i={}}=t||{};return Cz(this.state.doc,{blockSeparator:e,textSerializers:{...ov(this.schema),...i}})}get isEmpty(){return Yu(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const t=this.view.dom;t&&t.editor&&delete t.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var t;return!(!((t=this.view)===null||t===void 0)&&t.docView)}$node(t,e){var i;return((i=this.$doc)===null||i===void 0?void 0:i.querySelector(t,e))||null}$nodes(t,e){var i;return((i=this.$doc)===null||i===void 0?void 0:i.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new Pr(e,this)}get $doc(){return this.$pos(0)}}function Xs(n){return new Ju({find:n.find,handler:({state:t,range:e,match:i})=>{const r=gt(n.getAttributes,void 0,i);if(r===!1||r===null)return null;const{tr:s}=t,o=i[i.length-1],a=i[0];if(o){const l=a.search(/\S/),u=e.from+a.indexOf(o),h=u+o.length;if(Sg(e.from,e.to,t.doc).filter(m=>m.mark.type.excluded.find(x=>x===n.type&&x!==m.mark.type)).filter(m=>m.to>u).length)return null;h<e.to&&s.delete(h,e.to),u>e.from&&s.delete(e.from+l,u);const g=e.from+l+o.length;s.addMark(e.from+l,g,n.type.create(r||{})),s.removeStoredMark(n.type)}}})}function cH(n){return new Ju({find:n.find,handler:({state:t,range:e,match:i})=>{const r=gt(n.getAttributes,void 0,i)||{},{tr:s}=t,o=e.from;let a=e.to;const l=n.type.create(r);if(i[1]){const u=i[0].lastIndexOf(i[1]);let h=o+u;h>a?h=a:a=h+i[1].length;const d=i[0][i[0].length-1];s.insertText(d,o+i[0].length-1),s.replaceWith(h,a,l)}else if(i[0]){const u=n.type.isInline?o:o-1;s.insert(u,n.type.create(r)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()}})}function lp(n){return new Ju({find:n.find,handler:({state:t,range:e,match:i})=>{const r=t.doc.resolve(e.from),s=gt(n.getAttributes,void 0,i)||{};if(!r.node(-1).canReplaceWith(r.index(-1),r.indexAfter(-1),n.type))return null;t.tr.delete(e.from,e.to).setBlockType(e.from,e.from,n.type,s)}})}function Ca(n){return new Ju({find:n.find,handler:({state:t,range:e,match:i,chain:r})=>{const s=gt(n.getAttributes,void 0,i)||{},o=t.tr.delete(e.from,e.to),l=o.doc.resolve(e.from).blockRange(),u=l&&ng(l,n.type,s);if(!u)return null;if(o.wrap(l,u),n.keepMarks&&n.editor){const{selection:d,storedMarks:g}=t,{splittableMarks:m}=n.editor.extensionManager,y=g||d.$to.parentOffset&&d.$from.marks();if(y){const x=y.filter(w=>m.includes(w.type.name));o.ensureMarks(x)}}if(n.keepAttributes){const d=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";r().updateAttributes(d,s).run()}const h=o.doc.resolve(e.from-1).nodeBefore;h&&h.type===n.type&&ur(o.doc,e.from-1)&&(!n.joinPredicate||n.joinPredicate(i,h))&&o.join(e.from-1)}})}class Ye{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=gt(X(this,"addOptions",{name:this.name}))),this.storage=gt(X(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Ye(t)}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Xu(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new Ye(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=gt(X(e,"addOptions",{name:e.name})),e.storage=gt(X(e,"addStorage",{name:e.name,options:e.options})),e}}function ls(n){return new kB({find:n.find,handler:({state:t,range:e,match:i,pasteEvent:r})=>{const s=gt(n.getAttributes,void 0,i,r);if(s===!1||s===null)return null;const{tr:o}=t,a=i[i.length-1],l=i[0];let u=e.to;if(a){const h=l.search(/\S/),d=e.from+l.indexOf(a),g=d+a.length;if(Sg(e.from,e.to,t.doc).filter(y=>y.mark.type.excluded.find(w=>w===n.type&&w!==y.mark.type)).filter(y=>y.to>d).length)return null;g<e.to&&o.delete(g,e.to),d>e.from&&o.delete(e.from+h,d),u=e.from+h+a.length,o.addMark(e.from+h,u,n.type.create(s||{})),o.removeStoredMark(n.type)}}})}function uH(n,t){const{selection:e}=n,{$from:i}=e;if(e instanceof Y){const s=i.index();return i.parent.canReplaceWith(s,s+1,t)}let r=i.depth;for(;r>=0;){const s=i.index(r);if(i.node(r).contentMatchAt(s).matchType(t))return!0;r-=1}return!1}const fH=/^\s*>\s$/,hH=Ye.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",_e(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ca({find:fH,type:this.type})]}}),dH=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,pH=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,gH=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,mH=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,yH=Ei.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",_e(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Xs({find:dH,type:this.type}),Xs({find:gH,type:this.type})]},addPasteRules(){return[ls({find:pH,type:this.type}),ls({find:mH,type:this.type})]}}),bH="listItem",fx="textStyle",hx=/^\s*([-+*])\s$/,xH=Ye.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",_e(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(bH,this.editor.getAttributes(fx)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Ca({find:hx,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Ca({find:hx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(fx),editor:this.editor})),[n]}}),wH=/(^|[^`])`([^`]+)`(?!`)/,_H=/(^|[^`])`([^`]+)`(?!`)/g,SH=Ei.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",_e(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Xs({find:wH,type:this.type})]},addPasteRules(){return[ls({find:_H,type:this.type})]}}),vH=/^```([a-z]+)?[\s\n]$/,kH=/^~~~([a-z]+)?[\s\n]$/,CH=Ye.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var t;const{languageClassPrefix:e}=this.options,s=[...((t=n.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(o=>o.startsWith(e)).map(o=>o.replace(e,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:t}){return["pre",_e(this.options.HTMLAttributes,t),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:t})=>t.setNode(this.name,n),toggleCodeBlock:n=>({commands:t})=>t.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:t}=this.editor.state.selection,e=t.pos===1;return!n||t.parent.type.name!==this.name?!1:e||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=n,{selection:e}=t,{$from:i,empty:r}=e;if(!r||i.parent.type!==this.type)return!1;const s=i.parentOffset===i.parent.nodeSize-2,o=i.parent.textContent.endsWith(`

`);return!s||!o?!1:n.chain().command(({tr:a})=>(a.delete(i.pos-2,i.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=n,{selection:e,doc:i}=t,{$from:r,empty:s}=e;if(!s||r.parent.type!==this.type||!(r.parentOffset===r.parent.nodeSize-2))return!1;const a=r.after();return a===void 0?!1:i.nodeAt(a)?n.commands.command(({tr:u})=>(u.setSelection(dt.near(i.resolve(a))),!0)):n.commands.exitCode()}}},addInputRules(){return[lp({find:vH,type:this.type,getAttributes:n=>({language:n[1]})}),lp({find:kH,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new pe({key:new Ze("codeBlockVSCodeHandler"),props:{handlePaste:(n,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const e=t.clipboardData.getData("text/plain"),i=t.clipboardData.getData("vscode-editor-data"),r=i?JSON.parse(i):void 0,s=r?.mode;if(!e||!s)return!1;const{tr:o,schema:a}=n.state,l=a.text(e.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(st.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}}),MH=Ye.create({name:"doc",topNode:!0,content:"block+"});function EH(n={}){return new pe({view(t){return new TH(t,n)}})}class TH{constructor(t,e){var i;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(i=e.width)!==null&&i!==void 0?i:1,this.color=e.color===!1?void 0:e.color||"black",this.class=e.class,this.handlers=["dragover","dragend","drop","dragleave"].map(r=>{let s=o=>{this[r](o)};return t.dom.addEventListener(r,s),{name:r,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:e})=>this.editorView.dom.removeEventListener(t,e))}update(t,e){this.cursorPos!=null&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),e=!t.parent.inlineContent,i,r=this.editorView.dom,s=r.getBoundingClientRect(),o=s.width/r.offsetWidth,a=s.height/r.offsetHeight;if(e){let d=t.nodeBefore,g=t.nodeAfter;if(d||g){let m=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(m){let y=m.getBoundingClientRect(),x=d?y.bottom:y.top;d&&g&&(x=(x+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*a;i={left:y.left,right:y.right,top:x-w,bottom:x+w}}}}if(!i){let d=this.editorView.coordsAtPos(this.cursorPos),g=this.width/2*o;i={left:d.left-g,right:d.left+g,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",e),this.element.classList.toggle("prosemirror-dropcursor-inline",!e);let u,h;if(!l||l==document.body&&getComputedStyle(l).position=="static")u=-pageXOffset,h=-pageYOffset;else{let d=l.getBoundingClientRect(),g=d.width/l.offsetWidth,m=d.height/l.offsetHeight;u=d.left-l.scrollLeft*g,h=d.top-l.scrollTop*m}this.element.style.left=(i.left-u)/o+"px",this.element.style.top=(i.top-h)/a+"px",this.element.style.width=(i.right-i.left)/o+"px",this.element.style.height=(i.bottom-i.top)/a+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),i=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),r=i&&i.type.spec.disableDropCursor,s=typeof r=="function"?r(this.editorView,e,t):r;if(e&&!s){let o=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=eS(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}const OH=Oe.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[EH(this.options)]}});class Jt extends dt{constructor(t){super(t,t)}map(t,e){let i=t.resolve(e.map(this.head));return Jt.valid(i)?new Jt(i):dt.near(i)}content(){return K.empty}eq(t){return t instanceof Jt&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Jt(t.resolve(e.pos))}getBookmark(){return new vg(this.anchor)}static valid(t){let e=t.parent;if(e.isTextblock||!AH(t)||!RH(t))return!1;let i=e.type.spec.allowGapCursor;if(i!=null)return i;let r=e.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(t,e,i=!1){t:for(;;){if(!i&&Jt.valid(t))return t;let r=t.pos,s=null;for(let o=t.depth;;o--){let a=t.node(o);if(e>0?t.indexAfter(o)<a.childCount:t.index(o)>0){s=a.child(e>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;r+=e;let l=t.doc.resolve(r);if(Jt.valid(l))return l}for(;;){let o=e>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Y.isSelectable(s)){t=t.doc.resolve(r+s.nodeSize*e),i=!1;continue t}break}s=o,r+=e;let a=t.doc.resolve(r);if(Jt.valid(a))return a}return null}}}Jt.prototype.visible=!1;Jt.findFrom=Jt.findGapCursorFrom;dt.jsonID("gapcursor",Jt);class vg{constructor(t){this.pos=t}map(t){return new vg(t.map(this.pos))}resolve(t){let e=t.resolve(this.pos);return Jt.valid(e)?new Jt(e):dt.near(e)}}function pv(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function AH(n){for(let t=n.depth;t>=0;t--){let e=n.index(t),i=n.node(t);if(e==0){if(i.type.spec.isolating)return!0;continue}for(let r=i.child(e-1);;r=r.lastChild){if(r.childCount==0&&!r.inlineContent||pv(r.type))return!0;if(r.inlineContent)return!1}}return!0}function RH(n){for(let t=n.depth;t>=0;t--){let e=n.indexAfter(t),i=n.node(t);if(e==i.childCount){if(i.type.spec.isolating)return!0;continue}for(let r=i.child(e);;r=r.firstChild){if(r.childCount==0&&!r.inlineContent||pv(r.type))return!0;if(r.inlineContent)return!1}}return!0}function DH(){return new pe({props:{decorations:NH,createSelectionBetween(n,t,e){return t.pos==e.pos&&Jt.valid(e)?new Jt(e):null},handleClick:IH,handleKeyDown:PH,handleDOMEvents:{beforeinput:LH}}})}const PH=US({ArrowLeft:Yl("horiz",-1),ArrowRight:Yl("horiz",1),ArrowUp:Yl("vert",-1),ArrowDown:Yl("vert",1)});function Yl(n,t){const e=n=="vert"?t>0?"down":"up":t>0?"right":"left";return function(i,r,s){let o=i.selection,a=t>0?o.$to:o.$from,l=o.empty;if(o instanceof st){if(!s.endOfTextblock(e)||a.depth==0)return!1;l=!1,a=i.doc.resolve(t>0?a.after():a.before())}let u=Jt.findGapCursorFrom(a,t,l);return u?(r&&r(i.tr.setSelection(new Jt(u))),!0):!1}}function IH(n,t,e){if(!n||!n.editable)return!1;let i=n.state.doc.resolve(t);if(!Jt.valid(i))return!1;let r=n.posAtCoords({left:e.clientX,top:e.clientY});return r&&r.inside>-1&&Y.isSelectable(n.state.doc.nodeAt(r.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Jt(i))),!0)}function LH(n,t){if(t.inputType!="insertCompositionText"||!(n.state.selection instanceof Jt))return!1;let{$from:e}=n.state.selection,i=e.parent.contentMatchAt(e.index()).findWrapping(n.state.schema.nodes.text);if(!i)return!1;let r=V.empty;for(let o=i.length-1;o>=0;o--)r=V.from(i[o].createAndFill(null,r));let s=n.state.tr.replace(e.pos,e.pos,new K(r,0,0));return s.setSelection(st.near(s.doc.resolve(e.pos+1))),n.dispatch(s),!1}function NH(n){if(!(n.selection instanceof Jt))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",ee.create(n.doc,[cn.widget(n.selection.head,t,{key:"gapcursor"})])}const FH=Oe.create({name:"gapCursor",addProseMirrorPlugins(){return[DH()]},extendNodeSchema(n){var t;const e={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(t=gt(X(n,"allowGapCursor",e)))!==null&&t!==void 0?t:null}}}),BH=Ye.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",_e(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:t,state:e,editor:i})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:r,storedMarks:s}=e;if(r.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=i.extensionManager,l=s||r.$to.parentOffset&&r.$from.marks();return t().insertContent({type:this.name}).command(({tr:u,dispatch:h})=>{if(h&&l&&o){const d=l.filter(g=>a.includes(g.type.name));u.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),zH=Ye.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:t}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,_e(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:n=>({commands:t})=>this.options.levels.includes(n.level)?t.setNode(this.name,n):!1,toggleHeading:n=>({commands:t})=>this.options.levels.includes(n.level)?t.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,t)=>({...n,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(n=>lp({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Uc=200,he=function(){};he.prototype.append=function(t){return t.length?(t=he.from(t),!this.length&&t||t.length<Uc&&this.leafAppend(t)||this.length<Uc&&t.leafPrepend(this)||this.appendInner(t)):this};he.prototype.prepend=function(t){return t.length?he.from(t).append(this):this};he.prototype.appendInner=function(t){return new HH(this,t)};he.prototype.slice=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.length),t>=e?he.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))};he.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};he.prototype.forEach=function(t,e,i){e===void 0&&(e=0),i===void 0&&(i=this.length),e<=i?this.forEachInner(t,e,i,0):this.forEachInvertedInner(t,e,i,0)};he.prototype.map=function(t,e,i){e===void 0&&(e=0),i===void 0&&(i=this.length);var r=[];return this.forEach(function(s,o){return r.push(t(s,o))},e,i),r};he.from=function(t){return t instanceof he?t:t&&t.length?new gv(t):he.empty};var gv=(function(n){function t(i){n.call(this),this.values=i}n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t;var e={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(r,s){return r==0&&s==this.length?this:new t(this.values.slice(r,s))},t.prototype.getInner=function(r){return this.values[r]},t.prototype.forEachInner=function(r,s,o,a){for(var l=s;l<o;l++)if(r(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(r,s,o,a){for(var l=s-1;l>=o;l--)if(r(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(r){if(this.length+r.length<=Uc)return new t(this.values.concat(r.flatten()))},t.prototype.leafPrepend=function(r){if(this.length+r.length<=Uc)return new t(r.flatten().concat(this.values))},e.length.get=function(){return this.values.length},e.depth.get=function(){return 0},Object.defineProperties(t.prototype,e),t})(he);he.empty=new gv([]);var HH=(function(n){function t(e,i){n.call(this),this.left=e,this.right=i,this.length=e.length+i.length,this.depth=Math.max(e.depth,i.depth)+1}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},t.prototype.forEachInner=function(i,r,s,o){var a=this.left.length;if(r<a&&this.left.forEachInner(i,r,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(i,Math.max(r-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},t.prototype.forEachInvertedInner=function(i,r,s,o){var a=this.left.length;if(r>a&&this.right.forEachInvertedInner(i,r-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(i,Math.min(r,a),s,o)===!1)return!1},t.prototype.sliceInner=function(i,r){if(i==0&&r==this.length)return this;var s=this.left.length;return r<=s?this.left.slice(i,r):i>=s?this.right.slice(i-s,r-s):this.left.slice(i,s).append(this.right.slice(0,r-s))},t.prototype.leafAppend=function(i){var r=this.right.leafAppend(i);if(r)return new t(this.left,r)},t.prototype.leafPrepend=function(i){var r=this.left.leafPrepend(i);if(r)return new t(r,this.right)},t.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new t(this.left,new t(this.right,i)):new t(this,i)},t})(he);const $H=500;class Ln{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let r,s;e&&(r=this.remapping(i,this.items.length),s=r.maps.length);let o=t.tr,a,l,u=[],h=[];return this.items.forEach((d,g)=>{if(!d.step){r||(r=this.remapping(i,g+1),s=r.maps.length),s--,h.push(d);return}if(r){h.push(new jn(d.map));let m=d.step.map(r.slice(s)),y;m&&o.maybeStep(m).doc&&(y=o.mapping.maps[o.mapping.maps.length-1],u.push(new jn(y,void 0,void 0,u.length+h.length))),s--,y&&r.appendMap(y,s)}else o.maybeStep(d.step);if(d.selection)return a=r?d.selection.map(r.slice(s)):d.selection,l=new Ln(this.items.slice(0,i).append(h.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(t,e,i,r){let s=[],o=this.eventCount,a=this.items,l=!r&&a.length?a.get(a.length-1):null;for(let h=0;h<t.steps.length;h++){let d=t.steps[h].invert(t.docs[h]),g=new jn(t.mapping.maps[h],d,e),m;(m=l&&l.merge(g))&&(g=m,h?s.pop():a=a.slice(0,a.length-1)),s.push(g),e&&(o++,e=void 0),r||(l=g)}let u=o-i.depth;return u>VH&&(a=WH(a,u),o-=u),new Ln(a.append(s),o)}remapping(t,e){let i=new ba;return this.items.forEach((r,s)=>{let o=r.mirrorOffset!=null&&s-r.mirrorOffset>=t?i.maps.length-r.mirrorOffset:void 0;i.appendMap(r.map,o)},t,e),i}addMaps(t){return this.eventCount==0?this:new Ln(this.items.append(t.map(e=>new jn(e))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let i=[],r=Math.max(0,this.items.length-e),s=t.mapping,o=t.steps.length,a=this.eventCount;this.items.forEach(g=>{g.selection&&a--},r);let l=e;this.items.forEach(g=>{let m=s.getMirror(--l);if(m==null)return;o=Math.min(o,m);let y=s.maps[m];if(g.step){let x=t.steps[m].invert(t.docs[m]),w=g.selection&&g.selection.map(s.slice(l+1,m));w&&a++,i.push(new jn(y,x,w))}else i.push(new jn(y))},r);let u=[];for(let g=e;g<o;g++)u.push(new jn(s.maps[g]));let h=this.items.slice(0,r).append(u).append(i),d=new Ln(h,a);return d.emptyItemCount()>$H&&(d=d.compress(this.items.length-i.length)),d}emptyItemCount(){let t=0;return this.items.forEach(e=>{e.step||t++}),t}compress(t=this.items.length){let e=this.remapping(0,t),i=e.maps.length,r=[],s=0;return this.items.forEach((o,a)=>{if(a>=t)r.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(e.slice(i)),u=l&&l.getMap();if(i--,u&&e.appendMap(u,i),l){let h=o.selection&&o.selection.map(e.slice(i));h&&s++;let d=new jn(u.invert(),l,h),g,m=r.length-1;(g=r.length&&r[m].merge(d))?r[m]=g:r.push(d)}}else o.map&&i--},this.items.length,0),new Ln(he.from(r.reverse()),s)}}Ln.empty=new Ln(he.empty,0);function WH(n,t){let e;return n.forEach((i,r)=>{if(i.selection&&t--==0)return e=r,!1}),n.slice(e)}class jn{constructor(t,e,i,r){this.map=t,this.step=e,this.selection=i,this.mirrorOffset=r}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new jn(e.getMap().invert(),e,this.selection)}}}class Wi{constructor(t,e,i,r,s){this.done=t,this.undone=e,this.prevRanges=i,this.prevTime=r,this.prevComposition=s}}const VH=20;function UH(n,t,e,i){let r=e.getMeta(Xr),s;if(r)return r.historyState;e.getMeta(KH)&&(n=new Wi(n.done,n.undone,null,0,-1));let o=e.getMeta("appendedTransaction");if(e.steps.length==0)return n;if(o&&o.getMeta(Xr))return o.getMeta(Xr).redo?new Wi(n.done.addTransform(e,void 0,i,Sc(t)),n.undone,dx(e.mapping.maps),n.prevTime,n.prevComposition):new Wi(n.done,n.undone.addTransform(e,void 0,i,Sc(t)),null,n.prevTime,n.prevComposition);if(e.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=e.getMeta("composition"),l=n.prevTime==0||!o&&n.prevComposition!=a&&(n.prevTime<(e.time||0)-i.newGroupDelay||!jH(e,n.prevRanges)),u=o?td(n.prevRanges,e.mapping):dx(e.mapping.maps);return new Wi(n.done.addTransform(e,l?t.selection.getBookmark():void 0,i,Sc(t)),Ln.empty,u,e.time,a??n.prevComposition)}else return(s=e.getMeta("rebased"))?new Wi(n.done.rebased(e,s),n.undone.rebased(e,s),td(n.prevRanges,e.mapping),n.prevTime,n.prevComposition):new Wi(n.done.addMaps(e.mapping.maps),n.undone.addMaps(e.mapping.maps),td(n.prevRanges,e.mapping),n.prevTime,n.prevComposition)}function jH(n,t){if(!t)return!1;if(!n.docChanged)return!0;let e=!1;return n.mapping.maps[0].forEach((i,r)=>{for(let s=0;s<t.length;s+=2)i<=t[s+1]&&r>=t[s]&&(e=!0)}),e}function dx(n){let t=[];for(let e=n.length-1;e>=0&&t.length==0;e--)n[e].forEach((i,r,s,o)=>t.push(s,o));return t}function td(n,t){if(!n)return null;let e=[];for(let i=0;i<n.length;i+=2){let r=t.map(n[i],1),s=t.map(n[i+1],-1);r<=s&&e.push(r,s)}return e}function qH(n,t,e){let i=Sc(t),r=Xr.get(t).spec.config,s=(e?n.undone:n.done).popEvent(t,i);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(e?n.done:n.undone).addTransform(s.transform,t.selection.getBookmark(),r,i),l=new Wi(e?a:s.remaining,e?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Xr,{redo:e,historyState:l})}let ed=!1,px=null;function Sc(n){let t=n.plugins;if(px!=t){ed=!1,px=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){ed=!0;break}}return ed}const Xr=new Ze("history"),KH=new Ze("closeHistory");function JH(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new pe({key:Xr,state:{init(){return new Wi(Ln.empty,Ln.empty,null,0,-1)},apply(t,e,i){return UH(e,i,t,n)}},config:n,props:{handleDOMEvents:{beforeinput(t,e){let i=e.inputType,r=i=="historyUndo"?yv:i=="historyRedo"?bv:null;return!r||!t.editable?!1:(e.preventDefault(),r(t.state,t.dispatch))}}}})}function mv(n,t){return(e,i)=>{let r=Xr.getState(e);if(!r||(n?r.undone:r.done).eventCount==0)return!1;if(i){let s=qH(r,e,n);s&&i(t?s.scrollIntoView():s)}return!0}}const yv=mv(!1,!0),bv=mv(!0,!0),XH=Oe.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:t})=>yv(n,t),redo:()=>({state:n,dispatch:t})=>bv(n,t)}},addProseMirrorPlugins(){return[JH(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),GH=Ye.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",_e(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:t})=>{if(!uH(t,t.schema.nodes[this.name]))return!1;const{selection:e}=t,{$from:i,$to:r}=e,s=n();return i.parentOffset===0?s.insertContentAt({from:Math.max(i.pos-1,0),to:r.pos},{type:this.name}):Rz(e)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:a})=>{var l;if(a){const{$to:u}=o.selection,h=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?o.setSelection(st.create(o.doc,u.pos+1)):u.nodeAfter.isBlock?o.setSelection(Y.create(o.doc,u.pos)):o.setSelection(st.create(o.doc,u.pos));else{const d=(l=u.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(o.insert(h,d),o.setSelection(st.create(o.doc,h+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[cH({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),YH=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,ZH=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,QH=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,t$=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,e$=Ei.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",_e(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Xs({find:YH,type:this.type}),Xs({find:QH,type:this.type})]},addPasteRules(){return[ls({find:ZH,type:this.type}),ls({find:t$,type:this.type})]}}),n$=Ye.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",_e(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),i$="listItem",gx="textStyle",mx=/^(\d+)\.\s$/,r$=Ye.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:t,...e}=n;return t===1?["ol",_e(this.options.HTMLAttributes,e),0]:["ol",_e(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(i$,this.editor.getAttributes(gx)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Ca({find:mx,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Ca({find:mx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(gx)}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1],editor:this.editor})),[n]}}),s$=Ye.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",_e(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),o$=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,a$=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,l$=Ei.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",_e(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Xs({find:o$,type:this.type})]},addPasteRules(){return[ls({find:a$,type:this.type})]}}),c$=Ye.create({name:"text",group:"inline"}),u$=Oe.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(yH.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(hH.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(xH.configure(this.options.bulletList)),this.options.code!==!1&&n.push(SH.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(CH.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(MH.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(OH.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(FH.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(BH.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(zH.configure(this.options.heading)),this.options.history!==!1&&n.push(XH.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(GH.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(e$.configure(this.options.italic)),this.options.listItem!==!1&&n.push(n$.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(r$.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(s$.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(l$.configure(this.options.strike)),this.options.text!==!1&&n.push(c$.configure(this.options.text)),n}}),f$="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",h$="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",cp="numeric",up="ascii",fp="alpha",ia="asciinumeric",Uo="alphanumeric",hp="domain",xv="emoji",d$="scheme",p$="slashscheme",nd="whitespace";function g$(n,t){return n in t||(t[n]=[]),t[n]}function zr(n,t,e){t[cp]&&(t[ia]=!0,t[Uo]=!0),t[up]&&(t[ia]=!0,t[fp]=!0),t[ia]&&(t[Uo]=!0),t[fp]&&(t[Uo]=!0),t[Uo]&&(t[hp]=!0),t[xv]&&(t[hp]=!0);for(const i in t){const r=g$(i,e);r.indexOf(n)<0&&r.push(n)}}function m$(n,t){const e={};for(const i in t)t[i].indexOf(n)>=0&&(e[i]=!0);return e}function qe(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}qe.groups={};qe.prototype={accepts(){return!!this.t},go(n){const t=this,e=t.j[n];if(e)return e;for(let i=0;i<t.jr.length;i++){const r=t.jr[i][0],s=t.jr[i][1];if(s&&r.test(n))return s}return t.jd},has(n,t=!1){return t?n in this.j:!!this.go(n)},ta(n,t,e,i){for(let r=0;r<n.length;r++)this.tt(n[r],t,e,i)},tr(n,t,e,i){i=i||qe.groups;let r;return t&&t.j?r=t:(r=new qe(t),e&&i&&zr(t,e,i)),this.jr.push([n,r]),r},ts(n,t,e,i){let r=this;const s=n.length;if(!s)return r;for(let o=0;o<s-1;o++)r=r.tt(n[o]);return r.tt(n[s-1],t,e,i)},tt(n,t,e,i){i=i||qe.groups;const r=this;if(t&&t.j)return r.j[n]=t,t;const s=t;let o,a=r.go(n);if(a?(o=new qe,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new qe,s){if(i)if(o.t&&typeof o.t=="string"){const l=Object.assign(m$(o.t,i),e);zr(s,l,i)}else e&&zr(s,e,i);o.t=s}return r.j[n]=o,o}};const ht=(n,t,e,i,r)=>n.ta(t,e,i,r),Kt=(n,t,e,i,r)=>n.tr(t,e,i,r),yx=(n,t,e,i,r)=>n.ts(t,e,i,r),U=(n,t,e,i,r)=>n.tt(t,e,i,r),gi="WORD",dp="UWORD",wv="ASCIINUMERICAL",_v="ALPHANUMERICAL",Ma="LOCALHOST",pp="TLD",gp="UTLD",vc="SCHEME",Ns="SLASH_SCHEME",kg="NUM",mp="WS",Cg="NL",ra="OPENBRACE",sa="CLOSEBRACE",jc="OPENBRACKET",qc="CLOSEBRACKET",Kc="OPENPAREN",Jc="CLOSEPAREN",Xc="OPENANGLEBRACKET",Gc="CLOSEANGLEBRACKET",Yc="FULLWIDTHLEFTPAREN",Zc="FULLWIDTHRIGHTPAREN",Qc="LEFTCORNERBRACKET",tu="RIGHTCORNERBRACKET",eu="LEFTWHITECORNERBRACKET",nu="RIGHTWHITECORNERBRACKET",iu="FULLWIDTHLESSTHAN",ru="FULLWIDTHGREATERTHAN",su="AMPERSAND",ou="APOSTROPHE",au="ASTERISK",Vi="AT",lu="BACKSLASH",cu="BACKTICK",uu="CARET",ji="COLON",Mg="COMMA",fu="DOLLAR",qn="DOT",hu="EQUALS",Eg="EXCLAMATION",Sn="HYPHEN",oa="PERCENT",du="PIPE",pu="PLUS",gu="POUND",aa="QUERY",Tg="QUOTE",Sv="FULLWIDTHMIDDLEDOT",Og="SEMI",Kn="SLASH",la="TILDE",mu="UNDERSCORE",vv="EMOJI",yu="SYM";var kv=Object.freeze({__proto__:null,ALPHANUMERICAL:_v,AMPERSAND:su,APOSTROPHE:ou,ASCIINUMERICAL:wv,ASTERISK:au,AT:Vi,BACKSLASH:lu,BACKTICK:cu,CARET:uu,CLOSEANGLEBRACKET:Gc,CLOSEBRACE:sa,CLOSEBRACKET:qc,CLOSEPAREN:Jc,COLON:ji,COMMA:Mg,DOLLAR:fu,DOT:qn,EMOJI:vv,EQUALS:hu,EXCLAMATION:Eg,FULLWIDTHGREATERTHAN:ru,FULLWIDTHLEFTPAREN:Yc,FULLWIDTHLESSTHAN:iu,FULLWIDTHMIDDLEDOT:Sv,FULLWIDTHRIGHTPAREN:Zc,HYPHEN:Sn,LEFTCORNERBRACKET:Qc,LEFTWHITECORNERBRACKET:eu,LOCALHOST:Ma,NL:Cg,NUM:kg,OPENANGLEBRACKET:Xc,OPENBRACE:ra,OPENBRACKET:jc,OPENPAREN:Kc,PERCENT:oa,PIPE:du,PLUS:pu,POUND:gu,QUERY:aa,QUOTE:Tg,RIGHTCORNERBRACKET:tu,RIGHTWHITECORNERBRACKET:nu,SCHEME:vc,SEMI:Og,SLASH:Kn,SLASH_SCHEME:Ns,SYM:yu,TILDE:la,TLD:pp,UNDERSCORE:mu,UTLD:gp,UWORD:dp,WORD:gi,WS:mp});const hi=/[a-z]/,Io=new RegExp("\\p{L}","u"),id=new RegExp("\\p{Emoji}","u"),di=/\d/,rd=/\s/,bx="\r",sd=`
`,y$="",b$="",od="";let Zl=null,Ql=null;function x$(n=[]){const t={};qe.groups=t;const e=new qe;Zl==null&&(Zl=xx(f$)),Ql==null&&(Ql=xx(h$)),U(e,"'",ou),U(e,"{",ra),U(e,"}",sa),U(e,"[",jc),U(e,"]",qc),U(e,"(",Kc),U(e,")",Jc),U(e,"<",Xc),U(e,">",Gc),U(e,"",Yc),U(e,"",Zc),U(e,"",Qc),U(e,"",tu),U(e,"",eu),U(e,"",nu),U(e,"",iu),U(e,"",ru),U(e,"&",su),U(e,"*",au),U(e,"@",Vi),U(e,"`",cu),U(e,"^",uu),U(e,":",ji),U(e,",",Mg),U(e,"$",fu),U(e,".",qn),U(e,"=",hu),U(e,"!",Eg),U(e,"-",Sn),U(e,"%",oa),U(e,"|",du),U(e,"+",pu),U(e,"#",gu),U(e,"?",aa),U(e,'"',Tg),U(e,"/",Kn),U(e,";",Og),U(e,"~",la),U(e,"_",mu),U(e,"\\",lu),U(e,"",Sv);const i=Kt(e,di,kg,{[cp]:!0});Kt(i,di,i);const r=Kt(i,hi,wv,{[ia]:!0}),s=Kt(i,Io,_v,{[Uo]:!0}),o=Kt(e,hi,gi,{[up]:!0});Kt(o,di,r),Kt(o,hi,o),Kt(r,di,r),Kt(r,hi,r);const a=Kt(e,Io,dp,{[fp]:!0});Kt(a,hi),Kt(a,di,s),Kt(a,Io,a),Kt(s,di,s),Kt(s,hi),Kt(s,Io,s);const l=U(e,sd,Cg,{[nd]:!0}),u=U(e,bx,mp,{[nd]:!0}),h=Kt(e,rd,mp,{[nd]:!0});U(e,od,h),U(u,sd,l),U(u,od,h),Kt(u,rd,h),U(h,bx),U(h,sd),Kt(h,rd,h),U(h,od,h);const d=Kt(e,id,vv,{[xv]:!0});U(d,"#"),Kt(d,id,d),U(d,y$,d);const g=U(d,b$);U(g,"#"),Kt(g,id,d);const m=[[hi,o],[di,r]],y=[[hi,null],[Io,a],[di,s]];for(let x=0;x<Zl.length;x++)zi(e,Zl[x],pp,gi,m);for(let x=0;x<Ql.length;x++)zi(e,Ql[x],gp,dp,y);zr(pp,{tld:!0,ascii:!0},t),zr(gp,{utld:!0,alpha:!0},t),zi(e,"file",vc,gi,m),zi(e,"mailto",vc,gi,m),zi(e,"http",Ns,gi,m),zi(e,"https",Ns,gi,m),zi(e,"ftp",Ns,gi,m),zi(e,"ftps",Ns,gi,m),zr(vc,{scheme:!0,ascii:!0},t),zr(Ns,{slashscheme:!0,ascii:!0},t),n=n.sort((x,w)=>x[0]>w[0]?1:-1);for(let x=0;x<n.length;x++){const w=n[x][0],E=n[x][1]?{[d$]:!0}:{[p$]:!0};w.indexOf("-")>=0?E[hp]=!0:hi.test(w)?di.test(w)?E[ia]=!0:E[up]=!0:E[cp]=!0,yx(e,w,w,E)}return yx(e,"localhost",Ma,{ascii:!0}),e.jd=new qe(yu),{start:e,tokens:Object.assign({groups:t},kv)}}function Cv(n,t){const e=w$(t.replace(/[A-Z]/g,a=>a.toLowerCase())),i=e.length,r=[];let s=0,o=0;for(;o<i;){let a=n,l=null,u=0,h=null,d=-1,g=-1;for(;o<i&&(l=a.go(e[o]));)a=l,a.accepts()?(d=0,g=0,h=a):d>=0&&(d+=e[o].length,g++),u+=e[o].length,s+=e[o].length,o++;s-=d,o-=g,u-=d,r.push({t:h.t,v:t.slice(s-u,s),s:s-u,e:s})}return r}function w$(n){const t=[],e=n.length;let i=0;for(;i<e;){let r=n.charCodeAt(i),s,o=r<55296||r>56319||i+1===e||(s=n.charCodeAt(i+1))<56320||s>57343?n[i]:n.slice(i,i+2);t.push(o),i+=o.length}return t}function zi(n,t,e,i,r){let s;const o=t.length;for(let a=0;a<o-1;a++){const l=t[a];n.j[l]?s=n.j[l]:(s=new qe(i),s.jr=r.slice(),n.j[l]=s),n=s}return s=new qe(e),s.jr=r.slice(),n.j[t[o-1]]=s,s}function xx(n){const t=[],e=[];let i=0,r="0123456789";for(;i<n.length;){let s=0;for(;r.indexOf(n[i+s])>=0;)s++;if(s>0){t.push(e.join(""));for(let o=parseInt(n.substring(i,i+s),10);o>0;o--)e.pop();i+=s}else e.push(n[i]),i++}return t}const Ea={defaultProtocol:"http",events:null,format:wx,formatHref:wx,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Ag(n,t=null){let e=Object.assign({},Ea);n&&(e=Object.assign(e,n instanceof Ag?n.o:n));const i=e.ignoreTags,r=[];for(let s=0;s<i.length;s++)r.push(i[s].toUpperCase());this.o=e,t&&(this.defaultRender=t),this.ignoreTags=r}Ag.prototype={o:Ea,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,t,e){const i=t!=null;let r=this.o[n];return r&&(typeof r=="object"?(r=e.t in r?r[e.t]:Ea[n],typeof r=="function"&&i&&(r=r(t,e))):typeof r=="function"&&i&&(r=r(t,e.t,e)),r)},getObj(n,t,e){let i=this.o[n];return typeof i=="function"&&t!=null&&(i=i(t,e.t,e)),i},render(n){const t=n.render(this);return(this.get("render",null,n)||this.defaultRender)(t,n.t,n)}};function wx(n){return n}function Mv(n,t){this.t="token",this.v=n,this.tk=t}Mv.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const t=this.toString(),e=n.get("truncate",t,this),i=n.get("format",t,this);return e&&i.length>e?i.substring(0,e)+"":i},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=Ea.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const t=this,e=this.toHref(n.get("defaultProtocol")),i=n.get("formatHref",e,this),r=n.get("tagName",e,t),s=this.toFormattedString(n),o={},a=n.get("className",e,t),l=n.get("target",e,t),u=n.get("rel",e,t),h=n.getObj("attributes",e,t),d=n.getObj("events",e,t);return o.href=i,a&&(o.class=a),l&&(o.target=l),u&&(o.rel=u),h&&Object.assign(o,h),{tagName:r,attributes:o,content:s,eventListeners:d}}};function Zu(n,t){class e extends Mv{constructor(r,s){super(r,s),this.t=n}}for(const i in t)e.prototype[i]=t[i];return e.t=n,e}const _x=Zu("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Sx=Zu("text"),_$=Zu("nl"),tc=Zu("url",{isLink:!0,toHref(n=Ea.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Ma&&n[1].t===ji}}),wn=n=>new qe(n);function S$({groups:n}){const t=n.domain.concat([su,au,Vi,lu,cu,uu,fu,hu,Sn,kg,oa,du,pu,gu,Kn,yu,la,mu]),e=[ou,ji,Mg,qn,Eg,oa,aa,Tg,Og,Xc,Gc,ra,sa,qc,jc,Kc,Jc,Yc,Zc,Qc,tu,eu,nu,iu,ru],i=[su,ou,au,lu,cu,uu,fu,hu,Sn,ra,sa,oa,du,pu,gu,aa,Kn,yu,la,mu],r=wn(),s=U(r,la);ht(s,i,s),ht(s,n.domain,s);const o=wn(),a=wn(),l=wn();ht(r,n.domain,o),ht(r,n.scheme,a),ht(r,n.slashscheme,l),ht(o,i,s),ht(o,n.domain,o);const u=U(o,Vi);U(s,Vi,u),U(a,Vi,u),U(l,Vi,u);const h=U(s,qn);ht(h,i,s),ht(h,n.domain,s);const d=wn();ht(u,n.domain,d),ht(d,n.domain,d);const g=U(d,qn);ht(g,n.domain,d);const m=wn(_x);ht(g,n.tld,m),ht(g,n.utld,m),U(u,Ma,m);const y=U(d,Sn);U(y,Sn,y),ht(y,n.domain,d),ht(m,n.domain,d),U(m,qn,g),U(m,Sn,y);const x=U(m,ji);ht(x,n.numeric,_x);const w=U(o,Sn),v=U(o,qn);U(w,Sn,w),ht(w,n.domain,o),ht(v,i,s),ht(v,n.domain,o);const E=wn(tc);ht(v,n.tld,E),ht(v,n.utld,E),ht(E,n.domain,o),ht(E,i,s),U(E,qn,v),U(E,Sn,w),U(E,Vi,u);const O=U(E,ji),P=wn(tc);ht(O,n.numeric,P);const R=wn(tc),B=wn();ht(R,t,R),ht(R,e,B),ht(B,t,R),ht(B,e,B),U(E,Kn,R),U(P,Kn,R);const I=U(a,ji),z=U(l,ji),j=U(z,Kn),Z=U(j,Kn);ht(a,n.domain,o),U(a,qn,v),U(a,Sn,w),ht(l,n.domain,o),U(l,qn,v),U(l,Sn,w),ht(I,n.domain,R),U(I,Kn,R),U(I,aa,R),ht(Z,n.domain,R),ht(Z,t,R),U(Z,Kn,R);const it=[[ra,sa],[jc,qc],[Kc,Jc],[Xc,Gc],[Yc,Zc],[Qc,tu],[eu,nu],[iu,ru]];for(let rt=0;rt<it.length;rt++){const[Ot,At]=it[rt],mt=U(R,Ot);U(B,Ot,mt),U(mt,At,R);const ot=wn(tc);ht(mt,t,ot);const yt=wn();ht(mt,e),ht(ot,t,ot),ht(ot,e,yt),ht(yt,t,ot),ht(yt,e,yt),U(ot,At,R),U(yt,At,R)}return U(r,Ma,E),U(r,Cg,_$),{start:r,tokens:kv}}function v$(n,t,e){let i=e.length,r=0,s=[],o=[];for(;r<i;){let a=n,l=null,u=null,h=0,d=null,g=-1;for(;r<i&&!(l=a.go(e[r].t));)o.push(e[r++]);for(;r<i&&(u=l||a.go(e[r].t));)l=null,a=u,a.accepts()?(g=0,d=a):g>=0&&g++,r++,h++;if(g<0)r-=h,r<i&&(o.push(e[r]),r++);else{o.length>0&&(s.push(ad(Sx,t,o)),o=[]),r-=g,h-=g;const m=d.t,y=e.slice(r-h,r);s.push(ad(m,t,y))}}return o.length>0&&s.push(ad(Sx,t,o)),s}function ad(n,t,e){const i=e[0].s,r=e[e.length-1].e,s=t.slice(i,r);return new n(s,e)}const k$=typeof console<"u"&&console&&console.warn||(()=>{}),C$="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ft={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function M$(){return qe.groups={},Ft.scanner=null,Ft.parser=null,Ft.tokenQueue=[],Ft.pluginQueue=[],Ft.customSchemes=[],Ft.initialized=!1,Ft}function vx(n,t=!1){if(Ft.initialized&&k$(`linkifyjs: already initialized - will not register custom scheme "${n}" ${C$}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ft.customSchemes.push([n,t])}function E$(){Ft.scanner=x$(Ft.customSchemes);for(let n=0;n<Ft.tokenQueue.length;n++)Ft.tokenQueue[n][1]({scanner:Ft.scanner});Ft.parser=S$(Ft.scanner.tokens);for(let n=0;n<Ft.pluginQueue.length;n++)Ft.pluginQueue[n][1]({scanner:Ft.scanner,parser:Ft.parser});return Ft.initialized=!0,Ft}function Rg(n){return Ft.initialized||E$(),v$(Ft.parser.start,n,Cv(Ft.scanner.start,n))}Rg.scan=Cv;function Ev(n,t=null,e=null){if(t&&typeof t=="object"){if(e)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);e=t,t=null}const i=new Ag(e),r=Rg(n),s=[];for(let o=0;o<r.length;o++){const a=r[o];a.isLink&&(!t||a.t===t)&&i.check(a)&&s.push(a.toFormattedObject(i))}return s}const Dg="[\0- -\u2029]",T$=new RegExp(Dg),O$=new RegExp(`${Dg}$`),A$=new RegExp(Dg,"g");function R$(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function D$(n){return new pe({key:new Ze("autolink"),appendTransaction:(t,e,i)=>{const r=t.some(u=>u.docChanged)&&!e.doc.eq(i.doc),s=t.some(u=>u.getMeta("preventAutolink"));if(!r||s)return;const{tr:o}=i,a=_z(e.doc,[...t]);if(Oz(a).forEach(({newRange:u})=>{const h=vz(i.doc,u,m=>m.isTextblock);let d,g;if(h.length>1)d=h[0],g=i.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(h.length){const m=i.doc.textBetween(u.from,u.to," "," ");if(!O$.test(m))return;d=h[0],g=i.doc.textBetween(d.pos,u.to,void 0," ")}if(d&&g){const m=g.split(T$).filter(Boolean);if(m.length<=0)return!1;const y=m[m.length-1],x=d.pos+g.lastIndexOf(y);if(!y)return!1;const w=Rg(y).map(v=>v.toObject(n.defaultProtocol));if(!R$(w))return!1;w.filter(v=>v.isLink).map(v=>({...v,from:x+v.start+1,to:x+v.end+1})).filter(v=>i.schema.marks.code?!i.doc.rangeHasMark(v.from,v.to,i.schema.marks.code):!0).filter(v=>n.validate(v.value)).filter(v=>n.shouldAutoLink(v.value)).forEach(v=>{Sg(v.from,v.to,i.doc).some(E=>E.mark.type===n.type)||o.addMark(v.from,v.to,n.type.create({href:v.href}))})}}),!!o.steps.length)return o}})}function P$(n){return new pe({key:new Ze("handleClickLink"),props:{handleClick:(t,e,i)=>{var r,s;if(i.button!==0||!t.editable)return!1;let o=i.target;const a=[];for(;o.nodeName!=="DIV";)a.push(o),o=o.parentNode;if(!a.find(g=>g.nodeName==="A"))return!1;const l=dv(t.state,n.type.name),u=i.target,h=(r=u?.href)!==null&&r!==void 0?r:l.href,d=(s=u?.target)!==null&&s!==void 0?s:l.target;return u&&h?(window.open(h,d),!0):!1}}})}function I$(n){return new pe({key:new Ze("handlePasteLink"),props:{handlePaste:(t,e,i)=>{const{state:r}=t,{selection:s}=r,{empty:o}=s;if(o)return!1;let a="";i.content.forEach(u=>{a+=u.textContent});const l=Ev(a,{defaultProtocol:n.defaultProtocol}).find(u=>u.isLink&&u.value===a);return!a||!l?!1:n.editor.commands.setMark(n.type,{href:l.href})}}})}function kr(n,t){const e=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(i=>{const r=typeof i=="string"?i:i.scheme;r&&e.push(r)}),!n||n.replace(A$,"").match(new RegExp(`^(?:(?:${e.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const L$=Ei.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){vx(n);return}vx(n.scheme,n.optionalSlashes)})},onDestroy(){M$()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,t)=>!!kr(n,t.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const t=n.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:e=>!!kr(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:t=>!!kr(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",_e(this.options.HTMLAttributes,n),0]:["a",_e(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:t})=>{const{href:e}=n;return this.options.isAllowedUri(e,{defaultValidate:i=>!!kr(i,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:t})=>{const{href:e}=n;return this.options.isAllowedUri(e,{defaultValidate:i=>!!kr(i,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ls({find:n=>{const t=[];if(n){const{protocols:e,defaultProtocol:i}=this.options,r=Ev(n).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!kr(o,e),protocols:e,defaultProtocol:i}));r.length&&r.forEach(s=>t.push({text:s.value,data:{href:s.href},index:s.start}))}return t},type:this.type,getAttributes:n=>{var t;return{href:(t=n.data)===null||t===void 0?void 0:t.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:t,defaultProtocol:e}=this.options;return this.options.autolink&&n.push(D$({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:i=>this.options.isAllowedUri(i,{defaultValidate:r=>!!kr(r,t),protocols:t,defaultProtocol:e}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(P$({type:this.type})),this.options.linkOnPaste&&n.push(I$({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),N$=Oe.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new pe({key:new Ze("placeholder"),props:{decorations:({doc:n,selection:t})=>{const e=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=t,r=[];if(!e)return null;const s=this.editor.isEmpty;return n.descendants((o,a)=>{const l=i>=a&&i<=a+o.nodeSize,u=!o.isLeaf&&Yu(o);if((l||!this.options.showOnlyCurrent)&&u){const h=[this.options.emptyNodeClass];s&&h.push(this.options.emptyEditorClass);const d=cn.node(a,a+o.nodeSize,{class:h.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});r.push(d)}return this.options.includeChildren}),ee.create(n,r)}}})]}});function Tv(n={}){let t=null;return{content:n.content||"",init(){t||this.$nextTick(()=>{try{t=new lH({element:this.$refs.editor,extensions:[u$.configure({heading:{levels:[1,2,3]}}),L$.configure({openOnClick:!1,HTMLAttributes:{class:"text-brand-600 underline"}}),N$.configure({placeholder:n.placeholder||"Write something..."})],content:this.content,onUpdate:({editor:e})=>{this.content=e.getHTML()},onTransaction:()=>{}}),console.log("Tiptap editor initialized successfully (Closure Mode)")}catch(e){console.error("Failed to initialize Tiptap:",e)}})},isActive(e,i={}){if(!t)return!1;try{return t.isActive(e,i)}catch{return!1}},toggleHeading(e){t&&t.chain().focus().toggleHeading({level:e}).run()},toggleBold(){t&&t.chain().focus().toggleBold().run()},toggleBulletList(){t&&t.chain().focus().toggleBulletList().run()},setLink(){if(!t)return;const e=window.prompt("URL",t.getAttributes("link").href);if(e===""){t.chain().focus().extendMarkRange("link").unsetLink().run();return}e&&t.chain().focus().extendMarkRange("link").setLink({href:e}).run()},clearFormatting(){t&&t.chain().focus().unsetAllMarks().clearNodes().run()},destroy(){t&&(t.destroy(),t=null)}}}function F$(n={}){return{tab:"post",postId:n.postId,insights:null,loadingInsights:!1,reactions:[],reactionsPage:1,hasMoreReactions:!0,loadingReactions:!1,comments:[],commentsPage:1,hasMoreComments:!0,loadingComments:!1,replyMode:!1,selectedComment:null,replyContent:"",submitting:!1,init(){},setTab(t){this.tab=t,t==="reactions"&&this.reactions.length===0&&this.loadMoreReactions(),t==="comments"&&this.comments.length===0&&this.loadMoreComments(),t==="insights"&&!this.insights&&this.fetchInsights()},async fetchInsights(){if(!this.loadingInsights){this.loadingInsights=!0;try{const t=await axios.get(`/admin/news_events/${this.postId}/insights`);this.insights=t.data}catch(t){console.error("Failed to fetch insights",t)}finally{this.loadingInsights=!1}}},async loadMoreReactions(){if(!(this.loadingReactions||!this.hasMoreReactions)){this.loadingReactions=!0;try{const e=(await axios.get(`/admin/news_events/${this.postId}/reactions?page=${this.reactionsPage}`)).data;this.reactions.push(...e.data),this.hasMoreReactions=!!e.next_page_url,this.reactionsPage++}catch(t){console.error("Failed to load reactions",t)}finally{this.loadingReactions=!1}}},async loadMoreComments(){if(!(this.loadingComments||!this.hasMoreComments)){this.loadingComments=!0;try{const e=(await axios.get(`/admin/news_events/${this.postId}/comments?page=${this.commentsPage}`)).data;this.comments.push(...e.data),this.hasMoreComments=!!e.next_page_url,this.commentsPage++}catch(t){console.error("Failed to load comments",t)}finally{this.loadingComments=!1}}},replyTo(t){this.selectedComment=t,this.replyMode=!0,this.replyContent=""},async submitReply(){if(!(!this.replyContent.trim()||this.submitting)){this.submitting=!0;try{const t=await axios.post(`/admin/news_events/comments/${this.selectedComment.id}/reply`,{content:this.replyContent});window.showToast&&window.showToast(t.data.success||"Reply sent"),this.replyMode=!1,this.comments=[],this.commentsPage=1,this.hasMoreComments=!0,this.loadMoreComments()}catch(t){window.showToast&&window.showToast(t.response?.data?.message||"Failed to send reply","error")}finally{this.submitting=!1}}},confirmDeleteComment(t){confirm("Are you sure you want to delete this comment?")&&this.deleteComment(t)},async deleteComment(t){try{const e=await axios.delete(`/admin/news_events/comments/${t}`);window.showToast&&window.showToast(e.data.success||"Comment removed"),this.comments=this.comments.filter(i=>i.id!==t)}catch{window.showToast&&window.showToast("Failed to delete comment","error")}},formatDate(t){return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}}}function B$(n={}){return{postId:n.postId,comments:(n.initialComments||[]).map(t=>({...t,replies:t.replies||[]})),cursor:n.nextPage||null,hasMore:!!n.nextPage,loading:!1,totalComments:n.initialCount||0,expandedComments:[],content:"",parentId:null,submitting:!1,reactionCount:n.initialReactionCount||0,userReacted:n.userReacted||!1,async init(){},isExpanded(t){return this.expandedComments.includes(t)},toggleExpanded(t){this.isExpanded(t)?this.expandedComments=this.expandedComments.filter(e=>e!==t):this.expandedComments.push(t)},async loadMore(){if(!(this.loading||!this.hasMore)){this.loading=!0;try{let t=`/news/${this.postId}/comments`;this.cursor&&(t=this.cursor);const i=(await axios.get(t)).data;this.comments.push(...i.data.map(r=>({...r,replies:r.replies||[]}))),this.cursor=i.next_page_url,this.hasMore=!!i.next_page_url}catch(t){console.error("Failed to load comments",t)}finally{this.loading=!1}}},async submitComment(){if(!(!this.content.trim()||this.submitting)){this.submitting=!0;try{const t=await axios.post(`/news/${this.postId}/comment`,{content:this.content,parent_id:this.parentId});if(t.data.status==="success"){const e=t.data.comment;if(this.parentId){const i=this.comments.find(r=>r.id===this.parentId);i&&(i.replies||(i.replies=[]),i.replies.unshift(e),this.isExpanded(this.parentId)||this.expandedComments.push(this.parentId))}else e.replies=e.replies||[],this.comments.unshift(e);this.content="",this.parentId=null,this.totalComments=t.data.count,window.dispatchEvent(new CustomEvent("comment-added",{detail:{postId:this.postId,count:this.totalComments}})),window.showToast&&window.showToast("Comment posted successfully")}}catch(t){window.showToast&&window.showToast(t.response?.data?.message||"Failed to post comment","error")}finally{this.submitting=!1}}},async toggleReaction(t="like"){try{const e=await axios.post(`/news/${this.postId}/react`,{type:t});e.data.status==="success"&&(this.reactionCount=e.data.count,this.userReacted=e.data.action!=="removed",window.dispatchEvent(new CustomEvent("reaction-toggled",{detail:{postId:this.postId,count:this.reactionCount,userReacted:this.userReacted}})))}catch(e){console.error("Reaction failed",e)}},async deleteComment(t){if(confirm("Are you sure you want to delete this comment?"))try{(await axios.delete(`/news/comment/${t}`)).data.status==="success"&&(this.comments=this.comments.filter(i=>i.id===t?!1:(i.replies&&(i.replies=i.replies.filter(r=>r.id!==t)),!0)),window.showToast&&window.showToast("Comment deleted"))}catch{window.showToast&&window.showToast("Failed to delete comment","error")}},formatDate(t){return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}}}function z$(){const n=()=>window.dispatchEvent(new CustomEvent("loading-start")),t=()=>window.dispatchEvent(new CustomEvent("loading-end")),e=new DOMParser;async function i(r,s=!0){if(r!==window.location.href){n();try{const o=await fetch(r,{headers:{"X-Requested-With":"XMLHttpRequest","X-Inertia":"true"}});if(!o.ok)throw new Error("Navigation failed");const a=await o.text(),l=e.parseFromString(a,"text/html");s&&window.history.pushState({},v,r);const u=l.getElementById("content-wrapper"),h=document.getElementById("content-wrapper");u&&h&&(h.className=u.className);const d=l.getElementById("header-container"),g=document.getElementById("header-container");d&&g?(g.innerHTML=d.innerHTML,g.className=d.className):g&&(g.innerHTML="");const m=l.querySelector("main"),y=document.querySelector("main");m&&y&&(y.innerHTML=m.innerHTML,y.className=m.className);const x=l.getElementById("main-navigation"),w=document.getElementById("main-navigation");x&&w&&(w.innerHTML=x.innerHTML,w.className=x.className);const v=l.querySelector("title")?.innerText||document.title;document.title=v,h&&h.classList.contains("overflow-y-auto")?h.scrollTo(0,0):window.scrollTo(0,0),window.dispatchEvent(new CustomEvent("page-navigated"))}catch(o){console.error("Navigation error:",o),window.location.href=r}finally{t()}}}document.addEventListener("click",r=>{const s=r.target.closest("a");!s||!s.href.startsWith(window.location.origin)||s.hash||s.target==="_blank"||s.hasAttribute("download")||s.hasAttribute("data-no-spa")||r.metaKey||r.ctrlKey||r.shiftKey||r.altKey||(r.preventDefault(),i(s.href))}),window.addEventListener("popstate",()=>{i(window.location.href,!1)})}const Ov=(n,t=null)=>({data:null,loading:!0,error:null,key:t||n,init(){this.load()},async load(){const e=sessionStorage.getItem(`cache_${this.key}`);if(e)try{const i=JSON.parse(e);this.data=i,this.loading=!1}catch(i){console.warn("Cache parse error",i),sessionStorage.removeItem(`cache_${this.key}`)}this.data||(this.loading=!0);try{const i=await axios.get(this.key,{params:{format:"json"},headers:{"X-SPA-Data-Request":"true"}});this.data=i.data,this.error=null,sessionStorage.setItem(`cache_${this.key}`,JSON.stringify(this.data))}catch(i){console.error("Data fetch error:",i),this.error="Failed to load data.",this.data&&window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Could not refresh data",type:"error"}}))}finally{this.loading=!1}},refresh(){this.loading=!0,this.load()}}),H$=n=>({endpoint:n.endpoint,tab:"all",nextCursor:null,loading:!1,hasMore:!0,feedHtml:"",imageModal:{open:!1,src:""},discussionModal:{open:!1,postId:null,html:""},init(){const t=`feed_${this.tab}`,e=sessionStorage.getItem(t);e&&(this.feedHtml=e),this.fetchFeed();const i=new IntersectionObserver(r=>{r[0].isIntersecting&&!this.loading&&this.hasMore&&this.loadMore()},{threshold:.1,root:document.getElementById("feed-scroll-container")});this.$refs.sentinel&&i.observe(this.$refs.sentinel)},async openDiscussion(t){this.discussionModal.postId=t,this.discussionModal.open=!0,this.discussionModal.html='<div class="h-full flex items-center justify-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-brand-600"></div></div>';try{const e=await fetch(`/news/${t}/discussion`,{headers:{"X-Requested-With":"XMLHttpRequest"}});this.discussionModal.html=await e.text(),this.$nextTick(()=>{this.$refs.discussionModalContent})}catch{this.discussionModal.html='<div class="p-10 text-center text-red-500 font-bold italic">Failed to load discussion. Please try again.</div>'}},switchTab(t){if(this.tab===t)return;this.tab=t,this.nextCursor=null,this.hasMore=!0;const e=`feed_${this.tab}`,i=sessionStorage.getItem(e);i?this.feedHtml=i:this.feedHtml="",this.fetchFeed(),this.$dispatch("feed-tab-synced",t);const r=document.getElementById("feed-scroll-container");r&&r.scrollTo({top:0,behavior:"smooth"})},async fetchFeed(){if(!this.loading){this.loading=!0;try{let t=`${this.endpoint}?tab=${this.tab}`;this.nextCursor&&(t+=`&cursor=${this.nextCursor}`);const i=await(await fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).json();this.nextCursor?this.feedHtml+=i.html:(this.feedHtml=i.html,sessionStorage.setItem(`feed_${this.tab}`,i.html)),this.nextCursor=i.next_cursor,this.hasMore=i.has_more,this.nextCursor||(this.hasMore=!1)}catch(t){console.error("Feed error:",t)}finally{this.loading=!1}}},loadMore(){this.hasMore&&!this.loading&&this.fetchFeed()}});var ec=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $$(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jo={exports:{}};var W$=jo.exports,kx;function V$(){return kx||(kx=1,(function(n,t){(function(){var e,i="4.17.23",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,h="__lodash_placeholder__",d=1,g=2,m=4,y=1,x=2,w=1,v=2,E=4,O=8,P=16,R=32,B=64,I=128,z=256,j=512,Z=30,it="...",rt=800,Ot=16,At=1,mt=2,ot=3,yt=1/0,Et=9007199254740991,Gt=17976931348623157e292,Qe=NaN,Ht=4294967295,De=Ht-1,Tn=Ht>>>1,He=[["ary",I],["bind",w],["bindKey",v],["curry",O],["curryRight",P],["flip",j],["partial",R],["partialRight",B],["rearg",z]],Pe="[object Arguments]",fn="[object Array]",Ok="[object AsyncFunction]",oo="[object Boolean]",ao="[object Date]",Ak="[object DOMException]",qa="[object Error]",Ka="[object Function]",Gg="[object GeneratorFunction]",On="[object Map]",lo="[object Number]",Rk="[object Null]",ei="[object Object]",Yg="[object Promise]",Dk="[object Proxy]",co="[object RegExp]",An="[object Set]",uo="[object String]",Ja="[object Symbol]",Pk="[object Undefined]",fo="[object WeakMap]",Ik="[object WeakSet]",ho="[object ArrayBuffer]",ps="[object DataView]",lf="[object Float32Array]",cf="[object Float64Array]",uf="[object Int8Array]",ff="[object Int16Array]",hf="[object Int32Array]",df="[object Uint8Array]",pf="[object Uint8ClampedArray]",gf="[object Uint16Array]",mf="[object Uint32Array]",Lk=/\b__p \+= '';/g,Nk=/\b(__p \+=) '' \+/g,Fk=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Zg=/&(?:amp|lt|gt|quot|#39);/g,Qg=/[&<>"']/g,Bk=RegExp(Zg.source),zk=RegExp(Qg.source),Hk=/<%-([\s\S]+?)%>/g,$k=/<%([\s\S]+?)%>/g,tm=/<%=([\s\S]+?)%>/g,Wk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vk=/^\w*$/,Uk=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yf=/[\\^$.*+?()[\]{}|]/g,jk=RegExp(yf.source),bf=/^\s+/,qk=/\s/,Kk=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Jk=/\{\n\/\* \[wrapped with (.+)\] \*/,Xk=/,? & /,Gk=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Yk=/[()=,{}\[\]\/\s]/,Zk=/\\(\\)?/g,Qk=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,em=/\w*$/,tC=/^[-+]0x[0-9a-f]+$/i,eC=/^0b[01]+$/i,nC=/^\[object .+?Constructor\]$/,iC=/^0o[0-7]+$/i,rC=/^(?:0|[1-9]\d*)$/,sC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xa=/($^)/,oC=/['\n\r\u2028\u2029\\]/g,Ga="\\ud800-\\udfff",aC="\\u0300-\\u036f",lC="\\ufe20-\\ufe2f",cC="\\u20d0-\\u20ff",nm=aC+lC+cC,im="\\u2700-\\u27bf",rm="a-z\\xdf-\\xf6\\xf8-\\xff",uC="\\xac\\xb1\\xd7\\xf7",fC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",hC="\\u2000-\\u206f",dC=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",sm="A-Z\\xc0-\\xd6\\xd8-\\xde",om="\\ufe0e\\ufe0f",am=uC+fC+hC+dC,xf="[']",pC="["+Ga+"]",lm="["+am+"]",Ya="["+nm+"]",cm="\\d+",gC="["+im+"]",um="["+rm+"]",fm="[^"+Ga+am+cm+im+rm+sm+"]",wf="\\ud83c[\\udffb-\\udfff]",mC="(?:"+Ya+"|"+wf+")",hm="[^"+Ga+"]",_f="(?:\\ud83c[\\udde6-\\uddff]){2}",Sf="[\\ud800-\\udbff][\\udc00-\\udfff]",gs="["+sm+"]",dm="\\u200d",pm="(?:"+um+"|"+fm+")",yC="(?:"+gs+"|"+fm+")",gm="(?:"+xf+"(?:d|ll|m|re|s|t|ve))?",mm="(?:"+xf+"(?:D|LL|M|RE|S|T|VE))?",ym=mC+"?",bm="["+om+"]?",bC="(?:"+dm+"(?:"+[hm,_f,Sf].join("|")+")"+bm+ym+")*",xC="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",wC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",xm=bm+ym+bC,_C="(?:"+[gC,_f,Sf].join("|")+")"+xm,SC="(?:"+[hm+Ya+"?",Ya,_f,Sf,pC].join("|")+")",vC=RegExp(xf,"g"),kC=RegExp(Ya,"g"),vf=RegExp(wf+"(?="+wf+")|"+SC+xm,"g"),CC=RegExp([gs+"?"+um+"+"+gm+"(?="+[lm,gs,"$"].join("|")+")",yC+"+"+mm+"(?="+[lm,gs+pm,"$"].join("|")+")",gs+"?"+pm+"+"+gm,gs+"+"+mm,wC,xC,cm,_C].join("|"),"g"),MC=RegExp("["+dm+Ga+nm+om+"]"),EC=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,TC=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],OC=-1,Nt={};Nt[lf]=Nt[cf]=Nt[uf]=Nt[ff]=Nt[hf]=Nt[df]=Nt[pf]=Nt[gf]=Nt[mf]=!0,Nt[Pe]=Nt[fn]=Nt[ho]=Nt[oo]=Nt[ps]=Nt[ao]=Nt[qa]=Nt[Ka]=Nt[On]=Nt[lo]=Nt[ei]=Nt[co]=Nt[An]=Nt[uo]=Nt[fo]=!1;var It={};It[Pe]=It[fn]=It[ho]=It[ps]=It[oo]=It[ao]=It[lf]=It[cf]=It[uf]=It[ff]=It[hf]=It[On]=It[lo]=It[ei]=It[co]=It[An]=It[uo]=It[Ja]=It[df]=It[pf]=It[gf]=It[mf]=!0,It[qa]=It[Ka]=It[fo]=!1;var AC={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},RC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},DC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},PC={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},IC=parseFloat,LC=parseInt,wm=typeof ec=="object"&&ec&&ec.Object===Object&&ec,NC=typeof self=="object"&&self&&self.Object===Object&&self,ge=wm||NC||Function("return this")(),kf=t&&!t.nodeType&&t,gr=kf&&!0&&n&&!n.nodeType&&n,_m=gr&&gr.exports===kf,Cf=_m&&wm.process,hn=(function(){try{var A=gr&&gr.require&&gr.require("util").types;return A||Cf&&Cf.binding&&Cf.binding("util")}catch{}})(),Sm=hn&&hn.isArrayBuffer,vm=hn&&hn.isDate,km=hn&&hn.isMap,Cm=hn&&hn.isRegExp,Mm=hn&&hn.isSet,Em=hn&&hn.isTypedArray;function tn(A,F,L){switch(L.length){case 0:return A.call(F);case 1:return A.call(F,L[0]);case 2:return A.call(F,L[0],L[1]);case 3:return A.call(F,L[0],L[1],L[2])}return A.apply(F,L)}function FC(A,F,L,J){for(var at=-1,kt=A==null?0:A.length;++at<kt;){var re=A[at];F(J,re,L(re),A)}return J}function dn(A,F){for(var L=-1,J=A==null?0:A.length;++L<J&&F(A[L],L,A)!==!1;);return A}function BC(A,F){for(var L=A==null?0:A.length;L--&&F(A[L],L,A)!==!1;);return A}function Tm(A,F){for(var L=-1,J=A==null?0:A.length;++L<J;)if(!F(A[L],L,A))return!1;return!0}function Oi(A,F){for(var L=-1,J=A==null?0:A.length,at=0,kt=[];++L<J;){var re=A[L];F(re,L,A)&&(kt[at++]=re)}return kt}function Za(A,F){var L=A==null?0:A.length;return!!L&&ms(A,F,0)>-1}function Mf(A,F,L){for(var J=-1,at=A==null?0:A.length;++J<at;)if(L(F,A[J]))return!0;return!1}function $t(A,F){for(var L=-1,J=A==null?0:A.length,at=Array(J);++L<J;)at[L]=F(A[L],L,A);return at}function Ai(A,F){for(var L=-1,J=F.length,at=A.length;++L<J;)A[at+L]=F[L];return A}function Ef(A,F,L,J){var at=-1,kt=A==null?0:A.length;for(J&&kt&&(L=A[++at]);++at<kt;)L=F(L,A[at],at,A);return L}function zC(A,F,L,J){var at=A==null?0:A.length;for(J&&at&&(L=A[--at]);at--;)L=F(L,A[at],at,A);return L}function Tf(A,F){for(var L=-1,J=A==null?0:A.length;++L<J;)if(F(A[L],L,A))return!0;return!1}var HC=Of("length");function $C(A){return A.split("")}function WC(A){return A.match(Gk)||[]}function Om(A,F,L){var J;return L(A,function(at,kt,re){if(F(at,kt,re))return J=kt,!1}),J}function Qa(A,F,L,J){for(var at=A.length,kt=L+(J?1:-1);J?kt--:++kt<at;)if(F(A[kt],kt,A))return kt;return-1}function ms(A,F,L){return F===F?tM(A,F,L):Qa(A,Am,L)}function VC(A,F,L,J){for(var at=L-1,kt=A.length;++at<kt;)if(J(A[at],F))return at;return-1}function Am(A){return A!==A}function Rm(A,F){var L=A==null?0:A.length;return L?Rf(A,F)/L:Qe}function Of(A){return function(F){return F==null?e:F[A]}}function Af(A){return function(F){return A==null?e:A[F]}}function Dm(A,F,L,J,at){return at(A,function(kt,re,Rt){L=J?(J=!1,kt):F(L,kt,re,Rt)}),L}function UC(A,F){var L=A.length;for(A.sort(F);L--;)A[L]=A[L].value;return A}function Rf(A,F){for(var L,J=-1,at=A.length;++J<at;){var kt=F(A[J]);kt!==e&&(L=L===e?kt:L+kt)}return L}function Df(A,F){for(var L=-1,J=Array(A);++L<A;)J[L]=F(L);return J}function jC(A,F){return $t(F,function(L){return[L,A[L]]})}function Pm(A){return A&&A.slice(0,Fm(A)+1).replace(bf,"")}function en(A){return function(F){return A(F)}}function Pf(A,F){return $t(F,function(L){return A[L]})}function po(A,F){return A.has(F)}function Im(A,F){for(var L=-1,J=A.length;++L<J&&ms(F,A[L],0)>-1;);return L}function Lm(A,F){for(var L=A.length;L--&&ms(F,A[L],0)>-1;);return L}function qC(A,F){for(var L=A.length,J=0;L--;)A[L]===F&&++J;return J}var KC=Af(AC),JC=Af(RC);function XC(A){return"\\"+PC[A]}function GC(A,F){return A==null?e:A[F]}function ys(A){return MC.test(A)}function YC(A){return EC.test(A)}function ZC(A){for(var F,L=[];!(F=A.next()).done;)L.push(F.value);return L}function If(A){var F=-1,L=Array(A.size);return A.forEach(function(J,at){L[++F]=[at,J]}),L}function Nm(A,F){return function(L){return A(F(L))}}function Ri(A,F){for(var L=-1,J=A.length,at=0,kt=[];++L<J;){var re=A[L];(re===F||re===h)&&(A[L]=h,kt[at++]=L)}return kt}function tl(A){var F=-1,L=Array(A.size);return A.forEach(function(J){L[++F]=J}),L}function QC(A){var F=-1,L=Array(A.size);return A.forEach(function(J){L[++F]=[J,J]}),L}function tM(A,F,L){for(var J=L-1,at=A.length;++J<at;)if(A[J]===F)return J;return-1}function eM(A,F,L){for(var J=L+1;J--;)if(A[J]===F)return J;return J}function bs(A){return ys(A)?iM(A):HC(A)}function Rn(A){return ys(A)?rM(A):$C(A)}function Fm(A){for(var F=A.length;F--&&qk.test(A.charAt(F)););return F}var nM=Af(DC);function iM(A){for(var F=vf.lastIndex=0;vf.test(A);)++F;return F}function rM(A){return A.match(vf)||[]}function sM(A){return A.match(CC)||[]}var oM=(function A(F){F=F==null?ge:xs.defaults(ge.Object(),F,xs.pick(ge,TC));var L=F.Array,J=F.Date,at=F.Error,kt=F.Function,re=F.Math,Rt=F.Object,Lf=F.RegExp,aM=F.String,pn=F.TypeError,el=L.prototype,lM=kt.prototype,ws=Rt.prototype,nl=F["__core-js_shared__"],il=lM.toString,Ct=ws.hasOwnProperty,cM=0,Bm=(function(){var c=/[^.]+$/.exec(nl&&nl.keys&&nl.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""})(),rl=ws.toString,uM=il.call(Rt),fM=ge._,hM=Lf("^"+il.call(Ct).replace(yf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sl=_m?F.Buffer:e,Di=F.Symbol,ol=F.Uint8Array,zm=sl?sl.allocUnsafe:e,al=Nm(Rt.getPrototypeOf,Rt),Hm=Rt.create,$m=ws.propertyIsEnumerable,ll=el.splice,Wm=Di?Di.isConcatSpreadable:e,go=Di?Di.iterator:e,mr=Di?Di.toStringTag:e,cl=(function(){try{var c=_r(Rt,"defineProperty");return c({},"",{}),c}catch{}})(),dM=F.clearTimeout!==ge.clearTimeout&&F.clearTimeout,pM=J&&J.now!==ge.Date.now&&J.now,gM=F.setTimeout!==ge.setTimeout&&F.setTimeout,ul=re.ceil,fl=re.floor,Nf=Rt.getOwnPropertySymbols,mM=sl?sl.isBuffer:e,Vm=F.isFinite,yM=el.join,bM=Nm(Rt.keys,Rt),se=re.max,Se=re.min,xM=J.now,wM=F.parseInt,Um=re.random,_M=el.reverse,Ff=_r(F,"DataView"),mo=_r(F,"Map"),Bf=_r(F,"Promise"),_s=_r(F,"Set"),yo=_r(F,"WeakMap"),bo=_r(Rt,"create"),hl=yo&&new yo,Ss={},SM=Sr(Ff),vM=Sr(mo),kM=Sr(Bf),CM=Sr(_s),MM=Sr(yo),dl=Di?Di.prototype:e,xo=dl?dl.valueOf:e,jm=dl?dl.toString:e;function k(c){if(qt(c)&&!ct(c)&&!(c instanceof wt)){if(c instanceof gn)return c;if(Ct.call(c,"__wrapped__"))return qy(c)}return new gn(c)}var vs=(function(){function c(){}return function(f){if(!Ut(f))return{};if(Hm)return Hm(f);c.prototype=f;var p=new c;return c.prototype=e,p}})();function pl(){}function gn(c,f){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=e}k.templateSettings={escape:Hk,evaluate:$k,interpolate:tm,variable:"",imports:{_:k}},k.prototype=pl.prototype,k.prototype.constructor=k,gn.prototype=vs(pl.prototype),gn.prototype.constructor=gn;function wt(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ht,this.__views__=[]}function EM(){var c=new wt(this.__wrapped__);return c.__actions__=$e(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=$e(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=$e(this.__views__),c}function TM(){if(this.__filtered__){var c=new wt(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function OM(){var c=this.__wrapped__.value(),f=this.__dir__,p=ct(c),b=f<0,S=p?c.length:0,C=$E(0,S,this.__views__),M=C.start,T=C.end,D=T-M,H=b?T:M-1,$=this.__iteratees__,W=$.length,q=0,G=Se(D,this.__takeCount__);if(!p||!b&&S==D&&G==D)return gy(c,this.__actions__);var tt=[];t:for(;D--&&q<G;){H+=f;for(var ft=-1,et=c[H];++ft<W;){var bt=$[ft],St=bt.iteratee,sn=bt.type,Ne=St(et);if(sn==mt)et=Ne;else if(!Ne){if(sn==At)continue t;break t}}tt[q++]=et}return tt}wt.prototype=vs(pl.prototype),wt.prototype.constructor=wt;function yr(c){var f=-1,p=c==null?0:c.length;for(this.clear();++f<p;){var b=c[f];this.set(b[0],b[1])}}function AM(){this.__data__=bo?bo(null):{},this.size=0}function RM(c){var f=this.has(c)&&delete this.__data__[c];return this.size-=f?1:0,f}function DM(c){var f=this.__data__;if(bo){var p=f[c];return p===l?e:p}return Ct.call(f,c)?f[c]:e}function PM(c){var f=this.__data__;return bo?f[c]!==e:Ct.call(f,c)}function IM(c,f){var p=this.__data__;return this.size+=this.has(c)?0:1,p[c]=bo&&f===e?l:f,this}yr.prototype.clear=AM,yr.prototype.delete=RM,yr.prototype.get=DM,yr.prototype.has=PM,yr.prototype.set=IM;function ni(c){var f=-1,p=c==null?0:c.length;for(this.clear();++f<p;){var b=c[f];this.set(b[0],b[1])}}function LM(){this.__data__=[],this.size=0}function NM(c){var f=this.__data__,p=gl(f,c);if(p<0)return!1;var b=f.length-1;return p==b?f.pop():ll.call(f,p,1),--this.size,!0}function FM(c){var f=this.__data__,p=gl(f,c);return p<0?e:f[p][1]}function BM(c){return gl(this.__data__,c)>-1}function zM(c,f){var p=this.__data__,b=gl(p,c);return b<0?(++this.size,p.push([c,f])):p[b][1]=f,this}ni.prototype.clear=LM,ni.prototype.delete=NM,ni.prototype.get=FM,ni.prototype.has=BM,ni.prototype.set=zM;function ii(c){var f=-1,p=c==null?0:c.length;for(this.clear();++f<p;){var b=c[f];this.set(b[0],b[1])}}function HM(){this.size=0,this.__data__={hash:new yr,map:new(mo||ni),string:new yr}}function $M(c){var f=El(this,c).delete(c);return this.size-=f?1:0,f}function WM(c){return El(this,c).get(c)}function VM(c){return El(this,c).has(c)}function UM(c,f){var p=El(this,c),b=p.size;return p.set(c,f),this.size+=p.size==b?0:1,this}ii.prototype.clear=HM,ii.prototype.delete=$M,ii.prototype.get=WM,ii.prototype.has=VM,ii.prototype.set=UM;function br(c){var f=-1,p=c==null?0:c.length;for(this.__data__=new ii;++f<p;)this.add(c[f])}function jM(c){return this.__data__.set(c,l),this}function qM(c){return this.__data__.has(c)}br.prototype.add=br.prototype.push=jM,br.prototype.has=qM;function Dn(c){var f=this.__data__=new ni(c);this.size=f.size}function KM(){this.__data__=new ni,this.size=0}function JM(c){var f=this.__data__,p=f.delete(c);return this.size=f.size,p}function XM(c){return this.__data__.get(c)}function GM(c){return this.__data__.has(c)}function YM(c,f){var p=this.__data__;if(p instanceof ni){var b=p.__data__;if(!mo||b.length<r-1)return b.push([c,f]),this.size=++p.size,this;p=this.__data__=new ii(b)}return p.set(c,f),this.size=p.size,this}Dn.prototype.clear=KM,Dn.prototype.delete=JM,Dn.prototype.get=XM,Dn.prototype.has=GM,Dn.prototype.set=YM;function qm(c,f){var p=ct(c),b=!p&&vr(c),S=!p&&!b&&Fi(c),C=!p&&!b&&!S&&Es(c),M=p||b||S||C,T=M?Df(c.length,aM):[],D=T.length;for(var H in c)(f||Ct.call(c,H))&&!(M&&(H=="length"||S&&(H=="offset"||H=="parent")||C&&(H=="buffer"||H=="byteLength"||H=="byteOffset")||ai(H,D)))&&T.push(H);return T}function Km(c){var f=c.length;return f?c[Xf(0,f-1)]:e}function ZM(c,f){return Tl($e(c),xr(f,0,c.length))}function QM(c){return Tl($e(c))}function zf(c,f,p){(p!==e&&!Pn(c[f],p)||p===e&&!(f in c))&&ri(c,f,p)}function wo(c,f,p){var b=c[f];(!(Ct.call(c,f)&&Pn(b,p))||p===e&&!(f in c))&&ri(c,f,p)}function gl(c,f){for(var p=c.length;p--;)if(Pn(c[p][0],f))return p;return-1}function tE(c,f,p,b){return Pi(c,function(S,C,M){f(b,S,p(S),M)}),b}function Jm(c,f){return c&&$n(f,ae(f),c)}function eE(c,f){return c&&$n(f,Ve(f),c)}function ri(c,f,p){f=="__proto__"&&cl?cl(c,f,{configurable:!0,enumerable:!0,value:p,writable:!0}):c[f]=p}function Hf(c,f){for(var p=-1,b=f.length,S=L(b),C=c==null;++p<b;)S[p]=C?e:wh(c,f[p]);return S}function xr(c,f,p){return c===c&&(p!==e&&(c=c<=p?c:p),f!==e&&(c=c>=f?c:f)),c}function mn(c,f,p,b,S,C){var M,T=f&d,D=f&g,H=f&m;if(p&&(M=S?p(c,b,S,C):p(c)),M!==e)return M;if(!Ut(c))return c;var $=ct(c);if($){if(M=VE(c),!T)return $e(c,M)}else{var W=ve(c),q=W==Ka||W==Gg;if(Fi(c))return by(c,T);if(W==ei||W==Pe||q&&!S){if(M=D||q?{}:Fy(c),!T)return D?DE(c,eE(M,c)):RE(c,Jm(M,c))}else{if(!It[W])return S?c:{};M=UE(c,W,T)}}C||(C=new Dn);var G=C.get(c);if(G)return G;C.set(c,M),hb(c)?c.forEach(function(et){M.add(mn(et,f,p,et,c,C))}):ub(c)&&c.forEach(function(et,bt){M.set(bt,mn(et,f,p,bt,c,C))});var tt=H?D?oh:sh:D?Ve:ae,ft=$?e:tt(c);return dn(ft||c,function(et,bt){ft&&(bt=et,et=c[bt]),wo(M,bt,mn(et,f,p,bt,c,C))}),M}function nE(c){var f=ae(c);return function(p){return Xm(p,c,f)}}function Xm(c,f,p){var b=p.length;if(c==null)return!b;for(c=Rt(c);b--;){var S=p[b],C=f[S],M=c[S];if(M===e&&!(S in c)||!C(M))return!1}return!0}function Gm(c,f,p){if(typeof c!="function")throw new pn(o);return Eo(function(){c.apply(e,p)},f)}function _o(c,f,p,b){var S=-1,C=Za,M=!0,T=c.length,D=[],H=f.length;if(!T)return D;p&&(f=$t(f,en(p))),b?(C=Mf,M=!1):f.length>=r&&(C=po,M=!1,f=new br(f));t:for(;++S<T;){var $=c[S],W=p==null?$:p($);if($=b||$!==0?$:0,M&&W===W){for(var q=H;q--;)if(f[q]===W)continue t;D.push($)}else C(f,W,b)||D.push($)}return D}var Pi=vy(Hn),Ym=vy(Wf,!0);function iE(c,f){var p=!0;return Pi(c,function(b,S,C){return p=!!f(b,S,C),p}),p}function ml(c,f,p){for(var b=-1,S=c.length;++b<S;){var C=c[b],M=f(C);if(M!=null&&(T===e?M===M&&!rn(M):p(M,T)))var T=M,D=C}return D}function rE(c,f,p,b){var S=c.length;for(p=ut(p),p<0&&(p=-p>S?0:S+p),b=b===e||b>S?S:ut(b),b<0&&(b+=S),b=p>b?0:pb(b);p<b;)c[p++]=f;return c}function Zm(c,f){var p=[];return Pi(c,function(b,S,C){f(b,S,C)&&p.push(b)}),p}function me(c,f,p,b,S){var C=-1,M=c.length;for(p||(p=qE),S||(S=[]);++C<M;){var T=c[C];f>0&&p(T)?f>1?me(T,f-1,p,b,S):Ai(S,T):b||(S[S.length]=T)}return S}var $f=ky(),Qm=ky(!0);function Hn(c,f){return c&&$f(c,f,ae)}function Wf(c,f){return c&&Qm(c,f,ae)}function yl(c,f){return Oi(f,function(p){return li(c[p])})}function wr(c,f){f=Li(f,c);for(var p=0,b=f.length;c!=null&&p<b;)c=c[Wn(f[p++])];return p&&p==b?c:e}function ty(c,f,p){var b=f(c);return ct(c)?b:Ai(b,p(c))}function Ie(c){return c==null?c===e?Pk:Rk:mr&&mr in Rt(c)?HE(c):QE(c)}function Vf(c,f){return c>f}function sE(c,f){return c!=null&&Ct.call(c,f)}function oE(c,f){return c!=null&&f in Rt(c)}function aE(c,f,p){return c>=Se(f,p)&&c<se(f,p)}function Uf(c,f,p){for(var b=p?Mf:Za,S=c[0].length,C=c.length,M=C,T=L(C),D=1/0,H=[];M--;){var $=c[M];M&&f&&($=$t($,en(f))),D=Se($.length,D),T[M]=!p&&(f||S>=120&&$.length>=120)?new br(M&&$):e}$=c[0];var W=-1,q=T[0];t:for(;++W<S&&H.length<D;){var G=$[W],tt=f?f(G):G;if(G=p||G!==0?G:0,!(q?po(q,tt):b(H,tt,p))){for(M=C;--M;){var ft=T[M];if(!(ft?po(ft,tt):b(c[M],tt,p)))continue t}q&&q.push(tt),H.push(G)}}return H}function lE(c,f,p,b){return Hn(c,function(S,C,M){f(b,p(S),C,M)}),b}function So(c,f,p){f=Li(f,c),c=$y(c,f);var b=c==null?c:c[Wn(bn(f))];return b==null?e:tn(b,c,p)}function ey(c){return qt(c)&&Ie(c)==Pe}function cE(c){return qt(c)&&Ie(c)==ho}function uE(c){return qt(c)&&Ie(c)==ao}function vo(c,f,p,b,S){return c===f?!0:c==null||f==null||!qt(c)&&!qt(f)?c!==c&&f!==f:fE(c,f,p,b,vo,S)}function fE(c,f,p,b,S,C){var M=ct(c),T=ct(f),D=M?fn:ve(c),H=T?fn:ve(f);D=D==Pe?ei:D,H=H==Pe?ei:H;var $=D==ei,W=H==ei,q=D==H;if(q&&Fi(c)){if(!Fi(f))return!1;M=!0,$=!1}if(q&&!$)return C||(C=new Dn),M||Es(c)?Iy(c,f,p,b,S,C):BE(c,f,D,p,b,S,C);if(!(p&y)){var G=$&&Ct.call(c,"__wrapped__"),tt=W&&Ct.call(f,"__wrapped__");if(G||tt){var ft=G?c.value():c,et=tt?f.value():f;return C||(C=new Dn),S(ft,et,p,b,C)}}return q?(C||(C=new Dn),zE(c,f,p,b,S,C)):!1}function hE(c){return qt(c)&&ve(c)==On}function jf(c,f,p,b){var S=p.length,C=S,M=!b;if(c==null)return!C;for(c=Rt(c);S--;){var T=p[S];if(M&&T[2]?T[1]!==c[T[0]]:!(T[0]in c))return!1}for(;++S<C;){T=p[S];var D=T[0],H=c[D],$=T[1];if(M&&T[2]){if(H===e&&!(D in c))return!1}else{var W=new Dn;if(b)var q=b(H,$,D,c,f,W);if(!(q===e?vo($,H,y|x,b,W):q))return!1}}return!0}function ny(c){if(!Ut(c)||JE(c))return!1;var f=li(c)?hM:nC;return f.test(Sr(c))}function dE(c){return qt(c)&&Ie(c)==co}function pE(c){return qt(c)&&ve(c)==An}function gE(c){return qt(c)&&Il(c.length)&&!!Nt[Ie(c)]}function iy(c){return typeof c=="function"?c:c==null?Ue:typeof c=="object"?ct(c)?oy(c[0],c[1]):sy(c):Cb(c)}function qf(c){if(!Mo(c))return bM(c);var f=[];for(var p in Rt(c))Ct.call(c,p)&&p!="constructor"&&f.push(p);return f}function mE(c){if(!Ut(c))return ZE(c);var f=Mo(c),p=[];for(var b in c)b=="constructor"&&(f||!Ct.call(c,b))||p.push(b);return p}function Kf(c,f){return c<f}function ry(c,f){var p=-1,b=We(c)?L(c.length):[];return Pi(c,function(S,C,M){b[++p]=f(S,C,M)}),b}function sy(c){var f=lh(c);return f.length==1&&f[0][2]?zy(f[0][0],f[0][1]):function(p){return p===c||jf(p,c,f)}}function oy(c,f){return uh(c)&&By(f)?zy(Wn(c),f):function(p){var b=wh(p,c);return b===e&&b===f?_h(p,c):vo(f,b,y|x)}}function bl(c,f,p,b,S){c!==f&&$f(f,function(C,M){if(S||(S=new Dn),Ut(C))yE(c,f,M,p,bl,b,S);else{var T=b?b(hh(c,M),C,M+"",c,f,S):e;T===e&&(T=C),zf(c,M,T)}},Ve)}function yE(c,f,p,b,S,C,M){var T=hh(c,p),D=hh(f,p),H=M.get(D);if(H){zf(c,p,H);return}var $=C?C(T,D,p+"",c,f,M):e,W=$===e;if(W){var q=ct(D),G=!q&&Fi(D),tt=!q&&!G&&Es(D);$=D,q||G||tt?ct(T)?$=T:Yt(T)?$=$e(T):G?(W=!1,$=by(D,!0)):tt?(W=!1,$=xy(D,!0)):$=[]:To(D)||vr(D)?($=T,vr(T)?$=gb(T):(!Ut(T)||li(T))&&($=Fy(D))):W=!1}W&&(M.set(D,$),S($,D,b,C,M),M.delete(D)),zf(c,p,$)}function ay(c,f){var p=c.length;if(p)return f+=f<0?p:0,ai(f,p)?c[f]:e}function ly(c,f,p){f.length?f=$t(f,function(C){return ct(C)?function(M){return wr(M,C.length===1?C[0]:C)}:C}):f=[Ue];var b=-1;f=$t(f,en(Q()));var S=ry(c,function(C,M,T){var D=$t(f,function(H){return H(C)});return{criteria:D,index:++b,value:C}});return UC(S,function(C,M){return AE(C,M,p)})}function bE(c,f){return cy(c,f,function(p,b){return _h(c,b)})}function cy(c,f,p){for(var b=-1,S=f.length,C={};++b<S;){var M=f[b],T=wr(c,M);p(T,M)&&ko(C,Li(M,c),T)}return C}function xE(c){return function(f){return wr(f,c)}}function Jf(c,f,p,b){var S=b?VC:ms,C=-1,M=f.length,T=c;for(c===f&&(f=$e(f)),p&&(T=$t(c,en(p)));++C<M;)for(var D=0,H=f[C],$=p?p(H):H;(D=S(T,$,D,b))>-1;)T!==c&&ll.call(T,D,1),ll.call(c,D,1);return c}function uy(c,f){for(var p=c?f.length:0,b=p-1;p--;){var S=f[p];if(p==b||S!==C){var C=S;ai(S)?ll.call(c,S,1):Zf(c,S)}}return c}function Xf(c,f){return c+fl(Um()*(f-c+1))}function wE(c,f,p,b){for(var S=-1,C=se(ul((f-c)/(p||1)),0),M=L(C);C--;)M[b?C:++S]=c,c+=p;return M}function Gf(c,f){var p="";if(!c||f<1||f>Et)return p;do f%2&&(p+=c),f=fl(f/2),f&&(c+=c);while(f);return p}function pt(c,f){return dh(Hy(c,f,Ue),c+"")}function _E(c){return Km(Ts(c))}function SE(c,f){var p=Ts(c);return Tl(p,xr(f,0,p.length))}function ko(c,f,p,b){if(!Ut(c))return c;f=Li(f,c);for(var S=-1,C=f.length,M=C-1,T=c;T!=null&&++S<C;){var D=Wn(f[S]),H=p;if(D==="__proto__"||D==="constructor"||D==="prototype")return c;if(S!=M){var $=T[D];H=b?b($,D,T):e,H===e&&(H=Ut($)?$:ai(f[S+1])?[]:{})}wo(T,D,H),T=T[D]}return c}var fy=hl?function(c,f){return hl.set(c,f),c}:Ue,vE=cl?function(c,f){return cl(c,"toString",{configurable:!0,enumerable:!1,value:vh(f),writable:!0})}:Ue;function kE(c){return Tl(Ts(c))}function yn(c,f,p){var b=-1,S=c.length;f<0&&(f=-f>S?0:S+f),p=p>S?S:p,p<0&&(p+=S),S=f>p?0:p-f>>>0,f>>>=0;for(var C=L(S);++b<S;)C[b]=c[b+f];return C}function CE(c,f){var p;return Pi(c,function(b,S,C){return p=f(b,S,C),!p}),!!p}function xl(c,f,p){var b=0,S=c==null?b:c.length;if(typeof f=="number"&&f===f&&S<=Tn){for(;b<S;){var C=b+S>>>1,M=c[C];M!==null&&!rn(M)&&(p?M<=f:M<f)?b=C+1:S=C}return S}return Yf(c,f,Ue,p)}function Yf(c,f,p,b){var S=0,C=c==null?0:c.length;if(C===0)return 0;f=p(f);for(var M=f!==f,T=f===null,D=rn(f),H=f===e;S<C;){var $=fl((S+C)/2),W=p(c[$]),q=W!==e,G=W===null,tt=W===W,ft=rn(W);if(M)var et=b||tt;else H?et=tt&&(b||q):T?et=tt&&q&&(b||!G):D?et=tt&&q&&!G&&(b||!ft):G||ft?et=!1:et=b?W<=f:W<f;et?S=$+1:C=$}return Se(C,De)}function hy(c,f){for(var p=-1,b=c.length,S=0,C=[];++p<b;){var M=c[p],T=f?f(M):M;if(!p||!Pn(T,D)){var D=T;C[S++]=M===0?0:M}}return C}function dy(c){return typeof c=="number"?c:rn(c)?Qe:+c}function nn(c){if(typeof c=="string")return c;if(ct(c))return $t(c,nn)+"";if(rn(c))return jm?jm.call(c):"";var f=c+"";return f=="0"&&1/c==-yt?"-0":f}function Ii(c,f,p){var b=-1,S=Za,C=c.length,M=!0,T=[],D=T;if(p)M=!1,S=Mf;else if(C>=r){var H=f?null:NE(c);if(H)return tl(H);M=!1,S=po,D=new br}else D=f?[]:T;t:for(;++b<C;){var $=c[b],W=f?f($):$;if($=p||$!==0?$:0,M&&W===W){for(var q=D.length;q--;)if(D[q]===W)continue t;f&&D.push(W),T.push($)}else S(D,W,p)||(D!==T&&D.push(W),T.push($))}return T}function Zf(c,f){f=Li(f,c);var p=-1,b=f.length;if(!b)return!0;for(var S=c==null||typeof c!="object"&&typeof c!="function";++p<b;){var C=f[p];if(typeof C=="string"){if(C==="__proto__"&&!Ct.call(c,"__proto__"))return!1;if(C==="constructor"&&p+1<b&&typeof f[p+1]=="string"&&f[p+1]==="prototype"){if(S&&p===0)continue;return!1}}}var M=$y(c,f);return M==null||delete M[Wn(bn(f))]}function py(c,f,p,b){return ko(c,f,p(wr(c,f)),b)}function wl(c,f,p,b){for(var S=c.length,C=b?S:-1;(b?C--:++C<S)&&f(c[C],C,c););return p?yn(c,b?0:C,b?C+1:S):yn(c,b?C+1:0,b?S:C)}function gy(c,f){var p=c;return p instanceof wt&&(p=p.value()),Ef(f,function(b,S){return S.func.apply(S.thisArg,Ai([b],S.args))},p)}function Qf(c,f,p){var b=c.length;if(b<2)return b?Ii(c[0]):[];for(var S=-1,C=L(b);++S<b;)for(var M=c[S],T=-1;++T<b;)T!=S&&(C[S]=_o(C[S]||M,c[T],f,p));return Ii(me(C,1),f,p)}function my(c,f,p){for(var b=-1,S=c.length,C=f.length,M={};++b<S;){var T=b<C?f[b]:e;p(M,c[b],T)}return M}function th(c){return Yt(c)?c:[]}function eh(c){return typeof c=="function"?c:Ue}function Li(c,f){return ct(c)?c:uh(c,f)?[c]:jy(Mt(c))}var ME=pt;function Ni(c,f,p){var b=c.length;return p=p===e?b:p,!f&&p>=b?c:yn(c,f,p)}var yy=dM||function(c){return ge.clearTimeout(c)};function by(c,f){if(f)return c.slice();var p=c.length,b=zm?zm(p):new c.constructor(p);return c.copy(b),b}function nh(c){var f=new c.constructor(c.byteLength);return new ol(f).set(new ol(c)),f}function EE(c,f){var p=f?nh(c.buffer):c.buffer;return new c.constructor(p,c.byteOffset,c.byteLength)}function TE(c){var f=new c.constructor(c.source,em.exec(c));return f.lastIndex=c.lastIndex,f}function OE(c){return xo?Rt(xo.call(c)):{}}function xy(c,f){var p=f?nh(c.buffer):c.buffer;return new c.constructor(p,c.byteOffset,c.length)}function wy(c,f){if(c!==f){var p=c!==e,b=c===null,S=c===c,C=rn(c),M=f!==e,T=f===null,D=f===f,H=rn(f);if(!T&&!H&&!C&&c>f||C&&M&&D&&!T&&!H||b&&M&&D||!p&&D||!S)return 1;if(!b&&!C&&!H&&c<f||H&&p&&S&&!b&&!C||T&&p&&S||!M&&S||!D)return-1}return 0}function AE(c,f,p){for(var b=-1,S=c.criteria,C=f.criteria,M=S.length,T=p.length;++b<M;){var D=wy(S[b],C[b]);if(D){if(b>=T)return D;var H=p[b];return D*(H=="desc"?-1:1)}}return c.index-f.index}function _y(c,f,p,b){for(var S=-1,C=c.length,M=p.length,T=-1,D=f.length,H=se(C-M,0),$=L(D+H),W=!b;++T<D;)$[T]=f[T];for(;++S<M;)(W||S<C)&&($[p[S]]=c[S]);for(;H--;)$[T++]=c[S++];return $}function Sy(c,f,p,b){for(var S=-1,C=c.length,M=-1,T=p.length,D=-1,H=f.length,$=se(C-T,0),W=L($+H),q=!b;++S<$;)W[S]=c[S];for(var G=S;++D<H;)W[G+D]=f[D];for(;++M<T;)(q||S<C)&&(W[G+p[M]]=c[S++]);return W}function $e(c,f){var p=-1,b=c.length;for(f||(f=L(b));++p<b;)f[p]=c[p];return f}function $n(c,f,p,b){var S=!p;p||(p={});for(var C=-1,M=f.length;++C<M;){var T=f[C],D=b?b(p[T],c[T],T,p,c):e;D===e&&(D=c[T]),S?ri(p,T,D):wo(p,T,D)}return p}function RE(c,f){return $n(c,ch(c),f)}function DE(c,f){return $n(c,Ly(c),f)}function _l(c,f){return function(p,b){var S=ct(p)?FC:tE,C=f?f():{};return S(p,c,Q(b,2),C)}}function ks(c){return pt(function(f,p){var b=-1,S=p.length,C=S>1?p[S-1]:e,M=S>2?p[2]:e;for(C=c.length>3&&typeof C=="function"?(S--,C):e,M&&Le(p[0],p[1],M)&&(C=S<3?e:C,S=1),f=Rt(f);++b<S;){var T=p[b];T&&c(f,T,b,C)}return f})}function vy(c,f){return function(p,b){if(p==null)return p;if(!We(p))return c(p,b);for(var S=p.length,C=f?S:-1,M=Rt(p);(f?C--:++C<S)&&b(M[C],C,M)!==!1;);return p}}function ky(c){return function(f,p,b){for(var S=-1,C=Rt(f),M=b(f),T=M.length;T--;){var D=M[c?T:++S];if(p(C[D],D,C)===!1)break}return f}}function PE(c,f,p){var b=f&w,S=Co(c);function C(){var M=this&&this!==ge&&this instanceof C?S:c;return M.apply(b?p:this,arguments)}return C}function Cy(c){return function(f){f=Mt(f);var p=ys(f)?Rn(f):e,b=p?p[0]:f.charAt(0),S=p?Ni(p,1).join(""):f.slice(1);return b[c]()+S}}function Cs(c){return function(f){return Ef(vb(Sb(f).replace(vC,"")),c,"")}}function Co(c){return function(){var f=arguments;switch(f.length){case 0:return new c;case 1:return new c(f[0]);case 2:return new c(f[0],f[1]);case 3:return new c(f[0],f[1],f[2]);case 4:return new c(f[0],f[1],f[2],f[3]);case 5:return new c(f[0],f[1],f[2],f[3],f[4]);case 6:return new c(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new c(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var p=vs(c.prototype),b=c.apply(p,f);return Ut(b)?b:p}}function IE(c,f,p){var b=Co(c);function S(){for(var C=arguments.length,M=L(C),T=C,D=Ms(S);T--;)M[T]=arguments[T];var H=C<3&&M[0]!==D&&M[C-1]!==D?[]:Ri(M,D);if(C-=H.length,C<p)return Ay(c,f,Sl,S.placeholder,e,M,H,e,e,p-C);var $=this&&this!==ge&&this instanceof S?b:c;return tn($,this,M)}return S}function My(c){return function(f,p,b){var S=Rt(f);if(!We(f)){var C=Q(p,3);f=ae(f),p=function(T){return C(S[T],T,S)}}var M=c(f,p,b);return M>-1?S[C?f[M]:M]:e}}function Ey(c){return oi(function(f){var p=f.length,b=p,S=gn.prototype.thru;for(c&&f.reverse();b--;){var C=f[b];if(typeof C!="function")throw new pn(o);if(S&&!M&&Ml(C)=="wrapper")var M=new gn([],!0)}for(b=M?b:p;++b<p;){C=f[b];var T=Ml(C),D=T=="wrapper"?ah(C):e;D&&fh(D[0])&&D[1]==(I|O|R|z)&&!D[4].length&&D[9]==1?M=M[Ml(D[0])].apply(M,D[3]):M=C.length==1&&fh(C)?M[T]():M.thru(C)}return function(){var H=arguments,$=H[0];if(M&&H.length==1&&ct($))return M.plant($).value();for(var W=0,q=p?f[W].apply(this,H):$;++W<p;)q=f[W].call(this,q);return q}})}function Sl(c,f,p,b,S,C,M,T,D,H){var $=f&I,W=f&w,q=f&v,G=f&(O|P),tt=f&j,ft=q?e:Co(c);function et(){for(var bt=arguments.length,St=L(bt),sn=bt;sn--;)St[sn]=arguments[sn];if(G)var Ne=Ms(et),on=qC(St,Ne);if(b&&(St=_y(St,b,S,G)),C&&(St=Sy(St,C,M,G)),bt-=on,G&&bt<H){var Zt=Ri(St,Ne);return Ay(c,f,Sl,et.placeholder,p,St,Zt,T,D,H-bt)}var In=W?p:this,ui=q?In[c]:c;return bt=St.length,T?St=tT(St,T):tt&&bt>1&&St.reverse(),$&&D<bt&&(St.length=D),this&&this!==ge&&this instanceof et&&(ui=ft||Co(ui)),ui.apply(In,St)}return et}function Ty(c,f){return function(p,b){return lE(p,c,f(b),{})}}function vl(c,f){return function(p,b){var S;if(p===e&&b===e)return f;if(p!==e&&(S=p),b!==e){if(S===e)return b;typeof p=="string"||typeof b=="string"?(p=nn(p),b=nn(b)):(p=dy(p),b=dy(b)),S=c(p,b)}return S}}function ih(c){return oi(function(f){return f=$t(f,en(Q())),pt(function(p){var b=this;return c(f,function(S){return tn(S,b,p)})})})}function kl(c,f){f=f===e?" ":nn(f);var p=f.length;if(p<2)return p?Gf(f,c):f;var b=Gf(f,ul(c/bs(f)));return ys(f)?Ni(Rn(b),0,c).join(""):b.slice(0,c)}function LE(c,f,p,b){var S=f&w,C=Co(c);function M(){for(var T=-1,D=arguments.length,H=-1,$=b.length,W=L($+D),q=this&&this!==ge&&this instanceof M?C:c;++H<$;)W[H]=b[H];for(;D--;)W[H++]=arguments[++T];return tn(q,S?p:this,W)}return M}function Oy(c){return function(f,p,b){return b&&typeof b!="number"&&Le(f,p,b)&&(p=b=e),f=ci(f),p===e?(p=f,f=0):p=ci(p),b=b===e?f<p?1:-1:ci(b),wE(f,p,b,c)}}function Cl(c){return function(f,p){return typeof f=="string"&&typeof p=="string"||(f=xn(f),p=xn(p)),c(f,p)}}function Ay(c,f,p,b,S,C,M,T,D,H){var $=f&O,W=$?M:e,q=$?e:M,G=$?C:e,tt=$?e:C;f|=$?R:B,f&=~($?B:R),f&E||(f&=-4);var ft=[c,f,S,G,W,tt,q,T,D,H],et=p.apply(e,ft);return fh(c)&&Wy(et,ft),et.placeholder=b,Vy(et,c,f)}function rh(c){var f=re[c];return function(p,b){if(p=xn(p),b=b==null?0:Se(ut(b),292),b&&Vm(p)){var S=(Mt(p)+"e").split("e"),C=f(S[0]+"e"+(+S[1]+b));return S=(Mt(C)+"e").split("e"),+(S[0]+"e"+(+S[1]-b))}return f(p)}}var NE=_s&&1/tl(new _s([,-0]))[1]==yt?function(c){return new _s(c)}:Mh;function Ry(c){return function(f){var p=ve(f);return p==On?If(f):p==An?QC(f):jC(f,c(f))}}function si(c,f,p,b,S,C,M,T){var D=f&v;if(!D&&typeof c!="function")throw new pn(o);var H=b?b.length:0;if(H||(f&=-97,b=S=e),M=M===e?M:se(ut(M),0),T=T===e?T:ut(T),H-=S?S.length:0,f&B){var $=b,W=S;b=S=e}var q=D?e:ah(c),G=[c,f,p,b,S,$,W,C,M,T];if(q&&YE(G,q),c=G[0],f=G[1],p=G[2],b=G[3],S=G[4],T=G[9]=G[9]===e?D?0:c.length:se(G[9]-H,0),!T&&f&(O|P)&&(f&=-25),!f||f==w)var tt=PE(c,f,p);else f==O||f==P?tt=IE(c,f,T):(f==R||f==(w|R))&&!S.length?tt=LE(c,f,p,b):tt=Sl.apply(e,G);var ft=q?fy:Wy;return Vy(ft(tt,G),c,f)}function Dy(c,f,p,b){return c===e||Pn(c,ws[p])&&!Ct.call(b,p)?f:c}function Py(c,f,p,b,S,C){return Ut(c)&&Ut(f)&&(C.set(f,c),bl(c,f,e,Py,C),C.delete(f)),c}function FE(c){return To(c)?e:c}function Iy(c,f,p,b,S,C){var M=p&y,T=c.length,D=f.length;if(T!=D&&!(M&&D>T))return!1;var H=C.get(c),$=C.get(f);if(H&&$)return H==f&&$==c;var W=-1,q=!0,G=p&x?new br:e;for(C.set(c,f),C.set(f,c);++W<T;){var tt=c[W],ft=f[W];if(b)var et=M?b(ft,tt,W,f,c,C):b(tt,ft,W,c,f,C);if(et!==e){if(et)continue;q=!1;break}if(G){if(!Tf(f,function(bt,St){if(!po(G,St)&&(tt===bt||S(tt,bt,p,b,C)))return G.push(St)})){q=!1;break}}else if(!(tt===ft||S(tt,ft,p,b,C))){q=!1;break}}return C.delete(c),C.delete(f),q}function BE(c,f,p,b,S,C,M){switch(p){case ps:if(c.byteLength!=f.byteLength||c.byteOffset!=f.byteOffset)return!1;c=c.buffer,f=f.buffer;case ho:return!(c.byteLength!=f.byteLength||!C(new ol(c),new ol(f)));case oo:case ao:case lo:return Pn(+c,+f);case qa:return c.name==f.name&&c.message==f.message;case co:case uo:return c==f+"";case On:var T=If;case An:var D=b&y;if(T||(T=tl),c.size!=f.size&&!D)return!1;var H=M.get(c);if(H)return H==f;b|=x,M.set(c,f);var $=Iy(T(c),T(f),b,S,C,M);return M.delete(c),$;case Ja:if(xo)return xo.call(c)==xo.call(f)}return!1}function zE(c,f,p,b,S,C){var M=p&y,T=sh(c),D=T.length,H=sh(f),$=H.length;if(D!=$&&!M)return!1;for(var W=D;W--;){var q=T[W];if(!(M?q in f:Ct.call(f,q)))return!1}var G=C.get(c),tt=C.get(f);if(G&&tt)return G==f&&tt==c;var ft=!0;C.set(c,f),C.set(f,c);for(var et=M;++W<D;){q=T[W];var bt=c[q],St=f[q];if(b)var sn=M?b(St,bt,q,f,c,C):b(bt,St,q,c,f,C);if(!(sn===e?bt===St||S(bt,St,p,b,C):sn)){ft=!1;break}et||(et=q=="constructor")}if(ft&&!et){var Ne=c.constructor,on=f.constructor;Ne!=on&&"constructor"in c&&"constructor"in f&&!(typeof Ne=="function"&&Ne instanceof Ne&&typeof on=="function"&&on instanceof on)&&(ft=!1)}return C.delete(c),C.delete(f),ft}function oi(c){return dh(Hy(c,e,Xy),c+"")}function sh(c){return ty(c,ae,ch)}function oh(c){return ty(c,Ve,Ly)}var ah=hl?function(c){return hl.get(c)}:Mh;function Ml(c){for(var f=c.name+"",p=Ss[f],b=Ct.call(Ss,f)?p.length:0;b--;){var S=p[b],C=S.func;if(C==null||C==c)return S.name}return f}function Ms(c){var f=Ct.call(k,"placeholder")?k:c;return f.placeholder}function Q(){var c=k.iteratee||kh;return c=c===kh?iy:c,arguments.length?c(arguments[0],arguments[1]):c}function El(c,f){var p=c.__data__;return KE(f)?p[typeof f=="string"?"string":"hash"]:p.map}function lh(c){for(var f=ae(c),p=f.length;p--;){var b=f[p],S=c[b];f[p]=[b,S,By(S)]}return f}function _r(c,f){var p=GC(c,f);return ny(p)?p:e}function HE(c){var f=Ct.call(c,mr),p=c[mr];try{c[mr]=e;var b=!0}catch{}var S=rl.call(c);return b&&(f?c[mr]=p:delete c[mr]),S}var ch=Nf?function(c){return c==null?[]:(c=Rt(c),Oi(Nf(c),function(f){return $m.call(c,f)}))}:Eh,Ly=Nf?function(c){for(var f=[];c;)Ai(f,ch(c)),c=al(c);return f}:Eh,ve=Ie;(Ff&&ve(new Ff(new ArrayBuffer(1)))!=ps||mo&&ve(new mo)!=On||Bf&&ve(Bf.resolve())!=Yg||_s&&ve(new _s)!=An||yo&&ve(new yo)!=fo)&&(ve=function(c){var f=Ie(c),p=f==ei?c.constructor:e,b=p?Sr(p):"";if(b)switch(b){case SM:return ps;case vM:return On;case kM:return Yg;case CM:return An;case MM:return fo}return f});function $E(c,f,p){for(var b=-1,S=p.length;++b<S;){var C=p[b],M=C.size;switch(C.type){case"drop":c+=M;break;case"dropRight":f-=M;break;case"take":f=Se(f,c+M);break;case"takeRight":c=se(c,f-M);break}}return{start:c,end:f}}function WE(c){var f=c.match(Jk);return f?f[1].split(Xk):[]}function Ny(c,f,p){f=Li(f,c);for(var b=-1,S=f.length,C=!1;++b<S;){var M=Wn(f[b]);if(!(C=c!=null&&p(c,M)))break;c=c[M]}return C||++b!=S?C:(S=c==null?0:c.length,!!S&&Il(S)&&ai(M,S)&&(ct(c)||vr(c)))}function VE(c){var f=c.length,p=new c.constructor(f);return f&&typeof c[0]=="string"&&Ct.call(c,"index")&&(p.index=c.index,p.input=c.input),p}function Fy(c){return typeof c.constructor=="function"&&!Mo(c)?vs(al(c)):{}}function UE(c,f,p){var b=c.constructor;switch(f){case ho:return nh(c);case oo:case ao:return new b(+c);case ps:return EE(c,p);case lf:case cf:case uf:case ff:case hf:case df:case pf:case gf:case mf:return xy(c,p);case On:return new b;case lo:case uo:return new b(c);case co:return TE(c);case An:return new b;case Ja:return OE(c)}}function jE(c,f){var p=f.length;if(!p)return c;var b=p-1;return f[b]=(p>1?"& ":"")+f[b],f=f.join(p>2?", ":" "),c.replace(Kk,`{
/* [wrapped with `+f+`] */
`)}function qE(c){return ct(c)||vr(c)||!!(Wm&&c&&c[Wm])}function ai(c,f){var p=typeof c;return f=f??Et,!!f&&(p=="number"||p!="symbol"&&rC.test(c))&&c>-1&&c%1==0&&c<f}function Le(c,f,p){if(!Ut(p))return!1;var b=typeof f;return(b=="number"?We(p)&&ai(f,p.length):b=="string"&&f in p)?Pn(p[f],c):!1}function uh(c,f){if(ct(c))return!1;var p=typeof c;return p=="number"||p=="symbol"||p=="boolean"||c==null||rn(c)?!0:Vk.test(c)||!Wk.test(c)||f!=null&&c in Rt(f)}function KE(c){var f=typeof c;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?c!=="__proto__":c===null}function fh(c){var f=Ml(c),p=k[f];if(typeof p!="function"||!(f in wt.prototype))return!1;if(c===p)return!0;var b=ah(p);return!!b&&c===b[0]}function JE(c){return!!Bm&&Bm in c}var XE=nl?li:Th;function Mo(c){var f=c&&c.constructor,p=typeof f=="function"&&f.prototype||ws;return c===p}function By(c){return c===c&&!Ut(c)}function zy(c,f){return function(p){return p==null?!1:p[c]===f&&(f!==e||c in Rt(p))}}function GE(c){var f=Dl(c,function(b){return p.size===u&&p.clear(),b}),p=f.cache;return f}function YE(c,f){var p=c[1],b=f[1],S=p|b,C=S<(w|v|I),M=b==I&&p==O||b==I&&p==z&&c[7].length<=f[8]||b==(I|z)&&f[7].length<=f[8]&&p==O;if(!(C||M))return c;b&w&&(c[2]=f[2],S|=p&w?0:E);var T=f[3];if(T){var D=c[3];c[3]=D?_y(D,T,f[4]):T,c[4]=D?Ri(c[3],h):f[4]}return T=f[5],T&&(D=c[5],c[5]=D?Sy(D,T,f[6]):T,c[6]=D?Ri(c[5],h):f[6]),T=f[7],T&&(c[7]=T),b&I&&(c[8]=c[8]==null?f[8]:Se(c[8],f[8])),c[9]==null&&(c[9]=f[9]),c[0]=f[0],c[1]=S,c}function ZE(c){var f=[];if(c!=null)for(var p in Rt(c))f.push(p);return f}function QE(c){return rl.call(c)}function Hy(c,f,p){return f=se(f===e?c.length-1:f,0),function(){for(var b=arguments,S=-1,C=se(b.length-f,0),M=L(C);++S<C;)M[S]=b[f+S];S=-1;for(var T=L(f+1);++S<f;)T[S]=b[S];return T[f]=p(M),tn(c,this,T)}}function $y(c,f){return f.length<2?c:wr(c,yn(f,0,-1))}function tT(c,f){for(var p=c.length,b=Se(f.length,p),S=$e(c);b--;){var C=f[b];c[b]=ai(C,p)?S[C]:e}return c}function hh(c,f){if(!(f==="constructor"&&typeof c[f]=="function")&&f!="__proto__")return c[f]}var Wy=Uy(fy),Eo=gM||function(c,f){return ge.setTimeout(c,f)},dh=Uy(vE);function Vy(c,f,p){var b=f+"";return dh(c,jE(b,eT(WE(b),p)))}function Uy(c){var f=0,p=0;return function(){var b=xM(),S=Ot-(b-p);if(p=b,S>0){if(++f>=rt)return arguments[0]}else f=0;return c.apply(e,arguments)}}function Tl(c,f){var p=-1,b=c.length,S=b-1;for(f=f===e?b:f;++p<f;){var C=Xf(p,S),M=c[C];c[C]=c[p],c[p]=M}return c.length=f,c}var jy=GE(function(c){var f=[];return c.charCodeAt(0)===46&&f.push(""),c.replace(Uk,function(p,b,S,C){f.push(S?C.replace(Zk,"$1"):b||p)}),f});function Wn(c){if(typeof c=="string"||rn(c))return c;var f=c+"";return f=="0"&&1/c==-yt?"-0":f}function Sr(c){if(c!=null){try{return il.call(c)}catch{}try{return c+""}catch{}}return""}function eT(c,f){return dn(He,function(p){var b="_."+p[0];f&p[1]&&!Za(c,b)&&c.push(b)}),c.sort()}function qy(c){if(c instanceof wt)return c.clone();var f=new gn(c.__wrapped__,c.__chain__);return f.__actions__=$e(c.__actions__),f.__index__=c.__index__,f.__values__=c.__values__,f}function nT(c,f,p){(p?Le(c,f,p):f===e)?f=1:f=se(ut(f),0);var b=c==null?0:c.length;if(!b||f<1)return[];for(var S=0,C=0,M=L(ul(b/f));S<b;)M[C++]=yn(c,S,S+=f);return M}function iT(c){for(var f=-1,p=c==null?0:c.length,b=0,S=[];++f<p;){var C=c[f];C&&(S[b++]=C)}return S}function rT(){var c=arguments.length;if(!c)return[];for(var f=L(c-1),p=arguments[0],b=c;b--;)f[b-1]=arguments[b];return Ai(ct(p)?$e(p):[p],me(f,1))}var sT=pt(function(c,f){return Yt(c)?_o(c,me(f,1,Yt,!0)):[]}),oT=pt(function(c,f){var p=bn(f);return Yt(p)&&(p=e),Yt(c)?_o(c,me(f,1,Yt,!0),Q(p,2)):[]}),aT=pt(function(c,f){var p=bn(f);return Yt(p)&&(p=e),Yt(c)?_o(c,me(f,1,Yt,!0),e,p):[]});function lT(c,f,p){var b=c==null?0:c.length;return b?(f=p||f===e?1:ut(f),yn(c,f<0?0:f,b)):[]}function cT(c,f,p){var b=c==null?0:c.length;return b?(f=p||f===e?1:ut(f),f=b-f,yn(c,0,f<0?0:f)):[]}function uT(c,f){return c&&c.length?wl(c,Q(f,3),!0,!0):[]}function fT(c,f){return c&&c.length?wl(c,Q(f,3),!0):[]}function hT(c,f,p,b){var S=c==null?0:c.length;return S?(p&&typeof p!="number"&&Le(c,f,p)&&(p=0,b=S),rE(c,f,p,b)):[]}function Ky(c,f,p){var b=c==null?0:c.length;if(!b)return-1;var S=p==null?0:ut(p);return S<0&&(S=se(b+S,0)),Qa(c,Q(f,3),S)}function Jy(c,f,p){var b=c==null?0:c.length;if(!b)return-1;var S=b-1;return p!==e&&(S=ut(p),S=p<0?se(b+S,0):Se(S,b-1)),Qa(c,Q(f,3),S,!0)}function Xy(c){var f=c==null?0:c.length;return f?me(c,1):[]}function dT(c){var f=c==null?0:c.length;return f?me(c,yt):[]}function pT(c,f){var p=c==null?0:c.length;return p?(f=f===e?1:ut(f),me(c,f)):[]}function gT(c){for(var f=-1,p=c==null?0:c.length,b={};++f<p;){var S=c[f];b[S[0]]=S[1]}return b}function Gy(c){return c&&c.length?c[0]:e}function mT(c,f,p){var b=c==null?0:c.length;if(!b)return-1;var S=p==null?0:ut(p);return S<0&&(S=se(b+S,0)),ms(c,f,S)}function yT(c){var f=c==null?0:c.length;return f?yn(c,0,-1):[]}var bT=pt(function(c){var f=$t(c,th);return f.length&&f[0]===c[0]?Uf(f):[]}),xT=pt(function(c){var f=bn(c),p=$t(c,th);return f===bn(p)?f=e:p.pop(),p.length&&p[0]===c[0]?Uf(p,Q(f,2)):[]}),wT=pt(function(c){var f=bn(c),p=$t(c,th);return f=typeof f=="function"?f:e,f&&p.pop(),p.length&&p[0]===c[0]?Uf(p,e,f):[]});function _T(c,f){return c==null?"":yM.call(c,f)}function bn(c){var f=c==null?0:c.length;return f?c[f-1]:e}function ST(c,f,p){var b=c==null?0:c.length;if(!b)return-1;var S=b;return p!==e&&(S=ut(p),S=S<0?se(b+S,0):Se(S,b-1)),f===f?eM(c,f,S):Qa(c,Am,S,!0)}function vT(c,f){return c&&c.length?ay(c,ut(f)):e}var kT=pt(Yy);function Yy(c,f){return c&&c.length&&f&&f.length?Jf(c,f):c}function CT(c,f,p){return c&&c.length&&f&&f.length?Jf(c,f,Q(p,2)):c}function MT(c,f,p){return c&&c.length&&f&&f.length?Jf(c,f,e,p):c}var ET=oi(function(c,f){var p=c==null?0:c.length,b=Hf(c,f);return uy(c,$t(f,function(S){return ai(S,p)?+S:S}).sort(wy)),b});function TT(c,f){var p=[];if(!(c&&c.length))return p;var b=-1,S=[],C=c.length;for(f=Q(f,3);++b<C;){var M=c[b];f(M,b,c)&&(p.push(M),S.push(b))}return uy(c,S),p}function ph(c){return c==null?c:_M.call(c)}function OT(c,f,p){var b=c==null?0:c.length;return b?(p&&typeof p!="number"&&Le(c,f,p)?(f=0,p=b):(f=f==null?0:ut(f),p=p===e?b:ut(p)),yn(c,f,p)):[]}function AT(c,f){return xl(c,f)}function RT(c,f,p){return Yf(c,f,Q(p,2))}function DT(c,f){var p=c==null?0:c.length;if(p){var b=xl(c,f);if(b<p&&Pn(c[b],f))return b}return-1}function PT(c,f){return xl(c,f,!0)}function IT(c,f,p){return Yf(c,f,Q(p,2),!0)}function LT(c,f){var p=c==null?0:c.length;if(p){var b=xl(c,f,!0)-1;if(Pn(c[b],f))return b}return-1}function NT(c){return c&&c.length?hy(c):[]}function FT(c,f){return c&&c.length?hy(c,Q(f,2)):[]}function BT(c){var f=c==null?0:c.length;return f?yn(c,1,f):[]}function zT(c,f,p){return c&&c.length?(f=p||f===e?1:ut(f),yn(c,0,f<0?0:f)):[]}function HT(c,f,p){var b=c==null?0:c.length;return b?(f=p||f===e?1:ut(f),f=b-f,yn(c,f<0?0:f,b)):[]}function $T(c,f){return c&&c.length?wl(c,Q(f,3),!1,!0):[]}function WT(c,f){return c&&c.length?wl(c,Q(f,3)):[]}var VT=pt(function(c){return Ii(me(c,1,Yt,!0))}),UT=pt(function(c){var f=bn(c);return Yt(f)&&(f=e),Ii(me(c,1,Yt,!0),Q(f,2))}),jT=pt(function(c){var f=bn(c);return f=typeof f=="function"?f:e,Ii(me(c,1,Yt,!0),e,f)});function qT(c){return c&&c.length?Ii(c):[]}function KT(c,f){return c&&c.length?Ii(c,Q(f,2)):[]}function JT(c,f){return f=typeof f=="function"?f:e,c&&c.length?Ii(c,e,f):[]}function gh(c){if(!(c&&c.length))return[];var f=0;return c=Oi(c,function(p){if(Yt(p))return f=se(p.length,f),!0}),Df(f,function(p){return $t(c,Of(p))})}function Zy(c,f){if(!(c&&c.length))return[];var p=gh(c);return f==null?p:$t(p,function(b){return tn(f,e,b)})}var XT=pt(function(c,f){return Yt(c)?_o(c,f):[]}),GT=pt(function(c){return Qf(Oi(c,Yt))}),YT=pt(function(c){var f=bn(c);return Yt(f)&&(f=e),Qf(Oi(c,Yt),Q(f,2))}),ZT=pt(function(c){var f=bn(c);return f=typeof f=="function"?f:e,Qf(Oi(c,Yt),e,f)}),QT=pt(gh);function tO(c,f){return my(c||[],f||[],wo)}function eO(c,f){return my(c||[],f||[],ko)}var nO=pt(function(c){var f=c.length,p=f>1?c[f-1]:e;return p=typeof p=="function"?(c.pop(),p):e,Zy(c,p)});function Qy(c){var f=k(c);return f.__chain__=!0,f}function iO(c,f){return f(c),c}function Ol(c,f){return f(c)}var rO=oi(function(c){var f=c.length,p=f?c[0]:0,b=this.__wrapped__,S=function(C){return Hf(C,c)};return f>1||this.__actions__.length||!(b instanceof wt)||!ai(p)?this.thru(S):(b=b.slice(p,+p+(f?1:0)),b.__actions__.push({func:Ol,args:[S],thisArg:e}),new gn(b,this.__chain__).thru(function(C){return f&&!C.length&&C.push(e),C}))});function sO(){return Qy(this)}function oO(){return new gn(this.value(),this.__chain__)}function aO(){this.__values__===e&&(this.__values__=db(this.value()));var c=this.__index__>=this.__values__.length,f=c?e:this.__values__[this.__index__++];return{done:c,value:f}}function lO(){return this}function cO(c){for(var f,p=this;p instanceof pl;){var b=qy(p);b.__index__=0,b.__values__=e,f?S.__wrapped__=b:f=b;var S=b;p=p.__wrapped__}return S.__wrapped__=c,f}function uO(){var c=this.__wrapped__;if(c instanceof wt){var f=c;return this.__actions__.length&&(f=new wt(this)),f=f.reverse(),f.__actions__.push({func:Ol,args:[ph],thisArg:e}),new gn(f,this.__chain__)}return this.thru(ph)}function fO(){return gy(this.__wrapped__,this.__actions__)}var hO=_l(function(c,f,p){Ct.call(c,p)?++c[p]:ri(c,p,1)});function dO(c,f,p){var b=ct(c)?Tm:iE;return p&&Le(c,f,p)&&(f=e),b(c,Q(f,3))}function pO(c,f){var p=ct(c)?Oi:Zm;return p(c,Q(f,3))}var gO=My(Ky),mO=My(Jy);function yO(c,f){return me(Al(c,f),1)}function bO(c,f){return me(Al(c,f),yt)}function xO(c,f,p){return p=p===e?1:ut(p),me(Al(c,f),p)}function tb(c,f){var p=ct(c)?dn:Pi;return p(c,Q(f,3))}function eb(c,f){var p=ct(c)?BC:Ym;return p(c,Q(f,3))}var wO=_l(function(c,f,p){Ct.call(c,p)?c[p].push(f):ri(c,p,[f])});function _O(c,f,p,b){c=We(c)?c:Ts(c),p=p&&!b?ut(p):0;var S=c.length;return p<0&&(p=se(S+p,0)),Ll(c)?p<=S&&c.indexOf(f,p)>-1:!!S&&ms(c,f,p)>-1}var SO=pt(function(c,f,p){var b=-1,S=typeof f=="function",C=We(c)?L(c.length):[];return Pi(c,function(M){C[++b]=S?tn(f,M,p):So(M,f,p)}),C}),vO=_l(function(c,f,p){ri(c,p,f)});function Al(c,f){var p=ct(c)?$t:ry;return p(c,Q(f,3))}function kO(c,f,p,b){return c==null?[]:(ct(f)||(f=f==null?[]:[f]),p=b?e:p,ct(p)||(p=p==null?[]:[p]),ly(c,f,p))}var CO=_l(function(c,f,p){c[p?0:1].push(f)},function(){return[[],[]]});function MO(c,f,p){var b=ct(c)?Ef:Dm,S=arguments.length<3;return b(c,Q(f,4),p,S,Pi)}function EO(c,f,p){var b=ct(c)?zC:Dm,S=arguments.length<3;return b(c,Q(f,4),p,S,Ym)}function TO(c,f){var p=ct(c)?Oi:Zm;return p(c,Pl(Q(f,3)))}function OO(c){var f=ct(c)?Km:_E;return f(c)}function AO(c,f,p){(p?Le(c,f,p):f===e)?f=1:f=ut(f);var b=ct(c)?ZM:SE;return b(c,f)}function RO(c){var f=ct(c)?QM:kE;return f(c)}function DO(c){if(c==null)return 0;if(We(c))return Ll(c)?bs(c):c.length;var f=ve(c);return f==On||f==An?c.size:qf(c).length}function PO(c,f,p){var b=ct(c)?Tf:CE;return p&&Le(c,f,p)&&(f=e),b(c,Q(f,3))}var IO=pt(function(c,f){if(c==null)return[];var p=f.length;return p>1&&Le(c,f[0],f[1])?f=[]:p>2&&Le(f[0],f[1],f[2])&&(f=[f[0]]),ly(c,me(f,1),[])}),Rl=pM||function(){return ge.Date.now()};function LO(c,f){if(typeof f!="function")throw new pn(o);return c=ut(c),function(){if(--c<1)return f.apply(this,arguments)}}function nb(c,f,p){return f=p?e:f,f=c&&f==null?c.length:f,si(c,I,e,e,e,e,f)}function ib(c,f){var p;if(typeof f!="function")throw new pn(o);return c=ut(c),function(){return--c>0&&(p=f.apply(this,arguments)),c<=1&&(f=e),p}}var mh=pt(function(c,f,p){var b=w;if(p.length){var S=Ri(p,Ms(mh));b|=R}return si(c,b,f,p,S)}),rb=pt(function(c,f,p){var b=w|v;if(p.length){var S=Ri(p,Ms(rb));b|=R}return si(f,b,c,p,S)});function sb(c,f,p){f=p?e:f;var b=si(c,O,e,e,e,e,e,f);return b.placeholder=sb.placeholder,b}function ob(c,f,p){f=p?e:f;var b=si(c,P,e,e,e,e,e,f);return b.placeholder=ob.placeholder,b}function ab(c,f,p){var b,S,C,M,T,D,H=0,$=!1,W=!1,q=!0;if(typeof c!="function")throw new pn(o);f=xn(f)||0,Ut(p)&&($=!!p.leading,W="maxWait"in p,C=W?se(xn(p.maxWait)||0,f):C,q="trailing"in p?!!p.trailing:q);function G(Zt){var In=b,ui=S;return b=S=e,H=Zt,M=c.apply(ui,In),M}function tt(Zt){return H=Zt,T=Eo(bt,f),$?G(Zt):M}function ft(Zt){var In=Zt-D,ui=Zt-H,Mb=f-In;return W?Se(Mb,C-ui):Mb}function et(Zt){var In=Zt-D,ui=Zt-H;return D===e||In>=f||In<0||W&&ui>=C}function bt(){var Zt=Rl();if(et(Zt))return St(Zt);T=Eo(bt,ft(Zt))}function St(Zt){return T=e,q&&b?G(Zt):(b=S=e,M)}function sn(){T!==e&&yy(T),H=0,b=D=S=T=e}function Ne(){return T===e?M:St(Rl())}function on(){var Zt=Rl(),In=et(Zt);if(b=arguments,S=this,D=Zt,In){if(T===e)return tt(D);if(W)return yy(T),T=Eo(bt,f),G(D)}return T===e&&(T=Eo(bt,f)),M}return on.cancel=sn,on.flush=Ne,on}var NO=pt(function(c,f){return Gm(c,1,f)}),FO=pt(function(c,f,p){return Gm(c,xn(f)||0,p)});function BO(c){return si(c,j)}function Dl(c,f){if(typeof c!="function"||f!=null&&typeof f!="function")throw new pn(o);var p=function(){var b=arguments,S=f?f.apply(this,b):b[0],C=p.cache;if(C.has(S))return C.get(S);var M=c.apply(this,b);return p.cache=C.set(S,M)||C,M};return p.cache=new(Dl.Cache||ii),p}Dl.Cache=ii;function Pl(c){if(typeof c!="function")throw new pn(o);return function(){var f=arguments;switch(f.length){case 0:return!c.call(this);case 1:return!c.call(this,f[0]);case 2:return!c.call(this,f[0],f[1]);case 3:return!c.call(this,f[0],f[1],f[2])}return!c.apply(this,f)}}function zO(c){return ib(2,c)}var HO=ME(function(c,f){f=f.length==1&&ct(f[0])?$t(f[0],en(Q())):$t(me(f,1),en(Q()));var p=f.length;return pt(function(b){for(var S=-1,C=Se(b.length,p);++S<C;)b[S]=f[S].call(this,b[S]);return tn(c,this,b)})}),yh=pt(function(c,f){var p=Ri(f,Ms(yh));return si(c,R,e,f,p)}),lb=pt(function(c,f){var p=Ri(f,Ms(lb));return si(c,B,e,f,p)}),$O=oi(function(c,f){return si(c,z,e,e,e,f)});function WO(c,f){if(typeof c!="function")throw new pn(o);return f=f===e?f:ut(f),pt(c,f)}function VO(c,f){if(typeof c!="function")throw new pn(o);return f=f==null?0:se(ut(f),0),pt(function(p){var b=p[f],S=Ni(p,0,f);return b&&Ai(S,b),tn(c,this,S)})}function UO(c,f,p){var b=!0,S=!0;if(typeof c!="function")throw new pn(o);return Ut(p)&&(b="leading"in p?!!p.leading:b,S="trailing"in p?!!p.trailing:S),ab(c,f,{leading:b,maxWait:f,trailing:S})}function jO(c){return nb(c,1)}function qO(c,f){return yh(eh(f),c)}function KO(){if(!arguments.length)return[];var c=arguments[0];return ct(c)?c:[c]}function JO(c){return mn(c,m)}function XO(c,f){return f=typeof f=="function"?f:e,mn(c,m,f)}function GO(c){return mn(c,d|m)}function YO(c,f){return f=typeof f=="function"?f:e,mn(c,d|m,f)}function ZO(c,f){return f==null||Xm(c,f,ae(f))}function Pn(c,f){return c===f||c!==c&&f!==f}var QO=Cl(Vf),tA=Cl(function(c,f){return c>=f}),vr=ey((function(){return arguments})())?ey:function(c){return qt(c)&&Ct.call(c,"callee")&&!$m.call(c,"callee")},ct=L.isArray,eA=Sm?en(Sm):cE;function We(c){return c!=null&&Il(c.length)&&!li(c)}function Yt(c){return qt(c)&&We(c)}function nA(c){return c===!0||c===!1||qt(c)&&Ie(c)==oo}var Fi=mM||Th,iA=vm?en(vm):uE;function rA(c){return qt(c)&&c.nodeType===1&&!To(c)}function sA(c){if(c==null)return!0;if(We(c)&&(ct(c)||typeof c=="string"||typeof c.splice=="function"||Fi(c)||Es(c)||vr(c)))return!c.length;var f=ve(c);if(f==On||f==An)return!c.size;if(Mo(c))return!qf(c).length;for(var p in c)if(Ct.call(c,p))return!1;return!0}function oA(c,f){return vo(c,f)}function aA(c,f,p){p=typeof p=="function"?p:e;var b=p?p(c,f):e;return b===e?vo(c,f,e,p):!!b}function bh(c){if(!qt(c))return!1;var f=Ie(c);return f==qa||f==Ak||typeof c.message=="string"&&typeof c.name=="string"&&!To(c)}function lA(c){return typeof c=="number"&&Vm(c)}function li(c){if(!Ut(c))return!1;var f=Ie(c);return f==Ka||f==Gg||f==Ok||f==Dk}function cb(c){return typeof c=="number"&&c==ut(c)}function Il(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=Et}function Ut(c){var f=typeof c;return c!=null&&(f=="object"||f=="function")}function qt(c){return c!=null&&typeof c=="object"}var ub=km?en(km):hE;function cA(c,f){return c===f||jf(c,f,lh(f))}function uA(c,f,p){return p=typeof p=="function"?p:e,jf(c,f,lh(f),p)}function fA(c){return fb(c)&&c!=+c}function hA(c){if(XE(c))throw new at(s);return ny(c)}function dA(c){return c===null}function pA(c){return c==null}function fb(c){return typeof c=="number"||qt(c)&&Ie(c)==lo}function To(c){if(!qt(c)||Ie(c)!=ei)return!1;var f=al(c);if(f===null)return!0;var p=Ct.call(f,"constructor")&&f.constructor;return typeof p=="function"&&p instanceof p&&il.call(p)==uM}var xh=Cm?en(Cm):dE;function gA(c){return cb(c)&&c>=-Et&&c<=Et}var hb=Mm?en(Mm):pE;function Ll(c){return typeof c=="string"||!ct(c)&&qt(c)&&Ie(c)==uo}function rn(c){return typeof c=="symbol"||qt(c)&&Ie(c)==Ja}var Es=Em?en(Em):gE;function mA(c){return c===e}function yA(c){return qt(c)&&ve(c)==fo}function bA(c){return qt(c)&&Ie(c)==Ik}var xA=Cl(Kf),wA=Cl(function(c,f){return c<=f});function db(c){if(!c)return[];if(We(c))return Ll(c)?Rn(c):$e(c);if(go&&c[go])return ZC(c[go]());var f=ve(c),p=f==On?If:f==An?tl:Ts;return p(c)}function ci(c){if(!c)return c===0?c:0;if(c=xn(c),c===yt||c===-yt){var f=c<0?-1:1;return f*Gt}return c===c?c:0}function ut(c){var f=ci(c),p=f%1;return f===f?p?f-p:f:0}function pb(c){return c?xr(ut(c),0,Ht):0}function xn(c){if(typeof c=="number")return c;if(rn(c))return Qe;if(Ut(c)){var f=typeof c.valueOf=="function"?c.valueOf():c;c=Ut(f)?f+"":f}if(typeof c!="string")return c===0?c:+c;c=Pm(c);var p=eC.test(c);return p||iC.test(c)?LC(c.slice(2),p?2:8):tC.test(c)?Qe:+c}function gb(c){return $n(c,Ve(c))}function _A(c){return c?xr(ut(c),-Et,Et):c===0?c:0}function Mt(c){return c==null?"":nn(c)}var SA=ks(function(c,f){if(Mo(f)||We(f)){$n(f,ae(f),c);return}for(var p in f)Ct.call(f,p)&&wo(c,p,f[p])}),mb=ks(function(c,f){$n(f,Ve(f),c)}),Nl=ks(function(c,f,p,b){$n(f,Ve(f),c,b)}),vA=ks(function(c,f,p,b){$n(f,ae(f),c,b)}),kA=oi(Hf);function CA(c,f){var p=vs(c);return f==null?p:Jm(p,f)}var MA=pt(function(c,f){c=Rt(c);var p=-1,b=f.length,S=b>2?f[2]:e;for(S&&Le(f[0],f[1],S)&&(b=1);++p<b;)for(var C=f[p],M=Ve(C),T=-1,D=M.length;++T<D;){var H=M[T],$=c[H];($===e||Pn($,ws[H])&&!Ct.call(c,H))&&(c[H]=C[H])}return c}),EA=pt(function(c){return c.push(e,Py),tn(yb,e,c)});function TA(c,f){return Om(c,Q(f,3),Hn)}function OA(c,f){return Om(c,Q(f,3),Wf)}function AA(c,f){return c==null?c:$f(c,Q(f,3),Ve)}function RA(c,f){return c==null?c:Qm(c,Q(f,3),Ve)}function DA(c,f){return c&&Hn(c,Q(f,3))}function PA(c,f){return c&&Wf(c,Q(f,3))}function IA(c){return c==null?[]:yl(c,ae(c))}function LA(c){return c==null?[]:yl(c,Ve(c))}function wh(c,f,p){var b=c==null?e:wr(c,f);return b===e?p:b}function NA(c,f){return c!=null&&Ny(c,f,sE)}function _h(c,f){return c!=null&&Ny(c,f,oE)}var FA=Ty(function(c,f,p){f!=null&&typeof f.toString!="function"&&(f=rl.call(f)),c[f]=p},vh(Ue)),BA=Ty(function(c,f,p){f!=null&&typeof f.toString!="function"&&(f=rl.call(f)),Ct.call(c,f)?c[f].push(p):c[f]=[p]},Q),zA=pt(So);function ae(c){return We(c)?qm(c):qf(c)}function Ve(c){return We(c)?qm(c,!0):mE(c)}function HA(c,f){var p={};return f=Q(f,3),Hn(c,function(b,S,C){ri(p,f(b,S,C),b)}),p}function $A(c,f){var p={};return f=Q(f,3),Hn(c,function(b,S,C){ri(p,S,f(b,S,C))}),p}var WA=ks(function(c,f,p){bl(c,f,p)}),yb=ks(function(c,f,p,b){bl(c,f,p,b)}),VA=oi(function(c,f){var p={};if(c==null)return p;var b=!1;f=$t(f,function(C){return C=Li(C,c),b||(b=C.length>1),C}),$n(c,oh(c),p),b&&(p=mn(p,d|g|m,FE));for(var S=f.length;S--;)Zf(p,f[S]);return p});function UA(c,f){return bb(c,Pl(Q(f)))}var jA=oi(function(c,f){return c==null?{}:bE(c,f)});function bb(c,f){if(c==null)return{};var p=$t(oh(c),function(b){return[b]});return f=Q(f),cy(c,p,function(b,S){return f(b,S[0])})}function qA(c,f,p){f=Li(f,c);var b=-1,S=f.length;for(S||(S=1,c=e);++b<S;){var C=c==null?e:c[Wn(f[b])];C===e&&(b=S,C=p),c=li(C)?C.call(c):C}return c}function KA(c,f,p){return c==null?c:ko(c,f,p)}function JA(c,f,p,b){return b=typeof b=="function"?b:e,c==null?c:ko(c,f,p,b)}var xb=Ry(ae),wb=Ry(Ve);function XA(c,f,p){var b=ct(c),S=b||Fi(c)||Es(c);if(f=Q(f,4),p==null){var C=c&&c.constructor;S?p=b?new C:[]:Ut(c)?p=li(C)?vs(al(c)):{}:p={}}return(S?dn:Hn)(c,function(M,T,D){return f(p,M,T,D)}),p}function GA(c,f){return c==null?!0:Zf(c,f)}function YA(c,f,p){return c==null?c:py(c,f,eh(p))}function ZA(c,f,p,b){return b=typeof b=="function"?b:e,c==null?c:py(c,f,eh(p),b)}function Ts(c){return c==null?[]:Pf(c,ae(c))}function QA(c){return c==null?[]:Pf(c,Ve(c))}function tR(c,f,p){return p===e&&(p=f,f=e),p!==e&&(p=xn(p),p=p===p?p:0),f!==e&&(f=xn(f),f=f===f?f:0),xr(xn(c),f,p)}function eR(c,f,p){return f=ci(f),p===e?(p=f,f=0):p=ci(p),c=xn(c),aE(c,f,p)}function nR(c,f,p){if(p&&typeof p!="boolean"&&Le(c,f,p)&&(f=p=e),p===e&&(typeof f=="boolean"?(p=f,f=e):typeof c=="boolean"&&(p=c,c=e)),c===e&&f===e?(c=0,f=1):(c=ci(c),f===e?(f=c,c=0):f=ci(f)),c>f){var b=c;c=f,f=b}if(p||c%1||f%1){var S=Um();return Se(c+S*(f-c+IC("1e-"+((S+"").length-1))),f)}return Xf(c,f)}var iR=Cs(function(c,f,p){return f=f.toLowerCase(),c+(p?_b(f):f)});function _b(c){return Sh(Mt(c).toLowerCase())}function Sb(c){return c=Mt(c),c&&c.replace(sC,KC).replace(kC,"")}function rR(c,f,p){c=Mt(c),f=nn(f);var b=c.length;p=p===e?b:xr(ut(p),0,b);var S=p;return p-=f.length,p>=0&&c.slice(p,S)==f}function sR(c){return c=Mt(c),c&&zk.test(c)?c.replace(Qg,JC):c}function oR(c){return c=Mt(c),c&&jk.test(c)?c.replace(yf,"\\$&"):c}var aR=Cs(function(c,f,p){return c+(p?"-":"")+f.toLowerCase()}),lR=Cs(function(c,f,p){return c+(p?" ":"")+f.toLowerCase()}),cR=Cy("toLowerCase");function uR(c,f,p){c=Mt(c),f=ut(f);var b=f?bs(c):0;if(!f||b>=f)return c;var S=(f-b)/2;return kl(fl(S),p)+c+kl(ul(S),p)}function fR(c,f,p){c=Mt(c),f=ut(f);var b=f?bs(c):0;return f&&b<f?c+kl(f-b,p):c}function hR(c,f,p){c=Mt(c),f=ut(f);var b=f?bs(c):0;return f&&b<f?kl(f-b,p)+c:c}function dR(c,f,p){return p||f==null?f=0:f&&(f=+f),wM(Mt(c).replace(bf,""),f||0)}function pR(c,f,p){return(p?Le(c,f,p):f===e)?f=1:f=ut(f),Gf(Mt(c),f)}function gR(){var c=arguments,f=Mt(c[0]);return c.length<3?f:f.replace(c[1],c[2])}var mR=Cs(function(c,f,p){return c+(p?"_":"")+f.toLowerCase()});function yR(c,f,p){return p&&typeof p!="number"&&Le(c,f,p)&&(f=p=e),p=p===e?Ht:p>>>0,p?(c=Mt(c),c&&(typeof f=="string"||f!=null&&!xh(f))&&(f=nn(f),!f&&ys(c))?Ni(Rn(c),0,p):c.split(f,p)):[]}var bR=Cs(function(c,f,p){return c+(p?" ":"")+Sh(f)});function xR(c,f,p){return c=Mt(c),p=p==null?0:xr(ut(p),0,c.length),f=nn(f),c.slice(p,p+f.length)==f}function wR(c,f,p){var b=k.templateSettings;p&&Le(c,f,p)&&(f=e),c=Mt(c),f=Nl({},f,b,Dy);var S=Nl({},f.imports,b.imports,Dy),C=ae(S),M=Pf(S,C),T,D,H=0,$=f.interpolate||Xa,W="__p += '",q=Lf((f.escape||Xa).source+"|"+$.source+"|"+($===tm?Qk:Xa).source+"|"+(f.evaluate||Xa).source+"|$","g"),G="//# sourceURL="+(Ct.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++OC+"]")+`
`;c.replace(q,function(et,bt,St,sn,Ne,on){return St||(St=sn),W+=c.slice(H,on).replace(oC,XC),bt&&(T=!0,W+=`' +
__e(`+bt+`) +
'`),Ne&&(D=!0,W+=`';
`+Ne+`;
__p += '`),St&&(W+=`' +
((__t = (`+St+`)) == null ? '' : __t) +
'`),H=on+et.length,et}),W+=`';
`;var tt=Ct.call(f,"variable")&&f.variable;if(!tt)W=`with (obj) {
`+W+`
}
`;else if(Yk.test(tt))throw new at(a);W=(D?W.replace(Lk,""):W).replace(Nk,"$1").replace(Fk,"$1;"),W="function("+(tt||"obj")+`) {
`+(tt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(T?", __e = _.escape":"")+(D?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+W+`return __p
}`;var ft=kb(function(){return kt(C,G+"return "+W).apply(e,M)});if(ft.source=W,bh(ft))throw ft;return ft}function _R(c){return Mt(c).toLowerCase()}function SR(c){return Mt(c).toUpperCase()}function vR(c,f,p){if(c=Mt(c),c&&(p||f===e))return Pm(c);if(!c||!(f=nn(f)))return c;var b=Rn(c),S=Rn(f),C=Im(b,S),M=Lm(b,S)+1;return Ni(b,C,M).join("")}function kR(c,f,p){if(c=Mt(c),c&&(p||f===e))return c.slice(0,Fm(c)+1);if(!c||!(f=nn(f)))return c;var b=Rn(c),S=Lm(b,Rn(f))+1;return Ni(b,0,S).join("")}function CR(c,f,p){if(c=Mt(c),c&&(p||f===e))return c.replace(bf,"");if(!c||!(f=nn(f)))return c;var b=Rn(c),S=Im(b,Rn(f));return Ni(b,S).join("")}function MR(c,f){var p=Z,b=it;if(Ut(f)){var S="separator"in f?f.separator:S;p="length"in f?ut(f.length):p,b="omission"in f?nn(f.omission):b}c=Mt(c);var C=c.length;if(ys(c)){var M=Rn(c);C=M.length}if(p>=C)return c;var T=p-bs(b);if(T<1)return b;var D=M?Ni(M,0,T).join(""):c.slice(0,T);if(S===e)return D+b;if(M&&(T+=D.length-T),xh(S)){if(c.slice(T).search(S)){var H,$=D;for(S.global||(S=Lf(S.source,Mt(em.exec(S))+"g")),S.lastIndex=0;H=S.exec($);)var W=H.index;D=D.slice(0,W===e?T:W)}}else if(c.indexOf(nn(S),T)!=T){var q=D.lastIndexOf(S);q>-1&&(D=D.slice(0,q))}return D+b}function ER(c){return c=Mt(c),c&&Bk.test(c)?c.replace(Zg,nM):c}var TR=Cs(function(c,f,p){return c+(p?" ":"")+f.toUpperCase()}),Sh=Cy("toUpperCase");function vb(c,f,p){return c=Mt(c),f=p?e:f,f===e?YC(c)?sM(c):WC(c):c.match(f)||[]}var kb=pt(function(c,f){try{return tn(c,e,f)}catch(p){return bh(p)?p:new at(p)}}),OR=oi(function(c,f){return dn(f,function(p){p=Wn(p),ri(c,p,mh(c[p],c))}),c});function AR(c){var f=c==null?0:c.length,p=Q();return c=f?$t(c,function(b){if(typeof b[1]!="function")throw new pn(o);return[p(b[0]),b[1]]}):[],pt(function(b){for(var S=-1;++S<f;){var C=c[S];if(tn(C[0],this,b))return tn(C[1],this,b)}})}function RR(c){return nE(mn(c,d))}function vh(c){return function(){return c}}function DR(c,f){return c==null||c!==c?f:c}var PR=Ey(),IR=Ey(!0);function Ue(c){return c}function kh(c){return iy(typeof c=="function"?c:mn(c,d))}function LR(c){return sy(mn(c,d))}function NR(c,f){return oy(c,mn(f,d))}var FR=pt(function(c,f){return function(p){return So(p,c,f)}}),BR=pt(function(c,f){return function(p){return So(c,p,f)}});function Ch(c,f,p){var b=ae(f),S=yl(f,b);p==null&&!(Ut(f)&&(S.length||!b.length))&&(p=f,f=c,c=this,S=yl(f,ae(f)));var C=!(Ut(p)&&"chain"in p)||!!p.chain,M=li(c);return dn(S,function(T){var D=f[T];c[T]=D,M&&(c.prototype[T]=function(){var H=this.__chain__;if(C||H){var $=c(this.__wrapped__),W=$.__actions__=$e(this.__actions__);return W.push({func:D,args:arguments,thisArg:c}),$.__chain__=H,$}return D.apply(c,Ai([this.value()],arguments))})}),c}function zR(){return ge._===this&&(ge._=fM),this}function Mh(){}function HR(c){return c=ut(c),pt(function(f){return ay(f,c)})}var $R=ih($t),WR=ih(Tm),VR=ih(Tf);function Cb(c){return uh(c)?Of(Wn(c)):xE(c)}function UR(c){return function(f){return c==null?e:wr(c,f)}}var jR=Oy(),qR=Oy(!0);function Eh(){return[]}function Th(){return!1}function KR(){return{}}function JR(){return""}function XR(){return!0}function GR(c,f){if(c=ut(c),c<1||c>Et)return[];var p=Ht,b=Se(c,Ht);f=Q(f),c-=Ht;for(var S=Df(b,f);++p<c;)f(p);return S}function YR(c){return ct(c)?$t(c,Wn):rn(c)?[c]:$e(jy(Mt(c)))}function ZR(c){var f=++cM;return Mt(c)+f}var QR=vl(function(c,f){return c+f},0),tD=rh("ceil"),eD=vl(function(c,f){return c/f},1),nD=rh("floor");function iD(c){return c&&c.length?ml(c,Ue,Vf):e}function rD(c,f){return c&&c.length?ml(c,Q(f,2),Vf):e}function sD(c){return Rm(c,Ue)}function oD(c,f){return Rm(c,Q(f,2))}function aD(c){return c&&c.length?ml(c,Ue,Kf):e}function lD(c,f){return c&&c.length?ml(c,Q(f,2),Kf):e}var cD=vl(function(c,f){return c*f},1),uD=rh("round"),fD=vl(function(c,f){return c-f},0);function hD(c){return c&&c.length?Rf(c,Ue):0}function dD(c,f){return c&&c.length?Rf(c,Q(f,2)):0}return k.after=LO,k.ary=nb,k.assign=SA,k.assignIn=mb,k.assignInWith=Nl,k.assignWith=vA,k.at=kA,k.before=ib,k.bind=mh,k.bindAll=OR,k.bindKey=rb,k.castArray=KO,k.chain=Qy,k.chunk=nT,k.compact=iT,k.concat=rT,k.cond=AR,k.conforms=RR,k.constant=vh,k.countBy=hO,k.create=CA,k.curry=sb,k.curryRight=ob,k.debounce=ab,k.defaults=MA,k.defaultsDeep=EA,k.defer=NO,k.delay=FO,k.difference=sT,k.differenceBy=oT,k.differenceWith=aT,k.drop=lT,k.dropRight=cT,k.dropRightWhile=uT,k.dropWhile=fT,k.fill=hT,k.filter=pO,k.flatMap=yO,k.flatMapDeep=bO,k.flatMapDepth=xO,k.flatten=Xy,k.flattenDeep=dT,k.flattenDepth=pT,k.flip=BO,k.flow=PR,k.flowRight=IR,k.fromPairs=gT,k.functions=IA,k.functionsIn=LA,k.groupBy=wO,k.initial=yT,k.intersection=bT,k.intersectionBy=xT,k.intersectionWith=wT,k.invert=FA,k.invertBy=BA,k.invokeMap=SO,k.iteratee=kh,k.keyBy=vO,k.keys=ae,k.keysIn=Ve,k.map=Al,k.mapKeys=HA,k.mapValues=$A,k.matches=LR,k.matchesProperty=NR,k.memoize=Dl,k.merge=WA,k.mergeWith=yb,k.method=FR,k.methodOf=BR,k.mixin=Ch,k.negate=Pl,k.nthArg=HR,k.omit=VA,k.omitBy=UA,k.once=zO,k.orderBy=kO,k.over=$R,k.overArgs=HO,k.overEvery=WR,k.overSome=VR,k.partial=yh,k.partialRight=lb,k.partition=CO,k.pick=jA,k.pickBy=bb,k.property=Cb,k.propertyOf=UR,k.pull=kT,k.pullAll=Yy,k.pullAllBy=CT,k.pullAllWith=MT,k.pullAt=ET,k.range=jR,k.rangeRight=qR,k.rearg=$O,k.reject=TO,k.remove=TT,k.rest=WO,k.reverse=ph,k.sampleSize=AO,k.set=KA,k.setWith=JA,k.shuffle=RO,k.slice=OT,k.sortBy=IO,k.sortedUniq=NT,k.sortedUniqBy=FT,k.split=yR,k.spread=VO,k.tail=BT,k.take=zT,k.takeRight=HT,k.takeRightWhile=$T,k.takeWhile=WT,k.tap=iO,k.throttle=UO,k.thru=Ol,k.toArray=db,k.toPairs=xb,k.toPairsIn=wb,k.toPath=YR,k.toPlainObject=gb,k.transform=XA,k.unary=jO,k.union=VT,k.unionBy=UT,k.unionWith=jT,k.uniq=qT,k.uniqBy=KT,k.uniqWith=JT,k.unset=GA,k.unzip=gh,k.unzipWith=Zy,k.update=YA,k.updateWith=ZA,k.values=Ts,k.valuesIn=QA,k.without=XT,k.words=vb,k.wrap=qO,k.xor=GT,k.xorBy=YT,k.xorWith=ZT,k.zip=QT,k.zipObject=tO,k.zipObjectDeep=eO,k.zipWith=nO,k.entries=xb,k.entriesIn=wb,k.extend=mb,k.extendWith=Nl,Ch(k,k),k.add=QR,k.attempt=kb,k.camelCase=iR,k.capitalize=_b,k.ceil=tD,k.clamp=tR,k.clone=JO,k.cloneDeep=GO,k.cloneDeepWith=YO,k.cloneWith=XO,k.conformsTo=ZO,k.deburr=Sb,k.defaultTo=DR,k.divide=eD,k.endsWith=rR,k.eq=Pn,k.escape=sR,k.escapeRegExp=oR,k.every=dO,k.find=gO,k.findIndex=Ky,k.findKey=TA,k.findLast=mO,k.findLastIndex=Jy,k.findLastKey=OA,k.floor=nD,k.forEach=tb,k.forEachRight=eb,k.forIn=AA,k.forInRight=RA,k.forOwn=DA,k.forOwnRight=PA,k.get=wh,k.gt=QO,k.gte=tA,k.has=NA,k.hasIn=_h,k.head=Gy,k.identity=Ue,k.includes=_O,k.indexOf=mT,k.inRange=eR,k.invoke=zA,k.isArguments=vr,k.isArray=ct,k.isArrayBuffer=eA,k.isArrayLike=We,k.isArrayLikeObject=Yt,k.isBoolean=nA,k.isBuffer=Fi,k.isDate=iA,k.isElement=rA,k.isEmpty=sA,k.isEqual=oA,k.isEqualWith=aA,k.isError=bh,k.isFinite=lA,k.isFunction=li,k.isInteger=cb,k.isLength=Il,k.isMap=ub,k.isMatch=cA,k.isMatchWith=uA,k.isNaN=fA,k.isNative=hA,k.isNil=pA,k.isNull=dA,k.isNumber=fb,k.isObject=Ut,k.isObjectLike=qt,k.isPlainObject=To,k.isRegExp=xh,k.isSafeInteger=gA,k.isSet=hb,k.isString=Ll,k.isSymbol=rn,k.isTypedArray=Es,k.isUndefined=mA,k.isWeakMap=yA,k.isWeakSet=bA,k.join=_T,k.kebabCase=aR,k.last=bn,k.lastIndexOf=ST,k.lowerCase=lR,k.lowerFirst=cR,k.lt=xA,k.lte=wA,k.max=iD,k.maxBy=rD,k.mean=sD,k.meanBy=oD,k.min=aD,k.minBy=lD,k.stubArray=Eh,k.stubFalse=Th,k.stubObject=KR,k.stubString=JR,k.stubTrue=XR,k.multiply=cD,k.nth=vT,k.noConflict=zR,k.noop=Mh,k.now=Rl,k.pad=uR,k.padEnd=fR,k.padStart=hR,k.parseInt=dR,k.random=nR,k.reduce=MO,k.reduceRight=EO,k.repeat=pR,k.replace=gR,k.result=qA,k.round=uD,k.runInContext=A,k.sample=OO,k.size=DO,k.snakeCase=mR,k.some=PO,k.sortedIndex=AT,k.sortedIndexBy=RT,k.sortedIndexOf=DT,k.sortedLastIndex=PT,k.sortedLastIndexBy=IT,k.sortedLastIndexOf=LT,k.startCase=bR,k.startsWith=xR,k.subtract=fD,k.sum=hD,k.sumBy=dD,k.template=wR,k.times=GR,k.toFinite=ci,k.toInteger=ut,k.toLength=pb,k.toLower=_R,k.toNumber=xn,k.toSafeInteger=_A,k.toString=Mt,k.toUpper=SR,k.trim=vR,k.trimEnd=kR,k.trimStart=CR,k.truncate=MR,k.unescape=ER,k.uniqueId=ZR,k.upperCase=TR,k.upperFirst=Sh,k.each=tb,k.eachRight=eb,k.first=Gy,Ch(k,(function(){var c={};return Hn(k,function(f,p){Ct.call(k.prototype,p)||(c[p]=f)}),c})(),{chain:!1}),k.VERSION=i,dn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){k[c].placeholder=k}),dn(["drop","take"],function(c,f){wt.prototype[c]=function(p){p=p===e?1:se(ut(p),0);var b=this.__filtered__&&!f?new wt(this):this.clone();return b.__filtered__?b.__takeCount__=Se(p,b.__takeCount__):b.__views__.push({size:Se(p,Ht),type:c+(b.__dir__<0?"Right":"")}),b},wt.prototype[c+"Right"]=function(p){return this.reverse()[c](p).reverse()}}),dn(["filter","map","takeWhile"],function(c,f){var p=f+1,b=p==At||p==ot;wt.prototype[c]=function(S){var C=this.clone();return C.__iteratees__.push({iteratee:Q(S,3),type:p}),C.__filtered__=C.__filtered__||b,C}}),dn(["head","last"],function(c,f){var p="take"+(f?"Right":"");wt.prototype[c]=function(){return this[p](1).value()[0]}}),dn(["initial","tail"],function(c,f){var p="drop"+(f?"":"Right");wt.prototype[c]=function(){return this.__filtered__?new wt(this):this[p](1)}}),wt.prototype.compact=function(){return this.filter(Ue)},wt.prototype.find=function(c){return this.filter(c).head()},wt.prototype.findLast=function(c){return this.reverse().find(c)},wt.prototype.invokeMap=pt(function(c,f){return typeof c=="function"?new wt(this):this.map(function(p){return So(p,c,f)})}),wt.prototype.reject=function(c){return this.filter(Pl(Q(c)))},wt.prototype.slice=function(c,f){c=ut(c);var p=this;return p.__filtered__&&(c>0||f<0)?new wt(p):(c<0?p=p.takeRight(-c):c&&(p=p.drop(c)),f!==e&&(f=ut(f),p=f<0?p.dropRight(-f):p.take(f-c)),p)},wt.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},wt.prototype.toArray=function(){return this.take(Ht)},Hn(wt.prototype,function(c,f){var p=/^(?:filter|find|map|reject)|While$/.test(f),b=/^(?:head|last)$/.test(f),S=k[b?"take"+(f=="last"?"Right":""):f],C=b||/^find/.test(f);S&&(k.prototype[f]=function(){var M=this.__wrapped__,T=b?[1]:arguments,D=M instanceof wt,H=T[0],$=D||ct(M),W=function(bt){var St=S.apply(k,Ai([bt],T));return b&&q?St[0]:St};$&&p&&typeof H=="function"&&H.length!=1&&(D=$=!1);var q=this.__chain__,G=!!this.__actions__.length,tt=C&&!q,ft=D&&!G;if(!C&&$){M=ft?M:new wt(this);var et=c.apply(M,T);return et.__actions__.push({func:Ol,args:[W],thisArg:e}),new gn(et,q)}return tt&&ft?c.apply(this,T):(et=this.thru(W),tt?b?et.value()[0]:et.value():et)})}),dn(["pop","push","shift","sort","splice","unshift"],function(c){var f=el[c],p=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",b=/^(?:pop|shift)$/.test(c);k.prototype[c]=function(){var S=arguments;if(b&&!this.__chain__){var C=this.value();return f.apply(ct(C)?C:[],S)}return this[p](function(M){return f.apply(ct(M)?M:[],S)})}}),Hn(wt.prototype,function(c,f){var p=k[f];if(p){var b=p.name+"";Ct.call(Ss,b)||(Ss[b]=[]),Ss[b].push({name:f,func:p})}}),Ss[Sl(e,v).name]=[{name:"wrapper",func:e}],wt.prototype.clone=EM,wt.prototype.reverse=TM,wt.prototype.value=OM,k.prototype.at=rO,k.prototype.chain=sO,k.prototype.commit=oO,k.prototype.next=aO,k.prototype.plant=cO,k.prototype.reverse=uO,k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=fO,k.prototype.first=k.prototype.head,go&&(k.prototype[go]=lO),k}),xs=oM();gr?((gr.exports=xs)._=xs,kf._=xs):ge._=xs}).call(W$)})(jo,jo.exports)),jo.exports}var U$=V$();const j$=$$(U$),q$=()=>({newsEvents:{data:[],links:[],meta:{}},search:"",currentTab:"all",sort:"latest",loading:!0,modalOpen:!1,modalTitle:"",saving:!1,init(){this.fetchData(),this.$watch("search",()=>this.debouncedFetch())},debouncedFetch:j$.debounce(function(){this.fetchData()},300),setTab(n){this.currentTab=n,this.fetchData()},async fetchData(n=null){this.loading=!0;let t=n;if(!t){const e=new URLSearchParams;this.search&&e.append("search",this.search),this.currentTab!=="all"&&e.append("type",this.currentTab),this.sort!=="latest"&&e.append("sort",this.sort),t=`${window.location.pathname}?${e.toString()}`,window.history.replaceState(null,"",t)}try{const i=await(await fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();this.newsEvents=i}catch(e){console.error("Fetch failed:",e)}finally{this.loading=!1}},async openModal(n,t){this.modalTitle=t,this.modalOpen=!0,document.getElementById("modal-content").innerHTML='<div class="flex justify-center py-20"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-brand-600"></div></div>';try{const i=await(await fetch(n,{headers:{"X-Requested-With":"XMLHttpRequest"}})).text();document.getElementById("modal-content").innerHTML=i;const r=document.getElementById("news-form")||document.querySelector("#modal-content form");r&&(r.onsubmit=s=>{s.preventDefault(),this.saveForm(s.target)})}catch(e){console.error("Modal load failed:",e),this.modalOpen=!1}},closeModal(){this.modalOpen=!1,document.getElementById("modal-content").innerHTML=""},async saveForm(n){this.saving=!0;const t=new FormData(n);document.querySelectorAll(".error-message").forEach(e=>e.textContent="");try{const e=await fetch(n.action,{method:"POST",body:t,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}}),i=await e.json();if(e.ok)this.closeModal(),this.fetchData(),this.showFlash(i.success||"Saved successfully");else if(e.status===422)i.errors&&Object.keys(i.errors).forEach(r=>{const s=r.split(".")[0];alert(`Error in ${s}: ${i.errors[r][0]}`)});else throw new Error(i.message||"Unknown error")}catch(e){console.error("Save failed:",e),alert("Something went wrong. Please try again.")}finally{this.saving=!1}},showFlash(n,t="success"){window.dispatchEvent(new CustomEvent("toast",{detail:{message:n,type:t}}))},formatDate(n){return n?new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A"}}),Av=()=>({uploadModalOpen:!1,deleteModalOpen:!1,deleteUrl:"",lightboxOpen:!1,currentIndex:0,allPhotos:[],captionModalOpen:!1,editingCaptionId:null,editingCaptionText:"",init(){this.$nextTick(()=>{const n=document.getElementById("photos-upload"),t=document.getElementById("file-list");n&&t&&n.addEventListener("change",()=>{t.innerHTML=Array.from(n.files).map(e=>`<div class="bg-brand-50 p-2 rounded-lg truncate"> ${e.name}</div>`).join("")})})},openUploadModal(){this.uploadModalOpen=!0},confirmDelete(n){this.deleteUrl=n,this.deleteModalOpen=!0},editCaption(n,t){this.editingCaptionId=n,this.editingCaptionText=t,this.captionModalOpen=!0},async saveCaption(){try{if((await fetch(`/admin/gallery/photo/${this.editingCaptionId}`,{method:"PATCH",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({caption:this.editingCaptionText})})).ok){const t=document.getElementById(`photo-caption-${this.editingCaptionId}`);t&&(t.textContent=this.editingCaptionText||"Untitled Asset"),this.captionModalOpen=!1,this.showFlash("Caption updated successfully.");const e=this.allPhotos.find(i=>i.id===this.editingCaptionId);e&&(e.caption=this.editingCaptionText||"No caption provided")}}catch(n){console.error("Save failed:",n),alert("Failed to save caption.")}},openLightbox(n,t){this.allPhotos=t,this.currentIndex=n,this.lightboxOpen=!0},prevPhoto(){this.currentIndex=(this.currentIndex-1+this.allPhotos.length)%this.allPhotos.length},nextPhoto(){this.currentIndex=(this.currentIndex+1)%this.allPhotos.length},get currentPhoto(){return this.allPhotos[this.currentIndex]||{url:"",caption:""}},async executeDelete(){try{const n=await fetch(this.deleteUrl,{method:"DELETE",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}}),t=await n.json();n.ok&&(this.deleteModalOpen=!1,this.showFlash(t.success||"Deleted successfully"),window.router&&typeof window.router.reload=="function"?window.router.reload():setTimeout(()=>window.location.reload(),1e3))}catch(n){console.error("Delete failed:",n),alert("Failed to delete photo.")}},showFlash(n){if(window.showToast){window.showToast(n);return}const t=document.getElementById("flash-message");t&&(t.innerHTML=`<div class="fixed top-8 right-8 z-[300] bg-gray-900 border border-white/10 backdrop-blur-xl text-white px-10 py-5 rounded-[2rem] shadow-2xl animate-in slide-in-from-right duration-500 flex items-center gap-6">
            <div class="p-3 bg-green-500 rounded-2xl shadow-lg shadow-green-500/20"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" /></svg></div>
            <div class="flex flex-col text-left">
                <span class="text-[9px] font-black text-gray-400 uppercase tracking-[0.2em]">Archival Record Updated</span>
                <span class="font-black uppercase text-[11px] tracking-widest">${n}</span>
            </div>
        </div>`,setTimeout(()=>t.innerHTML="",4e3))}});function Ua(n){return n+.5|0}const Xi=(n,t,e)=>Math.max(Math.min(n,e),t);function qo(n){return Xi(Ua(n*2.55),0,255)}function ir(n){return Xi(Ua(n*255),0,255)}function xi(n){return Xi(Ua(n/2.55)/100,0,1)}function Cx(n){return Xi(Ua(n*100),0,100)}const _n={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},yp=[..."0123456789ABCDEF"],K$=n=>yp[n&15],J$=n=>yp[(n&240)>>4]+yp[n&15],nc=n=>(n&240)>>4===(n&15),X$=n=>nc(n.r)&&nc(n.g)&&nc(n.b)&&nc(n.a);function G$(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&_n[n[1]]*17,g:255&_n[n[2]]*17,b:255&_n[n[3]]*17,a:t===5?_n[n[4]]*17:255}:(t===7||t===9)&&(e={r:_n[n[1]]<<4|_n[n[2]],g:_n[n[3]]<<4|_n[n[4]],b:_n[n[5]]<<4|_n[n[6]],a:t===9?_n[n[7]]<<4|_n[n[8]]:255})),e}const Y$=(n,t)=>n<255?t(n):"";function Z$(n){var t=X$(n)?K$:J$;return n?"#"+t(n.r)+t(n.g)+t(n.b)+Y$(n.a,t):void 0}const Q$=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Rv(n,t,e){const i=t*Math.min(e,1-e),r=(s,o=(s+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function t3(n,t,e){const i=(r,s=(r+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function e3(n,t,e){const i=Rv(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function n3(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function Pg(n){const e=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(e,i,r),o=Math.min(e,i,r),a=(s+o)/2;let l,u,h;return s!==o&&(h=s-o,u=a>.5?h/(2-s-o):h/(s+o),l=n3(e,i,r,h,s),l=l*60+.5),[l|0,u||0,a]}function Ig(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(ir)}function Lg(n,t,e){return Ig(Rv,n,t,e)}function i3(n,t,e){return Ig(e3,n,t,e)}function r3(n,t,e){return Ig(t3,n,t,e)}function Dv(n){return(n%360+360)%360}function s3(n){const t=Q$.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?qo(+t[5]):ir(+t[5]));const r=Dv(+t[2]),s=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=i3(r,s,o):t[1]==="hsv"?i=r3(r,s,o):i=Lg(r,s,o),{r:i[0],g:i[1],b:i[2],a:e}}function o3(n,t){var e=Pg(n);e[0]=Dv(e[0]+t),e=Lg(e),n.r=e[0],n.g=e[1],n.b=e[2]}function a3(n){if(!n)return;const t=Pg(n),e=t[0],i=Cx(t[1]),r=Cx(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${xi(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const Mx={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ex={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function l3(){const n={},t=Object.keys(Ex),e=Object.keys(Mx);let i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<e.length;r++)s=e[r],a=a.replace(s,Mx[s]);s=parseInt(Ex[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}let ic;function c3(n){ic||(ic=l3(),ic.transparent=[0,0,0,0]);const t=ic[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const u3=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function f3(n){const t=u3.exec(n);let e=255,i,r,s;if(t){if(t[7]!==i){const o=+t[7];e=t[8]?qo(o):Xi(o*255,0,255)}return i=+t[1],r=+t[3],s=+t[5],i=255&(t[2]?qo(i):Xi(i,0,255)),r=255&(t[4]?qo(r):Xi(r,0,255)),s=255&(t[6]?qo(s):Xi(s,0,255)),{r:i,g:r,b:s,a:e}}}function h3(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${xi(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const ld=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Rs=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function d3(n,t,e){const i=Rs(xi(n.r)),r=Rs(xi(n.g)),s=Rs(xi(n.b));return{r:ir(ld(i+e*(Rs(xi(t.r))-i))),g:ir(ld(r+e*(Rs(xi(t.g))-r))),b:ir(ld(s+e*(Rs(xi(t.b))-s))),a:n.a+e*(t.a-n.a)}}function rc(n,t,e){if(n){let i=Pg(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=Lg(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Pv(n,t){return n&&Object.assign(t||{},n)}function Tx(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=ir(n[3]))):(t=Pv(n,{r:0,g:0,b:0,a:1}),t.a=ir(t.a)),t}function p3(n){return n.charAt(0)==="r"?f3(n):s3(n)}class Ta{constructor(t){if(t instanceof Ta)return t;const e=typeof t;let i;e==="object"?i=Tx(t):e==="string"&&(i=G$(t)||c3(t)||p3(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Pv(this._rgb);return t&&(t.a=xi(t.a)),t}set rgb(t){this._rgb=Tx(t)}rgbString(){return this._valid?h3(this._rgb):void 0}hexString(){return this._valid?Z$(this._rgb):void 0}hslString(){return this._valid?a3(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let s;const o=e===s?.5:e,a=2*o-1,l=i.a-r.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-u,i.r=255&u*i.r+s*r.r+.5,i.g=255&u*i.g+s*r.g+.5,i.b=255&u*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=d3(this._rgb,t._rgb,e)),this}clone(){return new Ta(this.rgb)}alpha(t){return this._rgb.a=ir(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Ua(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return rc(this._rgb,2,t),this}darken(t){return rc(this._rgb,2,-t),this}saturate(t){return rc(this._rgb,1,t),this}desaturate(t){return rc(this._rgb,1,-t),this}rotate(t){return o3(this._rgb,t),this}}function pi(){}const g3=(()=>{let n=0;return()=>n++})();function xt(n){return n==null}function Wt(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function _t(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Xt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function an(n,t){return Xt(n)?n:t}function lt(n,t){return typeof n>"u"?t:n}const m3=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,Iv=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Lt(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Tt(n,t,e,i){let r,s,o;if(Wt(n))for(s=n.length,r=0;r<s;r++)t.call(e,n[r],r);else if(_t(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)t.call(e,n[o[r]],o[r])}function bu(n,t){let e,i,r,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function xu(n){if(Wt(n))return n.map(xu);if(_t(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=xu(n[e[r]]);return t}return n}function Lv(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function y3(n,t,e,i){if(!Lv(n))return;const r=t[n],s=e[n];_t(r)&&_t(s)?Oa(r,s,i):t[n]=xu(s)}function Oa(n,t,e){const i=Wt(t)?t:[t],r=i.length;if(!_t(n))return n;e=e||{};const s=e.merger||y3;let o;for(let a=0;a<r;++a){if(o=i[a],!_t(o))continue;const l=Object.keys(o);for(let u=0,h=l.length;u<h;++u)s(l[u],n,o,e)}return n}function ca(n,t){return Oa(n,t,{merger:b3})}function b3(n,t,e){if(!Lv(n))return;const i=t[n],r=e[n];_t(i)&&_t(r)?ca(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=xu(r))}const Ox={"":n=>n,x:n=>n.x,y:n=>n.y};function x3(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function w3(n){const t=x3(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function ar(n,t){return(Ox[t]||(Ox[t]=w3(t)))(n)}function Ng(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Aa=n=>typeof n<"u",lr=n=>typeof n=="function",Ax=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function _3(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const vt=Math.PI,Bt=2*vt,S3=Bt+vt,wu=Number.POSITIVE_INFINITY,v3=vt/180,Qt=vt/2,Cr=vt/4,Rx=vt*2/3,Gi=Math.log10,Zn=Math.sign;function ua(n,t,e){return Math.abs(n-t)<e}function Dx(n){const t=Math.round(n);n=ua(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(Gi(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function k3(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}function C3(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Gs(n){return!C3(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function M3(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function Nv(n,t,e){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Nn(n){return n*(vt/180)}function Fg(n){return n*(180/vt)}function Px(n){if(!Xt(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function Fv(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let s=Math.atan2(i,e);return s<-.5*vt&&(s+=Bt),{angle:s,distance:r}}function bp(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function E3(n,t){return(n-t+S3)%Bt-vt}function Me(n){return(n%Bt+Bt)%Bt}function Ra(n,t,e,i){const r=Me(n),s=Me(t),o=Me(e),a=Me(s-r),l=Me(o-r),u=Me(r-s),h=Me(r-o);return r===s||r===o||i&&s===o||a>l&&u<h}function ue(n,t,e){return Math.max(t,Math.min(e,n))}function T3(n){return ue(n,-32768,32767)}function _i(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function Bg(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,e(s)?r=s:i=s;return{lo:r,hi:i}}const Si=(n,t,e,i)=>Bg(n,e,i?r=>{const s=n[r][t];return s<e||s===e&&n[r+1][t]===e}:r=>n[r][t]<e),O3=(n,t,e)=>Bg(n,e,i=>n[i][t]>=e);function A3(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const Bv=["push","pop","shift","splice","unshift"];function R3(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Bv.forEach(e=>{const i="_onData"+Ng(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function Ix(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(Bv.forEach(s=>{delete n[s]}),delete n._chartjs)}function zv(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const Hv=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function $v(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,Hv.call(window,()=>{i=!1,n.apply(t,e)}))}}function D3(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const zg=n=>n==="start"?"left":n==="end"?"right":"center",ke=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,P3=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function Wv(n,t,e){const i=t.length;let r=0,s=i;if(n._sorted){const{iScale:o,vScale:a,_parsed:l}=n,u=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,h=o.axis,{min:d,max:g,minDefined:m,maxDefined:y}=o.getUserBounds();if(m){if(r=Math.min(Si(l,h,d).lo,e?i:Si(t,h,o.getPixelForValue(d)).lo),u){const x=l.slice(0,r+1).reverse().findIndex(w=>!xt(w[a.axis]));r-=Math.max(0,x)}r=ue(r,0,i-1)}if(y){let x=Math.max(Si(l,o.axis,g,!0).hi+1,e?0:Si(t,h,o.getPixelForValue(g),!0).hi+1);if(u){const w=l.slice(x-1).findIndex(v=>!xt(v[a.axis]));x+=Math.max(0,w)}s=ue(x,r,i)-r}else s=i-r}return{start:r,count:s}}function Vv(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,r),s}const sc=n=>n===0||n===1,Lx=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Bt/e)),Nx=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Bt/e)+1,fa={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Qt)+1,easeOutSine:n=>Math.sin(n*Qt),easeInOutSine:n=>-.5*(Math.cos(vt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>sc(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>sc(n)?n:Lx(n,.075,.3),easeOutElastic:n=>sc(n)?n:Nx(n,.075,.3),easeInOutElastic(n){return sc(n)?n:n<.5?.5*Lx(n*2,.1125,.45):.5+.5*Nx(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-fa.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?fa.easeInBounce(n*2)*.5:fa.easeOutBounce(n*2-1)*.5+.5};function Hg(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Fx(n){return Hg(n)?n:new Ta(n)}function cd(n){return Hg(n)?n:new Ta(n).saturate(.5).darken(.1).hexString()}const I3=["x","y","borderWidth","radius","tension"],L3=["color","borderColor","backgroundColor"];function N3(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:L3},numbers:{type:"number",properties:I3}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function F3(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Bx=new Map;function B3(n,t){t=t||{};const e=n+JSON.stringify(t);let i=Bx.get(e);return i||(i=new Intl.NumberFormat(n,t),Bx.set(e,i)),i}function ja(n,t,e){return B3(t,e).format(n)}const Uv={values(n){return Wt(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let r,s=n;if(e.length>1){const u=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),s=z3(n,e)}const o=Gi(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ja(n,i,l)},logarithmic(n,t,e){if(n===0)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(Gi(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?Uv.numeric.call(this,n,t,e):""}};function z3(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Qu={formatters:Uv};function H3(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Qu.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const cs=Object.create(null),xp=Object.create(null);function ha(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const s=e[i];n=n[s]||(n[s]=Object.create(null))}return n}function ud(n,t,e){return typeof t=="string"?Oa(ha(n,t),e):Oa(ha(n,""),t)}class $3{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>cd(r.backgroundColor),this.hoverBorderColor=(i,r)=>cd(r.borderColor),this.hoverColor=(i,r)=>cd(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return ud(this,t,e)}get(t){return ha(this,t)}describe(t,e){return ud(xp,t,e)}override(t,e){return ud(cs,t,e)}route(t,e,i,r){const s=ha(this,t),o=ha(this,i),a="_"+e;Object.defineProperties(s,{[a]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],u=o[r];return _t(l)?Object.assign({},u,l):lt(l,u)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var Vt=new $3({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[N3,F3,H3]);function W3(n){return!n||xt(n.size)||xt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function _u(n,t,e,i,r){let s=t[r];return s||(s=t[r]=n.measureText(r).width,e.push(r)),s>i&&(i=s),i}function V3(n,t,e,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0;const a=e.length;let l,u,h,d,g;for(l=0;l<a;l++)if(d=e[l],d!=null&&!Wt(d))o=_u(n,r,s,o,d);else if(Wt(d))for(u=0,h=d.length;u<h;u++)g=d[u],g!=null&&!Wt(g)&&(o=_u(n,r,s,o,g));n.restore();const m=s.length/2;if(m>e.length){for(l=0;l<m;l++)delete r[s[l]];s.splice(0,m)}return o}function Mr(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function zx(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function wp(n,t,e,i){jv(n,t,e,i,null)}function jv(n,t,e,i,r){let s,o,a,l,u,h,d,g;const m=t.pointStyle,y=t.rotation,x=t.radius;let w=(y||0)*v3;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(w),n.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),n.restore();return}if(!(isNaN(x)||x<=0)){switch(n.beginPath(),m){default:r?n.ellipse(e,i,r/2,x,0,0,Bt):n.arc(e,i,x,0,Bt),n.closePath();break;case"triangle":h=r?r/2:x,n.moveTo(e+Math.sin(w)*h,i-Math.cos(w)*x),w+=Rx,n.lineTo(e+Math.sin(w)*h,i-Math.cos(w)*x),w+=Rx,n.lineTo(e+Math.sin(w)*h,i-Math.cos(w)*x),n.closePath();break;case"rectRounded":u=x*.516,l=x-u,o=Math.cos(w+Cr)*l,d=Math.cos(w+Cr)*(r?r/2-u:l),a=Math.sin(w+Cr)*l,g=Math.sin(w+Cr)*(r?r/2-u:l),n.arc(e-d,i-a,u,w-vt,w-Qt),n.arc(e+g,i-o,u,w-Qt,w),n.arc(e+d,i+a,u,w,w+Qt),n.arc(e-g,i+o,u,w+Qt,w+vt),n.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*x,h=r?r/2:l,n.rect(e-h,i-l,2*h,2*l);break}w+=Cr;case"rectRot":d=Math.cos(w)*(r?r/2:x),o=Math.cos(w)*x,a=Math.sin(w)*x,g=Math.sin(w)*(r?r/2:x),n.moveTo(e-d,i-a),n.lineTo(e+g,i-o),n.lineTo(e+d,i+a),n.lineTo(e-g,i+o),n.closePath();break;case"crossRot":w+=Cr;case"cross":d=Math.cos(w)*(r?r/2:x),o=Math.cos(w)*x,a=Math.sin(w)*x,g=Math.sin(w)*(r?r/2:x),n.moveTo(e-d,i-a),n.lineTo(e+d,i+a),n.moveTo(e+g,i-o),n.lineTo(e-g,i+o);break;case"star":d=Math.cos(w)*(r?r/2:x),o=Math.cos(w)*x,a=Math.sin(w)*x,g=Math.sin(w)*(r?r/2:x),n.moveTo(e-d,i-a),n.lineTo(e+d,i+a),n.moveTo(e+g,i-o),n.lineTo(e-g,i+o),w+=Cr,d=Math.cos(w)*(r?r/2:x),o=Math.cos(w)*x,a=Math.sin(w)*x,g=Math.sin(w)*(r?r/2:x),n.moveTo(e-d,i-a),n.lineTo(e+d,i+a),n.moveTo(e+g,i-o),n.lineTo(e-g,i+o);break;case"line":o=r?r/2:Math.cos(w)*x,a=Math.sin(w)*x,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(w)*(r?r/2:x),i+Math.sin(w)*x);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function vi(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function tf(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function ef(n){n.restore()}function U3(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if(r==="middle"){const s=(t.x+e.x)/2;n.lineTo(s,t.y),n.lineTo(s,e.y)}else r==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function j3(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function q3(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),xt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function K3(n,t,e,i,r){if(r.strikethrough||r.underline){const s=n.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=e-s.actualBoundingBoxAscent,u=e+s.actualBoundingBoxDescent,h=r.strikethrough?(l+u)/2:u;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,h),n.lineTo(a,h),n.stroke()}}function J3(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function us(n,t,e,i,r,s={}){const o=Wt(t)?t:[t],a=s.strokeWidth>0&&s.strokeColor!=="";let l,u;for(n.save(),n.font=r.string,q3(n,s),l=0;l<o.length;++l)u=o[l],s.backdrop&&J3(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),xt(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(u,e,i,s.maxWidth)),n.fillText(u,e,i,s.maxWidth),K3(n,e,i,u,s),i+=Number(r.lineHeight);n.restore()}function Da(n,t){const{x:e,y:i,w:r,h:s,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*vt,vt,!0),n.lineTo(e,i+s-o.bottomLeft),n.arc(e+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,vt,Qt,!0),n.lineTo(e+r-o.bottomRight,i+s),n.arc(e+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Qt,0,!0),n.lineTo(e+r,i+o.topRight),n.arc(e+r-o.topRight,i+o.topRight,o.topRight,0,-Qt,!0),n.lineTo(e+o.topLeft,i)}const X3=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,G3=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Y3(n,t){const e=(""+n).match(X3);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const Z3=n=>+n||0;function $g(n,t){const e={},i=_t(t),r=i?Object.keys(t):t,s=_t(n)?i?o=>lt(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of r)e[o]=Z3(s(o));return e}function qv(n){return $g(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Gr(n){return $g(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ae(n){const t=qv(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function oe(n,t){n=n||{},t=t||Vt.font;let e=lt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=lt(n.style,t.style);i&&!(""+i).match(G3)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:lt(n.family,t.family),lineHeight:Y3(lt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:lt(n.weight,t.weight),string:""};return r.string=W3(r),r}function Ko(n,t,e,i){let r,s,o;for(r=0,s=n.length;r<s;++r)if(o=n[r],o!==void 0&&o!==void 0)return o}function Q3(n,t,e){const{min:i,max:r}=n,s=Iv(t,(r-i)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function dr(n,t){return Object.assign(Object.create(n),t)}function Wg(n,t=[""],e,i,r=()=>n[0]){const s=e||n;typeof i>"u"&&(i=Gv("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>Wg([a,...n],t,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return Jv(a,l,()=>aW(l,t,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return $x(a).includes(l)},ownKeys(a){return $x(a)},set(a,l,u){const h=a._storage||(a._storage=r());return a[l]=h[l]=u,delete a._keys,!0}})}function Ys(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:Kv(n,i),setContext:s=>Ys(n,s,e,i),override:s=>Ys(n.override(s),t,e,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return Jv(s,o,()=>eW(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function Kv(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:lr(e)?e:()=>e,isIndexable:lr(i)?i:()=>i}}const tW=(n,t)=>n?n+Ng(t):t,Vg=(n,t)=>_t(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Jv(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function eW(n,t,e){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n;let a=i[t];return lr(a)&&o.isScriptable(t)&&(a=nW(t,a,n,e)),Wt(a)&&a.length&&(a=iW(t,a,n,o.isIndexable)),Vg(t,a)&&(a=Ys(a,r,s&&s[t],o)),a}function nW(n,t,e,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=t(s,o||i);return a.delete(n),Vg(n,l)&&(l=Ug(r._scopes,r,n,l)),l}function iW(n,t,e,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=e;if(typeof s.index<"u"&&i(n))return t[s.index%t.length];if(_t(t[0])){const l=t,u=r._scopes.filter(h=>h!==l);t=[];for(const h of l){const d=Ug(u,r,n,h);t.push(Ys(d,s,o&&o[n],a))}}return t}function Xv(n,t,e){return lr(n)?n(t,e):n}const rW=(n,t)=>n===!0?t:typeof n=="string"?ar(t,n):void 0;function sW(n,t,e,i,r){for(const s of t){const o=rW(e,s);if(o){n.add(o);const a=Xv(o._fallback,e,r);if(typeof a<"u"&&a!==e&&a!==i)return a}else if(o===!1&&typeof i<"u"&&e!==i)return null}return!1}function Ug(n,t,e,i){const r=t._rootScopes,s=Xv(t._fallback,e,i),o=[...n,...r],a=new Set;a.add(i);let l=Hx(a,o,e,s||e,i);return l===null||typeof s<"u"&&s!==e&&(l=Hx(a,o,s,l,i),l===null)?!1:Wg(Array.from(a),[""],r,s,()=>oW(t,e,i))}function Hx(n,t,e,i,r){for(;e;)e=sW(n,t,e,i,r);return e}function oW(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return Wt(r)&&_t(e)?e:r||{}}function aW(n,t,e,i){let r;for(const s of t)if(r=Gv(tW(s,n),e),typeof r<"u")return Vg(n,r)?Ug(e,i,n,r):r}function Gv(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function $x(n){let t=n._keys;return t||(t=n._keys=lW(n._scopes)),t}function lW(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function Yv(n,t,e,i){const{iScale:r}=n,{key:s="r"}=this._parsing,o=new Array(i);let a,l,u,h;for(a=0,l=i;a<l;++a)u=a+e,h=t[u],o[a]={r:r.parse(ar(h,s),u)};return o}const cW=Number.EPSILON||1e-14,Zs=(n,t)=>t<n.length&&!n[t].skip&&n[t],Zv=n=>n==="x"?"y":"x";function uW(n,t,e,i){const r=n.skip?t:n,s=t,o=e.skip?t:e,a=bp(s,r),l=bp(o,s);let u=a/(a+l),h=l/(a+l);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const d=i*u,g=i*h;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+g*(o.x-r.x),y:s.y+g*(o.y-r.y)}}}function fW(n,t,e){const i=n.length;let r,s,o,a,l,u=Zs(n,0);for(let h=0;h<i-1;++h)if(l=u,u=Zs(n,h+1),!(!l||!u)){if(ua(t[h],0,cW)){e[h]=e[h+1]=0;continue}r=e[h]/t[h],s=e[h+1]/t[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),e[h]=r*o*t[h],e[h+1]=s*o*t[h])}}function hW(n,t,e="x"){const i=Zv(e),r=n.length;let s,o,a,l=Zs(n,0);for(let u=0;u<r;++u){if(o=a,a=l,l=Zs(n,u+1),!a)continue;const h=a[e],d=a[i];o&&(s=(h-o[e])/3,a[`cp1${e}`]=h-s,a[`cp1${i}`]=d-s*t[u]),l&&(s=(l[e]-h)/3,a[`cp2${e}`]=h+s,a[`cp2${i}`]=d+s*t[u])}}function dW(n,t="x"){const e=Zv(t),i=n.length,r=Array(i).fill(0),s=Array(i);let o,a,l,u=Zs(n,0);for(o=0;o<i;++o)if(a=l,l=u,u=Zs(n,o+1),!!l){if(u){const h=u[t]-l[t];r[o]=h!==0?(u[e]-l[e])/h:0}s[o]=a?u?Zn(r[o-1])!==Zn(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}fW(n,r,s),hW(n,s,t)}function oc(n,t,e){return Math.max(Math.min(n,e),t)}function pW(n,t){let e,i,r,s,o,a=vi(n[0],t);for(e=0,i=n.length;e<i;++e)o=s,s=a,a=e<i-1&&vi(n[e+1],t),s&&(r=n[e],o&&(r.cp1x=oc(r.cp1x,t.left,t.right),r.cp1y=oc(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=oc(r.cp2x,t.left,t.right),r.cp2y=oc(r.cp2y,t.top,t.bottom)))}function gW(n,t,e,i,r){let s,o,a,l;if(t.spanGaps&&(n=n.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")dW(n,r);else{let u=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=uW(u,a,n[Math.min(s+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}t.capBezierPoints&&pW(n,e)}function jg(){return typeof window<"u"&&typeof document<"u"}function qg(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Su(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const nf=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function mW(n,t){return nf(n).getPropertyValue(t)}const yW=["top","right","bottom","left"];function Yr(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const s=yW[r];i[s]=parseFloat(n[t+"-"+s+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const bW=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function xW(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(bW(r,s,n.target))a=r,l=s;else{const u=t.getBoundingClientRect();a=i.clientX-u.left,l=i.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function Ar(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=nf(e),s=r.boxSizing==="border-box",o=Yr(r,"padding"),a=Yr(r,"border","width"),{x:l,y:u,box:h}=xW(n,e),d=o.left+(h&&a.left),g=o.top+(h&&a.top);let{width:m,height:y}=t;return s&&(m-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-d)/m*e.width/i),y:Math.round((u-g)/y*e.height/i)}}function wW(n,t,e){let i,r;if(t===void 0||e===void 0){const s=n&&qg(n);if(!s)t=n.clientWidth,e=n.clientHeight;else{const o=s.getBoundingClientRect(),a=nf(s),l=Yr(a,"border","width"),u=Yr(a,"padding");t=o.width-u.width-l.width,e=o.height-u.height-l.height,i=Su(a.maxWidth,s,"clientWidth"),r=Su(a.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:i||wu,maxHeight:r||wu}}const Yi=n=>Math.round(n*10)/10;function _W(n,t,e,i){const r=nf(n),s=Yr(r,"margin"),o=Su(r.maxWidth,n,"clientWidth")||wu,a=Su(r.maxHeight,n,"clientHeight")||wu,l=wW(n,t,e);let{width:u,height:h}=l;if(r.boxSizing==="content-box"){const g=Yr(r,"border","width"),m=Yr(r,"padding");u-=m.width+g.width,h-=m.height+g.height}return u=Math.max(0,u-s.width),h=Math.max(0,i?u/i:h-s.height),u=Yi(Math.min(u,o,l.maxWidth)),h=Yi(Math.min(h,a,l.maxHeight)),u&&!h&&(h=Yi(u/2)),(t!==void 0||e!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,u=Yi(Math.floor(h*i))),{width:u,height:h}}function Wx(n,t,e){const i=t||1,r=Yi(n.height*i),s=Yi(n.width*i);n.height=Yi(n.height),n.width=Yi(n.width);const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const SW=(function(){let n=!1;try{const t={get passive(){return n=!0,!1}};jg()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n})();function Vx(n,t){const e=mW(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Rr(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function vW(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function kW(n,t,e,i){const r={x:n.cp2x,y:n.cp2y},s={x:t.cp1x,y:t.cp1y},o=Rr(n,r,e),a=Rr(r,s,e),l=Rr(s,t,e),u=Rr(o,a,e),h=Rr(a,l,e);return Rr(u,h,e)}const CW=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},MW=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Ws(n,t,e){return n?CW(t,e):MW()}function Qv(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function tk(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function ek(n){return n==="angle"?{between:Ra,compare:E3,normalize:Me}:{between:_i,compare:(t,e)=>t-e,normalize:t=>t}}function Ux({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:r}}function EW(n,t,e){const{property:i,start:r,end:s}=e,{between:o,normalize:a}=ek(i),l=t.length;let{start:u,end:h,loop:d}=n,g,m;if(d){for(u+=l,h+=l,g=0,m=l;g<m&&o(a(t[u%l][i]),r,s);++g)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:d,style:n.style}}function nk(n,t,e){if(!e)return[n];const{property:i,start:r,end:s}=e,o=t.length,{compare:a,between:l,normalize:u}=ek(i),{start:h,end:d,loop:g,style:m}=EW(n,t,e),y=[];let x=!1,w=null,v,E,O;const P=()=>l(r,O,v)&&a(r,O)!==0,R=()=>a(s,v)===0||l(s,O,v),B=()=>x||P(),I=()=>!x||R();for(let z=h,j=h;z<=d;++z)E=t[z%o],!E.skip&&(v=u(E[i]),v!==O&&(x=l(v,r,s),w===null&&B()&&(w=a(v,r)===0?z:j),w!==null&&I()&&(y.push(Ux({start:w,end:z,loop:g,count:o,style:m})),w=null),j=z,O=v));return w!==null&&y.push(Ux({start:w,end:d,loop:g,count:o,style:m})),y}function ik(n,t){const e=[],i=n.segments;for(let r=0;r<i.length;r++){const s=nk(i[r],n.points,t);s.length&&e.push(...s)}return e}function TW(n,t,e,i){let r=0,s=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&n[s%t].skip;)s--;return s%=t,{start:r,end:s}}function OW(n,t,e,i){const r=n.length,s=[];let o=t,a=n[t],l;for(l=t+1;l<=e;++l){const u=n[l%r];u.skip||u.stop?a.skip||(i=!1,s.push({start:t%r,end:(l-1)%r,loop:i}),t=o=u.stop?l:null):(o=l,a.skip&&(t=l)),a=u}return o!==null&&s.push({start:t%r,end:o%r,loop:i}),s}function AW(n,t){const e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];const s=!!n._loop,{start:o,end:a}=TW(e,r,s,i);if(i===!0)return jx(n,[{start:o,end:a,loop:s}],e,t);const l=a<o?a+r:a,u=!!n._fullLoop&&o===0&&a===r-1;return jx(n,OW(e,o,l,u),e,t)}function jx(n,t,e,i){return!i||!i.setContext||!e?t:RW(n,t,e,i)}function RW(n,t,e,i){const r=n._chart.getContext(),s=qx(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=e.length,u=[];let h=s,d=t[0].start,g=d;function m(y,x,w,v){const E=a?-1:1;if(y!==x){for(y+=l;e[y%l].skip;)y-=E;for(;e[x%l].skip;)x+=E;y%l!==x%l&&(u.push({start:y%l,end:x%l,loop:w,style:v}),h=v,d=x%l)}}for(const y of t){d=a?d:y.start;let x=e[d%l],w;for(g=d+1;g<=y.end;g++){const v=e[g%l];w=qx(i.setContext(dr(r,{type:"segment",p0:x,p1:v,p0DataIndex:(g-1)%l,p1DataIndex:g%l,datasetIndex:o}))),DW(w,h)&&m(d,g-1,y.loop,h),x=v,h=w}d<g-1&&m(d,g-1,y.loop,h)}return u}function qx(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function DW(n,t){if(!t)return!1;const e=[],i=function(r,s){return Hg(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function ac(n,t,e){return n.options.clip?n[e]:t[e]}function PW(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:ac(e,t,"left"),right:ac(e,t,"right"),top:ac(i,t,"top"),bottom:ac(i,t,"bottom")}:t}function rk(n,t){const e=t._clip;if(e.disabled)return!1;const i=PW(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}class IW{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const s=e.listeners[r],o=e.duration;s.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Hv.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,t,"progress")),s.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var mi=new IW;const Kx="transparent",LW={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=Fx(n||Kx),r=i.valid&&Fx(t||Kx);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class NW{constructor(t,e,i,r){const s=e[i];r=Ko([t.to,r,s,t.from]);const o=Ko([t.from,s,r]);this._active=!0,this._fn=t.fn||LW[t.type||typeof o],this._easing=fa[t.easing]||fa.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=Ko([t.to,e,r,t.from]),this._from=Ko([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||e<i),!this._active){this._target[r]=a,this._notify(!0);return}if(e<0){this._target[r]=s;return}l=e/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class sk{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!_t(t))return;const e=Object.keys(Vt.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const s=t[r];if(!_t(s))return;const o={};for(const a of e)o[a]=s[a];(Wt(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,e){const i=e.options,r=BW(t,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&FW(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,e){const i=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(t,e));continue}const h=e[u];let d=s[u];const g=i.get(u);if(d)if(g&&d.active()){d.update(g,h,a);continue}else d.cancel();if(!g||!g.duration){t[u]=h;continue}s[u]=d=new NW(g,t,u,h),r.push(d)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return mi.add(this._chart,i),!0}}function FW(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const s=n[i[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function BW(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Jx(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:i?s:r,end:i?r:s}}function zW(n,t,e){if(e===!1)return!1;const i=Jx(n,e),r=Jx(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function HW(n){let t,e,i,r;return _t(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function ok(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)e.push(i[r].index);return e}function Xx(n,t,e,i={}){const r=n.keys,s=i.mode==="single";let o,a,l,u;if(t===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===e){if(h=!0,i.all)continue;break}u=n.values[l],Xt(u)&&(s||t===0||Zn(t)===Zn(u))&&(t+=u)}return!h&&!i.all?0:t}function $W(n,t){const{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,u,h;for(l=0,u=o.length;l<u;++l)h=o[l],a[l]={[r]:h,[s]:n[h]};return a}function fd(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function WW(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function VW(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function UW(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function Gx(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const s=n[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function Yx(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,u=o.axis,h=WW(s,o,i),d=t.length;let g;for(let m=0;m<d;++m){const y=t[m],{[l]:x,[u]:w}=y,v=y._stacks||(y._stacks={});g=v[u]=UW(r,h,x),g[a]=w,g._top=Gx(g,o,!0,i.type),g._bottom=Gx(g,o,!1,i.type);const E=g._visualValues||(g._visualValues={});E[a]=w}}function hd(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function jW(n,t){return dr(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function qW(n,t,e){return dr(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Lo(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const s=r._stacks;if(!s||s[i]===void 0||s[i][e]===void 0)return;delete s[i][e],s[i]._visualValues!==void 0&&s[i]._visualValues[e]!==void 0&&delete s[i]._visualValues[e]}}}const dd=n=>n==="reset"||n==="none",Zx=(n,t)=>t?n:Object.assign({},n),KW=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:ok(e,!0),values:null};class pr{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=fd(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Lo(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(d,g,m,y)=>d==="x"?g:d==="r"?y:m,s=e.xAxisID=lt(i.xAxisID,hd(t,"x")),o=e.yAxisID=lt(i.yAxisID,hd(t,"y")),a=e.rAxisID=lt(i.rAxisID,hd(t,"r")),l=e.indexAxis,u=e.iAxisID=r(l,s,o,a),h=e.vAxisID=r(l,o,s,a);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(u),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Ix(this._data,this),t._stacked&&Lo(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(_t(e)){const r=this._cachedMeta;this._data=$W(e,r)}else if(i!==e){if(i){Ix(i,this);const r=this._cachedMeta;Lo(r),r._parsed=[]}e&&Object.isExtensible(e)&&R3(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=e._stacked;e._stacked=fd(e.vScale,e),e.stack!==i.stack&&(r=!0,Lo(e),e.stack=i.stack),this._resyncElements(t),(r||s!==e._stacked)&&(Yx(this,e._parsed),e._stacked=fd(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=t===0&&e===r.length?!0:i._sorted,u=t>0&&i._parsed[t-1],h,d,g;if(this._parsing===!1)i._parsed=r,i._sorted=!0,g=r;else{Wt(r[t])?g=this.parseArrayData(i,r,t,e):_t(r[t])?g=this.parseObjectData(i,r,t,e):g=this.parsePrimitiveData(i,r,t,e);const m=()=>d[a]===null||u&&d[a]<u[a];for(h=0;h<e;++h)i._parsed[h+t]=d=g[h],l&&(m()&&(l=!1),u=d);i._sorted=l}o&&Yx(this,g)}parsePrimitiveData(t,e,i,r){const{iScale:s,vScale:o}=t,a=s.axis,l=o.axis,u=s.getLabels(),h=s===o,d=new Array(r);let g,m,y;for(g=0,m=r;g<m;++g)y=g+i,d[g]={[a]:h||s.parse(u[y],y),[l]:o.parse(e[y],y)};return d}parseArrayData(t,e,i,r){const{xScale:s,yScale:o}=t,a=new Array(r);let l,u,h,d;for(l=0,u=r;l<u;++l)h=l+i,d=e[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(t,e,i,r){const{xScale:s,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(r);let h,d,g,m;for(h=0,d=r;h<d;++h)g=h+i,m=e[g],u[h]={x:s.parse(ar(m,a),g),y:o.parse(ar(m,l),g)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,s=this._cachedMeta,o=e[t.axis],a={keys:ok(r,!0),values:e._stacks[t.axis]._visualValues};return Xx(a,o,s.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const s=i[e.axis];let o=s===null?NaN:s;const a=r&&i._stacks[e.axis];r&&a&&(r.values=a,o=Xx(r,s,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&t===i.iScale,o=r.length,a=this._getOtherScale(t),l=KW(e,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=VW(a);let g,m;function y(){m=r[g];const x=m[a.axis];return!Xt(m[t.axis])||h>x||d<x}for(g=0;g<o&&!(!y()&&(this.updateRangeFromParsed(u,t,m,l),s));++g);if(s){for(g=o-1;g>=0;--g)if(!y()){this.updateRangeFromParsed(u,t,m,l);break}}return u}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=e.length;r<s;++r)o=e[r][t.axis],Xt(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=HW(lt(this.options.clip,zW(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],s=e.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,u=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(t,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&u?o.push(d):d.draw(t,s))}for(h=0;h<o.length;++h)o[h].draw(t,s)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];s=o.$context||(o.$context=qW(this.getContext(),t,o)),s.parsed=this.getParsed(t),s.raw=r.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=jW(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",s=this._cachedDataOpts,o=t+"-"+e,a=s[o],l=this.enableOptionSharing&&Aa(i);if(a)return Zx(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,t),d=r?[`${t}Hover`,"hover",t,""]:[t,""],g=u.getOptionScopes(this.getDataset(),h),m=Object.keys(Vt.elements[t]),y=()=>this.getContext(i,r,e),x=u.resolveNamedOptions(g,m,y,d);return x.$shared&&(x.$shared=l,s[o]=Object.freeze(Zx(x,l))),x}_resolveAnimations(t,e,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${e}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,e),g=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(g,this.getContext(t,i,e))}const u=new sk(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||dd(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(e,s)||s!==r;return this.updateSharedOptions(s,e,i),{sharedOptions:s,includeOptions:o}}updateElement(t,e,i,r){dd(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!dd(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const s=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const r=i.length,s=e.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,t):s<r&&this._removeElements(s,r-s)}_insertElements(t,e,i=!0){const r=this._cachedMeta,s=r.data,o=t+e;let a;const l=u=>{for(u.length+=e,a=u.length-1;a>=o;a--)u[a]=u[a-e]};for(l(s),a=t;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(t,e),i&&this.updateElements(s,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&Lo(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function JW(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let r=0,s=e.length;r<s;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=zv(i.sort((r,s)=>r-s))}return n._cache.$bar}function XW(n){const t=n.iScale,e=JW(t,n.type);let i=t._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(Aa(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=e.length;r<s;++r)o=t.getPixelForValue(e[r]),l();for(a=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),l();return i}function GW(n,t,e,i){const r=e.barThickness;let s,o;return xt(r)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:t.pixels[n]-s/2}}function YW(n,t,e,i){const r=t.pixels,s=r[n];let o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null;const l=e.categoryPercentage;o===null&&(o=s-(a===null?t.end-t.start:a-s)),a===null&&(a=s+s-o);const u=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:e.barPercentage,start:u}}function ZW(n,t,e,i){const r=e.parse(n[0],i),s=e.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,u=a;Math.abs(o)>Math.abs(a)&&(l=a,u=o),t[e.axis]=u,t._custom={barStart:l,barEnd:u,start:r,end:s,min:o,max:a}}function ak(n,t,e,i){return Wt(n)?ZW(n,t,e,i):t[e.axis]=e.parse(n,i),t}function Qx(n,t,e,i){const r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,l=[];let u,h,d,g;for(u=e,h=e+i;u<h;++u)g=t[u],d={},d[r.axis]=a||r.parse(o[u],u),l.push(ak(g,d,s,u));return l}function pd(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function QW(n,t,e){return n!==0?Zn(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function t5(n){let t,e,i,r,s;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:i,reverse:t,top:r,bottom:s}}function e5(n,t,e,i){let r=t.borderSkipped;const s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:u,bottom:h}=t5(n);r==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=u:(e._bottom||0)===i?r=h:(s[tw(h,o,a,l)]=!0,r=u)),s[tw(r,o,a,l)]=!0,n.borderSkipped=s}function tw(n,t,e,i){return i?(n=n5(n,t,e),n=ew(n,e,t)):n=ew(n,t,e),n}function n5(n,t,e){return n===t?e:n===e?t:n}function ew(n,t,e){return n==="start"?t:n==="end"?e:n}function i5(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class r5 extends pr{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,r){return Qx(t,e,i,r)}parseArrayData(t,e,i,r){return Qx(t,e,i,r)}parseObjectData(t,e,i,r){const{iScale:s,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=s.axis==="x"?a:l,h=o.axis==="x"?a:l,d=[];let g,m,y,x;for(g=i,m=i+r;g<m;++g)x=e[g],y={},y[s.axis]=s.parse(ar(x,u),g),d.push(ak(ar(x,h),y,o,g));return d}updateRangeFromParsed(t,e,i,r){super.updateRangeFromParsed(t,e,i,r);const s=i._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:r}=e,s=this.getParsed(t),o=s._custom,a=pd(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:g}=this._getSharedOptions(e,r);for(let m=e;m<e+i;m++){const y=this.getParsed(m),x=s||xt(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),w=this._calculateBarIndexPixels(m,h),v=(y._stacks||{})[a.axis],E={horizontal:u,base:x.base,enableBorderRadius:!v||pd(y._custom)||o===v._top||o===v._bottom,x:u?x.head:w.center,y:u?w.center:x.head,height:u?w.size:Math.abs(x.size),width:u?Math.abs(x.size):w.size};g&&(E.options=d||this.resolveDataElementOptions(m,t[m].active?"active":r));const O=E.options||t[m].options;e5(E,O,v,o),i5(E,O,h.ratio),this.updateElement(t[m],m,E,r)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(e),l=a&&a[i.axis],u=h=>{const d=h._parsed.find(m=>m[i.axis]===l),g=d&&d[h.vScale.axis];if(xt(g)||isNaN(g))return!0};for(const h of r)if(!(e!==void 0&&u(h))&&((s===!1||o.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[lt(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){const r=this._getStacks(t,i),s=e!==void 0?r.indexOf(e):-1;return s===-1?r.length-1:s}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,r=[];let s,o;for(s=0,o=e.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=t.barThickness;return{min:a||XW(e),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(t),u=l._custom,h=pd(u);let d=l[e.axis],g=0,m=i?this.applyStack(e,l,i):d,y,x;m!==d&&(g=m-d,m=d),h&&(d=u.barStart,m=u.barEnd-u.barStart,d!==0&&Zn(d)!==Zn(u.barEnd)&&(g=0),g+=d);const w=!xt(s)&&!h?s:g;let v=e.getPixelForValue(w);if(this.chart.getDataVisibility(t)?y=e.getPixelForValue(g+m):y=v,x=y-v,Math.abs(x)<o){x=QW(x,e,a)*o,d===a&&(v-=x/2);const E=e.getPixelForDecimal(0),O=e.getPixelForDecimal(1),P=Math.min(E,O),R=Math.max(E,O);v=Math.max(Math.min(v,R),P),y=v+x,i&&!h&&(l._stacks[e.axis]._visualValues[r]=e.getValueForPixel(y)-e.getValueForPixel(v))}if(v===e.getPixelForValue(a)){const E=Zn(x)*e.getLineWidthForValue(a)/2;v+=E,x-=E}return{size:x,base:v,head:y,center:y+x/2}}_calculateBarIndexPixels(t,e){const i=e.scale,r=this.options,s=r.skipNull,o=lt(r.maxBarThickness,1/0);let a,l;const u=this._getAxisCount();if(e.grouped){const h=s?this._getStackCount(t):e.stackCount,d=r.barThickness==="flex"?YW(t,e,r,h*u):GW(t,e,r,h*u),g=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(lt(g,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0)+m;a=d.start+d.chunk*y+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(o,e.min*e.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[e.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}class s5 extends pr{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,r){const s=super.parsePrimitiveData(t,e,i,r);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+i).radius;return s}parseArrayData(t,e,i,r){const s=super.parseArrayData(t,e,i,r);for(let o=0;o<s.length;o++){const a=e[i+o];s[o]._custom=lt(a[2],this.resolveDataElementOptions(o+i).radius)}return s}parseObjectData(t,e,i,r){const s=super.parseObjectData(t,e,i,r);for(let o=0;o<s.length;o++){const a=e[i+o];s[o]._custom=lt(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return s}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=e,o=this.getParsed(t),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y),u=o._custom;return{label:i[t]||"",value:"("+a+", "+l+(u?", "+u:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,r){const s=r==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(e,r),h=o.axis,d=a.axis;for(let g=e;g<e+i;g++){const m=t[g],y=!s&&this.getParsed(g),x={},w=x[h]=s?o.getPixelForDecimal(.5):o.getPixelForValue(y[h]),v=x[d]=s?a.getBasePixel():a.getPixelForValue(y[d]);x.skip=isNaN(w)||isNaN(v),u&&(x.options=l||this.resolveDataElementOptions(g,m.active?"active":r),s&&(x.options.radius=0)),this.updateElement(m,g,x,r)}}resolveDataElementOptions(t,e){const i=this.getParsed(t);let r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return e!=="active"&&(r.radius=0),r.radius+=lt(i&&i._custom,s),r}}function o5(n,t,e){let i=1,r=1,s=0,o=0;if(t<Bt){const a=n,l=a+t,u=Math.cos(a),h=Math.sin(a),d=Math.cos(l),g=Math.sin(l),m=(O,P,R)=>Ra(O,a,l,!0)?1:Math.max(P,P*e,R,R*e),y=(O,P,R)=>Ra(O,a,l,!0)?-1:Math.min(P,P*e,R,R*e),x=m(0,u,d),w=m(Qt,h,g),v=y(vt,u,d),E=y(vt+Qt,h,g);i=(x-v)/2,r=(w-E)/2,s=-(x+v)/2,o=-(w+E)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}class Kg extends pr{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((l,u)=>{const d=t.getDatasetMeta(0).controller.getStyle(u);return{text:l,fillStyle:d.backgroundColor,fontColor:s,hidden:!t.getDataVisibility(u),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:r,pointStyle:i,borderRadius:o&&(a||d.borderRadius),index:u}}):[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=l=>+i[l];if(_t(i[t])){const{key:l="value"}=this._parsing;s=u=>+ar(i[u],l)}let o,a;for(o=t,a=t+e;o<a;++o)r._parsed[o]=s(o)}}_getRotation(){return Nn(this.options.rotation-90)}_getCircumference(){return Nn(this.options.circumference)}_getRotationExtents(){let t=Bt,e=-Bt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),o=r._getCircumference();t=Math.min(t,s),e=Math.max(e,s+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,r=this._cachedMeta,s=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(m3(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:g,ratioY:m,offsetX:y,offsetY:x}=o5(d,h,l),w=(i.width-o)/g,v=(i.height-o)/m,E=Math.max(Math.min(w,v)/2,0),O=Iv(this.options.radius,E),P=Math.max(O*l,0),R=(O-P)/this._getVisibleDatasetWeightTotal();this.offsetX=y*O,this.offsetY=x*O,r.total=this.calculateTotal(),this.outerRadius=O-R*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-R*u,0),this.updateElements(s,0,s.length,t)}_circumference(t,e){const i=this.options,r=this._cachedMeta,s=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*s/Bt)}updateElements(t,e,i,r){const s=r==="reset",o=this.chart,a=o.chartArea,u=o.options.animation,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2,g=s&&u.animateScale,m=g?0:this.innerRadius,y=g?0:this.outerRadius,{sharedOptions:x,includeOptions:w}=this._getSharedOptions(e,r);let v=this._getRotation(),E;for(E=0;E<e;++E)v+=this._circumference(E,s);for(E=e;E<e+i;++E){const O=this._circumference(E,s),P=t[E],R={x:h+this.offsetX,y:d+this.offsetY,startAngle:v,endAngle:v+O,circumference:O,outerRadius:y,innerRadius:m};w&&(R.options=x||this.resolveDataElementOptions(E,P.active?"active":r)),v+=O,this.updateElement(P,E,R,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,r;for(r=0;r<e.length;r++){const s=t._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!e[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Bt*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=ja(e._parsed[t],i.options.locale);return{label:r[t]||"",value:s}}getMaxBorderWidth(t){let e=0;const i=this.chart;let r,s,o,a,l;if(!t){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){o=i.getDatasetMeta(r),t=o.data,a=o.controller;break}}if(!t)return 0;for(r=0,s=t.length;r<s;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,r=t.length;i<r;++i){const s=this.resolveDataElementOptions(i);e=Math.max(e,s.offset||0,s.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(lt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class a5 extends pr{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=e,o=this.chart._animationsDisabled;let{start:a,count:l}=Wv(e,r,o);this._drawStart=a,this._drawCount=l,Vv(e)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:u},t),this.updateElements(r,a,l,t)}updateElements(t,e,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(e,r),g=o.axis,m=a.axis,{spanGaps:y,segment:x}=this.options,w=Gs(y)?y:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||r==="none",E=e+i,O=t.length;let P=e>0&&this.getParsed(e-1);for(let R=0;R<O;++R){const B=t[R],I=v?B:{};if(R<e||R>=E){I.skip=!0;continue}const z=this.getParsed(R),j=xt(z[m]),Z=I[g]=o.getPixelForValue(z[g],R),it=I[m]=s||j?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,z,l):z[m],R);I.skip=isNaN(Z)||isNaN(it)||j,I.stop=R>0&&Math.abs(z[g]-P[g])>w,x&&(I.parsed=z,I.raw=u.data[R]),d&&(I.options=h||this.resolveDataElementOptions(R,B.active?"active":r)),v||this.updateElement(B,R,I,r),P=z}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class lk extends pr{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map((s,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=ja(e._parsed[t].r,i.options.locale);return{label:r[t]||"",value:s}}parseObjectData(t,e,i,r){return Yv.bind(this)(t,e,i,r)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,r)=>{const s=this.getParsed(r).r;!isNaN(s)&&this.chart.getDataVisibility(r)&&(s<e.min&&(e.min=s),s>e.max&&(e.max=s))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),s=Math.max(r/2,0),o=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),a=(s-o)/t.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,i,r){const s=r==="reset",o=this.chart,l=o.options.animation,u=this._cachedMeta.rScale,h=u.xCenter,d=u.yCenter,g=u.getIndexAngle(0)-.5*vt;let m=g,y;const x=360/this.countVisibleElements();for(y=0;y<e;++y)m+=this._computeAngle(y,r,x);for(y=e;y<e+i;y++){const w=t[y];let v=m,E=m+this._computeAngle(y,r,x),O=o.getDataVisibility(y)?u.getDistanceFromCenterForValue(this.getParsed(y).r):0;m=E,s&&(l.animateScale&&(O=0),l.animateRotate&&(v=E=g));const P={x:h,y:d,innerRadius:0,outerRadius:O,startAngle:v,endAngle:E,options:this.resolveDataElementOptions(y,w.active?"active":r)};this.updateElement(w,y,P,r)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?Nn(this.resolveDataElementOptions(t,e).angle||i):0}}class l5 extends Kg{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class c5 extends pr{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,r){return Yv.bind(this)(t,e,i,r)}update(t){const e=this._cachedMeta,i=e.dataset,r=e.data||[],s=e.iScale.getLabels();if(i.points=r,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===r.length,options:o};this.updateElement(i,void 0,a,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,i,r){const s=this._cachedMeta.rScale,o=r==="reset";for(let a=e;a<e+i;a++){const l=t[a],u=this.resolveDataElementOptions(a,l.active?"active":r),h=s.getPointPositionForValue(a,this.getParsed(a).r),d=o?s.xCenter:h.x,g=o?s.yCenter:h.y,m={x:d,y:g,angle:h.angle,skip:isNaN(d)||isNaN(g),options:u};this.updateElement(l,a,m,r)}}}class u5 extends pr{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=e,o=this.getParsed(t),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:i[t]||"",value:"("+a+", "+l+")"}}update(t){const e=this._cachedMeta,{data:i=[]}=e,r=this.chart._animationsDisabled;let{start:s,count:o}=Wv(e,i,r);if(this._drawStart=s,this._drawCount=o,Vv(e)&&(s=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=e;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const u=this.resolveDatasetElementOptions(t);u.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:u},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,s,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,h=this.resolveDataElementOptions(e,r),d=this.getSharedOptions(h),g=this.includeOptions(r,d),m=o.axis,y=a.axis,{spanGaps:x,segment:w}=this.options,v=Gs(x)?x:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||s||r==="none";let O=e>0&&this.getParsed(e-1);for(let P=e;P<e+i;++P){const R=t[P],B=this.getParsed(P),I=E?R:{},z=xt(B[y]),j=I[m]=o.getPixelForValue(B[m],P),Z=I[y]=s||z?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,B,l):B[y],P);I.skip=isNaN(j)||isNaN(Z)||z,I.stop=P>0&&Math.abs(B[m]-O[m])>v,w&&(I.parsed=B,I.raw=u.data[P]),g&&(I.options=d||this.resolveDataElementOptions(P,R.active?"active":r)),E||this.updateElement(R,P,I,r),O=B}this.updateSharedOptions(d,r,h)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let a=0;for(let l=e.length-1;l>=0;--l)a=Math.max(a,e[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=t.dataset,r=i.options&&i.options.borderWidth||0;if(!e.length)return r;const s=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(r,s,o)/2}}var f5=Object.freeze({__proto__:null,BarController:r5,BubbleController:s5,DoughnutController:Kg,LineController:a5,PieController:l5,PolarAreaController:lk,RadarController:c5,ScatterController:u5});function Er(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Jg{static override(t){Object.assign(Jg.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Er()}parse(){return Er()}format(){return Er()}add(){return Er()}diff(){return Er()}startOf(){return Er()}endOf(){return Er()}}var h5={_date:Jg};function d5(n,t,e,i){const{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&s.length){const u=a._reversePixels?O3:Si;if(i){if(r._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(t);if(d){const g=u(s,t,e-d),m=u(s,t,e+d);return{lo:g.lo,hi:m.hi}}}}else{const h=u(s,t,e);if(l){const{vScale:d}=r._cachedMeta,{_parsed:g}=n,m=g.slice(0,h.lo+1).reverse().findIndex(x=>!xt(x[d.axis]));h.lo-=Math.max(0,m);const y=g.slice(h.hi).findIndex(x=>!xt(x[d.axis]));h.hi+=Math.max(0,y)}return h}}return{lo:0,hi:s.length-1}}function rf(n,t,e,i,r){const s=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=s.length;a<l;++a){const{index:u,data:h}=s[a],{lo:d,hi:g}=d5(s[a],t,o,r);for(let m=d;m<=g;++m){const y=h[m];y.skip||i(y,u,m)}}}function p5(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const s=t?Math.abs(i.x-r.x):0,o=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function gd(n,t,e,i,r){const s=[];return!r&&!n.isPointInArea(t)||rf(n,e,t,function(a,l,u){!r&&!vi(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&s.push({element:a,datasetIndex:l,index:u})},!0),s}function g5(n,t,e,i){let r=[];function s(o,a,l){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=Fv(o,{x:t.x,y:t.y});Ra(d,u,h)&&r.push({element:o,datasetIndex:a,index:l})}return rf(n,e,t,s),r}function m5(n,t,e,i,r,s){let o=[];const a=p5(e);let l=Number.POSITIVE_INFINITY;function u(h,d,g){const m=h.inRange(t.x,t.y,r);if(i&&!m)return;const y=h.getCenterPoint(r);if(!(!!s||n.isPointInArea(y))&&!m)return;const w=a(t,y);w<l?(o=[{element:h,datasetIndex:d,index:g}],l=w):w===l&&o.push({element:h,datasetIndex:d,index:g})}return rf(n,e,t,u),o}function md(n,t,e,i,r,s){return!s&&!n.isPointInArea(t)?[]:e==="r"&&!i?g5(n,t,e,r):m5(n,t,e,i,r,s)}function nw(n,t,e,i,r){const s=[],o=e==="x"?"inXRange":"inYRange";let a=!1;return rf(n,e,t,(l,u,h)=>{l[o]&&l[o](t[e],r)&&(s.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(t.x,t.y,r))}),i&&!a?[]:s}var y5={modes:{index(n,t,e,i){const r=Ar(t,n),s=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?gd(n,r,s,i,o):md(n,r,s,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,d=u.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:u.index,index:h})}),l):[]},dataset(n,t,e,i){const r=Ar(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?gd(n,r,s,i,o):md(n,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,u=n.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(n,t,e,i){const r=Ar(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return gd(n,r,s,i,o)},nearest(n,t,e,i){const r=Ar(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return md(n,r,s,e.intersect,i,o)},x(n,t,e,i){const r=Ar(t,n);return nw(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=Ar(t,n);return nw(n,r,"y",e.intersect,i)}}};const ck=["left","top","right","bottom"];function No(n,t){return n.filter(e=>e.pos===t)}function iw(n,t){return n.filter(e=>ck.indexOf(e.pos)===-1&&e.box.axis===t)}function Fo(n,t){return n.sort((e,i)=>{const r=t?i:e,s=t?e:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function b5(n){const t=[];let e,i,r,s,o,a;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:s,options:{stack:o,stackWeight:a=1}}=r,t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}function x5(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:s}=e;if(!i||!ck.includes(r))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}function w5(n,t){const e=x5(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];const{fullSize:l}=a.box,u=e[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*i:l&&t.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&t.availableHeight)}return e}function _5(n){const t=b5(n),e=Fo(t.filter(u=>u.box.fullSize),!0),i=Fo(No(t,"left"),!0),r=Fo(No(t,"right")),s=Fo(No(t,"top"),!0),o=Fo(No(t,"bottom")),a=iw(t,"x"),l=iw(t,"y");return{fullSize:e,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:No(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function rw(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function uk(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function S5(n,t,e,i){const{pos:r,box:s}=e,o=n.maxPadding;if(!_t(r)){e.size&&(n[r]-=e.size);const d=i[e.stack]||{size:0,count:1};d.size=Math.max(d.size,e.horizontal?s.height:s.width),e.size=d.size/d.count,n[r]+=e.size}s.getPadding&&uk(o,s.getPadding());const a=Math.max(0,t.outerWidth-rw(o,n,"left","right")),l=Math.max(0,t.outerHeight-rw(o,n,"top","bottom")),u=a!==n.w,h=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:u,other:h}:{same:h,other:u}}function v5(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function k5(n,t){const e=t.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}return i(n?["left","right"]:["top","bottom"])}function Jo(n,t,e,i){const r=[];let s,o,a,l,u,h;for(s=0,o=n.length,u=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||t.w,a.height||t.h,k5(a.horizontal,t));const{same:d,other:g}=S5(t,e,a,i);u|=d&&r.length,h=h||g,l.fullSize||r.push(a)}return u&&Jo(r,t,e,i)||h}function lc(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function sw(n,t,e,i){const r=e.padding;let{x:s,y:o}=t;for(const a of n){const l=a.box,u=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const d=t.w*h,g=u.size||l.height;Aa(u.start)&&(o=u.start),l.fullSize?lc(l,r.left,o,e.outerWidth-r.right-r.left,g):lc(l,t.left+u.placed,o,d,g),u.start=o,u.placed+=d,o=l.bottom}else{const d=t.h*h,g=u.size||l.width;Aa(u.start)&&(s=u.start),l.fullSize?lc(l,s,r.top,g,e.outerHeight-r.bottom-r.top):lc(l,s,t.top+u.placed,g,d),u.start=s,u.placed+=d,s=l.right}}t.x=s,t.y=o}var Te={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=Ae(n.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),a=_5(n.boxes),l=a.vertical,u=a.horizontal;Tt(n.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const h=l.reduce((x,w)=>w.box.options&&w.box.options.display===!1?x:x+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),g=Object.assign({},r);uk(g,Ae(i));const m=Object.assign({maxPadding:g,w:s,h:o,x:r.left,y:r.top},r),y=w5(l.concat(u),d);Jo(a.fullSize,m,d,y),Jo(l,m,d,y),Jo(u,m,d,y)&&Jo(l,m,d,y),v5(m),sw(a.leftAndTop,m,d,y),m.x+=m.w,m.y+=m.h,sw(a.rightAndBottom,m,d,y),n.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Tt(a.chartArea,x=>{const w=x.box;Object.assign(w,n.chartArea),w.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class fk{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class C5 extends fk{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const kc="$chartjs",M5={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ow=n=>n===null||n==="";function E5(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[kc]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",ow(r)){const s=Vx(n,"width");s!==void 0&&(n.width=s)}if(ow(i))if(n.style.height==="")n.height=n.width/(t||2);else{const s=Vx(n,"height");s!==void 0&&(n.height=s)}return n}const hk=SW?{passive:!0}:!1;function T5(n,t,e){n&&n.addEventListener(t,e,hk)}function O5(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,hk)}function A5(n,t){const e=M5[n.type]||n.type,{x:i,y:r}=Ar(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function vu(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function R5(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||vu(a.addedNodes,i),o=o&&!vu(a.removedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function D5(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||vu(a.removedNodes,i),o=o&&!vu(a.addedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const Pa=new Map;let aw=0;function dk(){const n=window.devicePixelRatio;n!==aw&&(aw=n,Pa.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function P5(n,t){Pa.size||window.addEventListener("resize",dk),Pa.set(n,t)}function I5(n){Pa.delete(n),Pa.size||window.removeEventListener("resize",dk)}function L5(n,t,e){const i=n.canvas,r=i&&qg(i);if(!r)return;const s=$v((a,l)=>{const u=r.clientWidth;e(a,l),u<r.clientWidth&&e()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||s(u,h)});return o.observe(r),P5(n,s),o}function yd(n,t,e){e&&e.disconnect(),t==="resize"&&I5(n)}function N5(n,t,e){const i=n.canvas,r=$v(s=>{n.ctx!==null&&e(A5(s,n))},n);return T5(i,t,r),r}class F5 extends fk{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(E5(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[kc])return!1;const i=e[kc].initial;["height","width"].forEach(s=>{const o=i[s];xt(o)?e.removeAttribute(s):e.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[kc],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),o={attach:R5,detach:D5,resize:L5}[e]||N5;r[e]=o(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:yd,detach:yd,resize:yd}[e]||O5)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return _W(t,e,i,r)}isAttached(t){const e=t&&qg(t);return!!(e&&e.isConnected)}}function B5(n){return!jg()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?C5:F5}let Ti=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Gs(this.x)&&Gs(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}};function z5(n,t){const e=n.options.ticks,i=H5(n),r=Math.min(e.maxTicksLimit||i,i),s=e.major.enabled?W5(t):[],o=s.length,a=s[0],l=s[o-1],u=[];if(o>r)return V5(t,u,s,o/r),u;const h=$5(s,t,r);if(o>0){let d,g;const m=o>1?Math.round((l-a)/(o-1)):null;for(cc(t,u,h,xt(m)?0:a-m,a),d=0,g=o-1;d<g;d++)cc(t,u,h,s[d],s[d+1]);return cc(t,u,h,l,xt(m)?t.length:l+m),u}return cc(t,u,h),u}function H5(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function $5(n,t,e){const i=U5(n),r=t.length/e;if(!i)return Math.max(r,1);const s=k3(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function W5(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function V5(n,t,e,i){let r=0,s=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(t.push(n[o]),r++,s=e[r*i])}function cc(n,t,e,i,r){const s=lt(i,0),o=Math.min(lt(r,n.length),n.length);let a=0,l,u,h;for(e=Math.ceil(e),r&&(l=r-i,e=l/Math.floor(l/e)),h=s;h<0;)a++,h=Math.round(s+a*e);for(u=Math.max(s,0);u<o;u++)u===h&&(t.push(n[u]),a++,h=Math.round(s+a*e))}function U5(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const j5=n=>n==="left"?"right":n==="right"?"left":n,lw=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,cw=(n,t)=>Math.min(t||n,n);function uw(n,t){const e=[],i=n.length/t,r=n.length;let s=0;for(;s<r;s+=i)e.push(n[Math.floor(s)]);return e}function q5(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),s=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(r),u;if(!(e&&(i===1?u=Math.max(l-s,o-l):t===0?u=(n.getPixelForTick(1)-l)/2:u=(l-n.getPixelForTick(r-1))/2,l+=r<t?u:-u,l<s-a||l>o+a)))return l}function K5(n,t){Tt(n,e=>{const i=e.gc,r=i.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[i[s]];i.splice(0,r)}})}function Bo(n){return n.drawTicks?n.tickLength:0}function fw(n,t){if(!n.display)return 0;const e=oe(n.font,t),i=Ae(n.padding);return(Wt(n.text)?n.text.length:1)*e.lineHeight+i.height}function J5(n,t){return dr(n,{scale:t,type:"scale"})}function X5(n,t,e){return dr(n,{tick:e,index:t,type:"tick"})}function G5(n,t,e){let i=zg(n);return(e&&t!=="right"||!e&&t==="right")&&(i=j5(i)),i}function Y5(n,t,e,i){const{top:r,left:s,bottom:o,right:a,chart:l}=n,{chartArea:u,scales:h}=l;let d=0,g,m,y;const x=o-r,w=a-s;if(n.isHorizontal()){if(m=ke(i,s,a),_t(e)){const v=Object.keys(e)[0],E=e[v];y=h[v].getPixelForValue(E)+x-t}else e==="center"?y=(u.bottom+u.top)/2+x-t:y=lw(n,e,t);g=a-s}else{if(_t(e)){const v=Object.keys(e)[0],E=e[v];m=h[v].getPixelForValue(E)-w+t}else e==="center"?m=(u.left+u.right)/2-w+t:m=lw(n,e,t);y=ke(i,o,r),d=e==="left"?-Qt:Qt}return{titleX:m,titleY:y,maxWidth:g,rotation:d}}class ds extends Ti{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=an(t,Number.POSITIVE_INFINITY),e=an(e,Number.NEGATIVE_INFINITY),i=an(i,Number.POSITIVE_INFINITY),r=an(r,Number.NEGATIVE_INFINITY),{min:an(t,i),max:an(e,r),minDefined:Xt(t),maxDefined:Xt(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:e,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(i=Math.max(i,o.max));return e=s&&e>i?i:e,i=r&&e>i?e:i,{min:an(e,an(i,e)),max:an(i,an(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Lt(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Q3(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?uw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=z5(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Lt(this.options.afterUpdate,[this])}beforeSetDimensions(){Lt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Lt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Lt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Lt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i],s.label=Lt(e.callback,[s.value,i,t],this)}afterTickToLabelConversion(){Lt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Lt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=cw(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,s=e.maxRotation;let o=r,a,l,u;if(!this._isVisible()||!e.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,g=h.highest.height,m=ue(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/i:m/(i-1),d+6>a&&(a=m/(i-(t.offset?.5:1)),l=this.maxHeight-Bo(t.grid)-e.padding-fw(t.title,this.chart.options.font),u=Math.sqrt(d*d+g*g),o=Fg(Math.min(Math.asin(ue((h.highest.height+6)/a,-1,1)),Math.asin(ue(l/u,-1,1))-Math.asin(ue(g/u,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Lt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Lt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=fw(r,e.options.font);if(a?(t.width=this.maxWidth,t.height=Bo(s)+l):(t.height=this.maxHeight,t.width=Bo(s)+l),i.display&&this.ticks.length){const{first:u,last:h,widest:d,highest:g}=this._getLabelSizes(),m=i.padding*2,y=Nn(this.labelRotation),x=Math.cos(y),w=Math.sin(y);if(a){const v=i.mirror?0:w*d.width+x*g.height;t.height=Math.min(this.maxHeight,t.height+v+m)}else{const v=i.mirror?0:x*d.width+w*g.height;t.width=Math.min(this.maxWidth,t.width+v+m)}this._calculatePadding(u,h,w,x)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let g=0,m=0;l?u?(g=r*t.width,m=i*e.height):(g=i*t.height,m=r*e.width):s==="start"?m=e.width:s==="end"?g=t.width:s!=="inner"&&(g=t.width/2,m=e.width/2),this.paddingLeft=Math.max((g-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=e.height/2,d=t.height/2;s==="start"?(h=0,d=t.height):s==="end"&&(h=e.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Lt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)xt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=uw(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(e/cw(e,i));let u=0,h=0,d,g,m,y,x,w,v,E,O,P,R;for(d=0;d<e;d+=l){if(y=t[d].label,x=this._resolveTickFontOptions(d),r.font=w=x.string,v=s[w]=s[w]||{data:{},gc:[]},E=x.lineHeight,O=P=0,!xt(y)&&!Wt(y))O=_u(r,v.data,v.gc,O,y),P=E;else if(Wt(y))for(g=0,m=y.length;g<m;++g)R=y[g],!xt(R)&&!Wt(R)&&(O=_u(r,v.data,v.gc,O,R),P+=E);o.push(O),a.push(P),u=Math.max(O,u),h=Math.max(P,h)}K5(s,e);const B=o.indexOf(u),I=a.indexOf(h),z=j=>({width:o[j]||0,height:a[j]||0});return{first:z(0),last:z(e-1),widest:z(B),highest:z(I),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return T3(this._alignToPixels?Mr(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=X5(this.getContext(),t,i))}return this.$context||(this.$context=J5(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Nn(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,u=this.isHorizontal(),d=this.ticks.length+(l?1:0),g=Bo(s),m=[],y=a.setContext(this.getContext()),x=y.display?y.width:0,w=x/2,v=function(ot){return Mr(i,ot,x)};let E,O,P,R,B,I,z,j,Z,it,rt,Ot;if(o==="top")E=v(this.bottom),I=this.bottom-g,j=E-w,it=v(t.top)+w,Ot=t.bottom;else if(o==="bottom")E=v(this.top),it=t.top,Ot=v(t.bottom)-w,I=E+w,j=this.top+g;else if(o==="left")E=v(this.right),B=this.right-g,z=E-w,Z=v(t.left)+w,rt=t.right;else if(o==="right")E=v(this.left),Z=t.left,rt=v(t.right)-w,B=E+w,z=this.left+g;else if(e==="x"){if(o==="center")E=v((t.top+t.bottom)/2+.5);else if(_t(o)){const ot=Object.keys(o)[0],yt=o[ot];E=v(this.chart.scales[ot].getPixelForValue(yt))}it=t.top,Ot=t.bottom,I=E+w,j=I+g}else if(e==="y"){if(o==="center")E=v((t.left+t.right)/2);else if(_t(o)){const ot=Object.keys(o)[0],yt=o[ot];E=v(this.chart.scales[ot].getPixelForValue(yt))}B=E-w,z=B-g,Z=t.left,rt=t.right}const At=lt(r.ticks.maxTicksLimit,d),mt=Math.max(1,Math.ceil(d/At));for(O=0;O<d;O+=mt){const ot=this.getContext(O),yt=s.setContext(ot),Et=a.setContext(ot),Gt=yt.lineWidth,Qe=yt.color,Ht=Et.dash||[],De=Et.dashOffset,Tn=yt.tickWidth,He=yt.tickColor,Pe=yt.tickBorderDash||[],fn=yt.tickBorderDashOffset;P=q5(this,O,l),P!==void 0&&(R=Mr(i,P,Gt),u?B=z=Z=rt=R:I=j=it=Ot=R,m.push({tx1:B,ty1:I,tx2:z,ty2:j,x1:Z,y1:it,x2:rt,y2:Ot,width:Gt,color:Qe,borderDash:Ht,borderDashOffset:De,tickWidth:Tn,tickColor:He,tickBorderDash:Pe,tickBorderDashOffset:fn}))}return this._ticksLength=d,this._borderValue=E,m}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:d}=s,g=Bo(i.grid),m=g+h,y=d?-h:m,x=-Nn(this.labelRotation),w=[];let v,E,O,P,R,B,I,z,j,Z,it,rt,Ot="middle";if(r==="top")B=this.bottom-y,I=this._getXAxisLabelAlignment();else if(r==="bottom")B=this.top+y,I=this._getXAxisLabelAlignment();else if(r==="left"){const mt=this._getYAxisLabelAlignment(g);I=mt.textAlign,R=mt.x}else if(r==="right"){const mt=this._getYAxisLabelAlignment(g);I=mt.textAlign,R=mt.x}else if(e==="x"){if(r==="center")B=(t.top+t.bottom)/2+m;else if(_t(r)){const mt=Object.keys(r)[0],ot=r[mt];B=this.chart.scales[mt].getPixelForValue(ot)+m}I=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")R=(t.left+t.right)/2-m;else if(_t(r)){const mt=Object.keys(r)[0],ot=r[mt];R=this.chart.scales[mt].getPixelForValue(ot)}I=this._getYAxisLabelAlignment(g).textAlign}e==="y"&&(l==="start"?Ot="top":l==="end"&&(Ot="bottom"));const At=this._getLabelSizes();for(v=0,E=a.length;v<E;++v){O=a[v],P=O.label;const mt=s.setContext(this.getContext(v));z=this.getPixelForTick(v)+s.labelOffset,j=this._resolveTickFontOptions(v),Z=j.lineHeight,it=Wt(P)?P.length:1;const ot=it/2,yt=mt.color,Et=mt.textStrokeColor,Gt=mt.textStrokeWidth;let Qe=I;o?(R=z,I==="inner"&&(v===E-1?Qe=this.options.reverse?"left":"right":v===0?Qe=this.options.reverse?"right":"left":Qe="center"),r==="top"?u==="near"||x!==0?rt=-it*Z+Z/2:u==="center"?rt=-At.highest.height/2-ot*Z+Z:rt=-At.highest.height+Z/2:u==="near"||x!==0?rt=Z/2:u==="center"?rt=At.highest.height/2-ot*Z:rt=At.highest.height-it*Z,d&&(rt*=-1),x!==0&&!mt.showLabelBackdrop&&(R+=Z/2*Math.sin(x))):(B=z,rt=(1-it)*Z/2);let Ht;if(mt.showLabelBackdrop){const De=Ae(mt.backdropPadding),Tn=At.heights[v],He=At.widths[v];let Pe=rt-De.top,fn=0-De.left;switch(Ot){case"middle":Pe-=Tn/2;break;case"bottom":Pe-=Tn;break}switch(I){case"center":fn-=He/2;break;case"right":fn-=He;break;case"inner":v===E-1?fn-=He:v>0&&(fn-=He/2);break}Ht={left:fn,top:Pe,width:He+De.width,height:Tn+De.height,color:mt.backdropColor}}w.push({label:P,font:j,textOffset:rt,options:{rotation:x,color:yt,strokeColor:Et,strokeWidth:Gt,textAlign:Qe,textBaseline:Ot,translation:[R,B],backdrop:Ht}})}return w}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Nn(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=t+s,l=o.widest.width;let u,h;return e==="left"?r?(h=this.right+s,i==="near"?u="left":i==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,i==="near"?u="right":i==="center"?(u="center",h-=l/2):(u="left",h=this.left)):e==="right"?r?(h=this.left+s,i==="near"?u="right":i==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,i==="near"?u="left":i==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,s,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,o;const a=(l,u,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){const l=r[s];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,d,g;this.isHorizontal()?(u=Mr(t,this.left,o)-o/2,h=Mr(t,this.right,a)+a/2,d=g=l):(d=Mr(t,this.top,o)-o/2,g=Mr(t,this.bottom,a)+a/2,u=h=l),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(u,d),e.lineTo(h,g),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&tf(i,r);const s=this.getLabelItems(t);for(const o of s){const a=o.options,l=o.font,u=o.label,h=o.textOffset;us(i,u,0,h,l,a)}r&&ef(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const s=oe(i.font),o=Ae(i.padding),a=i.align;let l=s.lineHeight/2;e==="bottom"||e==="center"||_t(e)?(l+=o.bottom,Wt(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:u,titleY:h,maxWidth:d,rotation:g}=Y5(this,l,e,a);us(t,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:g,textAlign:G5(a,e,r),textBaseline:"middle",translation:[u,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=lt(t.grid&&t.grid.z,-1),r=lt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==ds.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=e.length;s<o;++s){const a=e[s];a[i]===this.id&&(!t||a.type===t)&&r.push(a)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return oe(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class uc{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;tV(e)&&(i=this.register(e));const r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,Z5(t,o,i),this.override&&Vt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in Vt[r]&&(delete Vt[r][i],this.override&&delete cs[i])}}function Z5(n,t,e){const i=Oa(Object.create(null),[e?Vt.get(e):{},Vt.get(t),n.defaults]);Vt.set(t,i),n.defaultRoutes&&Q5(t,n.defaultRoutes),n.descriptors&&Vt.describe(t,n.descriptors)}function Q5(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),s=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");Vt.route(s,r,l,a)})}function tV(n){return"id"in n&&"defaults"in n}class eV{constructor(){this.controllers=new uc(pr,"datasets",!0),this.elements=new uc(Ti,"elements"),this.plugins=new uc(Object,"plugins"),this.scales=new uc(ds,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):Tt(r,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){const r=Ng(t);Lt(i["before"+r],[],i),e[t](i),Lt(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var Jn=new eV;class nV{constructor(){this._init=void 0}notify(t,e,i,r){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,i);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,e,i,r){r=r||{};for(const s of t){const o=s.plugin,a=o[i],l=[e,r,s.options];if(Lt(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){xt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=lt(i.options&&i.options.plugins,{}),s=iV(i);return r===!1&&!e?[]:sV(t,s,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function iV(n){const t={},e=[],i=Object.keys(Jn.plugins.items);for(let s=0;s<i.length;s++)e.push(Jn.getPlugin(i[s]));const r=n.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function rV(n,t){return!t&&n===!1?null:n===!0?{}:n}function sV(n,{plugins:t,localIds:e},i,r){const s=[],o=n.getContext();for(const a of t){const l=a.id,u=rV(i[l],r);u!==null&&s.push({plugin:a,options:oV(n.config,{plugin:a,local:e[l]},u,o)})}return s}function oV(n,{plugin:t,local:e},i,r){const s=n.pluginScopeKeys(t),o=n.getOptionScopes(i,s);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function _p(n,t){const e=Vt.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function aV(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function lV(n,t){return n===t?"_index_":"_value_"}function hw(n){if(n==="x"||n==="y"||n==="r")return n}function cV(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Sp(n,...t){if(hw(n))return n;for(const e of t){const i=e.axis||cV(e.position)||n.length>1&&hw(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function dw(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function uV(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return dw(n,"x",e[0])||dw(n,"y",e[0])}return{}}function fV(n,t){const e=cs[n.type]||{scales:{}},i=t.scales||{},r=_p(n.type,t),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!_t(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Sp(o,a,uV(o,n),Vt.scales[a.type]),u=lV(l,r),h=e.scales||{};s[o]=ca(Object.create(null),[{axis:l},a,h[l],h[u]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||_p(a,t),h=(cs[a]||{}).scales||{};Object.keys(h).forEach(d=>{const g=aV(d,l),m=o[g+"AxisID"]||g;s[m]=s[m]||Object.create(null),ca(s[m],[{axis:g},i[m],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];ca(a,[Vt.scales[a.type],Vt.scale])}),s}function pk(n){const t=n.options||(n.options={});t.plugins=lt(t.plugins,{}),t.scales=fV(n,t)}function gk(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function hV(n){return n=n||{},n.data=gk(n.data),pk(n),n}const pw=new Map,mk=new Set;function fc(n,t){let e=pw.get(n);return e||(e=t(),pw.set(n,e),mk.add(e)),e}const zo=(n,t,e)=>{const i=ar(t,e);i!==void 0&&n.add(i)};class dV{constructor(t){this._config=hV(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=gk(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),pk(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return fc(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return fc(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return fc(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return fc(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:s}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;const l=new Set;e.forEach(h=>{t&&(l.add(t),h.forEach(d=>zo(l,t,d))),h.forEach(d=>zo(l,r,d)),h.forEach(d=>zo(l,cs[s]||{},d)),h.forEach(d=>zo(l,Vt,d)),h.forEach(d=>zo(l,xp,d))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),mk.has(e)&&o.set(e,u),u}chartOptionScopes(){const{options:t,type:e}=this;return[t,cs[e]||{},Vt.datasets[e]||{},{type:e},Vt,xp]}resolveNamedOptions(t,e,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=gw(this._resolverCache,t,r);let l=o;if(gV(o,e)){s.$shared=!1,i=lr(i)?i():i;const u=this.createResolver(t,i,a);l=Ys(o,i,u)}for(const u of e)s[u]=l[u];return s}createResolver(t,e,i=[""],r){const{resolver:s}=gw(this._resolverCache,t,i);return _t(e)?Ys(s,e,void 0,r):s}}function gw(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let s=i.get(r);return s||(s={resolver:Wg(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const pV=n=>_t(n)&&Object.getOwnPropertyNames(n).some(t=>lr(n[t]));function gV(n,t){const{isScriptable:e,isIndexable:i}=Kv(n);for(const r of t){const s=e(r),o=i(r),a=(o||s)&&n[r];if(s&&(lr(a)||pV(a))||o&&Wt(a))return!0}return!1}var mV="4.5.1";const yV=["top","bottom","left","right","chartArea"];function mw(n,t){return n==="top"||n==="bottom"||yV.indexOf(n)===-1&&t==="x"}function yw(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function bw(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Lt(e&&e.onComplete,[n],t)}function bV(n){const t=n.chart,e=t.options.animation;Lt(e&&e.onProgress,[n],t)}function yk(n){return jg()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Cc={},xw=n=>{const t=yk(n);return Object.values(Cc).filter(e=>e.canvas===t).pop()};function xV(n,t,e){const i=Object.keys(n);for(const r of i){const s=+r;if(s>=t){const o=n[r];delete n[r],(e>0||s>t)&&(n[s+e]=o)}}}function wV(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}class Xn{static defaults=Vt;static instances=Cc;static overrides=cs;static registry=Jn;static version=mV;static getChart=xw;static register(...t){Jn.add(...t),ww()}static unregister(...t){Jn.remove(...t),ww()}constructor(t,e){const i=this.config=new dV(e),r=yk(t),s=xw(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||B5(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=g3(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new nV,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=D3(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Cc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}mi.listen(this,"complete",bw),mi.listen(this,"progress",bV),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:s}=this;return xt(t)?e&&s?s:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Jn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Wx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return zx(this.canvas,this.ctx),this}stop(){return mi.stop(this),this}resize(t,e){mi.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,e,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Wx(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Lt(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Tt(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];e&&(s=s.concat(Object.keys(e).map(o=>{const a=e[o],l=Sp(o,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),Tt(s,o=>{const a=o.options,l=a.id,u=Sp(l,a),h=lt(a.type,o.dtype);(a.position===void 0||mw(a.position,u)!==mw(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const g=Jn.getScale(h);d=new g({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,t)}),Tt(r,(o,a)=>{o||delete i[a]}),Tt(i,o=>{Te.configure(this,o,o.options),Te.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,s)=>r.index-s.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(yw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const s=e[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||_p(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Jn.getController(a),{datasetElementType:u,dataElementType:h}=Vt.datasets[a];Object.assign(l,{dataElementType:Jn.getElement(h),datasetElementType:u&&Jn.getElement(u)}),o.controller=new l(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Tt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:d}=this.getDatasetMeta(u),g=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(g),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Tt(s,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(yw("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Tt(this.scales,t=>{Te.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Ax(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of e){const o=i==="_removeElements"?-s:s;xV(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=s=>new Set(t.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<e;s++)if(!Ax(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Te.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Tt(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,lr(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(mi.has(this)?this.attached&&!mi.running(this)&&mi.start(this):(this.draw(),bw({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,s;for(r=0,s=e.length;r<s;++r){const o=e[r];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=rk(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&tf(e,r),t.controller.draw(),r&&ef(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return vi(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const s=y5.modes[e];return typeof s=="function"?s(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(s=>s&&s._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=dr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",s=this.getDatasetMeta(t),o=s.controller._resolveAnimations(void 0,r);Aa(e)?(s.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),mi.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),zx(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Cc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(s,o)=>{e.addEventListener(this,s,o),t[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Tt(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(l,u)=>{e.addEventListener(this,l,u),t[l]=u},r=(l,u)=>{t[l]&&(e.removeEventListener(this,l,u),delete t[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){Tt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Tt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let s,o,a,l;for(e==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!bu(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,s=(l,u)=>l.filter(h=>!u.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(e,t),a=i?t:s(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:s}=this,o=e,a=this._getActiveElements(t,r,i,o),l=_3(t),u=wV(t,this._lastEvent,i,l);i&&(this._lastEvent=null,Lt(s.onHover,[t,a,this],this),l&&Lt(s.onClick,[t,a,this],this));const h=!bu(a,r);return(h||e)&&(this._active=a,this._updateHoverStyles(a,r,e)),this._lastEvent=u,h}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}}function ww(){return Tt(Xn.instances,n=>n._plugins.invalidate())}function _V(n,t,e){const{startAngle:i,x:r,y:s,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:u,borderJoinStyle:h}=l,d=Math.min(u/o,Me(i-e));if(n.beginPath(),n.arc(r,s,o-u/2,i+d/2,e-d/2),a>0){const g=Math.min(u/a,Me(i-e));n.arc(r,s,a+u/2,e-g/2,i+g/2,!0)}else{const g=Math.min(u/2,o*Me(i-e));if(h==="round")n.arc(r,s,g,e-vt/2,i+vt/2,!0);else if(h==="bevel"){const m=2*g*g,y=-m*Math.cos(e+vt/2)+r,x=-m*Math.sin(e+vt/2)+s,w=m*Math.cos(i+vt/2)+r,v=m*Math.sin(i+vt/2)+s;n.lineTo(y,x),n.lineTo(w,v)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function SV(n,t,e){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=t;let u=r/a;n.beginPath(),n.arc(s,o,a,i-u,e+u),l>r?(u=r/l,n.arc(s,o,l,e+u,i-u,!0)):n.arc(s,o,r,e+Qt,i-Qt),n.closePath(),n.clip()}function vV(n){return $g(n,["outerStart","outerEnd","innerStart","innerEnd"])}function kV(n,t,e,i){const r=vV(n.options.borderRadius),s=(e-t)/2,o=Math.min(s,i*t/2),a=l=>{const u=(e-Math.min(s,l))*i/2;return ue(l,0,Math.min(s,u))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:ue(r.innerStart,0,o),innerEnd:ue(r.innerEnd,0,o)}}function Ds(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function ku(n,t,e,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:u,innerRadius:h}=t,d=Math.max(t.outerRadius+i+e-u,0),g=h>0?h+i+e+u:0;let m=0;const y=r-l;if(i){const mt=h>0?h-i:0,ot=d>0?d-i:0,yt=(mt+ot)/2,Et=yt!==0?y*yt/(yt+i):y;m=(y-Et)/2}const x=Math.max(.001,y*d-e/vt)/d,w=(y-x)/2,v=l+w+m,E=r-w-m,{outerStart:O,outerEnd:P,innerStart:R,innerEnd:B}=kV(t,g,d,E-v),I=d-O,z=d-P,j=v+O/I,Z=E-P/z,it=g+R,rt=g+B,Ot=v+R/it,At=E-B/rt;if(n.beginPath(),s){const mt=(j+Z)/2;if(n.arc(o,a,d,j,mt),n.arc(o,a,d,mt,Z),P>0){const Gt=Ds(z,Z,o,a);n.arc(Gt.x,Gt.y,P,Z,E+Qt)}const ot=Ds(rt,E,o,a);if(n.lineTo(ot.x,ot.y),B>0){const Gt=Ds(rt,At,o,a);n.arc(Gt.x,Gt.y,B,E+Qt,At+Math.PI)}const yt=(E-B/g+(v+R/g))/2;if(n.arc(o,a,g,E-B/g,yt,!0),n.arc(o,a,g,yt,v+R/g,!0),R>0){const Gt=Ds(it,Ot,o,a);n.arc(Gt.x,Gt.y,R,Ot+Math.PI,v-Qt)}const Et=Ds(I,v,o,a);if(n.lineTo(Et.x,Et.y),O>0){const Gt=Ds(I,j,o,a);n.arc(Gt.x,Gt.y,O,v-Qt,j)}}else{n.moveTo(o,a);const mt=Math.cos(j)*d+o,ot=Math.sin(j)*d+a;n.lineTo(mt,ot);const yt=Math.cos(Z)*d+o,Et=Math.sin(Z)*d+a;n.lineTo(yt,Et)}n.closePath()}function CV(n,t,e,i,r){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){ku(n,t,e,i,l,r);for(let u=0;u<s;++u)n.fill();isNaN(a)||(l=o+(a%Bt||Bt))}return ku(n,t,e,i,l,r),n.fill(),l}function MV(n,t,e,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:u,borderJoinStyle:h,borderDash:d,borderDashOffset:g,borderRadius:m}=l,y=l.borderAlign==="inner";if(!u)return;n.setLineDash(d||[]),n.lineDashOffset=g,y?(n.lineWidth=u*2,n.lineJoin=h||"round"):(n.lineWidth=u,n.lineJoin=h||"bevel");let x=t.endAngle;if(s){ku(n,t,e,i,x,r);for(let w=0;w<s;++w)n.stroke();isNaN(a)||(x=o+(a%Bt||Bt))}y&&SV(n,t,x),l.selfJoin&&x-o>=vt&&m===0&&h!=="miter"&&_V(n,t,x),s||(ku(n,t,e,i,x,r),n.stroke())}class EV extends Ti{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const r=this.getProps(["x","y"],i),{angle:s,distance:o}=Fv(r,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:u,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),g=(this.options.spacing+this.options.borderWidth)/2,m=lt(d,l-a),y=Ra(s,a,l)&&a!==l,x=m>=Bt||y,w=_i(o,u+g,h+g);return x&&w}getCenterPoint(t){const{x:e,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:u}=this.options,h=(r+s)/2,d=(o+a+u+l)/2;return{x:e+Math.cos(h)*d,y:i+Math.sin(h)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,r=(e.offset||0)/4,s=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=i>Bt?Math.floor(i/Bt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*r,Math.sin(a)*r);const l=1-Math.sin(Math.min(vt,i||0)),u=r*l;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,CV(t,this,u,s,o),MV(t,this,u,s,o),t.restore()}}function bk(n,t,e=t){n.lineCap=lt(e.borderCapStyle,t.borderCapStyle),n.setLineDash(lt(e.borderDash,t.borderDash)),n.lineDashOffset=lt(e.borderDashOffset,t.borderDashOffset),n.lineJoin=lt(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=lt(e.borderWidth,t.borderWidth),n.strokeStyle=lt(e.borderColor,t.borderColor)}function TV(n,t,e){n.lineTo(e.x,e.y)}function OV(n){return n.stepped?U3:n.tension||n.cubicInterpolationMode==="monotone"?j3:TV}function xk(n,t,e={}){const i=n.length,{start:r=0,end:s=i-1}=e,{start:o,end:a}=t,l=Math.max(r,o),u=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:t.loop,ilen:u<l&&!h?i+u-l:u-l}}function AV(n,t,e,i){const{points:r,options:s}=t,{count:o,start:a,loop:l,ilen:u}=xk(r,e,i),h=OV(s);let{move:d=!0,reverse:g}=i||{},m,y,x;for(m=0;m<=u;++m)y=r[(a+(g?u-m:m))%o],!y.skip&&(d?(n.moveTo(y.x,y.y),d=!1):h(n,x,y,g,s.stepped),x=y);return l&&(y=r[(a+(g?u:0))%o],h(n,x,y,g,s.stepped)),!!l}function RV(n,t,e,i){const r=t.points,{count:s,start:o,ilen:a}=xk(r,e,i),{move:l=!0,reverse:u}=i||{};let h=0,d=0,g,m,y,x,w,v;const E=P=>(o+(u?a-P:P))%s,O=()=>{x!==w&&(n.lineTo(h,w),n.lineTo(h,x),n.lineTo(h,v))};for(l&&(m=r[E(0)],n.moveTo(m.x,m.y)),g=0;g<=a;++g){if(m=r[E(g)],m.skip)continue;const P=m.x,R=m.y,B=P|0;B===y?(R<x?x=R:R>w&&(w=R),h=(d*h+P)/++d):(O(),n.lineTo(P,R),y=B,d=0,x=w=R),v=R}O()}function vp(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?RV:AV}function DV(n){return n.stepped?vW:n.tension||n.cubicInterpolationMode==="monotone"?kW:Rr}function PV(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),bk(n,t.options),n.stroke(r)}function IV(n,t,e,i){const{segments:r,options:s}=t,o=vp(t);for(const a of r)bk(n,s,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const LV=typeof Path2D=="function";function NV(n,t,e,i){LV&&!t.options.segment?PV(n,t,e,i):IV(n,t,e,i)}class sf extends Ti{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;gW(this._points,i,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=AW(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,r=t[e],s=this.points,o=ik(this,{property:e,start:r,end:r});if(!o.length)return;const a=[],l=DV(i);let u,h;for(u=0,h=o.length;u<h;++u){const{start:d,end:g}=o[u],m=s[d],y=s[g];if(m===y){a.push(m);continue}const x=Math.abs((r-m[e])/(y[e]-m[e])),w=l(m,y,x,i.stepped);w[e]=t[e],a.push(w)}return a.length===1?a[0]:a}pathSegment(t,e,i){return vp(this)(t,this,e,i)}path(t,e,i){const r=this.segments,s=vp(this);let o=this._loop;e=e||0,i=i||this.points.length-e;for(const a of r)o&=s(t,this,a,{start:e,end:e+i-1});return!!o}draw(t,e,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),NV(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function _w(n,t,e,i){const r=n.options,{[e]:s}=n.getProps([e],i);return Math.abs(t-s)<r.radius+r.hitRadius}class FV extends Ti{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const r=this.options,{x:s,y:o}=this.getProps(["x","y"],i);return Math.pow(t-s,2)+Math.pow(e-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return _w(this,t,"x",e)}inYRange(t,e){return _w(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const i=e&&t.borderWidth||0;return(e+i)*2}draw(t,e){const i=this.options;this.skip||i.radius<.1||!vi(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,wp(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function wk(n,t){const{x:e,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],t);let a,l,u,h,d;return n.horizontal?(d=o/2,a=Math.min(e,r),l=Math.max(e,r),u=i-d,h=i+d):(d=s/2,a=e-d,l=e+d,u=Math.min(i,r),h=Math.max(i,r)),{left:a,top:u,right:l,bottom:h}}function Zi(n,t,e,i){return n?0:ue(t,e,i)}function BV(n,t,e){const i=n.options.borderWidth,r=n.borderSkipped,s=qv(i);return{t:Zi(r.top,s.top,0,e),r:Zi(r.right,s.right,0,t),b:Zi(r.bottom,s.bottom,0,e),l:Zi(r.left,s.left,0,t)}}function zV(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=Gr(r),o=Math.min(t,e),a=n.borderSkipped,l=i||_t(r);return{topLeft:Zi(!l||a.top||a.left,s.topLeft,0,o),topRight:Zi(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Zi(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Zi(!l||a.bottom||a.right,s.bottomRight,0,o)}}function HV(n){const t=wk(n),e=t.right-t.left,i=t.bottom-t.top,r=BV(n,e/2,i/2),s=zV(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function bd(n,t,e,i){const r=t===null,s=e===null,a=n&&!(r&&s)&&wk(n,i);return a&&(r||_i(t,a.left,a.right))&&(s||_i(e,a.top,a.bottom))}function $V(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function WV(n,t){n.rect(t.x,t.y,t.w,t.h)}function xd(n,t,e={}){const i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0,s=(n.x+n.w!==e.x+e.w?t:0)-i,o=(n.y+n.h!==e.y+e.h?t:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}class VV extends Ti{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=HV(this),a=$V(o.radius)?Da:WV;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),a(t,xd(o,e,s)),t.clip(),a(t,xd(s,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,xd(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return bd(this,t,e,i)}inXRange(t,e){return bd(this,t,null,e)}inYRange(t,e){return bd(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}var UV=Object.freeze({__proto__:null,ArcElement:EV,BarElement:VV,LineElement:sf,PointElement:FV});const kp=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Sw=kp.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function _k(n){return kp[n%kp.length]}function Sk(n){return Sw[n%Sw.length]}function jV(n,t){return n.borderColor=_k(t),n.backgroundColor=Sk(t),++t}function qV(n,t){return n.backgroundColor=n.data.map(()=>_k(t++)),t}function KV(n,t){return n.backgroundColor=n.data.map(()=>Sk(t++)),t}function JV(n){let t=0;return(e,i)=>{const r=n.getDatasetMeta(i).controller;r instanceof Kg?t=qV(e,t):r instanceof lk?t=KV(e,t):r&&(t=jV(e,t))}}function vw(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function XV(n){return n&&(n.borderColor||n.backgroundColor)}function GV(){return Vt.borderColor!=="rgba(0,0,0,0.1)"||Vt.backgroundColor!=="rgba(0,0,0,0.1)"}var YV={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;const{data:{datasets:i},options:r}=n.config,{elements:s}=r,o=vw(i)||XV(r)||s&&vw(s)||GV();if(!e.forceOverride&&o)return;const a=JV(n);i.forEach(a)}};function ZV(n,t,e,i,r){const s=r.samples||i;if(s>=e)return n.slice(t,t+e);const o=[],a=(e-2)/(s-2);let l=0;const u=t+e-1;let h=t,d,g,m,y,x;for(o[l++]=n[h],d=0;d<s-2;d++){let w=0,v=0,E;const O=Math.floor((d+1)*a)+1+t,P=Math.min(Math.floor((d+2)*a)+1,e)+t,R=P-O;for(E=O;E<P;E++)w+=n[E].x,v+=n[E].y;w/=R,v/=R;const B=Math.floor(d*a)+1+t,I=Math.min(Math.floor((d+1)*a)+1,e)+t,{x:z,y:j}=n[h];for(m=y=-1,E=B;E<I;E++)y=.5*Math.abs((z-w)*(n[E].y-j)-(z-n[E].x)*(v-j)),y>m&&(m=y,g=n[E],x=E);o[l++]=g,h=x}return o[l++]=n[u],o}function QV(n,t,e,i){let r=0,s=0,o,a,l,u,h,d,g,m,y,x;const w=[],v=t+e-1,E=n[t].x,P=n[v].x-E;for(o=t;o<t+e;++o){a=n[o],l=(a.x-E)/P*i,u=a.y;const R=l|0;if(R===h)u<y?(y=u,d=o):u>x&&(x=u,g=o),r=(s*r+a.x)/++s;else{const B=o-1;if(!xt(d)&&!xt(g)){const I=Math.min(d,g),z=Math.max(d,g);I!==m&&I!==B&&w.push({...n[I],x:r}),z!==m&&z!==B&&w.push({...n[z],x:r})}o>0&&B!==m&&w.push(n[B]),w.push(a),h=R,s=0,y=x=u,d=g=m=o}}return w}function vk(n){if(n._decimated){const t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function kw(n){n.data.datasets.forEach(t=>{vk(t)})}function t4(n,t){const e=t.length;let i=0,r;const{iScale:s}=n,{min:o,max:a,minDefined:l,maxDefined:u}=s.getUserBounds();return l&&(i=ue(Si(t,s.axis,o).lo,0,e-1)),u?r=ue(Si(t,s.axis,a).hi+1,i,e)-i:r=e-i,{start:i,count:r}}var e4={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){kw(n);return}const i=n.width;n.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:a}=r,l=n.getDatasetMeta(s),u=o||r.data;if(Ko([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=n.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||n.options.parsing)return;let{start:d,count:g}=t4(l,u);const m=e.threshold||4*i;if(g<=m){vk(r);return}xt(o)&&(r._data=u,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(x){this._data=x}}));let y;switch(e.algorithm){case"lttb":y=ZV(u,d,g,i,e);break;case"min-max":y=QV(u,d,g,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=y})},destroy(n){kw(n)}};function n4(n,t,e){const i=n.segments,r=n.points,s=t.points,o=[];for(const a of i){let{start:l,end:u}=a;u=of(l,u,r);const h=Cp(e,r[l],r[u],a.loop);if(!t.segments){o.push({source:a,target:h,start:r[l],end:r[u]});continue}const d=ik(t,h);for(const g of d){const m=Cp(e,s[g.start],s[g.end],g.loop),y=nk(a,r,m);for(const x of y)o.push({source:x,target:g,start:{[e]:Cw(h,m,"start",Math.max)},end:{[e]:Cw(h,m,"end",Math.min)}})}}return o}function Cp(n,t,e,i){if(i)return;let r=t[n],s=e[n];return n==="angle"&&(r=Me(r),s=Me(s)),{property:n,start:r,end:s}}function i4(n,t){const{x:e=null,y:i=null}=n||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:a})=>{a=of(o,a,r);const l=r[o],u=r[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:u.x,y:i})):e!==null&&(s.push({x:e,y:l.y}),s.push({x:e,y:u.y}))}),s}function of(n,t,e){for(;t>n;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function Cw(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function kk(n,t){let e=[],i=!1;return Wt(n)?(i=!0,e=n):e=i4(n,t),e.length?new sf({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function Mw(n){return n&&n.fill!==!1}function r4(n,t,e){let r=n[t].fill;const s=[t];let o;if(!e)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Xt(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function s4(n,t,e){const i=c4(n);if(_t(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Xt(r)&&Math.floor(r)===r?o4(i[0],t,r,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function o4(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function a4(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:_t(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function l4(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:_t(n)?i=n.value:i=t.getBaseValue(),i}function c4(n){const t=n.options,e=t.fill;let i=lt(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function u4(n){const{scale:t,index:e,line:i}=n,r=[],s=i.segments,o=i.points,a=f4(t,e);a.push(kk({x:null,y:t.bottom},i));for(let l=0;l<s.length;l++){const u=s[l];for(let h=u.start;h<=u.end;h++)h4(r,o[h],a)}return new sf({points:r,options:{}})}function f4(n,t){const e=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}function h4(n,t,e){const i=[];for(let r=0;r<e.length;r++){const s=e[r],{first:o,last:a,point:l}=d4(s,t,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function d4(n,t,e){const i=n.interpolate(t,e);if(!i)return{};const r=i[e],s=n.segments,o=n.points;let a=!1,l=!1;for(let u=0;u<s.length;u++){const h=s[u],d=o[h.start][e],g=o[h.end][e];if(_i(r,d,g)){a=r===d,l=r===g;break}}return{first:a,last:l,point:i}}class Ck{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:r,y:s,radius:o}=this;return e=e||{start:0,end:Bt},t.arc(r,s,o,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:r}=this,s=t.angle;return{x:e+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function p4(n){const{chart:t,fill:e,line:i}=n;if(Xt(e))return g4(t,e);if(e==="stack")return u4(n);if(e==="shape")return!0;const r=m4(n);return r instanceof Ck?r:kk(r,i)}function g4(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function m4(n){return(n.scale||{}).getPointPositionForValue?b4(n):y4(n)}function y4(n){const{scale:t={},fill:e}=n,i=a4(e,t);if(Xt(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function b4(n){const{scale:t,fill:e}=n,i=t.options,r=t.getLabels().length,s=i.reverse?t.max:t.min,o=l4(e,t,s),a=[];if(i.grid.circular){const l=t.getPointPositionForValue(0,s);return new Ck({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(t.getPointPositionForValue(l,o));return a}function wd(n,t,e){const i=p4(t),{chart:r,index:s,line:o,scale:a,axis:l}=t,u=o.options,h=u.fill,d=u.backgroundColor,{above:g=d,below:m=d}=h||{},y=r.getDatasetMeta(s),x=rk(r,y);i&&o.points.length&&(tf(n,e),x4(n,{line:o,target:i,above:g,below:m,area:e,scale:a,axis:l,clip:x}),ef(n))}function x4(n,t){const{line:e,target:i,above:r,below:s,area:o,scale:a,clip:l}=t,u=e._loop?"angle":t.axis;n.save();let h=s;s!==r&&(u==="x"?(Ew(n,i,o.top),_d(n,{line:e,target:i,color:r,scale:a,property:u,clip:l}),n.restore(),n.save(),Ew(n,i,o.bottom)):u==="y"&&(Tw(n,i,o.left),_d(n,{line:e,target:i,color:s,scale:a,property:u,clip:l}),n.restore(),n.save(),Tw(n,i,o.right),h=r)),_d(n,{line:e,target:i,color:h,scale:a,property:u,clip:l}),n.restore()}function Ew(n,t,e){const{segments:i,points:r}=t;let s=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:u}=a,h=r[l],d=r[of(l,u,r)];s?(n.moveTo(h.x,h.y),s=!1):(n.lineTo(h.x,e),n.lineTo(h.x,h.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function Tw(n,t,e){const{segments:i,points:r}=t;let s=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:u}=a,h=r[l],d=r[of(l,u,r)];s?(n.moveTo(h.x,h.y),s=!1):(n.lineTo(e,h.y),n.lineTo(h.x,h.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(e,d.y)}n.lineTo(e,t.first().y),n.closePath(),n.clip()}function _d(n,t){const{line:e,target:i,property:r,color:s,scale:o,clip:a}=t,l=n4(e,i,r);for(const{source:u,target:h,start:d,end:g}of l){const{style:{backgroundColor:m=s}={}}=u,y=i!==!0;n.save(),n.fillStyle=m,w4(n,o,a,y&&Cp(r,d,g)),n.beginPath();const x=!!e.pathSegment(n,u);let w;if(y){x?n.closePath():Ow(n,i,g,r);const v=!!i.pathSegment(n,h,{move:x,reverse:!0});w=x&&v,w||Ow(n,i,d,r)}n.closePath(),n.fill(w?"evenodd":"nonzero"),n.restore()}}function w4(n,t,e,i){const r=t.chart.chartArea,{property:s,start:o,end:a}=i||{};if(s==="x"||s==="y"){let l,u,h,d;s==="x"?(l=o,u=r.top,h=a,d=r.bottom):(l=r.left,u=o,h=r.right,d=a),n.beginPath(),e&&(l=Math.max(l,e.left),h=Math.min(h,e.right),u=Math.max(u,e.top),d=Math.min(d,e.bottom)),n.rect(l,u,h-l,d-u),n.clip()}}function Ow(n,t,e,i){const r=t.interpolate(e,i);r&&n.lineTo(r.x,r.y)}var _4={id:"filler",afterDatasetsUpdate(n,t,e){const i=(n.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof sf&&(l={visible:n.isDatasetVisible(o),index:o,fill:s4(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=r4(r,o,e.propagate))},beforeDraw(n,t,e){const i=e.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&wd(n.ctx,a,s))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;Mw(s)&&wd(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,t,e){const i=t.meta.$filler;!Mw(i)||e.drawTime!=="beforeDatasetDraw"||wd(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Aw=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},S4=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class Rw extends Ti{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Lt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=oe(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Aw(i,s);let u,h;e.font=r.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,u=this._fitCols(o,r,a,l)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=r+a;let d=t;s.textAlign="left",s.textBaseline="middle";let g=-1,m=-h;return this.legendItems.forEach((y,x)=>{const w=i+e/2+s.measureText(y.text).width;(x===0||u[u.length-1]+w+2*a>o)&&(d+=h,u[u.length-(x>0?0:1)]=0,m+=h,g++),l[x]={left:0,top:m,row:g,width:w,height:r},u[u.length-1]+=w+a}),d}_fitCols(t,e,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-t;let d=a,g=0,m=0,y=0,x=0;return this.legendItems.forEach((w,v)=>{const{itemWidth:E,itemHeight:O}=v4(i,e,s,w,r);v>0&&m+O+2*a>h&&(d+=g+a,u.push({width:g,height:m}),y+=g+a,x++,g=m=0),l[v]={left:y,top:m,col:x,width:E,height:O},g=Math.max(g,E),m+=O+a}),d+=g,u.push({width:g,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Ws(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=ke(i,this.left+r,this.right-this.lineWidths[a]);for(const u of e)a!==u.row&&(a=u.row,l=ke(i,this.left+r,this.right-this.lineWidths[a])),u.top+=this.top+t+r,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+r}else{let a=0,l=ke(i,this.top+t+r,this.bottom-this.columnSizes[a].height);for(const u of e)u.col!==a&&(a=u.col,l=ke(i,this.top+t+r,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+r,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;tf(t,this),this._draw(),ef(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:s,labels:o}=t,a=Vt.color,l=Ws(t.rtl,this.left,this.width),u=oe(o.font),{padding:h}=o,d=u.size,g=d/2;let m;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:y,boxHeight:x,itemHeight:w}=Aw(o,d),v=function(B,I,z){if(isNaN(y)||y<=0||isNaN(x)||x<0)return;r.save();const j=lt(z.lineWidth,1);if(r.fillStyle=lt(z.fillStyle,a),r.lineCap=lt(z.lineCap,"butt"),r.lineDashOffset=lt(z.lineDashOffset,0),r.lineJoin=lt(z.lineJoin,"miter"),r.lineWidth=j,r.strokeStyle=lt(z.strokeStyle,a),r.setLineDash(lt(z.lineDash,[])),o.usePointStyle){const Z={radius:x*Math.SQRT2/2,pointStyle:z.pointStyle,rotation:z.rotation,borderWidth:j},it=l.xPlus(B,y/2),rt=I+g;jv(r,Z,it,rt,o.pointStyleWidth&&y)}else{const Z=I+Math.max((d-x)/2,0),it=l.leftForLtr(B,y),rt=Gr(z.borderRadius);r.beginPath(),Object.values(rt).some(Ot=>Ot!==0)?Da(r,{x:it,y:Z,w:y,h:x,radius:rt}):r.rect(it,Z,y,x),r.fill(),j!==0&&r.stroke()}r.restore()},E=function(B,I,z){us(r,z.text,B,I+w/2,u,{strikethrough:z.hidden,textAlign:l.textAlign(z.textAlign)})},O=this.isHorizontal(),P=this._computeTitleHeight();O?m={x:ke(s,this.left+h,this.right-i[0]),y:this.top+h+P,line:0}:m={x:this.left+h,y:ke(s,this.top+P+h,this.bottom-e[0].height),line:0},Qv(this.ctx,t.textDirection);const R=w+h;this.legendItems.forEach((B,I)=>{r.strokeStyle=B.fontColor,r.fillStyle=B.fontColor;const z=r.measureText(B.text).width,j=l.textAlign(B.textAlign||(B.textAlign=o.textAlign)),Z=y+g+z;let it=m.x,rt=m.y;l.setWidth(this.width),O?I>0&&it+Z+h>this.right&&(rt=m.y+=R,m.line++,it=m.x=ke(s,this.left+h,this.right-i[m.line])):I>0&&rt+R>this.bottom&&(it=m.x=it+e[m.line].width+h,m.line++,rt=m.y=ke(s,this.top+P+h,this.bottom-e[m.line].height));const Ot=l.x(it);if(v(Ot,rt,B),it=P3(j,it+y+g,O?it+Z:this.right,t.rtl),E(l.x(it),rt,B),O)m.x+=Z+h;else if(typeof B.text!="string"){const At=u.lineHeight;m.y+=Mk(B,At)+h}else m.y+=R}),tk(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=oe(e.font),r=Ae(e.padding);if(!e.display)return;const s=Ws(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=i.size/2,u=r.top+l;let h,d=this.left,g=this.width;if(this.isHorizontal())g=Math.max(...this.lineWidths),h=this.top+u,d=ke(t.align,d,this.right-g);else{const y=this.columnSizes.reduce((x,w)=>Math.max(x,w.height),0);h=u+ke(t.align,this.top,this.bottom-y-t.labels.padding-this._computeTitleHeight())}const m=ke(a,d,d+g);o.textAlign=s.textAlign(zg(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,us(o,e.text,m,h,i)}_computeTitleHeight(){const t=this.options.title,e=oe(t.font),i=Ae(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,s;if(_i(t,this.left,this.right)&&_i(e,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],_i(t,r.left,r.left+r.width)&&_i(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!M4(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,s=S4(r,i);r&&!s&&Lt(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!s&&Lt(e.onHover,[t,i,this],this)}else i&&Lt(e.onClick,[t,i,this],this)}}function v4(n,t,e,i,r){const s=k4(i,n,t,e),o=C4(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}function k4(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),t+e.size/2+i.measureText(r).width}function C4(n,t,e){let i=n;return typeof t.text!="string"&&(i=Mk(t,e)),i}function Mk(n,t){const e=n.text?n.text.length:0;return t*e}function M4(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var E4={id:"legend",_element:Rw,start(n,t,e){const i=n.legend=new Rw({ctx:n.ctx,options:e,chart:n});Te.configure(n,i,e),Te.addBox(n,i)},stop(n){Te.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Te.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(e?0:void 0),h=Ae(u.borderWidth);return{text:t[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:i||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class Xg extends Ti{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const r=Wt(i.text)?i.text.length:1;this._padding=Ae(i.padding);const s=r*oe(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,u,h,d;return this.isHorizontal()?(h=ke(a,i,s),d=e+t,u=s-i):(o.position==="left"?(h=i+t,d=ke(a,r,e),l=vt*-.5):(h=s-t,d=ke(a,e,r),l=vt*.5),u=r-e),{titleX:h,titleY:d,maxWidth:u,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=oe(e.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(s);us(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:u,textAlign:zg(e.align),textBaseline:"middle",translation:[o,a]})}}function T4(n,t){const e=new Xg({ctx:n.ctx,options:t,chart:n});Te.configure(n,e,t),Te.addBox(n,e),n.titleBlock=e}var O4={id:"title",_element:Xg,start(n,t,e){T4(n,e)},stop(n){const t=n.titleBlock;Te.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;Te.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const hc=new WeakMap;var A4={id:"subtitle",start(n,t,e){const i=new Xg({ctx:n.ctx,options:e,chart:n});Te.configure(n,i,e),Te.addBox(n,i),hc.set(n,i)},stop(n){Te.removeBox(n,hc.get(n)),hc.delete(n)},beforeUpdate(n,t,e){const i=hc.get(n);Te.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Xo={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,s=0;for(t=0,e=n.length;t<e;++t){const a=n[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){const l=n[s].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=bp(t,u);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function Un(n,t){return t&&(Wt(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function yi(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function R4(n,t){const{element:e,datasetIndex:i,index:r}=t,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function Dw(n,t){const e=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=t,l=oe(t.bodyFont),u=oe(t.titleFont),h=oe(t.footerFont),d=s.length,g=r.length,m=i.length,y=Ae(t.padding);let x=y.height,w=0,v=i.reduce((P,R)=>P+R.before.length+R.lines.length+R.after.length,0);if(v+=n.beforeBody.length+n.afterBody.length,d&&(x+=d*u.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v){const P=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;x+=m*P+(v-m)*l.lineHeight+(v-1)*t.bodySpacing}g&&(x+=t.footerMarginTop+g*h.lineHeight+(g-1)*t.footerSpacing);let E=0;const O=function(P){w=Math.max(w,e.measureText(P).width+E)};return e.save(),e.font=u.string,Tt(n.title,O),e.font=l.string,Tt(n.beforeBody.concat(n.afterBody),O),E=t.displayColors?o+2+t.boxPadding:0,Tt(i,P=>{Tt(P.before,O),Tt(P.lines,O),Tt(P.after,O)}),E=0,e.font=h.string,Tt(n.footer,O),e.restore(),w+=y.width,{width:w,height:x}}function D4(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function P4(n,t,e,i){const{x:r,width:s}=i,o=e.caretSize+e.caretPadding;if(n==="left"&&r+s+o>t.width||n==="right"&&r-s-o<0)return!0}function I4(n,t,e,i){const{x:r,width:s}=e,{width:o,chartArea:{left:a,right:l}}=n;let u="center";return i==="center"?u=r<=(a+l)/2?"left":"right":r<=s/2?u="left":r>=o-s/2&&(u="right"),P4(u,n,t,e)&&(u="center"),u}function Pw(n,t,e){const i=e.yAlign||t.yAlign||D4(n,e);return{xAlign:e.xAlign||t.xAlign||I4(n,t,e,i),yAlign:i}}function L4(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function N4(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function Iw(n,t,e,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=e,u=r+s,{topLeft:h,topRight:d,bottomLeft:g,bottomRight:m}=Gr(o);let y=L4(t,a);const x=N4(t,l,u);return l==="center"?a==="left"?y+=u:a==="right"&&(y-=u):a==="left"?y-=Math.max(h,g)+r:a==="right"&&(y+=Math.max(d,m)+r),{x:ue(y,0,i.width-t.width),y:ue(x,0,i.height-t.height)}}function dc(n,t,e){const i=Ae(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function Lw(n){return Un([],yi(n))}function F4(n,t,e){return dr(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function Nw(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const Ek={beforeTitle:pi,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:pi,beforeBody:pi,beforeLabel:pi,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return xt(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:pi,afterBody:pi,beforeFooter:pi,footer:pi,afterFooter:pi};function je(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?Ek[t].call(e,i):r}class Fw extends Ti{static positioners=Xo;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,s=new sk(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=F4(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,r=je(i,"beforeTitle",this,t),s=je(i,"title",this,t),o=je(i,"afterTitle",this,t);let a=[];return a=Un(a,yi(r)),a=Un(a,yi(s)),a=Un(a,yi(o)),a}getBeforeBody(t,e){return Lw(je(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return Tt(t,s=>{const o={before:[],lines:[],after:[]},a=Nw(i,s);Un(o.before,yi(je(a,"beforeLabel",this,s))),Un(o.lines,je(a,"label",this,s)),Un(o.after,yi(je(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(t,e){return Lw(je(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=je(i,"beforeFooter",this,t),s=je(i,"footer",this,t),o=je(i,"afterFooter",this,t);let a=[];return a=Un(a,yi(r)),a=Un(a,yi(s)),a=Un(a,yi(o)),a}_createItems(t){const e=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,u;for(l=0,u=e.length;l<u;++l)a.push(R4(this.chart,e[l]));return t.filter&&(a=a.filter((h,d,g)=>t.filter(h,d,g,i))),t.itemSort&&(a=a.sort((h,d)=>t.itemSort(h,d,i))),Tt(a,h=>{const d=Nw(t.callbacks,h);r.push(je(d,"labelColor",this,h)),s.push(je(d,"labelPointStyle",this,h)),o.push(je(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=Xo[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Dw(this,i),u=Object.assign({},a,l),h=Pw(this.chart,i,u),d=Iw(i,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const s=this.getCaretPosition(t,i,r);e.lineTo(s.x1,s.y1),e.lineTo(s.x2,s.y2),e.lineTo(s.x3,s.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:d}=Gr(a),{x:g,y:m}=t,{width:y,height:x}=e;let w,v,E,O,P,R;return s==="center"?(P=m+x/2,r==="left"?(w=g,v=w-o,O=P+o,R=P-o):(w=g+y,v=w+o,O=P-o,R=P+o),E=w):(r==="left"?v=g+Math.max(l,h)+o:r==="right"?v=g+y-Math.max(u,d)-o:v=this.caretX,s==="top"?(O=m,P=O-o,w=v-o,E=v+o):(O=m+x,P=O+o,w=v+o,E=v-o),R=O),{x1:w,x2:v,x3:E,y1:O,y2:P,y3:R}}drawTitle(t,e,i){const r=this.title,s=r.length;let o,a,l;if(s){const u=Ws(i.rtl,this.x,this.width);for(t.x=dc(this,i.titleAlign,i),e.textAlign=u.textAlign(i.titleAlign),e.textBaseline="middle",o=oe(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,l=0;l<s;++l)e.fillText(r[l],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===s&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=s,h=oe(s.bodyFont),d=dc(this,"left",s),g=r.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,y=e.y+m;if(s.usePointStyle){const x={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=r.leftForLtr(g,u)+u/2,v=y+l/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,wp(t,x,w,v),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,wp(t,x,w,v)}else{t.lineWidth=_t(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const x=r.leftForLtr(g,u),w=r.leftForLtr(r.xPlus(g,1),u-2),v=Gr(o.borderRadius);Object.values(v).some(E=>E!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,Da(t,{x,y,w:u,h:l,radius:v}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Da(t,{x:w,y:y+1,w:u-2,h:l-2,radius:v}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(x,y,u,l),t.strokeRect(x,y,u,l),t.fillStyle=o.backgroundColor,t.fillRect(w,y+1,u-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=i,d=oe(i.bodyFont);let g=d.lineHeight,m=0;const y=Ws(i.rtl,this.x,this.width),x=function(z){e.fillText(z,y.x(t.x+m),t.y+g/2),t.y+=g+s},w=y.textAlign(o);let v,E,O,P,R,B,I;for(e.textAlign=o,e.textBaseline="middle",e.font=d.string,t.x=dc(this,w,i),e.fillStyle=i.bodyColor,Tt(this.beforeBody,x),m=a&&w!=="right"?o==="center"?u/2+h:u+2+h:0,P=0,B=r.length;P<B;++P){for(v=r[P],E=this.labelTextColors[P],e.fillStyle=E,Tt(v.before,x),O=v.lines,a&&O.length&&(this._drawColorBox(e,t,P,y,i),g=Math.max(d.lineHeight,l)),R=0,I=O.length;R<I;++R)x(O[R]),g=d.lineHeight;Tt(v.after,x)}m=0,g=d.lineHeight,Tt(this.afterBody,x),t.y-=s}drawFooter(t,e,i){const r=this.footer,s=r.length;let o,a;if(s){const l=Ws(i.rtl,this.x,this.width);for(t.x=dc(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=l.textAlign(i.footerAlign),e.textBaseline="middle",o=oe(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,a=0;a<s;++a)e.fillText(r[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=t,{width:u,height:h}=i,{topLeft:d,topRight:g,bottomLeft:m,bottomRight:y}=Gr(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(a+d,l),o==="top"&&this.drawCaret(t,e,i,r),e.lineTo(a+u-g,l),e.quadraticCurveTo(a+u,l,a+u,l+g),o==="center"&&s==="right"&&this.drawCaret(t,e,i,r),e.lineTo(a+u,l+h-y),e.quadraticCurveTo(a+u,l+h,a+u-y,l+h),o==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(a+m,l+h),e.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&s==="left"&&this.drawCaret(t,e,i,r),e.lineTo(a,l+d),e.quadraticCurveTo(a,l,a+d,l),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=Xo[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Dw(this,t),l=Object.assign({},o,this._size),u=Pw(e,t,l),h=Iw(t,l,u,e);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Ae(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(s,t,r,e),Qv(t,e.textDirection),s.y+=o.top,this.drawTitle(s,t,e),this.drawBody(s,t,e),this.drawFooter(s,t,e),tk(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),s=!bu(i,r),o=this._positionChanged(r,e);(s||o)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(t,s,e,i),a=this._positionChanged(o,t),l=e||!bu(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,i,r){const s=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:i,caretY:r,options:s}=this,o=Xo[s.position].call(this,t,e);return o!==!1&&(i!==o.x||r!==o.y)}}var B4={id:"tooltip",_element:Fw,positioners:Xo,afterInit(n,t,e){e&&(n.tooltip=new Fw({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ek},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},z4=Object.freeze({__proto__:null,Colors:YV,Decimation:e4,Filler:_4,Legend:E4,SubTitle:A4,Title:O4,Tooltip:B4});const H4=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function $4(n,t,e,i){const r=n.indexOf(t);if(r===-1)return H4(n,t,e,i);const s=n.lastIndexOf(t);return r!==s?e:r}const W4=(n,t)=>n===null?null:ue(Math.round(n),0,t);function Bw(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class V4 extends ds{static id="category";static defaults={ticks:{callback:Bw}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:r,label:s}of e)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(xt(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:$4(i,t,lt(e,t),this._addedLabels),W4(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=t===0&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=e;o++)r.push({value:o});return r}getLabelForValue(t){return Bw.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function U4(n,t){const e=[],{bounds:r,step:s,min:o,max:a,precision:l,count:u,maxTicks:h,maxDigits:d,includeBounds:g}=n,m=s||1,y=h-1,{min:x,max:w}=t,v=!xt(o),E=!xt(a),O=!xt(u),P=(w-x)/(d+1);let R=Dx((w-x)/y/m)*m,B,I,z,j;if(R<1e-14&&!v&&!E)return[{value:x},{value:w}];j=Math.ceil(w/R)-Math.floor(x/R),j>y&&(R=Dx(j*R/y/m)*m),xt(l)||(B=Math.pow(10,l),R=Math.ceil(R*B)/B),r==="ticks"?(I=Math.floor(x/R)*R,z=Math.ceil(w/R)*R):(I=x,z=w),v&&E&&s&&M3((a-o)/s,R/1e3)?(j=Math.round(Math.min((a-o)/R,h)),R=(a-o)/j,I=o,z=a):O?(I=v?o:I,z=E?a:z,j=u-1,R=(z-I)/j):(j=(z-I)/R,ua(j,Math.round(j),R/1e3)?j=Math.round(j):j=Math.ceil(j));const Z=Math.max(Px(R),Px(I));B=Math.pow(10,xt(l)?Z:l),I=Math.round(I*B)/B,z=Math.round(z*B)/B;let it=0;for(v&&(g&&I!==o?(e.push({value:o}),I<o&&it++,ua(Math.round((I+it*R)*B)/B,o,zw(o,P,n))&&it++):I<o&&it++);it<j;++it){const rt=Math.round((I+it*R)*B)/B;if(E&&rt>a)break;e.push({value:rt})}return E&&g&&z!==a?e.length&&ua(e[e.length-1].value,a,zw(a,P,n))?e[e.length-1].value=a:e.push({value:a}):(!E||z===a)&&e.push({value:z}),e}function zw(n,t,{horizontal:e,minRotation:i}){const r=Nn(i),s=(e?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+n).length;return Math.min(t/s,o)}class Cu extends ds{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return xt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=e?r:l,a=l=>s=i?s:l;if(t){const l=Zn(r),u=Zn(s);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),t||o(r-l)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,o=U4(r,s);return t.bounds==="ticks"&&Nv(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return ja(t,this.chart.options.locale,this.options.ticks.format)}}class j4 extends Cu{static id="linear";static defaults={ticks:{callback:Qu.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Xt(t)?t:0,this.max=Xt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Nn(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Ia=n=>Math.floor(Gi(n)),Tr=(n,t)=>Math.pow(10,Ia(n)+t);function Hw(n){return n/Math.pow(10,Ia(n))===1}function $w(n,t,e){const i=Math.pow(10,e),r=Math.floor(n/i);return Math.ceil(t/i)-r}function q4(n,t){const e=t-n;let i=Ia(e);for(;$w(n,t,i)>10;)i++;for(;$w(n,t,i)<10;)i--;return Math.min(i,Ia(n))}function K4(n,{min:t,max:e}){t=an(n.min,t);const i=[],r=Ia(t);let s=q4(t,e),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,u=Math.round((t-l)*o)/o,h=Math.floor((t-l)/a/10)*a*10;let d=Math.floor((u-h)/Math.pow(10,s)),g=an(n.min,Math.round((l+h+d*Math.pow(10,s))*o)/o);for(;g<e;)i.push({value:g,major:Hw(g),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),g=Math.round((l+h+d*Math.pow(10,s))*o)/o;const m=an(n.max,g);return i.push({value:m,major:Hw(m),significand:d}),i}class J4 extends ds{static id="logarithmic";static defaults={ticks:{callback:Qu.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Cu.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return Xt(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Xt(t)?Math.max(0,t):null,this.max=Xt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Xt(this._userMin)&&(this.min=t===Tr(this.min,0)?Tr(this.min,-1):Tr(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=t?i:a,o=a=>r=e?r:a;i===r&&(i<=0?(s(1),o(10)):(s(Tr(i,-1)),o(Tr(r,1)))),i<=0&&s(Tr(r,-1)),r<=0&&o(Tr(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=K4(e,this);return t.bounds==="ticks"&&Nv(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":ja(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Gi(t),this._valueRange=Gi(this.max)-Gi(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Gi(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function Mp(n){const t=n.ticks;if(t.display&&n.display){const e=Ae(t.backdropPadding);return lt(t.font&&t.font.size,Vt.font.size)+e.height}return 0}function X4(n,t,e){return e=Wt(e)?e:[e],{w:V3(n,t.string,e),h:e.length*t.lineHeight}}function Ww(n,t,e,i,r){return n===i||n===r?{start:t-e/2,end:t+e/2}:n<i||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function G4(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?vt/s:0;for(let l=0;l<s;l++){const u=o.setContext(n.getPointLabelContext(l));r[l]=u.padding;const h=n.getPointPosition(l,n.drawingArea+r[l],a),d=oe(u.font),g=X4(n.ctx,d,n._pointLabels[l]);i[l]=g;const m=Me(n.getIndexAngle(l)+a),y=Math.round(Fg(m)),x=Ww(y,h.x,g.w,0,180),w=Ww(y,h.y,g.h,90,270);Y4(e,t,m,x,w)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=tU(n,i,r)}function Y4(n,t,e,i,r){const s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/s,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/s,n.r=Math.max(n.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/o,n.t=Math.min(n.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function Z4(n,t,e){const i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=e,l=n.getPointPosition(t,i+r+o,s),u=Math.round(Fg(Me(l.angle+Qt))),h=iU(l.y,a.h,u),d=eU(u),g=nU(l.x,a.w,d);return{visible:!0,x:l.x,y:h,textAlign:d,left:g,top:h,right:g+a.w,bottom:h+a.h}}function Q4(n,t){if(!t)return!0;const{left:e,top:i,right:r,bottom:s}=n;return!(vi({x:e,y:i},t)||vi({x:e,y:s},t)||vi({x:r,y:i},t)||vi({x:r,y:s},t))}function tU(n,t,e){const i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Mp(s)/2,additionalAngle:o?vt/r:0};let u;for(let h=0;h<r;h++){l.padding=e[h],l.size=t[h];const d=Z4(n,h,l);i.push(d),a==="auto"&&(d.visible=Q4(d,u),d.visible&&(u=d))}return i}function eU(n){return n===0||n===180?"center":n<180?"left":"right"}function nU(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function iU(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function rU(n,t,e){const{left:i,top:r,right:s,bottom:o}=e,{backdropColor:a}=t;if(!xt(a)){const l=Gr(t.borderRadius),u=Ae(t.backdropPadding);n.fillStyle=a;const h=i-u.left,d=r-u.top,g=s-i+u.width,m=o-r+u.height;Object.values(l).some(y=>y!==0)?(n.beginPath(),Da(n,{x:h,y:d,w:g,h:m,radius:l}),n.fill()):n.fillRect(h,d,g,m)}}function sU(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let r=t-1;r>=0;r--){const s=n._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(n.getPointLabelContext(r));rU(e,o,s);const a=oe(o.font),{x:l,y:u,textAlign:h}=s;us(e,n._pointLabels[r],l,u+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function Tk(n,t,e,i){const{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,Bt);else{let s=n.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,t),r.lineTo(s.x,s.y)}}function oU(n,t,e,i,r){const s=n.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||e<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),Tk(n,e,o,i),s.closePath(),s.stroke(),s.restore())}function aU(n,t,e){return dr(n,{label:e,index:t,type:"pointLabel"})}class lU extends Cu{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Qu.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Ae(Mp(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Xt(t)&&!isNaN(t)?t:0,this.max=Xt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Mp(this.options))}generateTickLabels(t){Cu.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const r=Lt(this.options.pointLabels.callback,[e,i],this);return r||r===0?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?G4(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){const e=Bt/(this._pointLabels.length||1),i=this.options.startAngle||0;return Me(t*e+Nn(i))}getDistanceFromCenterForValue(t){if(xt(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(xt(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return aU(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const r=this.getIndexAngle(t)-Qt+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),Tk(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:r,border:s}=e,o=this._pointLabels.length;let a,l,u;if(e.pointLabels.display&&sU(this,o),r.display&&this.ticks.forEach((h,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const g=this.getContext(d),m=r.setContext(g),y=s.setContext(g);oU(this,m,l,o,y)}}),i.display){for(t.save(),a=o-1;a>=0;a--){const h=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:g}=h;!g||!d||(t.lineWidth=g,t.strokeStyle=d,t.setLineDash(h.borderDash),t.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),u=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(u.x,u.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;const u=i.setContext(this.getContext(l)),h=oe(u.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),u.showLabelBackdrop){t.font=h.string,o=t.measureText(a.label).width,t.fillStyle=u.backdropColor;const d=Ae(u.backdropPadding);t.fillRect(-o/2-d.left,-s-h.size/2-d.top,o+d.width,h.size+d.height)}us(t,a.label,0,-s,h,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),t.restore()}drawTitle(){}}const af={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ke=Object.keys(af);function Vw(n,t){return n-t}function Uw(n,t){if(xt(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),Xt(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(r&&(o=r==="week"&&(Gs(s)||s===!0)?e.startOf(o,"isoWeek",s):e.startOf(o,r)),+o)}function jw(n,t,e,i){const r=Ke.length;for(let s=Ke.indexOf(n);s<r-1;++s){const o=af[Ke[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=i)return Ke[s]}return Ke[r-1]}function cU(n,t,e,i,r){for(let s=Ke.length-1;s>=Ke.indexOf(e);s--){const o=Ke[s];if(af[o].common&&n._adapter.diff(r,i,o)>=t-1)return o}return Ke[e?Ke.indexOf(e):0]}function uU(n){for(let t=Ke.indexOf(n)+1,e=Ke.length;t<e;++t)if(af[Ke[t]].common)return Ke[t]}function qw(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=Bg(e,t),s=e[i]>=t?e[i]:e[r];n[s]=!0}}function fU(n,t,e,i){const r=n._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}function Kw(n,t,e){const i=[],r={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return s===0||!e?i:fU(n,i,r,e)}class Ep extends ds{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new h5._date(t.adapters.date);r.init(e),ca(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Uw(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!a&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Xt(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),s=Xt(s)&&!isNaN(s)?s:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=A3(r,s,o);return this._unit=e.unit||(i.autoSkip?jw(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):cU(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:uU(this._unit),this.initOffsets(r),t.reverse&&a.reverse(),Kw(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,s;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?i=s:i=(s-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=ue(e,0,o),i=ue(i,0,o),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||jw(s.minUnit,e,i,this._getLabelCapacity(e)),a=lt(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,u=Gs(l)||l===!0,h={};let d=e,g,m;if(u&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,u?"day":o),t.diff(i,e,o)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+o);const y=r.ticks.source==="data"&&this.getDataTimestamps();for(g=d,m=0;g<i;g=+t.add(g,a,o),m++)qw(h,g,y);return(g===i||r.bounds==="ticks"||m===1)&&qw(h,g,y),Object.keys(h).sort(Vw).map(x=>+x)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,s=this._unit,o=e||r[s];return this._adapter.format(t,o)}_tickFormatFunction(t,e,i,r){const s=this.options,o=s.ticks.callback;if(o)return Lt(o,[t,e,i],this);const a=s.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],d=u&&a[u],g=i[e],m=u&&d&&g&&g.major;return this._adapter.format(t,r||(m?d:h))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=Nn(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,s=this._tickFormatFunction(t,0,Kw(this,[t],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(Uw(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return zv(t.sort(Vw))}}function pc(n,t,e){let i=0,r=n.length-1,s,o,a,l;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=Si(n,"pos",t)),{pos:s,time:a}=n[i],{pos:o,time:l}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=Si(n,"time",t)),{time:s,pos:a}=n[i],{time:o,pos:l}=n[r]);const u=o-s;return u?a+(l-a)*(t-s)/u:a}class hU extends Ep{static id="timeseries";static defaults=Ep.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=pc(e,this.min),this._tableRange=pc(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],s=[];let o,a,l,u,h;for(o=0,a=t.length;o<a;++o)u=t[o],u>=e&&u<=i&&r.push(u);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],u=r[o],Math.round((h+l)/2)!==u&&s.push({time:u,pos:o/(a-1)});return s}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(pc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return pc(this._table,i*this._tableRange+this._minPos,!0)}}var dU=Object.freeze({__proto__:null,CategoryScale:V4,LinearScale:j4,LogarithmicScale:J4,RadialLinearScale:lU,TimeScale:Ep,TimeSeriesScale:hU});const pU=[f5,UV,z4,dU];Xn.register(...pU);const gU=()=>({reportFilters:{detailed_labor:{fromDate:"",toDate:"",fromYear:"",toYear:"",workStatus:"",establishmentType:"",workLocation:"",fieldOfWork:"",courseId:"",batchYear:"",page:1},statistical_summary:{fromDate:"",toDate:"",fromYear:"",toYear:"",workStatus:"",establishmentType:"",workLocation:"",fieldOfWork:"",courseId:"",batchYear:""},tracer_study:{fromDate:"",toDate:"",fromYear:"",toYear:"",workStatus:"",establishmentType:"",workLocation:"",fieldOfWork:"",courseId:"",batchYear:""},master_list:{fromDate:"",toDate:"",fromYear:"",toYear:"",workStatus:"",establishmentType:"",workLocation:"",fieldOfWork:"",courseId:"",batchYear:"",subType:"all",search:"",page:1},annual_distribution:{fromDate:"",toDate:"",fromYear:"",toYear:"",workStatus:"",establishmentType:"",workLocation:"",fieldOfWork:"",courseId:"",batchYear:"",subType:"by_year",chartType:"bar"},graduates_by_course:{fromDate:"",toDate:"",fromYear:"",toYear:"",workStatus:"",establishmentType:"",workLocation:"",fieldOfWork:"",courseId:"",batchYear:"",page:1}},activeCharts:{},loading:!1,previewOpen:!1,evalModalOpen:!1,selectedEvaluationId:"",currentReportType:"detailed_labor",currentReportTitle:"",generateUrl:"/admin/reports/generate",evalUrl:"/admin/evaluations",init(){window.addEventListener("keydown",n=>{n.key==="Escape"&&(this.previewOpen=!1,this.evalModalOpen=!1)}),this.printReport=()=>window.print(),this.exportReport=n=>{const t=new URL("/admin/reports/export",window.location.origin),e=this.reportFilters[this.currentReportType];t.searchParams.set("type",this.currentReportType),t.searchParams.set("format",n),e&&Object.keys(e).forEach(i=>{if(e[i]){const s={fromDate:"from_date",toDate:"to_date",workStatus:"work_status",establishmentType:"establishment_type",workLocation:"work_location",fieldOfWork:"field_of_work",courseId:"course_id",batchYear:"batch_year",fromYear:"from_year",toYear:"to_year",subType:"sub_type",chartType:"chart_type",search:"search",page:"page"}[i]||i;t.searchParams.set(s,e[i])}}),window.location.href=t.toString()},this.changePage=n=>{this.reportFilters[this.currentReportType].page=n,this.generateReport(this.currentReportType)}},openEvaluationModal(){this.evalModalOpen=!0},async launchAnalytics(){if(this.selectedEvaluationId){this.loading=!0,this.previewOpen=!0,this.evalModalOpen=!1,this.currentReportTitle="Evaluation Analytics",this.currentReportType="evaluation_results";try{const t=await(await fetch(`${this.evalUrl}/${this.selectedEvaluationId}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).text(),e=document.getElementById("injected-report-body");e&&(e.innerHTML=t,e.closest(".overflow-y-auto").scrollTop=0)}catch(n){console.error("Analytics load failed:",n)}finally{this.loading=!1}}},resetFilters(n=null){const t=n||this.currentReportType,e={subType:this.reportFilters[t].subType==="all"?"all":this.reportFilters[t].subType||"all",chartType:this.reportFilters[t].chartType||"bar"};this.reportFilters[t]={fromDate:"",toDate:"",fromYear:"",toYear:"",workStatus:"",establishmentType:"",workLocation:"",fieldOfWork:"",courseId:"",batchYear:"",subType:e.subType,chartType:e.chartType},this.reportFilters[t].hasOwnProperty("page")&&(this.reportFilters[t].page=1),t==="master_list"&&(this.reportFilters[t].search=""),this.generateReport(t)},async generateReport(n){this.currentReportType=n,this.currentReportTitle=n.split("_").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "),this.loading=!0,this.previewOpen=!0;const t=this.reportFilters[n],e=new URL(this.generateUrl,window.location.origin);e.searchParams.set("type",n);const i={fromDate:"from_date",toDate:"to_date",workStatus:"work_status",establishmentType:"establishment_type",workLocation:"work_location",fieldOfWork:"field_of_work",courseId:"course_id",batchYear:"batch_year",fromYear:"from_year",toYear:"to_year",subType:"sub_type",chartType:"chart_type",search:"search",page:"page"};t&&Object.keys(t).forEach(r=>{t[r]&&e.searchParams.set(i[r]||r,t[r])});try{const s=await(await fetch(e,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).text(),o=document.getElementById("injected-report-body");o&&(o.innerHTML=s,o.closest(".overflow-y-auto").scrollTop=0),(n==="statistical_summary"||n==="annual_distribution")&&setTimeout(()=>this.initCharts(),100)}catch(r){console.error("Report failed:",r)}finally{this.loading=!1}},createChart(n,t,e,i={}){const r=document.getElementById(n);if(r){if(!r.dataset.labels)return;const s={labels:JSON.parse(r.dataset.labels),datasets:[{data:JSON.parse(r.dataset.values||r.dataset.data||"[]"),backgroundColor:i.colors||"#6366f1",borderWidth:0,borderRadius:i.borderRadius||0}]};["pie","doughnut","polarArea"].includes(t)&&i.colors&&(s.datasets[0].backgroundColor=i.colors),i.cutout&&(e.cutout=i.cutout),i.indexAxis&&(e.indexAxis=i.indexAxis),this.activeCharts[n]=new Xn(r,{type:t,data:s,options:e})}},initCharts(){Object.values(this.activeCharts).forEach(a=>a.destroy()),this.activeCharts={},Xn.defaults.font.family="Figtree";const n={responsive:!0,maintainAspectRatio:!1,animation:{duration:400},plugins:{legend:{display:!1}}},t=document.getElementById("chartByCourse");t&&new Xn(t,{type:"bar",data:{labels:JSON.parse(t.dataset.labels),datasets:[{label:"Employed",data:JSON.parse(t.dataset.employed),backgroundColor:"#10b981"},{label:"Unemployed",data:JSON.parse(t.dataset.unemployed),backgroundColor:"#94a3b8"}]},options:n}),this.createChart("chartByEmployment","pie",n,{colors:["#2563eb","#10b981","#f59e0b","#ef4444","#8b5cf6"]}),this.createChart("chartByGender","polarArea",n,{colors:["rgba(99, 102, 241, 0.7)","rgba(236, 72, 153, 0.7)","rgba(100, 116, 139, 0.7)"]});const e=document.getElementById("chartEstablishmentGrouped");e&&new Xn(e,{type:"bar",data:{labels:JSON.parse(e.dataset.labels),datasets:[{label:"Public",data:JSON.parse(e.dataset.public),backgroundColor:"#6366f1"},{label:"Private",data:JSON.parse(e.dataset.private),backgroundColor:"#a855f7"}]},options:n});const i=document.getElementById("chartStabilityStacked");i&&new Xn(i,{type:"bar",data:{labels:JSON.parse(i.dataset.labels),datasets:[{label:"Permanent",data:JSON.parse(i.dataset.permanent),backgroundColor:"#10b981"},{label:"Contractual",data:JSON.parse(i.dataset.contractual),backgroundColor:"#f59e0b"},{label:"Job Order",data:JSON.parse(i.dataset.jo),backgroundColor:"#ef4444"}]},options:{...n,scales:{x:{stacked:!0},y:{stacked:!0}}}});const r=document.getElementById("chartCombinationSummary");r&&new Xn(r,{type:"bar",data:{labels:JSON.parse(r.dataset.labels),datasets:[{type:"bar",label:"Total Alumni",data:JSON.parse(r.dataset.total),backgroundColor:"rgba(99, 102, 241, 0.2)",borderColor:"#6366f1",borderWidth:1},{type:"line",label:"Employed",data:JSON.parse(r.dataset.employed),borderColor:"#10b981",borderWidth:3,tension:.4,fill:!1}]},options:n});const s=document.getElementById("chartLocationGrouped");s&&new Xn(s,{type:"bar",data:{labels:JSON.parse(s.dataset.labels),datasets:[{label:"Local",data:JSON.parse(s.dataset.local),backgroundColor:"#3b82f6"},{label:"Overseas",data:JSON.parse(s.dataset.overseas),backgroundColor:"#f97316"}]},options:n}),this.createChart("chartByWorkStatus","bar",n,{borderRadius:12,colors:["#8b5cf6"]}),this.createChart("chartByEstablishment","pie",n,{colors:["#6366f1","#a855f7"]}),this.createChart("chartByWorkLocation","doughnut",n,{cutout:"70%",colors:["#3b82f6","#f97316"]}),this.createChart("chartTopFieldsMatrix","bar",n,{indexAxis:"y",borderRadius:20,colors:["#6366f1"]}),this.createChart("chartProgramFocus","bar",n,{indexAxis:"y",borderRadius:20,colors:["#6366f1"]}),this.createChart("chartLaborFocus","bar",n,{borderRadius:20,colors:["#2563eb","#10b981","#f59e0b","#ef4444"]}),this.createChart("chartGenderFocus","doughnut",n,{cutout:"70%",colors:["#6366f1","#ec4899","#64748b"]}),this.createChart("chartCivilFocus","bar",n,{borderRadius:12,colors:["#8b5cf6"]}),this.createChart("chartTopFieldsFocus","bar",n,{indexAxis:"y",borderRadius:20,colors:["#6366f1"]}),this.createChart("chartTracerLikert","bar",n,{colors:["#10b981","#34d399","#94a3b8","#f87171","#ef4444"]}),this.createChart("chartTracerMultiple","bar",n,{indexAxis:"y",colors:["#6366f1"]});const o=document.getElementById("distributionMainChart");if(o){const a=o.dataset.type||"bar",l=o.dataset.subtype,u=JSON.parse(o.dataset.labels),h=JSON.parse(o.dataset.raw);let d=[];if(l.includes("employment")||l.includes("location")){const g=[...new Set(h.map(y=>y.employment_status||y.work_location))],m=["#6366f1","#10b981","#f59e0b","#ef4444","#8b5cf6"];d=g.map((y,x)=>{const w=u.map(v=>{const E=h.find(O=>(O.batch_year==v||O.label==v)&&(O.employment_status==y||O.work_location==y));return E?E.count:0});return{label:y,data:w,backgroundColor:m[x%m.length],borderColor:m[x%m.length],borderWidth:1,borderRadius:a==="bar"?8:0}})}else d=[{label:"Total Alumni",data:JSON.parse(o.dataset.values),backgroundColor:["pie","donut","doughnut"].includes(a)?["#6366f1","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"]:"#8b5cf6",borderColor:"#8b5cf6",borderWidth:1,borderRadius:a==="bar"?12:0}];this.activeCharts[o.id]=new Xn(o,{type:a==="stacked"?"bar":a==="donut"?"doughnut":a,data:{labels:u,datasets:d},options:{...n,plugins:{legend:{display:!0,position:"bottom"}},scales:a==="bar"||a==="line"?{x:{stacked:a==="stacked"},y:{stacked:a==="stacked"}}:{}}})}}}),mU=()=>({modalOpen:!1,questions:[{id:Date.now(),text:"",type:"text",required:!0,options:[""]}],analyticsModalOpen:!1,analyticsLoading:!1,analyticsContent:"",currentEvaluationId:null,currentEvaluationTitle:"",openModal(){this.modalOpen=!0},closeModal(){this.modalOpen=!1},openAnalyticsModal(n,t="Evaluation Results"){this.analyticsModalOpen=!0,this.currentEvaluationId=n,this.currentEvaluationTitle=t,this.fetchAnalytics(n)},closeAnalyticsModal(){this.analyticsModalOpen=!1,this.analyticsContent="",this.currentEvaluationId=null,this.currentEvaluationTitle=""},fetchAnalytics(n,t={}){this.analyticsLoading=!0;let e=`/admin/evaluations/${n}/analytics`;const i=new URLSearchParams(t);i.toString()&&(e+=`?${i.toString()}`),fetch(e,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}).then(r=>r.text()).then(r=>{this.analyticsContent=r,this.analyticsLoading=!1}).catch(r=>{console.error("Error loading analytics:",r),this.analyticsContent='<div class="text-center p-8 text-red-500">Failed to load analytics. Please try again.</div>',this.analyticsLoading=!1})},handleFilters(n){this.currentEvaluationId&&this.fetchAnalytics(this.currentEvaluationId,n)},addQuestion(){this.questions.push({id:Date.now()+Math.random(),text:"",type:"text",required:!0,options:[""]})}}),yU=()=>({forms:[],loading:!0,init(){this.fetchForms()},async fetchForms(){try{const t=await(await fetch(window.location.href,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).json();this.forms=t}catch(n){console.error("Failed to fetch evaluations:",n)}finally{this.loading=!1}}}),bU=()=>({stats:{total:0,deptStats:[]},responses:{data:[],links:[]},departments:[],search:"",department:"",year:"",loading:!0,init(){this.fetchData(),this.$watch("search",()=>this.debouncedFetch()),this.$watch("department",()=>this.fetchData()),this.$watch("year",()=>this.fetchData())},debouncedFetch:_.debounce(function(){this.fetchData()},300),async fetchData(n=null){this.loading=!0;let e=n||window.location.href;if(!n){const i=new URLSearchParams;this.search&&i.append("search",this.search),this.department&&i.append("department",this.department),this.year&&i.append("year",this.year),e=`${window.location.pathname}?${i.toString()}`,window.history.replaceState(null,"",e)}try{const r=await(await fetch(e,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).json();this.stats.total=r.totalResponses,this.stats.deptStats=r.deptStats,this.responses=r.responses,this.departments=r.departments}catch(i){console.error("Error fetching tracer data:",i)}finally{this.loading=!1}},confirmDelete(n){if(confirm("Are you sure you want to delete this response?")){const t=document.getElementById(`delete-form-${n}`);t&&t.submit()}}}),xU=n=>({answers:{},logicMap:n.logicMap||{},init(){},isVisible(t){if(this.logicMap[t]){const e=this.logicMap[t],i=this.answers[e.trigger_id];return Array.isArray(i)?i.includes(e.value):i===e.value}return!0}}),wU=()=>({category:"all",loading:!1,init(){},setCategory(n){this.category=n,this.fetchFeed()},async fetchFeed(){this.loading=!0;const n=new URL(window.location.href);this.category!=="all"?n.searchParams.set("type",this.category):n.searchParams.delete("type");try{const e=await(await fetch(n.toString(),{headers:{"X-Requested-With":"XMLHttpRequest"}})).text();document.getElementById("feed-container").innerHTML=e,window.history.pushState({},"",n.toString())}catch(t){console.error(t)}finally{this.loading=!1}}}),_U=()=>({search:new URLSearchParams(window.location.search).get("search")||"",loading:!1,init(){this.$watch("search",()=>this.fetchData()),this.interceptPagination()},async fetchData(n=null){this.loading=!0,n||(n=new URL(window.location.origin+window.location.pathname),this.search&&n.searchParams.set("search",this.search));try{const e=await(await fetch(n,{headers:{"X-Requested-With":"XMLHttpRequest"}})).text();document.getElementById("list-wrapper").innerHTML=e,window.history.pushState({},"",n),this.interceptPagination()}catch(t){console.error("Failed to fetch albums:",t)}finally{this.loading=!1}},interceptPagination(){const n=document.getElementById("list-wrapper");n&&n.querySelectorAll(".pagination-container a").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),this.fetchData(e.currentTarget.href)})})}}),SU=(n=[])=>({modalOpen:!1,modalTitle:"",saving:!1,search:"",filterType:"all",groups:n,init(){console.log("Group Manager Polished initialized")},get filteredGroups(){return this.groups.filter(t=>{const e=t.name.toLowerCase().includes(this.search.toLowerCase())||t.type.toLowerCase().includes(this.search.toLowerCase()),i=this.filterType==="all"||t.type===this.filterType;return e&&i})},async openModal(t,e){this.modalTitle=e,this.modalOpen=!0,this.$nextTick(async()=>{const i=document.getElementById("modal-content");if(i){i.innerHTML=`
                <div class="flex flex-col items-center justify-center py-20 text-center">
                    <div class="relative w-16 h-16 mb-4">
                        <div class="absolute inset-0 border-4 border-brand-100 rounded-full"></div>
                        <div class="absolute inset-0 border-4 border-brand-600 rounded-full border-t-transparent animate-spin"></div>
                    </div>
                    <p class="text-sm font-black text-gray-400 uppercase tracking-widest">Loading Configuration...</p>
                </div>
            `;try{const r=await fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest"}});i.innerHTML=await r.text();const s=document.getElementById("chat-group-form");s&&(s.onsubmit=async o=>{o.preventDefault(),await this.saveForm(o.target)})}catch(r){console.error("Modal load error:",r),this.modalOpen=!1}}})},closeModal(){this.modalOpen=!1},async saveForm(t){this.saving=!0;const e=new FormData(t);try{(await fetch(t.action,{method:"POST",body:e,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}})).ok&&window.location.reload()}catch(i){console.error("Save failed:",i)}finally{this.saving=!1}}}),vU=n=>({messages:[],newMessage:"",loading:!0,sending:!1,groupId:n.groupId,pollingInterval:null,storeUrl:n.storeUrl,deleteBaseUrl:n.deleteBaseUrl,async init(){await this.fetchMessages(),this.scrollToBottom(),this.pollingInterval=setInterval(()=>this.fetchMessages(!0),3e3)},async fetchMessages(t=!1){try{const e=await fetch(`/chat/groups/${this.groupId}/messages`,{headers:{Accept:"application/json"}});if(!e.ok)throw new Error("Network response was not ok");const i=await e.json();if(JSON.stringify(this.messages)!==JSON.stringify(i)){const r=this.isAtBottom();this.messages=i,(r||!t)&&this.$nextTick(()=>this.scrollToBottom())}}catch(e){console.error("Error fetching messages:",e)}finally{t||(this.loading=!1)}},async sendMessage(){if(!(!this.newMessage.trim()||this.sending)){this.sending=!0;try{(await fetch(this.storeUrl,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json"},body:JSON.stringify({content:this.newMessage})})).ok&&(this.newMessage="",await this.fetchMessages(!0),this.scrollToBottom())}catch(t){console.error("Error sending message:",t)}finally{this.sending=!1}}},async deleteMessage(t){if(confirm("Are you sure you want to delete this message?"))try{(await fetch(`${this.deleteBaseUrl}/${t}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json"}})).ok&&await this.fetchMessages(!0)}catch(e){console.error("Error deleting message:",e)}},scrollToBottom(){const t=document.getElementById("admin-message-container");t&&(t.scrollTop=t.scrollHeight)},isAtBottom(){const t=document.getElementById("admin-message-container");return t?t.scrollHeight-t.scrollTop<=t.clientHeight+150:!0},formatTime(t){return new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},getGroupColor(t){return{batch:"bg-brand-600",course:"bg-indigo-600",general:"bg-blue-600"}[t]||"bg-gray-500"},destroy(){this.pollingInterval&&clearInterval(this.pollingInterval)}}),kU=n=>({sidebarOpen:!1,groups:[],messages:[],activeGroup:null,loadingGroups:!1,loadingMessages:!1,newMessage:"",sending:!1,pollingInterval:null,groupsUrl:n.groupsUrl,async init(){await this.fetchGroups()},async fetchGroups(){this.loadingGroups=!0;try{const t=await fetch(this.groupsUrl);this.groups=await t.json()}catch(t){console.error("Error fetching groups:",t)}finally{this.loadingGroups=!1}},async selectGroup(t){this.activeGroup?.id!==t.id&&(this.activeGroup=t,this.messages=[],this.loadingMessages=!0,this.pollingInterval&&clearInterval(this.pollingInterval),await this.fetchMessages(),this.loadingMessages=!1,this.scrollToBottom(),this.pollingInterval=setInterval(()=>this.fetchMessages(!0),3e3))},async fetchMessages(t=!1){if(this.activeGroup)try{const i=await(await fetch(`/chat/groups/${this.activeGroup.id}/messages`)).json();if(JSON.stringify(this.messages)!==JSON.stringify(i)){const r=this.isAtBottom();this.messages=i,(r||!t)&&this.$nextTick(()=>this.scrollToBottom())}}catch(e){console.error("Error fetching messages:",e)}},async sendMessage(){if(!this.newMessage.trim()||!this.activeGroup||this.sending)return;const t=this.newMessage;this.newMessage="",this.sending=!0;try{await fetch(`/chat/groups/${this.activeGroup.id}/messages`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json"},body:JSON.stringify({content:t})}),await this.fetchMessages(!0),this.scrollToBottom()}catch(e){console.error("Error sending message:",e)}finally{this.sending=!1}},scrollToBottom(){const t=document.getElementById("message-container");t&&(t.scrollTop=t.scrollHeight)},isAtBottom(){const t=document.getElementById("message-container");return t?t.scrollHeight-t.scrollTop<=t.clientHeight+150:!0},formatTime(t){return t?new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""},getGroupColor(t){return{batch:"bg-brand-600",course:"bg-indigo-600",general:"bg-blue-600"}[t]||"bg-gray-500"},destroy(){this.pollingInterval&&clearInterval(this.pollingInterval)}}),CU=n=>({tab:n.tab||"pending",search:n.search||"",sort:n.sort||"created_at",direction:n.direction||"desc",loading:!1,modalOpen:!1,modalTitle:"",saving:!1,init(){this.$watch("search",()=>this.fetchData()),this.$watch("tab",()=>this.fetchData()),this.interceptPagination()},setTab(t){this.tab=t},async fetchData(t=null){this.loading=!0,t||(t=new URL(window.location.origin+window.location.pathname),t.searchParams.set("tab",this.tab),this.search&&t.searchParams.set("search",this.search),t.searchParams.set("sort",this.sort),t.searchParams.set("direction",this.direction));try{const i=await(await fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest"}})).text(),r=document.getElementById("table-wrapper");r&&(r.innerHTML=i),window.history.pushState({},"",t),this.interceptPagination()}catch(e){console.error("Fetch failed:",e)}finally{this.loading=!1}},interceptPagination(){this.$nextTick(()=>{document.querySelectorAll(".pagination-container a, .pagination a").forEach(t=>{t.onclick=e=>{e.preventDefault(),this.fetchData(e.currentTarget.href)}})})},async openModal(t,e){this.modalTitle=e,this.modalOpen=!0;const i=document.getElementById("modal-content");i&&(i.innerHTML='<div class="flex justify-center py-20"><svg class="animate-spin h-10 w-10 text-brand-600" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>');try{const s=await(await fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest"}})).text();i&&(i.innerHTML=s)}catch{this.modalOpen=!1}},closeModal(){this.modalOpen=!1},async saveReview(t){this.saving=!0;const e=new FormData(t);try{const i=await fetch(t.action,{method:"POST",body:e,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}}),r=await i.json();i.ok&&(this.closeModal(),this.fetchData(),window.showToast(r.success))}catch(i){console.error("Save failed:",i)}finally{this.saving=!1}}}),MU=n=>({...window.dataLoader(n.baseUrl),search:n.search||"",sort:n.sort||"name",direction:n.direction||"asc",modalOpen:!1,modalTitle:"",saving:!1,init(){this.load(),this.initManager()},initManager(){this.$watch("search",t=>{const e=new URL(this.key,window.location.origin);t&&e.searchParams.set("search",t),this.key=e.toString(),this.load()})},sortBy(t){this.sort===t?this.direction=this.direction==="asc"?"desc":"asc":(this.sort=t,this.direction="asc");const e=new URL(this.key,window.location.origin);e.searchParams.set("sort",this.sort),e.searchParams.set("direction",this.direction),this.key=e.toString(),this.load()},fetchData(t){this.key=t,this.load(),window.history.pushState({},"",t)},async openModal(t,e,i=!1){this.modalTitle=e,this.modalOpen=!0;const r=document.getElementById("modal-content");r&&(r.innerHTML="<div class='flex justify-center py-20'><svg class='animate-spin h-10 w-10 text-brand-600' fill='none' viewBox='0 0 24 24'><circle class='opacity-25' cx='12' cy='12' r='10' stroke='currentColor' stroke-width='4'></circle><path class='opacity-75' fill='currentColor' d='M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z'></path></svg></div>");try{const o=await(await fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest"}})).text();if(r){r.innerHTML=o;const a=r.querySelector("form");a&&a.addEventListener("submit",l=>{l.preventDefault(),this.submitAlumniForm(l)})}}catch(s){console.error(s),this.modalOpen=!1}},closeModal(){this.modalOpen=!1},async submitAlumniForm(t){const e=t.target,i=new FormData(e);this.saving=!0;try{const s=await(await fetch(e.action,{method:e.method||"POST",body:i,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector("meta[name='csrf-token']").getAttribute("content")}})).json();s.success?(window.showToast(s.success),this.closeModal(),this.refresh()):s.errors&&window.showToast(Object.values(s.errors).flat()[0],"error")}catch(r){console.error("Error:",r),window.showToast("An error occurred.","error")}finally{this.saving=!1}}}),EU=n=>({...window.dataLoader(n.baseUrl),search:n.search||"",modalOpen:!1,modalTitle:"",editMode:!1,saving:!1,actionUrl:n.storeUrl,formData:{id:"",name:"",email:"",role:"admin",department_name:"",password:"",password_confirmation:""},init(){this.load(),this.initManager()},initManager(){this.$watch("search",t=>{const e=new URL(this.key,window.location.origin);t&&e.searchParams.set("search",t),this.key=e.toString(),this.load()})},fetchData(t){this.key=t,this.load(),window.history.pushState({},"",t)},openModal(t,e,i=null){this.modalTitle=e,this.modalOpen=!0,this.resetForm(),i?(this.editMode=!0,this.actionUrl=t,this.fetchUser(i)):(this.editMode=!1,this.actionUrl=n.storeUrl)},async fetchUser(t){try{const i=(await axios.get(`${n.baseUrl}/${t}/edit`)).data;this.formData.id=i.id,this.formData.name=i.name,this.formData.email=i.email,this.formData.role=i.role,this.formData.department_name=i.department_name??""}catch(e){console.error("Failed to fetch user:",e),window.showToast("Failed to load user details","error")}},resetForm(){this.formData={id:"",name:"",email:"",role:"admin",department_name:"",password:"",password_confirmation:""},document.querySelectorAll(".error-message").forEach(t=>t.textContent="")},closeModal(){this.modalOpen=!1},async saveForm(){document.querySelectorAll(".error-message").forEach(t=>t.textContent=""),this.saving=!0;try{const t=this.editMode?"put":"post",e=await axios[t](this.actionUrl,this.formData);e.data.success&&(this.closeModal(),this.refresh(),window.showToast(e.data.success))}catch(t){if(t.response&&t.response.status===422){const e=t.response.data.errors;Object.keys(e).forEach(i=>{const r=document.querySelector(`.error-message[data-field='${i}']`);r&&(r.textContent=e[i][0])})}else console.error("Save failed:",t),window.showToast("An unexpected error occurred.","error")}finally{this.saving=!1}}}),TU=n=>({analytics:n.analytics,trendLabels:n.trendLabels,trendValues:n.trendValues,courseDistLabels:n.courseDistLabels||[],courseDistValues:n.courseDistValues||[],batchDistLabels:n.batchDistLabels||[],batchDistValues:n.batchDistValues||[],activeTab:"overview",init(){this.$watch("activeTab",t=>{this.$nextTick(()=>{t==="insights"?this.initInsightsCharts():this.initCharts()})}),this.initCharts()},applyFilters(t){const e=new FormData(t),i=new URLSearchParams(e);this.$dispatch("filters-applied",Object.fromEntries(e)),this.$el.closest('[x-data="evaluationManager"]')||(window.router&&typeof window.router.navigate=="function"?window.router.navigate(`${window.location.pathname}?${i.toString()}`):window.location.search=i.toString())},hasStats(t){return t.stats&&Object.keys(t.stats).length>0&&Object.values(t.stats).some(e=>e>0)},initInsightsCharts(){this.$nextTick(()=>{this.initTrendChart(),this.initCourseDistChart(),this.initBatchDistChart()})},initTrendChart(){if(this.trendValues.length===0||!this.$refs.trendChart)return;const t=this.$refs.trendChart.getContext("2d");window.Chart.getChart(t)&&window.Chart.getChart(t).destroy(),new window.Chart(t,{type:"line",data:{labels:this.trendLabels,datasets:[{label:"New Responses",data:this.trendValues,borderColor:"#4F46E5",backgroundColor:e=>{const r=e.chart.ctx.createLinearGradient(0,0,0,300);return r.addColorStop(0,"rgba(79, 70, 229, 0.2)"),r.addColorStop(1,"rgba(79, 70, 229, 0)"),r},borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:"#FFFFFF",pointBorderColor:"#4F46E5",pointRadius:4,pointHoverRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{borderDash:[2,4],color:"#F3F4F6"}},x:{grid:{display:!1}}}}})},initCourseDistChart(){if(!this.$refs.courseDistChart)return;const t=this.$refs.courseDistChart.getContext("2d");window.Chart.getChart(t)&&window.Chart.getChart(t).destroy(),new window.Chart(t,{type:"bar",data:{labels:this.courseDistLabels,datasets:[{label:"Responses",data:this.courseDistValues,backgroundColor:"#0ea5e9",borderRadius:6}]},options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1}}}}})},initBatchDistChart(){if(!this.$refs.batchDistChart)return;const t=this.$refs.batchDistChart.getContext("2d");window.Chart.getChart(t)&&window.Chart.getChart(t).destroy(),new window.Chart(t,{type:"doughnut",data:{labels:this.batchDistLabels,datasets:[{label:"Responses",data:this.batchDistValues,backgroundColor:["#6366f1","#ec4899","#8b5cf6","#10b981","#f59e0b"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}})},initCharts(){window.Chart.defaults.font.family="'Inter', sans-serif",window.Chart.defaults.color="#6B7280",window.Chart.defaults.scale.grid.color="#F3F4F6",window.Chart.defaults.scale.grid.borderColor="transparent",this.$nextTick(()=>{this.analytics.forEach(t=>{if(["radio","checkbox","scale"].includes(t.type)&&this.hasStats(t)){const e=document.getElementById("chart-"+t.id);if(!e||window.Chart.getChart(e))return;const i=Object.keys(t.stats),r=Object.values(t.stats);let s="bar",o="x",a=!1;const l=(g,m,y)=>{const x=g.createLinearGradient(0,0,0,300);return x.addColorStop(0,m),x.addColorStop(1,y),x},u=[["#4F46E5","#818cf8"],["#10B981","#34d399"],["#F59E0B","#fbbf24"],["#EF4444","#f87171"],["#8B5CF6","#a78bfa"],["#EC4899","#f472b6"],["#06B6D4","#22d3ee"]];let h=i.map((g,m)=>{const y=u[m%u.length];return e.getContext("2d")?l(e.getContext("2d"),y[0],y[1]):y[0]}),d="transparent";if(t.type==="radio")s="doughnut",a=!0;else if(t.type==="checkbox")s="bar",o="y";else if(t.type==="scale"){s="bar",o="x";const g={1:"rgba(239, 68, 68, 0.7)",2:"rgba(249, 115, 22, 0.7)",3:"rgba(234, 179, 8, 0.7)",4:"rgba(59, 130, 246, 0.7)",5:"rgba(16, 185, 129, 0.7)"};h=i.map(m=>g[m]||"#4F46E5"),d=i.map(m=>g[m]?g[m].replace("0.7","1"):"#4F46E5")}new window.Chart(e,{type:s,data:{labels:i,datasets:[{label:"Responses",data:r,backgroundColor:t.type==="scale"||s==="doughnut"?h:"#4F46E5",borderColor:t.type==="scale"?d:"transparent",borderRadius:4,borderWidth:t.type==="scale"?1:0,hoverOffset:6}]},options:{indexAxis:o,responsive:!0,maintainAspectRatio:!1,animation:{duration:800,easing:"easeOutQuart"},plugins:{legend:{display:a,position:"right",labels:{usePointStyle:!0,boxWidth:6,font:{size:10}}},tooltip:{backgroundColor:"rgba(0,0,0,0.8)",padding:10,callbacks:{label:function(g){const m=g.raw,y=g.chart._metasets[g.datasetIndex].total,x=g.dataset.data.reduce((v,E)=>v+E,0),w=Math.round(m/(s==="doughnut"?y:x)*100);return` ${m} votes (${w}%)`}}}},scales:s!=="doughnut"?{y:{beginAtZero:!0,grid:{borderDash:[2,2],drawBorder:!1},ticks:{stepSize:1,font:{size:10}}},x:{grid:{display:!1},ticks:{font:{size:10}}}}:{x:{display:!1},y:{display:!1}},layout:{padding:10}}})}})})}}),OU=()=>({search:"",loading:!1,saving:!1,modalOpen:!1,modalTitle:"",deleteModalOpen:!1,itemToDelete:"",deleteUrl:"",init(){this.$watch("search",()=>this.fetchData()),this.interceptPagination();const n=async t=>{t.target.id==="course-form"&&(t.preventDefault(),await this.saveForm(t.target))};document.addEventListener("submit",n)},async fetchData(n=null){this.loading=!0,n||(n=new URL(window.location.origin+window.location.pathname),this.search&&n.searchParams.set("search",this.search));try{const e=await(await fetch(n,{headers:{"X-Requested-With":"XMLHttpRequest"}})).text(),i=document.getElementById("table-wrapper");i&&(i.innerHTML=e,window.history.pushState({},"",n),this.interceptPagination())}catch(t){console.error("Fetch failed:",t)}finally{this.loading=!1}},interceptPagination(){document.querySelectorAll(".pagination-container a").forEach(n=>{n.onclick=t=>{t.preventDefault(),this.fetchData(t.currentTarget.href)}})},async openModal(n,t){this.modalTitle=t,this.modalOpen=!0;const e=document.getElementById("modal-content");if(e){e.innerHTML='<div class="flex justify-center py-20"><svg class="animate-spin h-10 w-10 text-brand-600" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>';try{const r=await(await fetch(n,{headers:{"X-Requested-With":"XMLHttpRequest"}})).text();e.innerHTML=r}catch{this.modalOpen=!1}}},closeModal(){this.modalOpen=!1},async saveForm(n){this.saving=!0;const t=new FormData(n);document.querySelectorAll(".error-message").forEach(e=>e.textContent="");try{const e=await fetch(n.action,{method:"POST",body:t,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}}),i=await e.json();if(e.ok)this.closeModal(),this.fetchData(),this.showFlash(i.success);else if(e.status===422)i.errors?(Object.keys(i.errors).forEach(r=>{const s=document.querySelector(`.error-message[data-field="${r}"]`);s&&(s.textContent=i.errors[r][0])}),this.showFlash("Please correct the highlighted errors.","error")):i.error&&this.showFlash(i.error,"error");else{const r=await e.json().catch(()=>({}));this.showFlash(r.message||"Operation failed. Please check inputs.","error")}}catch(e){console.error("Save failed:",e)}finally{this.saving=!1}},showFlash(n,t="success"){const e=document.getElementById("flash-message");if(e){const i=t==="success"?"bg-brand-600/90":"bg-red-600/90";e.innerHTML=`<div class="${i} backdrop-blur-md text-white px-6 py-4 rounded-2xl mb-6 shadow-2xl flex items-center gap-3 animate-fade-in-down border border-white/20"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg><span class="font-bold">${n}</span></div>`,setTimeout(()=>{e&&(e.innerHTML="")},4e3)}}}),AU=(n={})=>({isOpen:!1,isEdit:!1,updateUrl:"",employmentStatus:n.currentStatus||"",form:{company_name:"",position:"",industry:"",location:"",start_date:"",end_date:"",is_current:!1,description:""},init(){},openModal(){this.isOpen=!0,this.isEdit=!1,this.resetForm()},editHistory(t){this.isOpen=!0,this.isEdit=!0,this.updateUrl=`/employment/${t.id}`,this.form={company_name:t.company_name,position:t.position,industry:t.industry,location:t.location,start_date:t.start_date?t.start_date.split("T")[0]:"",end_date:t.end_date?t.end_date.split("T")[0]:"",is_current:!!t.is_current,description:t.description}},closeModal(){this.isOpen=!1,this.resetForm()},resetForm(){this.form={company_name:"",position:"",industry:"",location:"",start_date:"",end_date:"",is_current:!1,description:""}},async deleteHistory(t){if(confirm("Are you sure you want to remove this record?"))try{const e=await axios.delete(t);(e.data.success||e.data.status==="success")&&(window.showToast&&window.showToast(e.data.success||"Record deleted successfully"),window.location.reload())}catch(e){console.error("Delete error:",e),window.showToast&&window.showToast("Failed to delete history record","error")}}});Pt.plugin(rN);Pt.plugin(cN);Pt.data("tiptapEditor",Tv);Pt.data("moderationDashboard",F$);Pt.data("newsComments",B$);Pt.data("dataLoader",Ov);Pt.data("alumniFeed",H$);Pt.data("alumniNewsFeed",wU);Pt.data("alumniGallery",_U);Pt.data("reportManager",gU);Pt.data("evaluationManager",mU);Pt.data("alumniEvaluationList",yU);Pt.data("tracerDashboard",bU);Pt.data("tracerForm",n=>xU(n));Pt.data("newsManager",q$);Pt.data("photoManager",Av);Pt.data("groupManager",n=>SU(n));Pt.data("adminChatManager",n=>vU(n));Pt.data("alumniChatManager",n=>kU(n));Pt.data("preRegistrationManager",n=>CU(n));Pt.data("alumniManager",n=>MU(n));Pt.data("userManager",n=>EU(n));Pt.data("analyticsDashboard",n=>TU(n));Pt.data("courseManager",()=>OU());Pt.data("employmentManager",n=>AU(n));window.dataLoader=Ov;window.tiptapEditor=Tv;window.photoManager=Av;window.Alpine=Pt;window.showToast=(n,t="success")=>{window.dispatchEvent(new CustomEvent("toast",{detail:{message:n,type:t}}))};let Mc=0;const RU=()=>{Mc++,window.dispatchEvent(new CustomEvent("loading-start"))},Sd=()=>{Mc=Math.max(0,Mc-1),Mc===0&&window.dispatchEvent(new CustomEvent("loading-end"))};window.axios&&(window.axios.interceptors.request.use(n=>(RU(),n),n=>(Sd(),Promise.reject(n))),window.axios.interceptors.response.use(n=>(Sd(),n),n=>(Sd(),Promise.reject(n))));z$();Pt.start();
